var strudel=function(exports){"use strict";var _documentCurrentScript=typeof document<"u"?document.currentScript:null;/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var MAX_CYCLE_LEN=2e3,P={s:1,n:0,d:1};function assign(o,e){if(isNaN(o=parseInt(o,10)))throw InvalidParameter();return o*e}function newFraction(o,e){if(e===0)throw DivisionByZero();var a=Object.create(Fraction.prototype);a.s=o<0?-1:1,o=o<0?-o:o;var l=gcd$1(o,e);return a.n=o/l,a.d=e/l,a}function factorize(o){for(var e={},a=o,l=2,u=4;u<=a;){for(;a%l===0;)a/=l,e[l]=(e[l]||0)+1;u+=1+2*l++}return a!==o?a>1&&(e[a]=(e[a]||0)+1):e[o]=(e[o]||0)+1,e}var parse$4=function(o,e){var a=0,l=1,u=1,f=0,d=0,p=0,g=1,b=1,O=0,A=1,k=1,M=1,B=1e7,N;if(o!=null)if(e!==void 0){if(a=o,l=e,u=a*l,a%1!==0||l%1!==0)throw NonIntegerParameter()}else switch(typeof o){case"object":{if("d"in o&&"n"in o)a=o.n,l=o.d,"s"in o&&(a*=o.s);else if(0 in o)a=o[0],1 in o&&(l=o[1]);else throw InvalidParameter();u=a*l;break}case"number":{if(o<0&&(u=o,o=-o),o%1===0)a=o;else if(o>0){for(o>=1&&(b=Math.pow(10,Math.floor(1+Math.log(o)/Math.LN10)),o/=b);A<=B&&M<=B;)if(N=(O+k)/(A+M),o===N){A+M<=B?(a=O+k,l=A+M):M>A?(a=k,l=M):(a=O,l=A);break}else o>N?(O+=k,A+=M):(k+=O,M+=A),A>B?(a=k,l=M):(a=O,l=A);a*=b}else(isNaN(o)||isNaN(e))&&(l=a=NaN);break}case"string":{if(A=o.match(/\d+|./g),A===null)throw InvalidParameter();if(A[O]==="-"?(u=-1,O++):A[O]==="+"&&O++,A.length===O+1?d=assign(A[O++],u):A[O+1]==="."||A[O]==="."?(A[O]!=="."&&(f=assign(A[O++],u)),O++,(O+1===A.length||A[O+1]==="("&&A[O+3]===")"||A[O+1]==="'"&&A[O+3]==="'")&&(d=assign(A[O],u),g=Math.pow(10,A[O].length),O++),(A[O]==="("&&A[O+2]===")"||A[O]==="'"&&A[O+2]==="'")&&(p=assign(A[O+1],u),b=Math.pow(10,A[O+1].length)-1,O+=3)):A[O+1]==="/"||A[O+1]===":"?(d=assign(A[O],u),g=assign(A[O+2],1),O+=3):A[O+3]==="/"&&A[O+1]===" "&&(f=assign(A[O],u),d=assign(A[O+2],u),g=assign(A[O+4],1),O+=5),A.length<=O){l=g*b,u=a=p+l*f+b*d;break}}default:throw InvalidParameter()}if(l===0)throw DivisionByZero();P.s=u<0?-1:1,P.n=Math.abs(a),P.d=Math.abs(l)};function modpow(o,e,a){for(var l=1;e>0;o=o*o%a,e>>=1)e&1&&(l=l*o%a);return l}function cycleLen(o,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var a=10%e,l=1;a!==1;l++)if(a=a*10%e,l>MAX_CYCLE_LEN)return 0;return l}function cycleStart(o,e,a){for(var l=1,u=modpow(10,a,e),f=0;f<300;f++){if(l===u)return f;l=l*10%e,u=u*10%e}return 0}function gcd$1(o,e){if(!o)return e;if(!e)return o;for(;;){if(o%=e,!o)return e;if(e%=o,!e)return o}}function Fraction(o,e){if(parse$4(o,e),this instanceof Fraction)o=gcd$1(P.d,P.n),this.s=P.s,this.n=P.n/o,this.d=P.d/o;else return newFraction(P.s*P.n,P.d)}var DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction.prototype={s:1,n:0,d:1,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(o,e){return parse$4(o,e),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(o,e){return parse$4(o,e),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(o,e){return parse$4(o,e),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(o,e){return parse$4(o,e),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(o,e){if(isNaN(this.n)||isNaN(this.d))return new Fraction(NaN);if(o===void 0)return newFraction(this.s*this.n%this.d,1);if(parse$4(o,e),P.n===0&&this.d===0)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(o,e){return parse$4(o,e),newFraction(gcd$1(P.n,this.n)*gcd$1(P.d,this.d),P.d*this.d)},lcm:function(o,e){return parse$4(o,e),P.n===0&&this.n===0?newFraction(0,1):newFraction(P.n*this.n,gcd$1(P.n,this.n)*gcd$1(P.d,this.d))},ceil:function(o){return o=Math.pow(10,o||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):newFraction(Math.ceil(o*this.s*this.n/this.d),o)},floor:function(o){return o=Math.pow(10,o||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):newFraction(Math.floor(o*this.s*this.n/this.d),o)},round:function(o){return o=Math.pow(10,o||0),isNaN(this.n)||isNaN(this.d)?new Fraction(NaN):newFraction(Math.round(o*this.s*this.n/this.d),o)},roundTo:function(o,e){return parse$4(o,e),newFraction(this.s*Math.round(this.n*P.d/(this.d*P.n))*P.n,P.d)},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(o,e){if(parse$4(o,e),P.d===1)return P.s<0?newFraction(Math.pow(this.s*this.d,P.n),Math.pow(this.n,P.n)):newFraction(Math.pow(this.s*this.n,P.n),Math.pow(this.d,P.n));if(this.s<0)return null;var a=factorize(this.n),l=factorize(this.d),u=1,f=1;for(var d in a)if(d!=="1"){if(d==="0"){u=0;break}if(a[d]*=P.n,a[d]%P.d===0)a[d]/=P.d;else return null;u*=Math.pow(d,a[d])}for(var d in l)if(d!=="1"){if(l[d]*=P.n,l[d]%P.d===0)l[d]/=P.d;else return null;f*=Math.pow(d,l[d])}return P.s<0?newFraction(f,u):newFraction(u,f)},equals:function(o,e){return parse$4(o,e),this.s*this.n*P.d===P.s*P.n*this.d},compare:function(o,e){parse$4(o,e);var a=this.s*this.n*P.d-P.s*P.n*this.d;return(0<a)-(a<0)},simplify:function(o){if(isNaN(this.n)||isNaN(this.d))return this;o=o||.001;for(var e=this.abs(),a=e.toContinued(),l=1;l<a.length;l++){for(var u=newFraction(a[l-1],1),f=l-2;f>=0;f--)u=u.inverse().add(a[f]);if(Math.abs(u.sub(e).valueOf())<o)return u.mul(this.s)}return this},divisible:function(o,e){return parse$4(o,e),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(o){var e,a="",l=this.n,u=this.d;return this.s<0&&(a+="-"),u===1?a+=l:(o&&(e=Math.floor(l/u))>0&&(a+=e,a+=" ",l%=u),a+=l,a+="/",a+=u),a},toLatex:function(o){var e,a="",l=this.n,u=this.d;return this.s<0&&(a+="-"),u===1?a+=l:(o&&(e=Math.floor(l/u))>0&&(a+=e,l%=u),a+="\\frac{",a+=l,a+="}{",a+=u,a+="}"),a},toContinued:function(){var o,e=this.n,a=this.d,l=[];if(isNaN(e)||isNaN(a))return l;do l.push(Math.floor(e/a)),o=e%a,e=a,a=o;while(e!==1);return l},toString:function(o){var e=this.n,a=this.d;if(isNaN(e)||isNaN(a))return"NaN";o=o||15;var l=cycleLen(e,a),u=cycleStart(e,a,l),f=this.s<0?"-":"";if(f+=e/a|0,e%=a,e*=10,e&&(f+="."),l){for(var d=u;d--;)f+=e/a|0,e%=a,e*=10;f+="(";for(var d=l;d--;)f+=e/a|0,e%=a,e*=10;f+=")"}else for(var d=o;e&&d--;)f+=e/a|0,e%=a,e*=10;return f}};const logKey="strudel.log";let debounce=1e3,lastMessage,lastTime;function logger$2(o,e,a={}){let l=performance.now();lastMessage===o&&l-lastTime<debounce||(lastMessage=o,lastTime=l,console.log(`%c${o}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(logKey,{detail:{message:o,type:e,data:a}})))}logger$2.key=logKey;const isNoteWithOctave=o=>/^[a-gA-G][#bs]*[0-9]$/.test(o),isNote=o=>/^[a-gA-G][#bsf]*[0-9]?$/.test(o),tokenizeNote$2=o=>{if(typeof o!="string")return[];const[e,a="",l]=o.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/)?.slice(1)||[];return e?[e,a,l?Number(l):void 0]:[]},chromas$2={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$2={"#":1,b:-1,s:1,f:-1},noteToMidi$1=(o,e=3)=>{const[a,l,u=e]=tokenizeNote$2(o);if(!a)throw new Error('not a note: "'+o+'"');const f=chromas$2[a.toLowerCase()],d=l?.split("").reduce((p,g)=>p+accs$2[g],0)||0;return(Number(u)+1)*12+f+d},midiToFreq$2=o=>Math.pow(2,(o-69)/12)*440,freqToMidi$2=o=>12*Math.log(o/440)/Math.LN2+69,valueToMidi$1=(o,e)=>{if(typeof o!="object")throw new Error("valueToMidi: expected object value");let{freq:a,note:l}=o;if(typeof a=="number")return freqToMidi$2(a);if(typeof l=="string")return noteToMidi$1(l);if(typeof l=="number")return l;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},getEventOffsetMs=(o,e)=>(o-e)*1e3,getFreq=o=>midiToFreq$2(typeof o=="number"?o:noteToMidi$1(o)),pcs$1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],midi2note$1=o=>{const e=Math.floor(o/12)-1;return pcs$1[o%12]+e},_mod$1=(o,e)=>(o%e+e)%e;function nanFallback$1(o,e=0){return isNaN(Number(o))?(logger$2(`"${o}" is not a number, falling back to ${e}`,"warning"),e):o}const getSoundIndex$1=(o,e)=>_mod$1(Math.round(nanFallback$1(o??0,0)),e),getPlayableNoteValue=o=>{let{value:e,context:a}=o,l=e;if(typeof l=="object"&&!Array.isArray(l)&&(l=l.note||l.n||l.value,l===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof l=="number"&&a.type!=="frequency")l=midiToFreq$2(o.value);else if(typeof l=="number"&&a.type==="frequency")l=o.value;else if(typeof l!="string"||!isNote(l))throw new Error("not a note: "+JSON.stringify(l));return l},getFrequency=o=>{let{value:e,context:a}=o;if(typeof e=="object")return e.freq?e.freq:getFreq(e.note||e.n||e.value);if(typeof e=="number"&&a.type!=="frequency")e=midiToFreq$2(o.value);else if(typeof e=="string"&&isNote(e))e=midiToFreq$2(noteToMidi$1(o.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},rotate$2=(o,e)=>o.slice(e).concat(o.slice(0,e)),pipe=(...o)=>o.reduce((e,a)=>(...l)=>e(a(...l)),e=>e),compose=(...o)=>pipe(...o.reverse()),removeUndefineds=o=>o.filter(e=>e!=null),flatten$1=o=>[].concat(...o),id$1=o=>o,constant=(o,e)=>o,listRange=(o,e)=>Array.from({length:e-o+1},(a,l)=>l+o);function curry(o,e,a=o.length){const l=function u(...f){if(f.length>=a)return o.apply(this,f);{const d=function(...p){return u.apply(this,f.concat(p))};return e&&e(d,f),d}};return e&&e(l,[]),l}function parseNumeral(o){const e=Number(o);if(!isNaN(e))return e;if(isNote(o))return noteToMidi$1(o);throw new Error(`cannot parse as numeral: "${o}"`)}function mapArgs(o,e){return(...a)=>o(...a.map(e))}function numeralArgs(o){return mapArgs(o,parseNumeral)}function parseFractional(o){const e=Number(o);if(!isNaN(e))return e;const a={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[o];if(typeof a<"u")return a;throw new Error(`cannot parse as fractional: "${o}"`)}const fractionalArgs=o=>mapArgs(o,parseFractional),splitAt=function(o,e){return[e.slice(0,o),e.slice(o)]},zipWith=(o,e,a)=>e.map((l,u)=>o(l,a[u])),pairs=function(o){const e=[];for(let a=0;a<o.length-1;++a)e.push([o[a],o[a+1]]);return e},clamp$1=(o,e,a)=>Math.min(Math.max(o,e),a),solfeggio=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],indian=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],german=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],byzantine=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],japanese=["I","Ro","Ha","Ni","Ho","He","To"],english=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sol2note=(o,e="letters")=>{const l=(e==="solfeggio"?solfeggio:e==="indian"?indian:e==="german"?german:e==="byzantine"?byzantine:e==="japanese"?japanese:english)[o%12],u=Math.floor(o/12)-1;return l+u};function uniq(o){var e={};return o.filter(function(a){return e.hasOwn(a)?!1:e[a]=!0})}function uniqsort(o){return o.sort().filter(function(e,a,l){return!a||e!=l[a-1]})}function uniqsortr(o){return o.sort((e,a)=>e.compare(a)).filter(function(e,a,l){return!a||e.ne(l[a-1])})}function unicodeToBase64(o){const e=new TextEncoder().encode(o);return btoa(String.fromCharCode(...e))}function base64ToUnicode(o){const e=new Uint8Array(atob(o).split("").map(l=>l.charCodeAt(0)));return new TextDecoder().decode(e)}function code2hash(o){return encodeURIComponent(unicodeToBase64(o))}function hash2code(o){return base64ToUnicode(decodeURIComponent(o))}function objectMap(o,e){return Array.isArray(o)?o.map(e):Object.fromEntries(Object.entries(o).map(([a,l],u)=>[a,e(l,a,u)]))}Fraction.prototype.sam=function(){return this.floor()},Fraction.prototype.nextSam=function(){return this.sam().add(1)},Fraction.prototype.wholeCycle=function(){return new TimeSpan(this.sam(),this.nextSam())},Fraction.prototype.cyclePos=function(){return this.sub(this.sam())},Fraction.prototype.lt=function(o){return this.compare(o)<0},Fraction.prototype.gt=function(o){return this.compare(o)>0},Fraction.prototype.lte=function(o){return this.compare(o)<=0},Fraction.prototype.gte=function(o){return this.compare(o)>=0},Fraction.prototype.eq=function(o){return this.compare(o)==0},Fraction.prototype.ne=function(o){return this.compare(o)!=0},Fraction.prototype.max=function(o){return this.gt(o)?this:o},Fraction.prototype.maximum=function(...o){return o=o.map(e=>new Fraction(e)),o.reduce((e,a)=>a.max(e),this)},Fraction.prototype.min=function(o){return this.lt(o)?this:o},Fraction.prototype.mulmaybe=function(o){return o!==void 0?this.mul(o):void 0},Fraction.prototype.divmaybe=function(o){return o!==void 0?this.div(o):void 0},Fraction.prototype.addmaybe=function(o){return o!==void 0?this.add(o):void 0},Fraction.prototype.submaybe=function(o){return o!==void 0?this.sub(o):void 0},Fraction.prototype.show=function(){return this.s*this.n+"/"+this.d},Fraction.prototype.or=function(o){return this.eq(0)?o:this};const fraction$1=o=>Fraction(o),gcd=(...o)=>{if(o=removeUndefineds(o),o.length!==0)return o.reduce((e,a)=>e.gcd(a),fraction$1(1))},lcm=(...o)=>{if(o=removeUndefineds(o),o.length!==0)return o.reduce((e,a)=>e===void 0||a===void 0?void 0:e.lcm(a),fraction$1(1))};fraction$1._original=Fraction;class TimeSpan{constructor(e,a){this.begin=fraction$1(e),this.end=fraction$1(a)}get spanCycles(){const e=[];var a=this.begin;const l=this.end,u=l.sam();if(a.equals(l))return[new TimeSpan(a,l)];for(;l.gt(a);){if(a.sam().equals(u)){e.push(new TimeSpan(a,this.end));break}const f=a.nextSam();e.push(new TimeSpan(a,f)),a=f}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),a=e.add(this.duration);return new TimeSpan(e,a)}withTime(e){return new TimeSpan(e(this.begin),e(this.end))}withEnd(e){return new TimeSpan(this.begin,e(this.end))}withCycle(e){const a=this.begin.sam(),l=a.add(e(this.begin.sub(a))),u=a.add(e(this.end.sub(a)));return new TimeSpan(l,u)}intersection(e){const a=this.begin.max(e.begin),l=this.end.min(e.end);if(!a.gt(l)&&!(a.equals(l)&&(a.equals(this.end)&&this.begin.lt(this.end)||a.equals(e.end)&&e.begin.lt(e.end))))return new TimeSpan(a,l)}intersection_e(e){const a=this.intersection(e);if(a==null)throw"TimeSpans do not intersect";return a}midpoint(){return this.begin.add(this.duration.div(fraction$1(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Hap{constructor(e,a,l,u={},f=!1){this.whole=e,this.part=a,this.value=l,this.context=u,this.stateful=f,f&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let e;return typeof this.value?.duration=="number"?e=fraction$1(this.value.duration):e=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?e.mul(this.value.clip):e}get endClipped(){return this.whole.begin.add(this.duration)}isActive(e){return this.whole.begin<=e&&this.endClipped>=e}isInPast(e){return e>this.endClipped}isInNearPast(e,a){return a-e<=this.endClipped}isInFuture(e){return e<this.whole.begin}isInNearFuture(e,a){return a<this.whole.begin&&a>this.whole.begin-e}isWithinTime(e,a){return this.whole.begin<=a&&this.endClipped>=e}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const a=this.whole?e(this.whole):void 0;return new Hap(a,e(this.part),this.value,this.context)}withValue(e){return new Hap(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(e){return this.context.tags?.includes(e)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const a=this.value,[l,u]=a(e);return[l,new Hap(this.whole,this.part,u,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const a=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var l="";if(this.whole==null)l="~"+this.part.show;else{var u=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(l=this.whole.begin.show()+" ⇜ "),u||(l+="("),l+=this.part.show(),u||(l+=")"),this.whole.end.equals(this.part.end)||(l+=" ⇝ "+this.whole.end.show())}return"[ "+l+" | "+a+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value}`}combineContext(e){const a=this;return{...a.context,...e.context,locations:(a.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new Hap(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class State{constructor(e,a={}){this.span=e,this.controls=a}setSpan(e){return new State(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new State(this.span,e)}}function unionWithObj(o,e,a){if(e?.value!==void 0&&Object.keys(e).length===1)return logger$2("[warn]: Can't do arithmetic on control pattern."),o;const l=Object.keys(o).filter(u=>Object.keys(e).includes(u));return Object.assign({},o,e,Object.fromEntries(l.map(u=>[u,a(o[u],e[u])])))}curry((o,e)=>o*e),curry((o,e)=>e.map(o));function drawLine(o,e=60){let a=0,l=fraction$1(0),u=[""],f="";for(;u[0].length<e;){const d=o.queryArc(a,a+1),p=d.filter(O=>O.hasOnset()).map(O=>O.duration),g=gcd(...p),b=g.inverse();u=u.map(O=>O+"|"),f+="|";for(let O=0;O<b;O++){const[A,k]=[l,l.add(g)],M=d.filter(N=>N.whole.begin.lte(A)&&N.whole.end.gte(k)),B=M.length-u.length;B>0&&(u=u.concat(Array(B).fill(f))),u=u.map((N,L)=>{const V=M[L];if(V){const pe=V.whole.begin.eq(A)?""+V.value:"-";return N+pe}return N+"."}),f+=".",l=l.add(g)}a++}return u.join(`
`)}let stringParser,__tactus=!0;const calculateTactus=function(o){__tactus=!!o},setStringParser=o=>stringParser=o;let Pattern$1=class Qt{constructor(e,a=void 0){this.query=e,this._Pattern=!0,this.tactus=a}get tactus(){return this.__tactus}set tactus(e){this.__tactus=e===void 0?void 0:fraction$1(e)}setTactus(e){return this.tactus=e,this}withTactus(e){return __tactus?new Qt(this.query,this.tactus===void 0?void 0:e(this.tactus)):this}get hasTactus(){return this.tactus!==void 0}withValue(e){const a=new Qt(l=>this.query(l).map(u=>u.withValue(e)));return a.tactus=this.tactus,a}fmap(e){return this.withValue(e)}appWhole(e,a){const l=this,u=function(f){const d=l.query(f),p=a.query(f),g=function(b,O){const A=b.part.intersection(O.part);if(A!=null)return new Hap(e(b.whole,O.whole),A,b.value(O.value),O.combineContext(b))};return flatten$1(d.map(b=>removeUndefineds(p.map(O=>g(b,O)))))};return new Qt(u)}appBoth(e){const a=this,l=function(f,d){if(!(f==null||d==null))return f.intersection_e(d)},u=a.appWhole(l,e);return __tactus&&(u.tactus=lcm(e.tactus,a.tactus)),u}appLeft(e){const a=this,l=function(f){const d=[];for(const p of a.query(f)){const g=e.query(f.setSpan(p.wholeOrPart()));for(const b of g){const O=p.whole,A=p.part.intersection(b.part);if(A){const k=p.value(b.value),M=b.combineContext(p),B=new Hap(O,A,k,M);d.push(B)}}}return d},u=new Qt(l);return u.tactus=this.tactus,u}appRight(e){const a=this,l=function(f){const d=[];for(const p of e.query(f)){const g=a.query(f.setSpan(p.wholeOrPart()));for(const b of g){const O=p.whole,A=b.part.intersection(p.part);if(A){const k=b.value(p.value),M=p.combineContext(b),B=new Hap(O,A,k,M);d.push(B)}}}return d},u=new Qt(l);return u.tactus=e.tactus,u}bindWhole(e,a){const l=this,u=function(f){const d=function(g,b){return new Hap(e(g.whole,b.whole),b.part,b.value,Object.assign({},g.context,b.context,{locations:(g.context.locations||[]).concat(b.context.locations||[])}))},p=function(g){return a(g.value).query(f.setSpan(g.part)).map(b=>d(g,b))};return flatten$1(l.query(f).map(g=>p(g)))};return new Qt(u)}bind(e){const a=function(l,u){if(!(l==null||u==null))return l.intersection_e(u)};return this.bindWhole(a,e)}join(){return this.bind(id$1)}outerBind(e){return this.bindWhole(a=>a,e).setTactus(this.tactus)}outerJoin(){return this.outerBind(id$1)}innerBind(e){return this.bindWhole((a,l)=>l,e)}innerJoin(){return this.innerBind(id$1)}resetJoin(e=!1){const a=this;return new Qt(l=>a.discreteOnly().query(l).map(u=>u.value.late(e?u.whole.begin:u.whole.begin.cyclePos()).query(l).map(f=>new Hap(f.whole?f.whole.intersection(u.whole):void 0,f.part.intersection(u.part),f.value).setContext(u.combineContext(f))).filter(f=>f.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const e=this;function a(l){const u=e.discreteOnly().query(l);function f(p){const b=p.value._focusSpan(p.wholeOrPart()).query(l.setSpan(p.part));function O(A,k){let M;if(k.whole&&A.whole&&(M=k.whole.intersection(A.whole),!M))return;const B=k.part.intersection(A.part);if(!B)return;const N=k.combineContext(A);return new Hap(M,B,k.value,N)}return b.map(A=>O(p,A))}return flatten$1(u.map(f)).filter(p=>p)}return new Qt(a)}squeezeBind(e){return this.fmap(e).squeezeJoin()}queryArc(e,a,l={}){try{return this.query(new State(new TimeSpan(e,a),l))}catch(u){return logger$2(`[query]: ${u.message}`,"error"),[]}}splitQueries(){const e=this,a=l=>flatten$1(l.span.spanCycles.map(u=>e.query(l.setSpan(u))));return new Qt(a)}withQuerySpan(e){return new Qt(a=>this.query(a.withSpan(e)))}withQuerySpanMaybe(e){const a=this;return new Qt(l=>{const u=l.withSpan(e);return u.span?a.query(u):[]})}withQueryTime(e){return new Qt(a=>this.query(a.withSpan(l=>l.withTime(e))))}withHapSpan(e){return new Qt(a=>this.query(a).map(l=>l.withSpan(e)))}withHapTime(e){return this.withHapSpan(a=>a.withTime(e))}withHaps(e){const a=new Qt(l=>e(this.query(l),l));return a.tactus=this.tactus,a}withHap(e){return this.withHaps(a=>a.map(e))}setContext(e){return this.withHap(a=>a.setContext(e))}withContext(e){const a=this.withHap(l=>l.setContext(e(l.context)));return this.__pure!==void 0&&(a.__pure=this.__pure,a.__pure_loc=this.__pure_loc),a}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,a){const l={start:e,end:a},u=this.withContext(f=>{const d=(f.locations||[]).concat([l]);return{...f,locations:d}});return this.__pure&&(u.__pure=this.__pure,u.__pure_loc=l),u}filterHaps(e){return new Qt(a=>this.query(a).filter(e))}filterValues(e){return new Qt(a=>this.query(a).filter(l=>e(l.value))).setTactus(this.tactus)}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(a=>{const l=[];for(var u=0;u<a.length;++u){for(var f=!0,d=a[u];f;){const b=JSON.stringify(a[u].value);for(var p=!1,g=u+1;g<a.length;g++){const O=a[g];if(d.whole.equals(O.whole)){if(d.part.begin.eq(O.part.end)){if(b===JSON.stringify(O.value)){d=new Hap(d.whole,new TimeSpan(O.part.begin,d.part.end),d.value),a.splice(g,1),p=!0;break}}else if(O.part.begin.eq(d.part.end)&&b==JSON.stringify(O.value)){d=new Hap(d.whole,new TimeSpan(d.part.begin,O.part.end),d.value),a.splice(g,1),p=!0;break}}}f=p}l.push(d)}return l})}firstCycle(e=!1){var a=this;return e||(a=a.stripContext()),a.query(new State(new TimeSpan(fraction$1(0),fraction$1(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((a,l)=>a.part.begin.sub(l.part.begin).or(a.part.end.sub(l.part.end)).or(a.whole.begin.sub(l.whole.begin).or(a.whole.end.sub(l.whole.end)))))}asNumber(){return this.fmap(parseNumeral)}_opIn(e,a){return this.fmap(a).appLeft(reify(e))}_opOut(e,a){return this.fmap(a).appRight(reify(e))}_opMix(e,a){return this.fmap(a).appBoth(reify(e))}_opSqueeze(e,a){const l=reify(e);return this.fmap(u=>l.fmap(f=>a(u)(f))).squeezeJoin()}_opSqueezeOut(e,a){const l=this;return reify(e).fmap(f=>l.fmap(d=>a(d)(f))).squeezeJoin()}_opReset(e,a){return reify(e).fmap(u=>this.fmap(f=>a(f)(u))).resetJoin()}_opRestart(e,a){return reify(e).fmap(u=>this.fmap(f=>a(f)(u))).restartJoin()}layer(...e){return stack(...e.map(a=>a(this)))}superimpose(...e){return this.stack(...e.map(a=>a(this)))}stack(...e){return stack(this,...e)}sequence(...e){return sequence(this,...e)}seq(...e){return sequence(this,...e)}cat(...e){return cat(this,...e)}fastcat(...e){return fastcat(this,...e)}slowcat(...e){return slowcat(this,...e)}onTrigger(e,a=!0){return this.withHap(l=>l.setContext({...l.context,onTrigger:(...u)=>{l.context.onTrigger?.(...u),e(...u)},dominantTrigger:l.context.dominantTrigger||a}))}log(e=(l,u)=>`[hap] ${u.showWhole(!0)}`,a=(l,u)=>({hap:u})){return this.onTrigger((...l)=>{logger$2(e(...l),void 0,a(...l))},!1)}logValues(e=id$1){return this.log((a,l)=>e(l.value))}drawLine(){return console.log(drawLine(this)),this}};function groupHapsBy(o,e){let a=[];return e.forEach(l=>{const u=a.findIndex(([f])=>o(l,f));u===-1?a.push([l]):a[u].push(l)}),a}const congruent=(o,e)=>o.spanEquals(e);Pattern$1.prototype.collect=function(){return this.withHaps(o=>groupHapsBy(congruent,o).map(e=>new Hap(e[0].whole,e[0].part,e,{})))},Pattern$1.prototype.arpWith=function(o){return this.collect().fmap(e=>reify(o(e))).innerJoin().withHap(e=>new Hap(e.whole,e.part,e.value.value,e.combineContext(e.value)))},Pattern$1.prototype.arp=function(o){return this.arpWith(e=>o.fmap(a=>e[a%e.length]))};function _nonArrayObject(o){return!Array.isArray(o)&&typeof o=="object"}function _composeOp(o,e,a){return _nonArrayObject(o)||_nonArrayObject(e)?(_nonArrayObject(o)||(o={value:o}),_nonArrayObject(e)||(e={value:e}),unionWithObj(o,e,a)):a(o,e)}(function(){const o={set:[(a,l)=>l],keep:[a=>a],keepif:[(a,l)=>l?a:void 0],add:[numeralArgs((a,l)=>a+l)],sub:[numeralArgs((a,l)=>a-l)],mul:[numeralArgs((a,l)=>a*l)],div:[numeralArgs((a,l)=>a/l)],mod:[numeralArgs(_mod$1)],pow:[numeralArgs(Math.pow)],band:[numeralArgs((a,l)=>a&l)],bor:[numeralArgs((a,l)=>a|l)],bxor:[numeralArgs((a,l)=>a^l)],blshift:[numeralArgs((a,l)=>a<<l)],brshift:[numeralArgs((a,l)=>a>>l)],lt:[(a,l)=>a<l],gt:[(a,l)=>a>l],lte:[(a,l)=>a<=l],gte:[(a,l)=>a>=l],eq:[(a,l)=>a==l],eqt:[(a,l)=>a===l],ne:[(a,l)=>a!=l],net:[(a,l)=>a!==l],and:[(a,l)=>a&&l],or:[(a,l)=>a||l],func:[(a,l)=>l(a)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart"];for(const[a,[l,u]]of Object.entries(o)){Pattern$1.prototype["_"+a]=function(f){return this.fmap(d=>l(d,f))},Object.defineProperty(Pattern$1.prototype,a,{get:function(){const f=this,d=(...p)=>f[a].in(...p);for(const p of e)d[p.toLowerCase()]=function(...g){var b=f;g=sequence(g),u&&(b=u(b),g=u(g));var O;return a==="keepif"?(O=b["_op"+p](g,A=>k=>l(A,k)),O=O.removeUndefineds()):O=b["_op"+p](g,A=>k=>_composeOp(A,k,l)),O};return d.squeezein=d.squeeze,d}});for(const f of e)Pattern$1.prototype[f.toLowerCase()]=function(...d){return this.set[f.toLowerCase()](d)}}Pattern$1.prototype.struct=function(...a){return this.keepif.out(...a)},Pattern$1.prototype.structAll=function(...a){return this.keep.out(...a)},Pattern$1.prototype.mask=function(...a){return this.keepif.in(...a)},Pattern$1.prototype.maskAll=function(...a){return this.keep.in(...a)},Pattern$1.prototype.reset=function(...a){return this.keepif.reset(...a)},Pattern$1.prototype.resetAll=function(...a){return this.keep.reset(...a)},Pattern$1.prototype.restart=function(...a){return this.keepif.restart(...a)},Pattern$1.prototype.restartAll=function(...a){return this.keep.restart(...a)}})();const polyrhythm=stack,pr=stack,pm=s_polymeter,gap=o=>new Pattern$1(()=>[],o),silence=gap(1),nothing=gap(0);function pure(o){function e(l){return l.span.spanCycles.map(u=>new Hap(fraction$1(u.begin).wholeCycle(),u,o))}const a=new Pattern$1(e,1);return a.__pure=o,a}function isPattern(o){return o instanceof Pattern$1||o?._Pattern}function reify(o){return isPattern(o)?o:stringParser&&typeof o=="string"?stringParser(o):pure(o)}function stack(...o){o=o.map(l=>Array.isArray(l)?sequence(...l):reify(l));const e=l=>flatten$1(o.map(u=>u.query(l))),a=new Pattern$1(e);return __tactus&&(a.tactus=lcm(...o.map(l=>l.tactus))),a}function _stackWith(o,e){if(e=e.map(f=>Array.isArray(f)?sequence(...f):reify(f)),e.length===0)return silence;if(e.length===1)return e[0];const[a,...l]=e.map(f=>f.tactus),u=__tactus?a.maximum(...l):void 0;return stack(...o(u,e))}function stackLeft(...o){return _stackWith((e,a)=>a.map(l=>l.tactus.eq(e)?l:s_cat(l,gap(e.sub(l.tactus)))),o)}function stackRight(...o){return _stackWith((e,a)=>a.map(l=>l.tactus.eq(e)?l:s_cat(gap(e.sub(l.tactus)),l)),o)}function stackCentre(...o){return _stackWith((e,a)=>a.map(l=>{if(l.tactus.eq(e))return l;const u=gap(e.sub(l.tactus).div(2));return s_cat(u,l,u)}),o)}function stackBy(o,...e){const[a,...l]=e.map(d=>d.tactus),u=a.maximum(...l),f={centre:stackCentre,left:stackLeft,right:stackRight,expand:stack,repeat:(...d)=>s_polymeterSteps(u,...d)};return o.inhabit(f).fmap(d=>d(...e)).innerJoin().setTactus(u)}function slowcat(...o){if(o=o.map(l=>Array.isArray(l)?fastcat(...l):reify(l)),o.length==1)return o[0];const e=function(l){const u=l.span,f=_mod$1(u.begin.sam(),o.length),d=o[f];if(!d)return[];const p=u.begin.floor().sub(u.begin.div(o.length).floor());return d.withHapTime(g=>g.add(p)).query(l.setSpan(u.withTime(g=>g.sub(p))))},a=__tactus?lcm(...o.map(l=>l.tactus)):void 0;return new Pattern$1(e).splitQueries().setTactus(a)}function slowcatPrime(...o){o=o.map(reify);const e=function(a){const l=Math.floor(a.span.begin)%o.length;return o[l]?.query(a)||[]};return new Pattern$1(e).splitQueries()}function cat(...o){return slowcat(...o)}function arrange(...o){const e=o.reduce((a,[l])=>a+l,0);return o=o.map(([a,l])=>[a,l.fast(a)]),s_cat(...o).slow(e)}function fastcat(...o){let e=slowcat(...o);return o.length>1&&(e=e._fast(o.length),e.tactus=o.length),e}function sequence(...o){return fastcat(...o)}function seq(...o){return fastcat(...o)}function _sequenceCount(o){return Array.isArray(o)?o.length==0?[silence,0]:o.length==1?_sequenceCount(o[0]):[fastcat(...o.map(e=>_sequenceCount(e)[0])),o.length]:[reify(o),1]}const mask=curry((o,e)=>reify(e).mask(o)),struct=curry((o,e)=>reify(e).struct(o)),superimpose=curry((o,e)=>reify(e).superimpose(...o)),set=curry((o,e)=>reify(e).set(o)),keep=curry((o,e)=>reify(e).keep(o)),keepif=curry((o,e)=>reify(e).keepif(o)),add$6=curry((o,e)=>reify(e).add(o)),sub=curry((o,e)=>reify(e).sub(o)),mul=curry((o,e)=>reify(e).mul(o)),div=curry((o,e)=>reify(e).div(o)),mod$2=curry((o,e)=>reify(e).mod(o)),pow=curry((o,e)=>reify(e).pow(o)),band=curry((o,e)=>reify(e).band(o)),bor=curry((o,e)=>reify(e).bor(o)),bxor=curry((o,e)=>reify(e).bxor(o)),blshift=curry((o,e)=>reify(e).blshift(o)),brshift=curry((o,e)=>reify(e).brshift(o)),lt=curry((o,e)=>reify(e).lt(o)),gt=curry((o,e)=>reify(e).gt(o)),lte=curry((o,e)=>reify(e).lte(o)),gte=curry((o,e)=>reify(e).gte(o)),eq=curry((o,e)=>reify(e).eq(o)),eqt=curry((o,e)=>reify(e).eqt(o)),ne=curry((o,e)=>reify(e).ne(o)),net=curry((o,e)=>reify(e).net(o)),and=curry((o,e)=>reify(e).and(o)),or=curry((o,e)=>reify(e).or(o)),func=curry((o,e)=>reify(e).func(o));function register(o,e,a=!0,l=!1,u=f=>f.innerJoin()){if(Array.isArray(o)){const p={};for(const g of o)p[g]=register(g,e,a);return p}const f=e.length;var d;return a?d=function(...p){p=p.map(reify);const g=p[p.length-1];let b;if(f===1)b=e(g);else{const O=p.slice(0,-1);if(O.every(A=>A.__pure!=null)){const A=O.map(M=>M.__pure),k=O.filter(M=>M.__pure_loc).map(M=>M.__pure_loc);b=e(...A,g),b=b.withContext(M=>{const B=(M.locations||[]).concat(k);return{...M,locations:B}})}else{const[A,...k]=O;let M=(...B)=>e(...B,g);M=curry(M,null,f-1),b=u(k.reduce((B,N)=>B.appLeft(N),A.fmap(M)))}}return l&&(b.tactus=g.tactus),b}:d=function(...p){p=p.map(reify);const g=e(...p);return l&&(g.tactus=p[p.length-1].tactus),g},Pattern$1.prototype[o]=function(...p){if(f===2&&p.length!==1)p=[sequence(...p)];else if(f!==p.length+1)throw new Error(`.${o}() expects ${f-1} inputs but got ${p.length}.`);return p=p.map(reify),d(...p,this)},f>1&&(Pattern$1.prototype["_"+o]=function(...p){return e(...p,this)}),curry(d,null,f)}function stepRegister(o,e,a=!0,l=!1,u=f=>f.stepJoin()){return register(o,e,a,l,u)}const round=register("round",function(o){return o.asNumber().fmap(e=>Math.round(e))}),floor=register("floor",function(o){return o.asNumber().fmap(e=>Math.floor(e))}),ceil=register("ceil",function(o){return o.asNumber().fmap(e=>Math.ceil(e))}),toBipolar=register("toBipolar",function(o){return o.fmap(e=>e*2-1)}),fromBipolar=register("fromBipolar",function(o){return o.fmap(e=>(e+1)/2)}),range$2=register("range",function(o,e,a){return a.mul(e-o).add(o)}),rangex=register("rangex",function(o,e,a){return a._range(Math.log(o),Math.log(e)).fmap(Math.exp)}),range2=register("range2",function(o,e,a){return a.fromBipolar()._range(o,e)}),ratio=register("ratio",o=>o.fmap(e=>Array.isArray(e)?e.slice(1).reduce((a,l)=>a/l,e[0]):e)),compress=register("compress",function(o,e,a){return o=fraction$1(o),e=fraction$1(e),o.gt(e)||o.gt(1)||e.gt(1)||o.lt(0)||e.lt(0)?silence:a._fastGap(fraction$1(1).div(e.sub(o)))._late(o)}),{compressSpan,compressspan}=register(["compressSpan","compressspan"],function(o,e){return e._compress(o.begin,o.end)}),{fastGap,fastgap}=register(["fastGap","fastgap"],function(o,e){const a=function(u){const f=u.begin.sam(),d=u.begin.sub(f).mul(o).min(1),p=u.end.sub(f).mul(o).min(1);if(!(d>=1))return new TimeSpan(f.add(d),f.add(p))},l=function(u){const f=u.part.begin,d=u.part.end,p=f.sam(),g=f.sub(p).div(o).min(1),b=d.sub(p).div(o).min(1),O=new TimeSpan(p.add(g),p.add(b)),A=u.whole?new TimeSpan(O.begin.sub(f.sub(u.whole.begin).div(o)),O.end.add(u.whole.end.sub(d).div(o))):void 0;return new Hap(A,O,u.value,u.context)};return e.withQuerySpanMaybe(a).withHap(l).splitQueries()}),focus=register("focus",function(o,e,a){return o=fraction$1(o),e=fraction$1(e),a._fast(fraction$1(1).div(e.sub(o))).late(o.cyclePos())}),{focusSpan,focusspan}=register(["focusSpan","focusspan"],function(o,e){return e._focus(o.begin,o.end)}),ply=register("ply",function(o,e){const a=e.fmap(l=>pure(l)._fast(o)).squeezeJoin();return __tactus&&(a.tactus=fraction$1(o).mulmaybe(e.tactus)),a}),{fast,density:density$1}=register(["fast","density"],function(o,e){return o===0?silence:(o=fraction$1(o),e.withQueryTime(l=>l.mul(o)).withHapTime(l=>l.div(o)).setTactus(e.tactus))},!0,!0),hurry=register("hurry",function(o,e){return e._fast(o).mul(pure({speed:o}))}),{slow,sparsity}=register(["slow","sparsity"],function(o,e){return o===0?silence:e._fast(fraction$1(1).div(o))}),inside$1=register("inside",function(o,e,a){return e(a._slow(o))._fast(o)}),outside=register("outside",function(o,e,a){return e(a._fast(o))._slow(o)}),lastOf=register("lastOf",function(o,e,a){const l=Array(o-1).fill(a);return l.push(e(a)),slowcatPrime(...l)}),{firstOf,every}=register(["firstOf","every"],function(o,e,a){const l=Array(o-1).fill(a);return l.unshift(e(a)),slowcatPrime(...l)}),apply=register("apply",function(o,e){return o(e)}),cpm=register("cpm",function(o,e){return e._fast(o/60/1)}),early=register("early",function(o,e){return o=fraction$1(o),e.withQueryTime(a=>a.add(o)).withHapTime(a=>a.sub(o))},!0,!0),late=register("late",function(o,e){return o=fraction$1(o),e._early(fraction$1(0).sub(o))},!0,!0),zoom=register("zoom",function(o,e,a){if(e=fraction$1(e),o=fraction$1(o),o.gte(e))return nothing;const l=e.sub(o),u=__tactus?a.tactus.mulmaybe(l):void 0;return a.withQuerySpan(f=>f.withCycle(d=>d.mul(l).add(o))).withHapSpan(f=>f.withCycle(d=>d.sub(o).div(l))).splitQueries().setTactus(u)}),{zoomArc,zoomarc}=register(["zoomArc","zoomarc"],function(o,e){return e.zoom(o.begin,o.end)}),linger=register("linger",function(o,e){return o==0?silence:o<0?e._zoom(o.add(1),1)._slow(o):e._zoom(0,o)._slow(o)},!0,!0),segment=register("segment",function(o,e){return e.struct(pure(!0)._fast(o)).setTactus(o)}),swingBy=register("swingBy",(o,e,a)=>a.inside(e,late(seq(0,o/2)))),swing=register("swing",(o,e)=>e.swingBy(1/3,o)),{invert:invert$1,inv}=register(["invert","inv"],function(o){return o.fmap(e=>!e)},!0,!0),when=register("when",function(o,e,a){return o?e(a):a}),off$1=register("off",function(o,e,a){return stack(a,e(a.late(o)))}),brak=register("brak",function(o){return o.when(slowcat(!1,!0),e=>fastcat(e,silence)._late(.25))}),rev=register("rev",function(o){const e=function(a){const l=a.span,u=l.begin.sam(),f=l.begin.nextSam(),d=function(g){const b=g.withTime(A=>u.add(f.sub(A))),O=b.begin;return b.begin=b.end,b.end=O,b};return o.query(a.setSpan(d(l))).map(g=>g.withSpan(d))};return new Pattern$1(e).splitQueries()},!1,!0),pressBy=register("pressBy",function(o,e){return e.fmap(a=>pure(a).compress(o,1)).squeezeJoin()}),press=register("press",function(o){return o._pressBy(.5)});Pattern$1.prototype.hush=function(){return silence};const palindrome=register("palindrome",function(o){return o.lastOf(2,rev)},!0,!0),{juxBy,juxby}=register(["juxBy","juxby"],function(o,e,a){o/=2;const l=function(d,p,g){return p in d?d[p]:g},u=a.withValue(d=>Object.assign({},d,{pan:l(d,"pan",.5)-o})),f=e(a.withValue(d=>Object.assign({},d,{pan:l(d,"pan",.5)+o})));return stack(u,f).setTactus(__tactus?lcm(u.tactus,f.tactus):void 0)}),jux=register("jux",function(o,e){return e._juxBy(1,o,e)}),{echoWith,echowith,stutWith,stutwith}=register(["echoWith","echowith","stutWith","stutwith"],function(o,e,a,l){return stack(...listRange(0,o-1).map(u=>a(l.late(fraction$1(e).mul(u)),u)))}),echo=register("echo",function(o,e,a,l){return l._echoWith(o,e,(u,f)=>u.gain(Math.pow(a,f)))}),stut=register("stut",function(o,e,a,l){return l._echoWith(o,a,(u,f)=>u.gain(Math.pow(e,f)))}),_iter=function(o,e,a=!1){return o=fraction$1(o),slowcat(...listRange(0,o.sub(1)).map(l=>a?e.late(fraction$1(l).div(o)):e.early(fraction$1(l).div(o))))},iter=register("iter",function(o,e){return _iter(o,e,!1)},!0,!0),{iterBack,iterback}=register(["iterBack","iterback"],function(o,e){return _iter(o,e,!0)},!0,!0),{repeatCycles}=register("repeatCycles",function(o,e){return new Pattern$1(function(a){const l=a.span.begin.sam(),u=l.div(o).sam(),f=l.sub(u);return a=a.withSpan(d=>d.withTime(p=>p.sub(f))),e.query(a).map(d=>d.withSpan(p=>p.withTime(g=>g.add(f))))}).splitQueries()},!0,!0),_chunk=function(o,e,a,l=!1,u=!1){const f=Array(o-1).fill(!1);f.unshift(!0);const d=_iter(o,sequence(...f),!l);return u||(a=a.repeatCycles(o)),a.when(d,e)},{chunk,slowchunk,slowChunk}=register(["chunk","slowchunk","slowChunk"],function(o,e,a){return _chunk(o,e,a,!1,!1)}),{chunkBack,chunkback}=register(["chunkBack","chunkback"],function(o,e,a){return _chunk(o,e,a,!0)}),{fastchunk,fastChunk}=register(["fastchunk","fastChunk"],function(o,e,a){return _chunk(o,e,a,!1,!0)}),bypass=register("bypass",function(o,e){return o=!!parseInt(o),o?silence:e},!0,!0),ribbon=register("ribbon",(o,e,a)=>a.early(o).restart(pure(1).slow(e))),hsla=register("hsla",(o,e,a,l,u)=>u.color(`hsla(${o}turn,${e*100}%,${a*100}%,${l})`)),hsl=register("hsl",(o,e,a,l)=>l.color(`hsl(${o}turn,${e*100}%,${a*100}%)`));Pattern$1.prototype.tag=function(o){return this.withContext(e=>({...e,tags:(e.tags||[]).concat([o])}))},Pattern$1.prototype.stepJoin=function(){const o=this,e=s_cat(..._retime(_slices(o.queryArc(0,1)))).tactus,a=function(l){const f=o.early(l.span.begin.sam()).query(l.setSpan(new TimeSpan(fraction$1(0),fraction$1(1))));return s_cat(..._retime(_slices(f))).query(l)};return new Pattern$1(a,e)};function _retime(o){const e=o.filter((f,d)=>d.hasTactus).reduce((f,d)=>f.add(d),fraction$1(0)),a=removeUndefineds(o.map((f,d)=>d.tactus)).reduce((f,d)=>f.add(d),fraction$1(0)),l=e.eq(0)?void 0:a.div(e);function u(f,d){return d.tactus===void 0?[f.mulmaybe(l),d]:[d.tactus,d]}return o.map(f=>u(...f))}function _slices(o){const e=flatten$1(o.map(u=>[u.part.begin,u.part.end])),a=uniqsortr([fraction$1(0),fraction$1(1),...e]);return pairs(a).map(u=>[u[1].sub(u[0]),stack(..._fitslice(new TimeSpan(...u),o).map(f=>f.value.withHap(d=>d.setContext(d.combineContext(f)))))])}function _fitslice(o,e){return removeUndefineds(e.map(a=>_match(o,a)))}function _match(o,e){const a=o.intersection(e.part);if(a!=null)return new Hap(e.whole,a,e.value,e.context)}const steps$2=register("steps",function(o,e){return e.tactus===void 0?e:e.tactus.eq(fraction$1(0))?nothing:e.fast(fraction$1(o).div(e.tactus))});function _polymeterListSteps(o,...e){const a=e.map(u=>_sequenceCount(u));if(a.length==0)return silence;o==0&&(o=a[0][1]);const l=[];for(const u of a)u[1]!=0&&(o==u[1]?l.push(u[0]):l.push(u[0]._fast(fraction$1(o).div(fraction$1(u[1])))));return stack(...l)}function s_polymeterSteps(o,...e){return e.length==0?silence:Array.isArray(e[0])?_polymeterListSteps(o,...e):s_polymeter(...e).steps(o)}function s_polymeter(...o){if(Array.isArray(o[0]))return _polymeterListSteps(0,...o);if(o=o.filter(f=>f.hasTactus),o.length==0)return silence;const e=o[0].tactus;if(e.eq(fraction$1(0)))return nothing;const[a,...l]=o,u=stack(a,...l.map(f=>f._slow(f.tactus.div(e))));return u.tactus=e,u}function s_cat(...o){if(o.length===0)return nothing;const e=d=>Array.isArray(d)?d:[d.tactus,d];if(o=o.map(e),o.find(d=>d[0]===void 0)){const d=o.map(g=>g[0]).filter(g=>g!==void 0);if(d.length===0)return fastcat(...o.map(g=>g[1]));if(d.length===o.length)return nothing;const p=d.reduce((g,b)=>g.add(b),fraction$1(0)).div(d.length);for(let g of o)g[0]===void 0&&(g[0]=p)}if(o.length==1){const d=reify(o[0][1]);return d.tactus=o[0][0],d}const a=o.map(d=>d[0]).reduce((d,p)=>d.add(p),fraction$1(0));let l=fraction$1(0);const u=[];for(const[d,p]of o){if(fraction$1(d).eq(0))continue;const g=l.add(d);u.push(reify(p)._compress(l.div(a),g.div(a))),l=g}const f=stack(...u);return f.tactus=a,f}const timecat=s_cat,timeCat=s_cat;function s_alt(...o){o=o.map(u=>Array.isArray(u)?u.map(reify):[reify(u)]);const e=lcm(...o.map(u=>fraction$1(u.length)));let a=[];for(let u=0;u<e;++u)a.push(...o.map(f=>f.length==0?silence:f[u%f.length]));a=a.filter(u=>u.hasTactus&&u.tactus>0);const l=a.reduce((u,f)=>u.add(f.tactus),fraction$1(0));return a=s_cat(...a),a.tactus=l,a}const s_add=stepRegister("s_add",function(o,e){if(!e.hasTactus||e.tactus.lte(0)||(o=fraction$1(o),o.eq(0)))return nothing;const a=o<0;a&&(o=o.abs());const l=o.div(e.tactus);return l.lte(0)?nothing:l.gte(1)?e:a?e.zoom(fraction$1(1).sub(l),1):e.zoom(0,l)}),s_sub=stepRegister("s_sub",function(o,e){return e.hasTactus?(o=fraction$1(o),o.lt(0)?e.s_add(fraction$1(0).sub(e.tactus.add(o))):e.s_add(e.tactus.sub(o))):nothing}),s_expand=stepRegister("s_expand",function(o,e){return e.withTactus(a=>a.mul(fraction$1(o)))}),s_contract=stepRegister("s_contract",function(o,e){return e.withTactus(a=>a.div(fraction$1(o)))});Pattern$1.prototype.s_taperlist=function(o,e){const a=this;if(!a.hasTactus)return[a];if(e=e-1,e===0)return[a];const l=[],u=o>0;o=fraction$1(Math.abs(o));const f=a.tactus.sub(o.mul(fraction$1(e))).max(fraction$1(0));for(let d=0;d<e;++d)l.push(a.zoom(0,f.add(o.mul(fraction$1(d))).div(a.tactus)));return l.push(a),u&&l.reverse(),l};const s_taperlist=(o,e,a)=>a.s_taperlist(o,e),s_taper=register("s_taper",function(o,e,a){if(!a.hasTactus)return nothing;const l=a.s_taperlist(o,e),u=s_cat(...l);return u.tactus=l.reduce((f,d)=>f.add(d.tactus),fraction$1(0)),u},!0,!1,o=>o.stepJoin());Pattern$1.prototype.s_tour=function(...o){return s_cat(...[].concat(...o.map((e,a)=>[...o.slice(0,o.length-a),this,...o.slice(o.length-a)]),this,...o))};const s_tour=function(o,...e){return o.s_tour(...e)},chop=register("chop",function(o,e){const l=Array.from({length:o},(f,d)=>d).map(f=>({begin:f/o,end:(f+1)/o})),u=function(f){return sequence(l.map(d=>Object.assign({},f,d)))};return e.squeezeBind(u).setTactus(__tactus?fraction$1(o).mulmaybe(e.tactus):void 0)}),striate=register("striate",function(o,e){const l=Array.from({length:o},(f,d)=>d).map(f=>({begin:f/o,end:(f+1)/o})),u=slowcat(...l);return e.set(u)._fast(o).setTactus(__tactus?fraction$1(o).mulmaybe(e.tactus):void 0)}),_loopAt=function(o,e,a=.5){return e.speed(1/o*a).unit("c").slow(o)},slice=register("slice",function(o,e,a){return o.innerBind(l=>e.outerBind(u=>a.outerBind(f=>{f=f instanceof Object?f:{s:f};const d=Array.isArray(l)?l[u]:u/l,p=Array.isArray(l)?l[u+1]:(u+1)/l;return pure({begin:d,end:p,_slices:l,...f})}))).setTactus(e.tactus)},!1),splice=register("splice",function(o,e,a){const l=slice(o,e,a);return new Pattern$1(u=>{const f=u.controls._cps||1;return l.query(u).map(p=>p.withValue(g=>({speed:f/g._slices/p.whole.duration*(g.speed||1),unit:"c",...g})))}).setTactus(e.tactus)},!1),{loopAt,loopat}=register(["loopAt","loopat"],function(o,e){return new Pattern$1(a=>_loopAt(o,e,a.controls._cps).query(a))}),fit=register("fit",o=>o.withHaps((e,a)=>e.map(l=>l.withValue(u=>({...u,speed:(a.controls._cps||1)/l.whole.duration,unit:"c"}))))),{loopAtCps,loopatcps}=register(["loopAtCps","loopatcps"],function(o,e,a){return _loopAt(o,a,e)}),ref$1=o=>pure(1).withValue(()=>reify(o())).innerJoin();let fadeGain=o=>o<.5?1:1-(o-.5)/.5,xfade=(o,e,a)=>{e=reify(e),o=reify(o),a=reify(a);let l=e.fmap(f=>({gain:fadeGain(f)})),u=e.fmap(f=>({gain:fadeGain(1-f)}));return stack(o.mul(l),a.mul(u))};Pattern$1.prototype.xfade=function(o,e){return xfade(this,o,e)};function createParam(o){let e=Array.isArray(o);o=e?o:[o];const a=o[0],l=d=>{let p;if(typeof d=="object"&&d.value!==void 0&&(p={...d},d=d.value,delete p.value),e&&Array.isArray(d)){const g=p||{};return d.forEach((b,O)=>{O<o.length&&(g[o[O]]=b)}),g}else return p?(p[a]=d,p):{[a]:d}},u=(...d)=>sequence(...d).withValue(l),f=function(...d){return d.length?this.set(u(...d)):this.fmap(l)};return Pattern$1.prototype[a]=f,u}function registerControl(o,...e){const a=Array.isArray(o)?o[0]:o;let l={};return l[a]=createParam(o),e.forEach(u=>{l[u]=l[a],Pattern$1.prototype[u]=Pattern$1.prototype[a]}),l}const{s,sound}=registerControl(["s","n","gain"],"sound"),{source,src}=registerControl("source","src"),{n}=registerControl("n"),{note:note$1}=registerControl(["note","n"]),{accelerate}=registerControl("accelerate"),{velocity}=registerControl("velocity"),{gain}=registerControl("gain"),{postgain}=registerControl("postgain"),{amp}=registerControl("amp"),{attack,att}=registerControl("attack","att"),{fmh}=registerControl(["fmh","fmi"],"fmh"),{fmi,fm:fm$1}=registerControl(["fmi","fmh"],"fm"),{fmenv}=registerControl("fmenv"),{fmattack}=registerControl("fmattack"),{fmdecay}=registerControl("fmdecay"),{fmsustain}=registerControl("fmsustain"),{fmrelease}=registerControl("fmrelease"),{fmvelocity}=registerControl("fmvelocity"),{bank}=registerControl("bank"),{analyze}=registerControl("analyze"),{fft}=registerControl("fft"),{decay,dec:dec$1}=registerControl("decay","dec"),{sustain,sus}=registerControl("sustain","sus"),{release,rel}=registerControl("release","rel"),{hold}=registerControl("hold"),{bandf,bpf,bp}=registerControl(["bandf","bandq","bpenv"],"bpf","bp"),{bandq,bpq}=registerControl("bandq","bpq"),{begin}=registerControl("begin"),{end}=registerControl("end"),{loop}=registerControl("loop"),{loopBegin,loopb}=registerControl("loopBegin","loopb"),{loopEnd,loope}=registerControl("loopEnd","loope"),{crush}=registerControl("crush"),{coarse}=registerControl("coarse"),{drive}=registerControl("drive"),{channels,ch}=registerControl("channels","ch"),{phaserrate,phasr}=registerControl("phaserrate","phasr"),{phaser,ph}=registerControl(["phaser","phaserdepth","phasercenter","phasersweep"],"ph"),{phasersweep,phs}=registerControl("phasersweep","phs"),{phasercenter,phc}=registerControl("phasercenter","phc"),{phaserdepth,phd,phasdp}=registerControl("phaserdepth","phd","phasdp"),{channel}=registerControl("channel"),{cut}=registerControl("cut"),{cutoff,ctf,lpf,lp}=registerControl(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv,lpe}=registerControl("lpenv","lpe"),{hpenv,hpe}=registerControl("hpenv","hpe"),{bpenv,bpe}=registerControl("bpenv","bpe"),{lpattack,lpa}=registerControl("lpattack","lpa"),{hpattack,hpa}=registerControl("hpattack","hpa"),{bpattack,bpa}=registerControl("bpattack","bpa"),{lpdecay,lpd}=registerControl("lpdecay","lpd"),{hpdecay,hpd}=registerControl("hpdecay","hpd"),{bpdecay,bpd}=registerControl("bpdecay","bpd"),{lpsustain,lps}=registerControl("lpsustain","lps"),{hpsustain,hps}=registerControl("hpsustain","hps"),{bpsustain,bps}=registerControl("bpsustain","bps"),{lprelease,lpr}=registerControl("lprelease","lpr"),{hprelease,hpr}=registerControl("hprelease","hpr"),{bprelease,bpr}=registerControl("bprelease","bpr"),{ftype}=registerControl("ftype"),{fanchor}=registerControl("fanchor"),{vib,vibrato,v}=registerControl(["vib","vibmod"],"vibrato","v"),{noise}=registerControl("noise"),{vibmod,vmod}=registerControl(["vibmod","vib"],"vmod"),{hcutoff,hpf,hp}=registerControl(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance,hpq}=registerControl("hresonance","hpq"),{resonance,lpq}=registerControl("resonance","lpq"),{djf}=registerControl("djf"),{delay}=registerControl(["delay","delaytime","delayfeedback"]),{delayfeedback,delayfb,dfb}=registerControl("delayfeedback","delayfb","dfb"),{delaytime,delayt,dt}=registerControl("delaytime","delayt","dt"),{lock}=registerControl("lock"),{detune,det}=registerControl("detune","det"),{unison}=registerControl("unison"),{spread}=registerControl("spread"),{dry}=registerControl("dry"),{fadeTime,fadeOutTime}=registerControl("fadeTime","fadeOutTime"),{fadeInTime}=registerControl("fadeInTime"),{freq:freq$1}=registerControl("freq"),{pattack,patt}=registerControl("pattack","patt"),{pdecay,pdec}=registerControl("pdecay","pdec"),{psustain,psus}=registerControl("psustain","psus"),{prelease,prel}=registerControl("prelease","prel"),{penv}=registerControl("penv"),{pcurve}=registerControl("pcurve"),{panchor}=registerControl("panchor"),{gate,gat}=registerControl("gate","gat"),{leslie}=registerControl("leslie"),{lrate}=registerControl("lrate"),{lsize}=registerControl("lsize"),{activeLabel}=registerControl("activeLabel"),{label}=registerControl(["label","activeLabel"]),{degree}=registerControl("degree"),{mtranspose}=registerControl("mtranspose"),{ctranspose}=registerControl("ctranspose"),{harmonic}=registerControl("harmonic"),{stepsPerOctave}=registerControl("stepsPerOctave"),{octaveR}=registerControl("octaveR"),{nudge}=registerControl("nudge"),{octave:octave$1}=registerControl("octave"),{orbit}=registerControl("orbit"),{overgain}=registerControl("overgain"),{overshape}=registerControl("overshape"),{pan}=registerControl("pan"),{panspan}=registerControl("panspan"),{pansplay}=registerControl("pansplay"),{panwidth:panwidth$1}=registerControl("panwidth"),{panorient}=registerControl("panorient"),{rate}=registerControl("rate"),{slide}=registerControl("slide"),{semitone}=registerControl("semitone"),{voice}=registerControl("voice"),{chord:chord$1}=registerControl("chord"),{dictionary:dictionary$2,dict}=registerControl("dictionary","dict"),{anchor}=registerControl("anchor"),{offset}=registerControl("offset"),{octaves}=registerControl("octaves"),{mode:mode$1}=registerControl(["mode","anchor"]),{room}=registerControl(["room","size"]),{roomlp,rlp}=registerControl("roomlp","rlp"),{roomdim,rdim}=registerControl("roomdim","rdim"),{roomfade,rfade}=registerControl("roomfade","rfade"),{ir,iresponse}=registerControl(["ir","i"],"iresponse"),{roomsize,size,sz,rsize}=registerControl("roomsize","size","sz","rsize"),{shape}=registerControl(["shape","shapevol"]),{distort,dist:dist$3}=registerControl(["distort","distortvol"],"dist"),{compressor}=registerControl(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee}=registerControl("compressorKnee"),{compressorRatio}=registerControl("compressorRatio"),{compressorAttack}=registerControl("compressorAttack"),{compressorRelease}=registerControl("compressorRelease"),{speed}=registerControl("speed"),{unit}=registerControl("unit"),{squiz}=registerControl("squiz"),{vowel}=registerControl("vowel"),{waveloss}=registerControl("waveloss"),{density}=registerControl("density"),{expression}=registerControl("expression"),{sustainpedal}=registerControl("sustainpedal"),{tremolodepth,tremdp}=registerControl("tremolodepth","tremdp"),{tremolorate,tremr}=registerControl("tremolorate","tremr"),{fshift}=registerControl("fshift"),{fshiftnote}=registerControl("fshiftnote"),{fshiftphase}=registerControl("fshiftphase"),{triode}=registerControl("triode"),{krush}=registerControl("krush"),{kcutoff}=registerControl("kcutoff"),{octer}=registerControl("octer"),{octersub}=registerControl("octersub"),{octersubsub}=registerControl("octersubsub"),{ring}=registerControl("ring"),{ringf}=registerControl("ringf"),{ringdf}=registerControl("ringdf"),{freeze}=registerControl("freeze"),{xsdelay}=registerControl("xsdelay"),{tsdelay}=registerControl("tsdelay"),{real}=registerControl("real"),{imag}=registerControl("imag"),{enhance}=registerControl("enhance"),{partials}=registerControl("partials"),{comb}=registerControl("comb"),{smear:smear$1}=registerControl("smear"),{scram}=registerControl("scram"),{binshift}=registerControl("binshift"),{hbrick}=registerControl("hbrick"),{lbrick}=registerControl("lbrick"),{midichan}=registerControl("midichan"),{control}=registerControl("control"),{ccn}=registerControl("ccn"),{ccv}=registerControl("ccv"),{polyTouch}=registerControl("polyTouch"),{midibend}=registerControl("midibend"),{miditouch}=registerControl("miditouch"),{ctlNum}=registerControl("ctlNum"),{frameRate}=registerControl("frameRate"),{frames}=registerControl("frames"),{hours}=registerControl("hours"),{midicmd}=registerControl("midicmd"),{minutes}=registerControl("minutes"),{progNum}=registerControl("progNum"),{seconds}=registerControl("seconds"),{songPtr}=registerControl("songPtr"),{uid}=registerControl("uid"),{val}=registerControl("val"),{cps}=registerControl("cps"),{clip:clip$1,legato}=registerControl("clip","legato"),{duration,dur}=registerControl("duration","dur"),{zrand}=registerControl("zrand"),{curve}=registerControl("curve"),{deltaSlide}=registerControl("deltaSlide"),{pitchJump}=registerControl("pitchJump"),{pitchJumpTime}=registerControl("pitchJumpTime"),{lfo,repeatTime}=registerControl("lfo","repeatTime"),{znoise}=registerControl("znoise"),{zmod}=registerControl("zmod"),{zcrush}=registerControl("zcrush"),{zdelay}=registerControl("zdelay"),{tremolo}=registerControl("tremolo"),{zzfx}=registerControl("zzfx"),{color,colour}=registerControl(["color","colour"]);let createParams=(...o)=>o.reduce((e,a)=>Object.assign(e,{[a]:createParam(a)}),{});const adsr=register("adsr",(o,e)=>{o=Array.isArray(o)?o:[o];const[a,l,u,f]=o;return e.set({attack:a,decay:l,sustain:u,release:f})}),ad=register("ad",(o,e)=>{o=Array.isArray(o)?o:[o];const[a,l=a]=o;return e.attack(a).decay(l)}),ds=register("ds",(o,e)=>{o=Array.isArray(o)?o:[o];const[a,l=0]=o;return e.set({decay:a,sustain:l})}),ar=register("ar",(o,e)=>{o=Array.isArray(o)?o:[o];const[a,l=a]=o;return e.set({attack:a,release:l})}),controls=Object.freeze(Object.defineProperty({__proto__:null,accelerate,activeLabel,ad,adsr,amp,analyze,anchor,ar,att,attack,bandf,bandq,bank,begin,binshift,bp,bpa,bpattack,bpd,bpdecay,bpe,bpenv,bpf,bpq,bpr,bprelease,bps,bpsustain,ccn,ccv,ch,channel,channels,chord:chord$1,clip:clip$1,coarse,color,colour,comb,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,control,cps,createParam,createParams,crush,ctf,ctlNum,ctranspose,curve,cut,cutoff,dec:dec$1,decay,degree,delay,delayfb,delayfeedback,delayt,delaytime,deltaSlide,density,det,detune,dfb,dict,dictionary:dictionary$2,dist:dist$3,distort,djf,drive,dry,ds,dt,dur,duration,end,enhance,expression,fadeInTime,fadeOutTime,fadeTime,fanchor,fft,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,frameRate,frames,freeze,freq:freq$1,fshift,fshiftnote,fshiftphase,ftype,gain,gat,gate,harmonic,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdecay,hpe,hpenv,hpf,hpq,hpr,hprelease,hps,hpsustain,hresonance,imag,ir,iresponse,kcutoff,krush,label,lbrick,legato,leslie,lfo,lock,loop,loopBegin,loopEnd,loopb,loope,lp,lpa,lpattack,lpd,lpdecay,lpe,lpenv,lpf,lpq,lpr,lprelease,lps,lpsustain,lrate,lsize,midibend,midichan,midicmd,miditouch,minutes,mode:mode$1,mtranspose,n,noise,note:note$1,nudge,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,offset,orbit,overgain,overshape,pan,panchor,panorient,panspan,pansplay,panwidth:panwidth$1,partials,patt,pattack,pcurve,pdec,pdecay,penv,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phasr,phc,phd,phs,pitchJump,pitchJumpTime,polyTouch,postgain,prel,prelease,progNum,psus,psustain,rate,rdim,real,registerControl,rel,release,repeatTime,resonance,rfade,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rsize,s,scram,seconds,semitone,shape,size,slide,smear:smear$1,songPtr,sound,source,speed,spread,squiz,src,stepsPerOctave,sus,sustain,sustainpedal,sz,tremdp,tremolo,tremolodepth,tremolorate,tremr,triode,tsdelay,uid,unison,unit,v,val,velocity,vib,vibmod,vibrato,vmod,voice,vowel,waveloss,xsdelay,zcrush,zdelay,zmod,znoise,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),left=function(o,e){const[a,l]=o,[u,f]=e,[d,p]=splitAt(l,u);return[[l,a-l],[zipWith((g,b)=>g.concat(b),d,f),p]]},right=function(o,e){const[a,l]=o,[u,f]=e,[d,p]=splitAt(a,f);return[[a,l-a],[zipWith((b,O)=>b.concat(O),u,d),p]]},_bjork=function(o,e){const[a,l]=o;return Math.min(a,l)<=1?[o,e]:_bjork(...a>l?left(o,e):right(o,e))},bjork=function(o,e){const a=o<0;o=Math.abs(o);const l=e-o,u=Array(o).fill([1]),f=Array(l).fill([0]),d=_bjork([o,l],[u,f]),p=flatten$1(d[1][0]).concat(flatten$1(d[1][1]));return a?p.map(g=>g===0?1:0):p},_euclidRot=function(o,e,a){const l=bjork(o,e);return a?rotate$2(l,-a):l},euclid=register("euclid",function(o,e,a){return a.struct(_euclidRot(o,e,0))}),{euclidrot,euclidRot}=register(["euclidrot","euclidRot"],function(o,e,a,l){return l.struct(_euclidRot(o,e,a))}),_euclidLegato=function(o,e,a,l){if(o<1)return silence;const f=_euclidRot(o,e,a).join("").split("1").slice(1).map(d=>[d.length+1,!0]);return l.struct(timeCat(...f))},euclidLegato=register(["euclidLegato"],function(o,e,a){return _euclidLegato(o,e,0,a)}),euclidLegatoRot=register(["euclidLegatoRot"],function(o,e,a,l){return _euclidLegato(o,e,a,l)});function createClock(o,e,a=.05,l=.1,u=.1,f=globalThis.setInterval,d=globalThis.clearInterval,p=!0){let g=0,b=0,O=10**4,A=.01;const k=re=>a=re(a);u=u||l/2;const M=()=>{const re=o(),z=re+l+u;for(b===0&&(b=re+A);b<z;)b=p?Math.round(b*O)/O:b,e(b,a,g,re),b+=a,g++};let B;const N=()=>{L(),M(),B=f(M,l*1e3)},L=()=>{B!==void 0&&d(B),B=void 0};return{setDuration:k,start:N,stop:()=>{g=0,b=0,L()},pause:()=>L(),duration:a,interval:l,getPhase:()=>b,minLatency:A}}function steady(o){return new Pattern$1(e=>[new Hap(void 0,e.span,o)])}const signal$1=o=>{const e=a=>[new Hap(void 0,a.span,o(a.span.midpoint()))];return new Pattern$1(e)},isaw=signal$1(o=>1-o%1),isaw2=isaw.toBipolar(),saw=signal$1(o=>o%1),saw2=saw.toBipolar(),sine2=signal$1(o=>Math.sin(Math.PI*2*o)),sine=sine2.fromBipolar(),cosine=sine._early(fraction$1(1).div(4)),cosine2=sine2._early(fraction$1(1).div(4)),square=signal$1(o=>Math.floor(o*2%2)),square2=square.toBipolar(),tri=fastcat(isaw,saw),tri2=fastcat(isaw2,saw2),time$1=signal$1(id$1);let _mouseY=0,_mouseX=0;typeof window<"u"&&document.addEventListener("mousemove",o=>{_mouseY=o.clientY/document.body.clientHeight,_mouseX=o.clientX/document.body.clientWidth});const mousey=signal$1(()=>_mouseY),mouseY=signal$1(()=>_mouseY),mousex=signal$1(()=>_mouseX),mouseX=signal$1(()=>_mouseX),xorwise=o=>{const e=o<<13^o,a=e>>17^e;return a<<5^a},_frac=o=>o-Math.trunc(o),timeToIntSeed=o=>xorwise(Math.trunc(_frac(o/300)*536870912)),intSeedToRand=o=>o%536870912/536870912,timeToRand=o=>Math.abs(intSeedToRand(timeToIntSeed(o))),run=o=>saw.range(0,o).floor().segment(o),rand=signal$1(timeToRand),rand2=rand.toBipolar(),_brandBy=o=>rand.fmap(e=>e<o),brandBy=o=>reify(o).fmap(_brandBy).innerJoin(),brand=_brandBy(.5),_irand=o=>rand.fmap(e=>Math.trunc(e*o)),irand=o=>reify(o).fmap(_irand).innerJoin(),_pick=function(o,e,a=!0){const l=Array.isArray(o),u=Object.keys(o).length;return o=objectMap(o,reify),u===0?silence:e.fmap(f=>{let d=f;return l&&(d=a?Math.round(d)%u:clamp$1(Math.round(d),0,o.length-1)),o[d]})},pick=function(o,e){return Array.isArray(e)&&([e,o]=[o,e]),__pick(o,e)},__pick=register("pick",function(o,e){return _pick(o,e,!1).innerJoin()}),pickmod=register("pickmod",function(o,e){return _pick(o,e,!0).innerJoin()}),pickF=register("pickF",function(o,e,a){return a.apply(pick(o,e))}),pickmodF=register("pickmodF",function(o,e,a){return a.apply(pickmod(o,e))}),pickOut=register("pickOut",function(o,e){return _pick(o,e,!1).outerJoin()}),pickmodOut=register("pickmodOut",function(o,e){return _pick(o,e,!0).outerJoin()}),pickRestart=register("pickRestart",function(o,e){return _pick(o,e,!1).restartJoin()}),pickmodRestart=register("pickmodRestart",function(o,e){return _pick(o,e,!0).restartJoin()}),pickReset=register("pickReset",function(o,e){return _pick(o,e,!1).resetJoin()}),pickmodReset=register("pickmodReset",function(o,e){return _pick(o,e,!0).resetJoin()}),{inhabit,pickSqueeze}=register(["inhabit","pickSqueeze"],function(o,e){return _pick(o,e,!1).squeezeJoin()}),{inhabitmod,pickmodSqueeze}=register(["inhabitmod","pickmodSqueeze"],function(o,e){return _pick(o,e,!0).squeezeJoin()}),squeeze=(o,e)=>(e=e.map(reify),e.length==0?silence:o.fmap(a=>{const l=_mod$1(Math.round(a),e.length);return e[l]}).squeezeJoin()),__chooseWith=(o,e)=>(e=e.map(reify),e.length==0?silence:o.range(0,e.length).fmap(a=>{const l=Math.min(Math.max(Math.floor(a),0),e.length-1);return e[l]})),chooseWith=(o,e)=>__chooseWith(o,e).outerJoin(),chooseInWith=(o,e)=>__chooseWith(o,e).innerJoin(),choose=(...o)=>chooseWith(rand,o);Pattern$1.prototype.choose=function(...o){return chooseWith(this,o)},Pattern$1.prototype.choose2=function(...o){return chooseWith(this.fromBipolar(),o)};const chooseCycles=(...o)=>chooseInWith(rand.segment(1),o),randcat=chooseCycles,_wchooseWith=function(o,...e){const a=e.map(p=>reify(p[0])),l=[];let u=0;for(const p of e)u+=p[1],l.push(u);const f=u,d=function(p){const g=p*f;return a[l.findIndex(b=>b>g,l)]};return o.fmap(d)},wchooseWith=(...o)=>_wchooseWith(...o).outerJoin(),wchoose=(...o)=>wchooseWith(rand,...o),wchooseCycles=(...o)=>_wchooseWith(rand.segment(1),...o).innerJoin(),wrandcat=wchooseCycles,perlinWith=o=>{const e=o.fmap(Math.floor),a=o.fmap(f=>Math.floor(f)+1),l=f=>6*f**5-15*f**4+10*f**3,u=f=>d=>p=>d+l(f)*(p-d);return o.sub(e).fmap(u).appBoth(e.fmap(timeToRand)).appBoth(a.fmap(timeToRand))},perlin=perlinWith(time$1.fmap(o=>Number(o))),degradeByWith=register("degradeByWith",(o,e,a)=>a.fmap(l=>u=>l).appLeft(o.filterValues(l=>l>e))),degradeBy=register("degradeBy",function(o,e){return e._degradeByWith(rand,o)}),degrade=register("degrade",o=>o._degradeBy(.5)),undegradeBy=register("undegradeBy",function(o,e){return e._degradeByWith(rand.fmap(a=>1-a),o)}),undegrade=register("undegrade",o=>o._undegradeBy(.5)),sometimesBy=register("sometimesBy",function(o,e,a){return reify(o).fmap(l=>stack(a._degradeBy(l),e(a._undegradeBy(1-l)))).innerJoin()}),sometimes=register("sometimes",function(o,e){return e._sometimesBy(.5,o)}),someCyclesBy=register("someCyclesBy",function(o,e,a){return reify(o).fmap(l=>stack(a._degradeByWith(rand._segment(1),l),e(a._degradeByWith(rand.fmap(u=>1-u)._segment(1),1-l)))).innerJoin()}),someCycles=register("someCycles",function(o,e){return e._someCyclesBy(.5,o)}),often=register("often",function(o,e){return e.sometimesBy(.75,o)}),rarely=register("rarely",function(o,e){return e.sometimesBy(.25,o)}),almostNever=register("almostNever",function(o,e){return e.sometimesBy(.1,o)}),almostAlways=register("almostAlways",function(o,e){return e.sometimesBy(.9,o)}),never=register("never",function(o,e){return e}),always=register("always",function(o,e){return o(e)});let synth;try{synth=window?.speechSynthesis}catch(o){console.warn("cannot use window: not in browser?")}let allVoices=synth?.getVoices();function triggerSpeech(o,e,a){synth.cancel();const l=new SpeechSynthesisUtterance(o);l.lang=e,allVoices=synth.getVoices();const u=allVoices.filter(f=>f.lang.includes(e));typeof a=="number"?l.voice=u[a%u.length]:typeof a=="string"&&(l.voice=u.find(f=>f.name===f)),speechSynthesis.speak(l)}const speak=register("speak",function(o,e,a){return a.onTrigger((l,u)=>{triggerSpeech(u.value,o,e)})}),evalScope=async(...o)=>{const e=await Promise.allSettled(o),a=e.filter(l=>l.status==="fulfilled").map(l=>l.value);return e.forEach((l,u)=>{l.status==="rejected"&&console.warn(`evalScope: module with index ${u} could not be loaded:`,l.reason)}),a.forEach(l=>{Object.entries(l).forEach(([u,f])=>{globalThis[u]=f})}),a};function safeEval(o,e={}){const{wrapExpression:a=!0,wrapAsync:l=!0}=e;a&&(o=`{${o}}`),l&&(o=`(async ()=>${o})()`);const u=`"use strict";return (${o})`;return Function(u)()}const evaluate=async(o,e)=>{let a={};if(e){const f=e(o);o=f.output,a=f}return{mode:"javascript",pattern:await safeEval(o,{wrapExpression:!!e}),meta:a}};class NeoCyclist{constructor({onTrigger:e,onToggle:a,getTime:l}){this.started=!1,this.cps=.5,this.lastTick=0,this.getTime=l,this.time_at_last_tick_message=0,this.num_cycles_at_cps_change=0,this.onToggle=a,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker_time_dif,this.worker=new SharedWorker(new URL("/assets/clockworker--4w5RvGG.js",_documentCurrentScript&&_documentCurrentScript.src||new URL("index.js",document.baseURI).href)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");let u=0;const f=20,d=10**3,p=(O,A,k)=>{const M=l()-(O+A)+k;if(this.worker_time_dif==null)this.worker_time_dif=M;else{const N=Math.round((this.worker_time_dif*u+M*1)/(u+1)*d)/d;N!=this.worker_time_dif&&(u=4),this.worker_time_dif=N}u=Math.min(u+1,f)},g=O=>{const{num_cycles_at_cps_change:A,cps:k,num_seconds_at_cps_change:M,num_seconds_since_cps_change:B,begin:N,end:L,tickdeadline:V,cycle:se}=O;this.cps=k,this.cycle=se,p(M,B,V),b(N,L,A,M),this.time_at_last_tick_message=this.getTime()},b=(O,A,k,M)=>{if(this.started===!1)return;this.pattern.queryArc(O,A,{_cps:this.cps}).forEach(N=>{if(N.hasOnset()){const L=(N.whole.begin-k)/this.cps+M+this.latency+this.worker_time_dif,V=N.duration/this.cps;e?.(N,0,V,this.cps,L)}})};this.channel.onmessage=O=>{if(!this.started)return;const{payload:A,type:k}=O.data;switch(k){case"tick":g(A)}}}sendMessage(e,a){this.worker.port.postMessage({type:e,payload:a,id:this.id})}now(){const e=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+e}setCps(e=1){this.sendMessage("cpschange",{cps:e})}setCycle(e){this.sendMessage("setcycle",{cycle:e})}setStarted(e){this.sendMessage("toggle",{started:e}),this.started=e,this.onToggle?.(e)}start(){logger$2("[cyclist] start"),this.setStarted(!0)}stop(){this.worker_time_dif=null,logger$2("[cyclist] stop"),this.setStarted(!1)}setPattern(e,a=!1){this.pattern=e,a&&!this.started&&this.start()}log(e,a,l){const u=l.filter(f=>f.hasOnset());console.log(`${e.toFixed(4)} - ${a.toFixed(4)} ${Array(u.length).fill("I").join("")}`)}}class Cyclist{constructor({interval:e,onTrigger:a,onToggle:l,onError:u,getTime:f,latency:d=.1,setInterval:p,clearInterval:g}){this.started=!1,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=f,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=l,this.latency=d,this.clock=createClock(f,(b,O,A,k)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=b),this.num_ticks_since_cps_change++;const B=this.num_ticks_since_cps_change*O*this.cps;try{const N=this.lastEnd;this.lastBegin=N;const L=this.num_cycles_at_cps_change+B;if(this.lastEnd=L,this.lastTick=b,b<k){console.log("skip query: too late");return}this.pattern.queryArc(N,L,{_cps:this.cps}).forEach(se=>{if(se.hasOnset()){const pe=(se.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+d,re=se.duration/this.cps,z=pe-b;a?.(se,z,re,this.cps,pe)}})}catch(N){logger$2(`[cyclist] error: ${N.message}`),u?.(N)}},e,.1,.1,p,g)}now(){if(!this.started)return 0;const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){this.started=e,this.onToggle?.(e)}start(){if(this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");logger$2("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){logger$2("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){logger$2("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}setPattern(e,a=!1){this.pattern=e,a&&!this.started&&this.start()}setCps(e=.5){this.cps!==e&&(this.cps=e,this.num_ticks_since_cps_change=0)}log(e,a,l){const u=l.filter(f=>f.hasOnset());console.log(`${e.toFixed(4)} - ${a.toFixed(4)} ${Array(u.length).fill("I").join("")}`)}}let time;function getTime(){if(!time)throw new Error("no time set! use setTime to define a time source");return time()}function setTime(o){time=o}function repl$1({defaultOutput:o,onEvalError:e,beforeEval:a,afterEval:l,getTime:u,transpiler:f,onToggle:d,editPattern:p,onUpdateState:g,sync:b=!1,setInterval:O,clearInterval:A}){const k={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},M=Fe=>{Object.assign(k,Fe),k.isDirty=k.code!==k.activeCode,k.error=k.evalError||k.schedulerError,g?.(k)},B={onTrigger:getTrigger({defaultOutput:o,getTime:u}),getTime:u,onToggle:Fe=>{M({started:Fe}),d?.(Fe)},setInterval:O,clearInterval:A},N=b&&typeof SharedWorker<"u"?new NeoCyclist(B):new Cyclist(B);let L={},V=0,se;const pe=function(){return L={},V=0,se=void 0,silence},re=(Fe,Be=!0)=>{Fe=p?.(Fe)||Fe,N.setPattern(Fe,Be)};setTime(()=>N.now());const z=()=>N.stop(),oe=()=>N.start(),de=()=>N.pause(),_e=()=>N.toggle(),Ce=Fe=>N.setCps(Fe),be=Fe=>N.setCps(Fe/60),xe=function(Fe){return se=Fe,silence},Oe=()=>{Pattern$1.prototype.p=function(Be){return Be.startsWith("_")||Be.endsWith("_")?silence:(Be==="$"&&(Be=`$${V}`,V++),L[Be]=this,this)},Pattern$1.prototype.q=function(Be){return silence};try{for(let Be=1;Be<10;++Be)Object.defineProperty(Pattern$1.prototype,`d${Be}`,{get(){return this.p(Be)},configurable:!0}),Object.defineProperty(Pattern$1.prototype,`p${Be}`,{get(){return this.p(Be)},configurable:!0}),Pattern$1.prototype[`q${Be}`]=silence}catch(Be){console.warn("injectPatternMethods: error:",Be)}const Fe=register("cpm",function(Be,Ge){return Ge._fast(Be/60/N.cps)});return evalScope({all:xe,hush:pe,cpm:Fe,setCps:Ce,setcps:Ce,setCpm:be,setcpm:be})};return{scheduler:N,evaluate:async(Fe,Be=!0,Ge=!0)=>{if(!Fe)throw new Error("no code to evaluate");try{M({code:Fe,pending:!0}),await Oe(),await a?.({code:Fe}),Ge&&pe();let{pattern:Ne,meta:Ve}=await evaluate(Fe,f);if(Object.keys(L).length&&(Ne=stack(...Object.values(L))),se&&(Ne=se(Ne)),!isPattern(Ne)){const Ze=`got "${typeof evaluated}" instead of pattern`;throw new Error(Ze+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return logger$2("[eval] code updated"),re(Ne,Be),M({miniLocations:Ve?.miniLocations||[],widgets:Ve?.widgets||[],activeCode:Fe,pattern:Ne,evalError:void 0,schedulerError:void 0,pending:!1}),l?.({code:Fe,pattern:Ne,meta:Ve}),Ne}catch(Ne){logger$2(`[eval] error: ${Ne.message}`,"error"),console.error(Ne),M({evalError:Ne,pending:!1}),e?.(Ne)}},start:oe,stop:z,pause:de,setCps:Ce,setPattern:re,setCode:Fe=>M({code:Fe}),toggle:_e,state:k}}const getTrigger=({getTime:o,defaultOutput:e})=>async(a,l,u,f,d)=>{try{(!a.context.onTrigger||!a.context.dominantTrigger)&&await e(a,l,u,f,d),a.context.onTrigger&&await a.context.onTrigger(o()+l,a,o(),f,d)}catch(p){logger$2(`[cyclist] error: ${p.message}`,"error")}},backgroundImage=function(o,e={}){const a=document.getElementById("code"),l="background-image:url("+o+");background-size:contain;";a.style=l;const{className:u}=a,f=(g,b)=>{({style:()=>a.style=l+";"+b,className:()=>a.className=b+" "+u})[g]()},d=Object.entries(e).filter(([g,b])=>typeof b=="function");Object.entries(e).filter(([g,b])=>typeof b=="string").forEach(([g,b])=>f(g,b)),d.length},cleanupUi=()=>{const o=document.getElementById("code");o&&(o.style="")};logger$2("🌀 @strudel/core loaded 🌀"),globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`),globalThis._strudelLoaded=!0;const core=Object.freeze(Object.defineProperty({__proto__:null,Cyclist,Fraction:fraction$1,Hap,Pattern:Pattern$1,State,TimeSpan,__chooseWith,_brandBy,_fitslice,_irand,_match,_mod:_mod$1,_polymeterListSteps,_retime,_slices,accelerate,activeLabel,ad,add:add$6,adsr,almostAlways,almostNever,always,amp,analyze,anchor,and,apply,ar,arrange,att,attack,backgroundImage,band,bandf,bandq,bank,base64ToUnicode,begin,binshift,bjork,blshift,bor,bp,bpa,bpattack,bpd,bpdecay,bpe,bpenv,bpf,bpq,bpr,bprelease,bps,bpsustain,brak,brand,brandBy,brshift,bxor,bypass,calculateTactus,cat,ccn,ccv,ceil,ch,channel,channels,choose,chooseCycles,chooseInWith,chooseWith,chop,chord:chord$1,chunk,chunkBack,chunkback,clamp:clamp$1,cleanupUi,clip:clip$1,coarse,code2hash,color,colour,comb,compose,compress,compressSpan,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,compressspan,constant,control,controls,cosine,cosine2,cpm,cps,createClock,createParam,createParams,crush,ctf,ctlNum,ctranspose,curry,curve,cut,cutoff,dec:dec$1,decay,degrade,degradeBy,degradeByWith,degree,delay,delayfb,delayfeedback,delayt,delaytime,deltaSlide,det,detune,dfb,dict,dictionary:dictionary$2,dist:dist$3,distort,div,djf,drawLine,drive,dry,ds,dt,dur,duration,early,echo,echoWith,echowith,end,enhance,eq,eqt,euclid,euclidLegato,euclidLegatoRot,euclidRot,euclidrot,evalScope,evaluate,every,expression,fadeInTime,fadeOutTime,fadeTime,fanchor,fast,fastChunk,fastGap,fastcat,fastchunk,fastgap,fft,firstOf,fit,flatten:flatten$1,floor,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,focus,focusSpan,focusspan,fractionalArgs,frameRate,frames,freeze,freq:freq$1,freqToMidi:freqToMidi$2,fromBipolar,fshift,fshiftnote,fshiftphase,ftype,func,gain,gap,gat,gate,getEventOffsetMs,getFreq,getFrequency,getPlayableNoteValue,getSoundIndex:getSoundIndex$1,getTime,getTrigger,gt,gte,harmonic,hash2code,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdecay,hpe,hpenv,hpf,hpq,hpr,hprelease,hps,hpsustain,hresonance,hsl,hsla,hurry,id:id$1,imag,inhabit,inhabitmod,inside:inside$1,inv,invert:invert$1,ir,irand,iresponse,isNote,isNoteWithOctave,isPattern,isaw,isaw2,iter,iterBack,iterback,jux,juxBy,juxby,kcutoff,keep,keepif,krush,label,lastOf,late,lbrick,legato,leslie,lfo,linger,listRange,lock,logKey,logger:logger$2,loop,loopAt,loopAtCps,loopBegin,loopEnd,loopat,loopatcps,loopb,loope,lp,lpa,lpattack,lpd,lpdecay,lpe,lpenv,lpf,lpq,lpr,lprelease,lps,lpsustain,lrate,lsize,lt,lte,mapArgs,mask,midi2note:midi2note$1,midiToFreq:midiToFreq$2,midibend,midichan,midicmd,miditouch,minutes,mod:mod$2,mode:mode$1,mouseX,mouseY,mousex,mousey,mtranspose,mul,n,nanFallback:nanFallback$1,ne,net,never,noise,note:note$1,noteToMidi:noteToMidi$1,nothing,nudge,numeralArgs,objectMap,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,off:off$1,offset,often,or,orbit,outside,overgain,overshape,pairs,palindrome,pan,panchor,panorient,panspan,pansplay,panwidth:panwidth$1,parseFractional,parseNumeral,partials,patt,pattack,pcurve,pdec,pdecay,penv,perlin,perlinWith,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phasr,phc,phd,phs,pick,pickF,pickOut,pickReset,pickRestart,pickSqueeze,pickmod,pickmodF,pickmodOut,pickmodReset,pickmodRestart,pickmodSqueeze,pipe,pitchJump,pitchJumpTime,ply,pm,polyTouch,polyrhythm,postgain,pow,pr,prel,prelease,press,pressBy,progNum,psus,psustain,pure,rand,rand2,randcat,range:range$2,range2,rangex,rarely,rate,ratio,rdim,real,ref:ref$1,register,registerControl,reify,rel,release,removeUndefineds,repeatCycles,repeatTime,repl:repl$1,resonance,rev,rfade,ribbon,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rotate:rotate$2,round,rsize,run,s,s_add,s_alt,s_cat,s_contract,s_expand,s_polymeter,s_polymeterSteps,s_sub,s_taper,s_taperlist,s_tour,saw,saw2,scram,seconds,segment,semitone,seq,sequence,set,setStringParser,setTime,shape,signal:signal$1,silence,sine,sine2,size,slice,slide,slow,slowChunk,slowcat,slowcatPrime,slowchunk,smear:smear$1,sol2note,someCycles,someCyclesBy,sometimes,sometimesBy,songPtr,sound,source,sparsity,speak,speed,splice,splitAt,spread,square,square2,squeeze,squiz,src,stack,stackBy,stackCentre,stackLeft,stackRight,steady,steps:steps$2,stepsPerOctave,striate,struct,stut,stutWith,stutwith,sub,superimpose,sus,sustain,sustainpedal,swing,swingBy,sz,time:time$1,timeCat,timecat,toBipolar,tokenizeNote:tokenizeNote$2,tremdp,tremolo,tremolodepth,tremolorate,tremr,tri,tri2,triode,tsdelay,uid,undegrade,undegradeBy,unicodeToBase64,uniq,uniqsort,uniqsortr,unison,unit,v,val,valueToMidi:valueToMidi$1,velocity,vib,vibmod,vibrato,vmod,voice,vowel,waveloss,wchoose,wchooseCycles,when,wrandcat,xfade,xsdelay,zcrush,zdelay,zipWith,zmod,znoise,zoom,zoomArc,zoomarc,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),getDrawContext=(o="test-canvas",e)=>{let{contextType:a="2d",pixelated:l=!1,pixelRatio:u=window.devicePixelRatio}=e||{},f=document.querySelector("#"+o);if(!f){f=document.createElement("canvas"),f.id=o,f.width=window.innerWidth*u,f.height=window.innerHeight*u,f.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",l&&(f.style.imageRendering="pixelated"),document.body.prepend(f);let d;window.addEventListener("resize",()=>{d&&clearTimeout(d),d=setTimeout(()=>{f.width=window.innerWidth*u,f.height=window.innerHeight*u},200)})}return f.getContext(a)};let animationFrames={};function stopAnimationFrame(o){animationFrames[o]!==void 0&&(cancelAnimationFrame(animationFrames[o]),delete animationFrames[o])}function stopAllAnimations(){Object.keys(animationFrames).forEach(o=>stopAnimationFrame(o))}let memory={};Pattern$1.prototype.draw=function(o,e){if(typeof window>"u")return this;let{id:a=1,lookbehind:l=0,lookahead:u=0}=e,f=Math.max(getTime(),0);stopAnimationFrame(a),l=Math.abs(l),memory[a]=(memory[a]||[]).filter(b=>!b.isInFuture(f));let d=this.queryArc(f,f+u).filter(b=>b.hasOnset());memory[a]=memory[a].concat(d);let p;const g=()=>{const b=getTime(),O=b+u;memory[a]=memory[a].filter(M=>M.isInNearPast(l,b));let A=Math.max(p||O,O-1/10);const k=this.queryArc(A,O).filter(M=>M.hasOnset());memory[a]=memory[a].concat(k),p=O,o(memory[a],b,O,this),animationFrames[a]=requestAnimationFrame(g)};return animationFrames[a]=requestAnimationFrame(g),this};const cleanupDraw=(o=!0)=>{const e=getDrawContext();o&&e.clearRect(0,0,e.canvas.width,e.canvas.width),stopAllAnimations(),window.strudelScheduler&&clearInterval(window.strudelScheduler)};Pattern$1.prototype.onPaint=function(){return console.warn("[draw] onPaint was not overloaded. Some drawings might not work"),this};class Framer{constructor(e,a){this.onFrame=e,this.onError=a}start(){const e=this;let a=requestAnimationFrame(function l(u){try{e.onFrame(u)}catch(f){e.onError(f)}a=requestAnimationFrame(l)});e.cancel=()=>{cancelAnimationFrame(a)}}stop(){this.cancel&&this.cancel()}}class Drawer{constructor(e,a){this.visibleHaps=[],this.lastFrame=null,this.drawTime=a,this.framer=new Framer(()=>{if(!this.scheduler){console.warn("Drawer: no scheduler");return}const l=Math.abs(this.drawTime[0]),u=this.drawTime[1],f=this.scheduler.now()+u;if(this.lastFrame===null){this.lastFrame=f;return}const d=this.scheduler.pattern.queryArc(Math.max(this.lastFrame,f-1/10),f);this.lastFrame=f,this.visibleHaps=(this.visibleHaps||[]).filter(g=>g.endClipped>=f-l-u).concat(d.filter(g=>g.hasOnset()));const p=f-u;e(this.visibleHaps,p,this)},l=>{console.warn("draw error",l)})}setDrawTime(e){this.drawTime=e}invalidate(e=this.scheduler,a){if(!e)return;a=a??e.now(),this.scheduler=e;let[l,u]=this.drawTime;const[f,d]=[Math.max(a,0),a+u+.1];this.visibleHaps=this.visibleHaps.filter(g=>g.whole.begin<a);const p=e.pattern.queryArc(f,d);this.visibleHaps=this.visibleHaps.concat(p)}start(e){this.scheduler=e,this.invalidate(),this.framer.start()}stop(){this.framer&&this.framer.stop()}}function getComputedPropertyValue(o){return typeof window>"u"?"#fff":getComputedStyle(document.documentElement).getPropertyValue(o)}let theme$2={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function getTheme(){return theme$2}function setTheme(o){theme$2=o}let clearColor="#22222210";Pattern$1.prototype.animate=function({callback:o,sync:e=!1,smear:a=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const l=getDrawContext();let{clientWidth:u,clientHeight:f}=l.canvas;u*=window.devicePixelRatio,f*=window.devicePixelRatio;let d=a===0?"99":Number((1-a)*100).toFixed(0);d=d.length===1?`0${d}`:d,clearColor=`#200010${d}`;const p=g=>{let b;g=Math.round(g),b=this.slow(1e3).queryArc(g,g),l.fillStyle=clearColor,l.fillRect(0,0,u,f),b.forEach(O=>{let{x:A,y:k,w:M,h:B,s:N,r:L,angle:V=0,fill:se="darkseagreen"}=O.value;if(M*=u,B*=f,L!==void 0&&V!==void 0){const re=V*2*Math.PI,[z,oe]=[(u-M)/2,(f-B)/2];A=z+Math.cos(re)*L*z,k=oe+Math.sin(re)*L*oe}else A*=u-M,k*=f-B;const pe={...O.value,x:A,y:k,w:M,h:B};l.fillStyle=se,N==="rect"?l.fillRect(A,k,M,B):N==="ellipse"&&(l.beginPath(),l.ellipse(A+M/2,k+B/2,M/2,B/2,0,0,2*Math.PI),l.fill()),o&&o(l,pe,O)}),window.frame=requestAnimationFrame(p)};return window.frame=requestAnimationFrame(p),silence};const{x:x$1,y,w,h:h$2,angle,r,fill,smear}=createParams("x","y","w","h","angle","r","fill","smear"),rescale=register("rescale",function(o,e){return e.mul(x$1(o).w(o).y(o).h(o))}),moveXY=register("moveXY",function(o,e,a){return a.add(x$1(o).y(e))}),zoomIn=register("zoomIn",function(o,e){const a=pure(1).sub(o).div(2);return e.rescale(o).move(a,a)}),colorMap={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function convertColorToNumber(o){return o=o.toLowerCase(),o[0]==="#"?convertHexToNumber(o):colorMap[o]!==void 0?convertHexToNumber(colorMap[o]):-1}function convertHexToNumber(o){return o=o.slice(1),parseInt(o,16)}const scale$2=(o,e,a)=>o*(a-e)+e,getValue=o=>{let{value:e}=o;typeof o.value!="object"&&(e={value:e});let{note:a,n:l,freq:u,s:f}=e;if(u)return freqToMidi$2(u);if(a=a??l,typeof a=="string")try{return noteToMidi$1(a)}catch{return 0}return typeof a=="number"?a:f?"_"+f:e};Pattern$1.prototype.pianoroll=function(o={}){let{cycles:e=4,playhead:a=.5,overscan:l=0,hideNegative:u=!1,ctx:f=getDrawContext(),id:d=1}=o,p=-e*a,g=e*(1-a);const b=(O,A)=>(!u||O.whole.begin>=0)&&O.isWithinTime(A+p,A+g);return this.draw((O,A)=>{pianoroll({...o,time:A,ctx:f,haps:O.filter(k=>b(k,A))})},{lookbehind:p-l,lookahead:g+l,id:d}),this};function pianoroll({time:o,haps:e,cycles:a=4,playhead:l=.5,flipTime:u=0,flipValues:f=0,hideNegative:d=!1,inactive:p=getTheme().foreground,active:g=getTheme().foreground,background:b="transparent",smear:O=0,playheadColor:A=getTheme().foreground,minMidi:k=10,maxMidi:M=90,autorange:B=0,timeframe:N,fold:L=0,vertical:V=0,labels:se=!1,fill:pe=1,fillActive:re=!1,strokeActive:z=!0,stroke:oe,hideInactive:de=0,colorizeInactive:_e=1,fontFamily:Ce,ctx:be,id:xe}={}){const Oe=be.canvas.width,ke=be.canvas.height;let Ie=-a*l,Fe=a*(1-l);xe&&(e=e.filter(ot=>ot.hasTag(xe))),N&&(console.warn("timeframe is deprecated! use from/to instead"),Ie=0,Fe=N);const Be=V?ke:Oe,Ge=V?Oe:ke;let Ne=V?[Be,0]:[0,Be];const Ve=Fe-Ie,Ze=V?[0,Ge]:[Ge,0];let Je=M-k+1,$e=Ge/Je,ht=[];u&&Ne.reverse(),f&&Ze.reverse();const{min:xt,max:Et,values:et}=e.reduce(({min:ot,max:St,values:vt},Lt)=>{const pt=getValue(Lt);return{min:pt<ot?pt:ot,max:pt>St?pt:St,values:vt.includes(pt)?vt:[...vt,pt]}},{min:1/0,max:-1/0,values:[]});B&&(k=xt,M=Et,Je=M-k+1),ht=et.sort((ot,St)=>typeof ot=="number"&&typeof St=="number"?ot-St:typeof ot=="number"?1:String(ot).localeCompare(String(St))),$e=L?Ge/ht.length:Ge/Je,be.fillStyle=b,be.globalAlpha=1,O||(be.clearRect(0,0,Oe,ke),be.fillRect(0,0,Oe,ke)),e.forEach(ot=>{const St=ot.whole.begin<=o&&ot.endClipped>o;let vt=oe??(z&&St),Lt=!St&&pe||St&&re;if(de&&!St)return;let pt=ot.value?.color;g=pt||g,p=_e&&pt||p,pt=St?g:p,be.fillStyle=Lt?pt:"transparent",be.strokeStyle=pt;const{velocity:qt=1,gain:yt=1}=ot.value||{};be.globalAlpha=qt*yt;const wt=(ot.whole.begin-(u?Fe:Ie))/Ve,Wt=scale$2(wt,...Ne);let Mt=scale$2(ot.duration/Ve,0,Be);const tn=getValue(ot),Kt=L?ht.indexOf(tn)/ht.length:(Number(tn)-k)/Je,Ht=scale$2(Kt,...Ze);let Ut=0;const Nt=scale$2(o/Ve,...Ne);let zt;if(V?zt=[Ht+1-(f?$e:0),Be-Nt+Wt+Ut+1-(u?0:Mt),$e-2,Mt-2]:zt=[Wt-Nt+Ut+1-(u?Mt:0),Ht+1-(f?0:$e),Mt-2,$e-2],vt&&be.strokeRect(...zt),Lt&&be.fillRect(...zt),se){const Zt=ot.value.note??ot.value.s+(ot.value.n?`:${ot.value.n}`:""),{label:nt,activeLabel:kt}=ot.value,Pt=(St&&kt||nt)??Zt;let tt=V?Mt:$e*.75;be.font=`${tt}px ${Ce||"monospace"}`,be.fillStyle=Lt?"black":pt,be.textBaseline="top",be.fillText(Pt,...zt)}}),be.globalAlpha=1;const Le=scale$2(-Ie/Ve,...Ne);return be.strokeStyle=A,be.beginPath(),V?(be.moveTo(0,Le),be.lineTo(Ge,Le)):(be.moveTo(Le,0),be.lineTo(Le,Ge)),be.stroke(),this}function getDrawOptions(o,e={}){let[a,l]=o;a=Math.abs(a);const u=l+a,f=a/u;return{fold:1,...e,cycles:u,playhead:f}}const getPunchcardPainter=(o={})=>(e,a,l,u)=>pianoroll({ctx:e,time:a,haps:l,...getDrawOptions(u,o)});Pattern$1.prototype.punchcard=function(o){return this.onPaint(getPunchcardPainter(o))},Pattern$1.prototype.wordfall=function(o){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...o})};function drawPianoroll(o){const{drawTime:e,...a}=o;pianoroll({...getDrawOptions(e),...a})}function fromPolar(o,e,a,l){const u=(o-90)*Math.PI/180;return[a+Math.cos(u)*e,l+Math.sin(u)*e]}const xyOnSpiral=(o,e,a,l,u=0)=>fromPolar((o+u)*360,e*o,a,l);function spiralSegment(o){let{ctx:e,from:a=0,to:l=3,margin:u=50,cx:f=100,cy:d=100,rotate:p=0,thickness:g=u/2,color:b=getTheme().foreground,cap:O="round",stretch:A=1,fromOpacity:k=1,toOpacity:M=1}=o;a*=A,l*=A,p*=A,e.lineWidth=g,e.lineCap=O,e.strokeStyle=b,e.globalAlpha=k,e.beginPath();let[B,N]=xyOnSpiral(a,u,f,d,p);e.moveTo(B,N);const L=1/60;let V=a;for(;V<=l;){const[se,pe]=xyOnSpiral(V,u,f,d,p);e.globalAlpha=(V-a)/(l-a)*M,e.lineTo(se,pe),V+=L}e.stroke()}function drawSpiral(o){let{stretch:e=1,size:a=80,thickness:l=a/2,cap:u="butt",inset:f=3,playheadColor:d="#ffffff",playheadLength:p=.02,playheadThickness:g=l,padding:b=0,steady:O=1,activeColor:A=getTheme().foreground,inactiveColor:k=getTheme().gutterForeground,colorizeInactive:M=0,fade:B=!0,ctx:N,time:L,haps:V,drawTime:se,id:pe}=o;pe&&(V=V.filter(Oe=>Oe.hasTag(pe)));const[re,z]=[N.canvas.width,N.canvas.height];N.clearRect(0,0,re*2,z*2);const[oe,de]=[re/2,z/2],_e={margin:a/e,cx:oe,cy:de,stretch:e,cap:u,thickness:l},Ce={..._e,thickness:g,from:f-p,to:f,color:d},[be]=se,xe=O*L;V.forEach(Oe=>{const ke=Oe.whole.begin<=L&&Oe.endClipped>L,Ie=Oe.whole.begin-L+f,Fe=Oe.endClipped-L+f-b,Be=Oe.value?.color||A,Ge=M||ke?Be:k,Ne=B?1-Math.abs((Oe.whole.begin-L)/be):1;spiralSegment({ctx:N,..._e,from:Ie,to:Fe,rotate:xe,color:Ge,fromOpacity:Ne,toOpacity:Ne})}),spiralSegment({ctx:N,...Ce,rotate:xe})}Pattern$1.prototype.spiral=function(o={}){return this.onPaint((e,a,l,u)=>drawSpiral({ctx:e,time:a,haps:l,drawTime:u,...o}))};const c=midiToFreq$2(36),circlePos=(o,e,a,l)=>{l=l*Math.PI*2;const u=Math.sin(l)*a+o,f=Math.cos(l)*a+e;return[u,f]},freq2angle=(o,e)=>.5-Math.log2(o/e)%1;function pitchwheel({haps:o,ctx:e,id:a,hapcircles:l=1,circle:u=0,edo:f=12,root:d=c,thickness:p=3,hapRadius:g=6,mode:b="flake",margin:O=10}={}){const A=b==="polygon",k=b==="flake",M=e.canvas.width,B=e.canvas.height;e.clearRect(0,0,M,B);const N=getTheme().foreground,V=Math.min(M,B)/2-p/2-g-O,se=M/2,pe=B/2;a&&(o=o.filter(z=>z.hasTag(a))),e.strokeStyle=N,e.fillStyle=N,e.globalAlpha=1,e.lineWidth=p,u&&(e.beginPath(),e.arc(se,pe,V,0,2*Math.PI),e.stroke()),f&&(Array.from({length:f},(z,oe)=>{const de=freq2angle(d*Math.pow(2,oe/f),d),[_e,Ce]=circlePos(se,pe,V,de);e.beginPath(),e.arc(_e,Ce,g,0,2*Math.PI),e.fill()}),e.stroke());let re=[];e.lineWidth=g,o.forEach(z=>{let oe;try{oe=getFrequency(z)}catch{return}const de=freq2angle(oe,d),[_e,Ce]=circlePos(se,pe,V,de),be=z.value.color||N;e.strokeStyle=be,e.fillStyle=be;const{velocity:xe=1,gain:Oe=1}=z.value||{},ke=xe*Oe;e.globalAlpha=ke,re.push([_e,Ce,de,be,ke]),e.beginPath(),l&&(e.moveTo(_e+g,Ce),e.arc(_e,Ce,g,0,2*Math.PI),e.fill()),k&&(e.moveTo(se,pe),e.lineTo(_e,Ce)),e.stroke()}),e.strokeStyle=N,e.globalAlpha=1,A&&re.length&&(re=re.sort((z,oe)=>z[2]-oe[2]),e.beginPath(),e.moveTo(re[0][0],re[0][1]),re.forEach(([z,oe,de,_e,Ce])=>{e.strokeStyle=_e,e.globalAlpha=Ce,e.lineTo(z,oe)}),e.lineTo(re[0][0],re[0][1]),e.stroke())}Pattern$1.prototype.pitchwheel=function(o={}){let{ctx:e=getDrawContext(),id:a=1}=o;return this.tag(a).onPaint((l,u,f)=>pitchwheel({...o,time:u,ctx:e,haps:f.filter(d=>d.isActive(u)),id:a}))};const index$a=Object.freeze(Object.defineProperty({__proto__:null,Drawer,Framer,angle,cleanupDraw,colorMap,convertColorToNumber,convertHexToNumber,drawPianoroll,fill,getComputedPropertyValue,getDrawContext,getDrawOptions,getPunchcardPainter,getTheme,h:h$2,moveXY,pianoroll,pitchwheel,r,rescale,setTheme,smear,w,x:x$1,y,zoomIn},Symbol.toStringTag,{value:"Module"}));function peg$subclass(o,e){function a(){this.constructor=o}a.prototype=e.prototype,o.prototype=new a}function peg$SyntaxError(o,e,a,l){var u=Error.call(this,o);return Object.setPrototypeOf&&Object.setPrototypeOf(u,peg$SyntaxError.prototype),u.expected=e,u.found=a,u.location=l,u.name="SyntaxError",u}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(o,e,a){return a=a||" ",o.length>e?o:(e-=o.length,a+=a.repeat(e),o+a.slice(0,e))}peg$SyntaxError.prototype.format=function(o){var e="Error: "+this.message;if(this.location){var a=null,l;for(l=0;l<o.length;l++)if(o[l].source===this.location.source){a=o[l].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,f=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(u):u,d=this.location.source+":"+f.line+":"+f.column;if(a){var p=this.location.end,g=peg$padEnd("",f.line.toString().length," "),b=a[u.line-1],O=u.line===p.line?p.column:b.length+1,A=O-u.column||1;e+=`
 --> `+d+`
`+g+` |
`+f.line+" | "+b+`
`+g+" | "+peg$padEnd("",u.column-1," ")+peg$padEnd("",A,"^")}else e+=`
 at `+d}return e},peg$SyntaxError.buildMessage=function(o,e){var a={literal:function(b){return'"'+u(b.text)+'"'},class:function(b){var O=b.parts.map(function(A){return Array.isArray(A)?f(A[0])+"-"+f(A[1]):f(A)});return"["+(b.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(b){return b.description}};function l(b){return b.charCodeAt(0).toString(16).toUpperCase()}function u(b){return b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+l(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+l(O)})}function f(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+l(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+l(O)})}function d(b){return a[b.type](b)}function p(b){var O=b.map(d),A,k;if(O.sort(),O.length>0){for(A=1,k=1;A<O.length;A++)O[A-1]!==O[A]&&(O[k]=O[A],k++);O.length=k}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function g(b){return b?'"'+u(b)+'"':"end of input"}return"Expected "+p(o)+" but "+g(e)+" found."};function peg$parse(o,e){e=e!==void 0?e:{};var a={},l=e.grammarSource,u={start:ge},f=ge,d=".",p="-",g="+",b="0",O=",",A="|",k='"',M="'",B="#",N="^",L="_",V="[",se="]",pe="{",re="}",z="%",oe="<",de=">",_e="@",Ce="!",be="(",xe=")",Oe="/",ke="*",Ie="?",Fe=":",Be="..",Ge="struct",Ne="target",Ve="euclid",Ze="slow",Je="rotL",$e="rotR",ht="fast",xt="scale",Et="//",et="cat",Le="$",ot="setcps",St="setbpm",vt="hush",Lt=/^[1-9]/,pt=/^[eE]/,qt=/^[0-9]/,yt=/^[ \n\r\t\xA0]/,wt=/^[0-9~]/,Wt=/^[^\n]/,Mt=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,tn=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Kt=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05EF-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Ht=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Ut=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]/,Nt=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,zt=U("number"),Zt=E(".",!1),nt=F([["1","9"]],!1,!1),kt=F(["e","E"],!1,!1),Xe=E("-",!1),Pt=E("+",!1),tt=E("0",!1),un=F([["0","9"]],!1,!1),Ct=U("whitespace"),ut=F([" ",`
`,"\r","	"," "],!1,!1),nn=E(",",!1),jt=E("|",!1),At=E('"',!1),ct=E("'",!1),Rt=U('a letter, a number, "-", "#", ".", "^", "_"'),Qe=F([["0","9"],"~"],!1,!1),st=E("#",!1),Bt=E("^",!1),Gt=E("_",!1),Dt=E("[",!1),pn=E("]",!1),xn=E("{",!1),R=E("}",!1),q=E("%",!1),Z=E("<",!1),K=E(">",!1),he=E("@",!1),Ae=E("!",!1),Ee=E("(",!1),Te=E(")",!1),je=E("/",!1),it=E("*",!1),mt=E("?",!1),rn=E(":",!1),cn=E("..",!1),Vt=E("struct",!1),mn=E("target",!1),Xt=E("euclid",!1),Fn=E("slow",!1),Bn=E("rotL",!1),rr=E("rotR",!1),$n=E("fast",!1),sr=E("scale",!1),Tn=E("//",!1),In=F([`
`],!0,!1),Nn=E("cat",!1),kn=E("$",!1),lr=E("setcps",!1),sn=E("setbpm",!1),ur=E("hush",!1),Rn=F([["a","z"],"µ",["ß","ö"],["ø","ÿ"],"ā","ă","ą","ć","ĉ","ċ","č","ď","đ","ē","ĕ","ė","ę","ě","ĝ","ğ","ġ","ģ","ĥ","ħ","ĩ","ī","ĭ","į","ı","ĳ","ĵ",["ķ","ĸ"],"ĺ","ļ","ľ","ŀ","ł","ń","ņ",["ň","ŉ"],"ŋ","ō","ŏ","ő","œ","ŕ","ŗ","ř","ś","ŝ","ş","š","ţ","ť","ŧ","ũ","ū","ŭ","ů","ű","ų","ŵ","ŷ","ź","ż",["ž","ƀ"],"ƃ","ƅ","ƈ",["ƌ","ƍ"],"ƒ","ƕ",["ƙ","ƛ"],"ƞ","ơ","ƣ","ƥ","ƨ",["ƪ","ƫ"],"ƭ","ư","ƴ","ƶ",["ƹ","ƺ"],["ƽ","ƿ"],"ǆ","ǉ","ǌ","ǎ","ǐ","ǒ","ǔ","ǖ","ǘ","ǚ",["ǜ","ǝ"],"ǟ","ǡ","ǣ","ǥ","ǧ","ǩ","ǫ","ǭ",["ǯ","ǰ"],"ǳ","ǵ","ǹ","ǻ","ǽ","ǿ","ȁ","ȃ","ȅ","ȇ","ȉ","ȋ","ȍ","ȏ","ȑ","ȓ","ȕ","ȗ","ș","ț","ȝ","ȟ","ȡ","ȣ","ȥ","ȧ","ȩ","ȫ","ȭ","ȯ","ȱ",["ȳ","ȹ"],"ȼ",["ȿ","ɀ"],"ɂ","ɇ","ɉ","ɋ","ɍ",["ɏ","ʓ"],["ʕ","ʯ"],"ͱ","ͳ","ͷ",["ͻ","ͽ"],"ΐ",["ά","ώ"],["ϐ","ϑ"],["ϕ","ϗ"],"ϙ","ϛ","ϝ","ϟ","ϡ","ϣ","ϥ","ϧ","ϩ","ϫ","ϭ",["ϯ","ϳ"],"ϵ","ϸ",["ϻ","ϼ"],["а","џ"],"ѡ","ѣ","ѥ","ѧ","ѩ","ѫ","ѭ","ѯ","ѱ","ѳ","ѵ","ѷ","ѹ","ѻ","ѽ","ѿ","ҁ","ҋ","ҍ","ҏ","ґ","ғ","ҕ","җ","ҙ","қ","ҝ","ҟ","ҡ","ң","ҥ","ҧ","ҩ","ҫ","ҭ","ү","ұ","ҳ","ҵ","ҷ","ҹ","һ","ҽ","ҿ","ӂ","ӄ","ӆ","ӈ","ӊ","ӌ",["ӎ","ӏ"],"ӑ","ӓ","ӕ","ӗ","ә","ӛ","ӝ","ӟ","ӡ","ӣ","ӥ","ӧ","ө","ӫ","ӭ","ӯ","ӱ","ӳ","ӵ","ӷ","ӹ","ӻ","ӽ","ӿ","ԁ","ԃ","ԅ","ԇ","ԉ","ԋ","ԍ","ԏ","ԑ","ԓ","ԕ","ԗ","ԙ","ԛ","ԝ","ԟ","ԡ","ԣ","ԥ","ԧ","ԩ","ԫ","ԭ","ԯ",["ՠ","ֈ"],["ა","ჺ"],["ჽ","ჿ"],["ᏸ","ᏽ"],["ᲀ","ᲈ"],["ᴀ","ᴫ"],["ᵫ","ᵷ"],["ᵹ","ᶚ"],"ḁ","ḃ","ḅ","ḇ","ḉ","ḋ","ḍ","ḏ","ḑ","ḓ","ḕ","ḗ","ḙ","ḛ","ḝ","ḟ","ḡ","ḣ","ḥ","ḧ","ḩ","ḫ","ḭ","ḯ","ḱ","ḳ","ḵ","ḷ","ḹ","ḻ","ḽ","ḿ","ṁ","ṃ","ṅ","ṇ","ṉ","ṋ","ṍ","ṏ","ṑ","ṓ","ṕ","ṗ","ṙ","ṛ","ṝ","ṟ","ṡ","ṣ","ṥ","ṧ","ṩ","ṫ","ṭ","ṯ","ṱ","ṳ","ṵ","ṷ","ṹ","ṻ","ṽ","ṿ","ẁ","ẃ","ẅ","ẇ","ẉ","ẋ","ẍ","ẏ","ẑ","ẓ",["ẕ","ẝ"],"ẟ","ạ","ả","ấ","ầ","ẩ","ẫ","ậ","ắ","ằ","ẳ","ẵ","ặ","ẹ","ẻ","ẽ","ế","ề","ể","ễ","ệ","ỉ","ị","ọ","ỏ","ố","ồ","ổ","ỗ","ộ","ớ","ờ","ở","ỡ","ợ","ụ","ủ","ứ","ừ","ử","ữ","ự","ỳ","ỵ","ỷ","ỹ","ỻ","ỽ",["ỿ","ἇ"],["ἐ","ἕ"],["ἠ","ἧ"],["ἰ","ἷ"],["ὀ","ὅ"],["ὐ","ὗ"],["ὠ","ὧ"],["ὰ","ώ"],["ᾀ","ᾇ"],["ᾐ","ᾗ"],["ᾠ","ᾧ"],["ᾰ","ᾴ"],["ᾶ","ᾷ"],"ι",["ῂ","ῄ"],["ῆ","ῇ"],["ῐ","ΐ"],["ῖ","ῗ"],["ῠ","ῧ"],["ῲ","ῴ"],["ῶ","ῷ"],"ℊ",["ℎ","ℏ"],"ℓ","ℯ","ℴ","ℹ",["ℼ","ℽ"],["ⅆ","ⅉ"],"ⅎ","ↄ",["ⰰ","ⱞ"],"ⱡ",["ⱥ","ⱦ"],"ⱨ","ⱪ","ⱬ","ⱱ",["ⱳ","ⱴ"],["ⱶ","ⱻ"],"ⲁ","ⲃ","ⲅ","ⲇ","ⲉ","ⲋ","ⲍ","ⲏ","ⲑ","ⲓ","ⲕ","ⲗ","ⲙ","ⲛ","ⲝ","ⲟ","ⲡ","ⲣ","ⲥ","ⲧ","ⲩ","ⲫ","ⲭ","ⲯ","ⲱ","ⲳ","ⲵ","ⲷ","ⲹ","ⲻ","ⲽ","ⲿ","ⳁ","ⳃ","ⳅ","ⳇ","ⳉ","ⳋ","ⳍ","ⳏ","ⳑ","ⳓ","ⳕ","ⳗ","ⳙ","ⳛ","ⳝ","ⳟ","ⳡ",["ⳣ","ⳤ"],"ⳬ","ⳮ","ⳳ",["ⴀ","ⴥ"],"ⴧ","ⴭ","ꙁ","ꙃ","ꙅ","ꙇ","ꙉ","ꙋ","ꙍ","ꙏ","ꙑ","ꙓ","ꙕ","ꙗ","ꙙ","ꙛ","ꙝ","ꙟ","ꙡ","ꙣ","ꙥ","ꙧ","ꙩ","ꙫ","ꙭ","ꚁ","ꚃ","ꚅ","ꚇ","ꚉ","ꚋ","ꚍ","ꚏ","ꚑ","ꚓ","ꚕ","ꚗ","ꚙ","ꚛ","ꜣ","ꜥ","ꜧ","ꜩ","ꜫ","ꜭ",["ꜯ","ꜱ"],"ꜳ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ꜿ","ꝁ","ꝃ","ꝅ","ꝇ","ꝉ","ꝋ","ꝍ","ꝏ","ꝑ","ꝓ","ꝕ","ꝗ","ꝙ","ꝛ","ꝝ","ꝟ","ꝡ","ꝣ","ꝥ","ꝧ","ꝩ","ꝫ","ꝭ","ꝯ",["ꝱ","ꝸ"],"ꝺ","ꝼ","ꝿ","ꞁ","ꞃ","ꞅ","ꞇ","ꞌ","ꞎ","ꞑ",["ꞓ","ꞕ"],"ꞗ","ꞙ","ꞛ","ꞝ","ꞟ","ꞡ","ꞣ","ꞥ","ꞧ","ꞩ","ꞯ","ꞵ","ꞷ","ꞹ","ꟺ",["ꬰ","ꭚ"],["ꭠ","ꭥ"],["ꭰ","ꮿ"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],["ａ","ｚ"]],!1,!1),Ln=F([["ʰ","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ","ʹ","ͺ","ՙ","ـ",["ۥ","ۦ"],["ߴ","ߵ"],"ߺ","ࠚ","ࠤ","ࠨ","ॱ","ๆ","ໆ","ჼ","ៗ","ᡃ","ᪧ",["ᱸ","ᱽ"],["ᴬ","ᵪ"],"ᵸ",["ᶛ","ᶿ"],"ⁱ","ⁿ",["ₐ","ₜ"],["ⱼ","ⱽ"],"ⵯ","ⸯ","々",["〱","〵"],"〻",["ゝ","ゞ"],["ー","ヾ"],"ꀕ",["ꓸ","ꓽ"],"ꘌ","ꙿ",["ꚜ","ꚝ"],["ꜗ","ꜟ"],"ꝰ","ꞈ",["ꟸ","ꟹ"],"ꧏ","ꧦ","ꩰ","ꫝ",["ꫳ","ꫴ"],["ꭜ","ꭟ"],"ｰ",["ﾞ","ﾟ"]],!1,!1),cr=F(["ª","º","ƻ",["ǀ","ǃ"],"ʔ",["א","ת"],["ׯ","ײ"],["ؠ","ؿ"],["ف","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ࠀ","ࠕ"],["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॲ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๅ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["ᄀ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛱ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៜ",["ᠠ","ᡂ"],["ᡄ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱷ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ℵ","ℸ"],["ⴰ","ⵧ"],["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"〆","〼",["ぁ","ゖ"],"ゟ",["ァ","ヺ"],"ヿ",["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꀔ"],["ꀖ","ꒌ"],["ꓐ","ꓷ"],["ꔀ","ꘋ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],"ꙮ",["ꚠ","ꛥ"],"ꞏ","ꟷ",["ꟻ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],["ꧠ","ꧤ"],["ꧧ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩯ"],["ꩱ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫜ"],["ꫠ","ꫪ"],"ꫲ",["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꯀ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["ｦ","ｯ"],["ｱ","ﾝ"],["ﾠ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),Gn=F(["ǅ","ǈ","ǋ","ǲ",["ᾈ","ᾏ"],["ᾘ","ᾟ"],["ᾨ","ᾯ"],"ᾼ","ῌ","ῼ"],!1,!1),fr=F([["A","Z"],["À","Ö"],["Ø","Þ"],"Ā","Ă","Ą","Ć","Ĉ","Ċ","Č","Ď","Đ","Ē","Ĕ","Ė","Ę","Ě","Ĝ","Ğ","Ġ","Ģ","Ĥ","Ħ","Ĩ","Ī","Ĭ","Į","İ","Ĳ","Ĵ","Ķ","Ĺ","Ļ","Ľ","Ŀ","Ł","Ń","Ņ","Ň","Ŋ","Ō","Ŏ","Ő","Œ","Ŕ","Ŗ","Ř","Ś","Ŝ","Ş","Š","Ţ","Ť","Ŧ","Ũ","Ū","Ŭ","Ů","Ű","Ų","Ŵ","Ŷ",["Ÿ","Ź"],"Ż","Ž",["Ɓ","Ƃ"],"Ƅ",["Ɔ","Ƈ"],["Ɖ","Ƌ"],["Ǝ","Ƒ"],["Ɠ","Ɣ"],["Ɩ","Ƙ"],["Ɯ","Ɲ"],["Ɵ","Ơ"],"Ƣ","Ƥ",["Ʀ","Ƨ"],"Ʃ","Ƭ",["Ʈ","Ư"],["Ʊ","Ƴ"],"Ƶ",["Ʒ","Ƹ"],"Ƽ","Ǆ","Ǉ","Ǌ","Ǎ","Ǐ","Ǒ","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ǟ","Ǡ","Ǣ","Ǥ","Ǧ","Ǩ","Ǫ","Ǭ","Ǯ","Ǳ","Ǵ",["Ƕ","Ǹ"],"Ǻ","Ǽ","Ǿ","Ȁ","Ȃ","Ȅ","Ȇ","Ȉ","Ȋ","Ȍ","Ȏ","Ȑ","Ȓ","Ȕ","Ȗ","Ș","Ț","Ȝ","Ȟ","Ƞ","Ȣ","Ȥ","Ȧ","Ȩ","Ȫ","Ȭ","Ȯ","Ȱ","Ȳ",["Ⱥ","Ȼ"],["Ƚ","Ⱦ"],"Ɂ",["Ƀ","Ɇ"],"Ɉ","Ɋ","Ɍ","Ɏ","Ͱ","Ͳ","Ͷ","Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ώ"],["Α","Ρ"],["Σ","Ϋ"],"Ϗ",["ϒ","ϔ"],"Ϙ","Ϛ","Ϝ","Ϟ","Ϡ","Ϣ","Ϥ","Ϧ","Ϩ","Ϫ","Ϭ","Ϯ","ϴ","Ϸ",["Ϲ","Ϻ"],["Ͻ","Я"],"Ѡ","Ѣ","Ѥ","Ѧ","Ѩ","Ѫ","Ѭ","Ѯ","Ѱ","Ѳ","Ѵ","Ѷ","Ѹ","Ѻ","Ѽ","Ѿ","Ҁ","Ҋ","Ҍ","Ҏ","Ґ","Ғ","Ҕ","Җ","Ҙ","Қ","Ҝ","Ҟ","Ҡ","Ң","Ҥ","Ҧ","Ҩ","Ҫ","Ҭ","Ү","Ұ","Ҳ","Ҵ","Ҷ","Ҹ","Һ","Ҽ","Ҿ",["Ӏ","Ӂ"],"Ӄ","Ӆ","Ӈ","Ӊ","Ӌ","Ӎ","Ӑ","Ӓ","Ӕ","Ӗ","Ә","Ӛ","Ӝ","Ӟ","Ӡ","Ӣ","Ӥ","Ӧ","Ө","Ӫ","Ӭ","Ӯ","Ӱ","Ӳ","Ӵ","Ӷ","Ӹ","Ӻ","Ӽ","Ӿ","Ԁ","Ԃ","Ԅ","Ԇ","Ԉ","Ԋ","Ԍ","Ԏ","Ԑ","Ԓ","Ԕ","Ԗ","Ԙ","Ԛ","Ԝ","Ԟ","Ԡ","Ԣ","Ԥ","Ԧ","Ԩ","Ԫ","Ԭ","Ԯ",["Ա","Ֆ"],["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["Ꭰ","Ᏽ"],["Ა","Ჺ"],["Ჽ","Ჿ"],"Ḁ","Ḃ","Ḅ","Ḇ","Ḉ","Ḋ","Ḍ","Ḏ","Ḑ","Ḓ","Ḕ","Ḗ","Ḙ","Ḛ","Ḝ","Ḟ","Ḡ","Ḣ","Ḥ","Ḧ","Ḩ","Ḫ","Ḭ","Ḯ","Ḱ","Ḳ","Ḵ","Ḷ","Ḹ","Ḻ","Ḽ","Ḿ","Ṁ","Ṃ","Ṅ","Ṇ","Ṉ","Ṋ","Ṍ","Ṏ","Ṑ","Ṓ","Ṕ","Ṗ","Ṙ","Ṛ","Ṝ","Ṟ","Ṡ","Ṣ","Ṥ","Ṧ","Ṩ","Ṫ","Ṭ","Ṯ","Ṱ","Ṳ","Ṵ","Ṷ","Ṹ","Ṻ","Ṽ","Ṿ","Ẁ","Ẃ","Ẅ","Ẇ","Ẉ","Ẋ","Ẍ","Ẏ","Ẑ","Ẓ","Ẕ","ẞ","Ạ","Ả","Ấ","Ầ","Ẩ","Ẫ","Ậ","Ắ","Ằ","Ẳ","Ẵ","Ặ","Ẹ","Ẻ","Ẽ","Ế","Ề","Ể","Ễ","Ệ","Ỉ","Ị","Ọ","Ỏ","Ố","Ồ","Ổ","Ỗ","Ộ","Ớ","Ờ","Ở","Ỡ","Ợ","Ụ","Ủ","Ứ","Ừ","Ử","Ữ","Ự","Ỳ","Ỵ","Ỷ","Ỹ","Ỻ","Ỽ","Ỿ",["Ἀ","Ἇ"],["Ἐ","Ἕ"],["Ἠ","Ἧ"],["Ἰ","Ἷ"],["Ὀ","Ὅ"],"Ὑ","Ὓ","Ὕ","Ὗ",["Ὠ","Ὧ"],["Ᾰ","Ά"],["Ὲ","Ή"],["Ῐ","Ί"],["Ῠ","Ῥ"],["Ὸ","Ώ"],"ℂ","ℇ",["ℋ","ℍ"],["ℐ","ℒ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℰ","ℳ"],["ℾ","ℿ"],"ⅅ","Ↄ",["Ⰰ","Ⱞ"],"Ⱡ",["Ɫ","Ɽ"],"Ⱨ","Ⱪ","Ⱬ",["Ɑ","Ɒ"],"Ⱳ","Ⱶ",["Ȿ","Ⲁ"],"Ⲃ","Ⲅ","Ⲇ","Ⲉ","Ⲋ","Ⲍ","Ⲏ","Ⲑ","Ⲓ","Ⲕ","Ⲗ","Ⲙ","Ⲛ","Ⲝ","Ⲟ","Ⲡ","Ⲣ","Ⲥ","Ⲧ","Ⲩ","Ⲫ","Ⲭ","Ⲯ","Ⲱ","Ⲳ","Ⲵ","Ⲷ","Ⲹ","Ⲻ","Ⲽ","Ⲿ","Ⳁ","Ⳃ","Ⳅ","Ⳇ","Ⳉ","Ⳋ","Ⳍ","Ⳏ","Ⳑ","Ⳓ","Ⳕ","Ⳗ","Ⳙ","Ⳛ","Ⳝ","Ⳟ","Ⳡ","Ⳣ","Ⳬ","Ⳮ","Ⳳ","Ꙁ","Ꙃ","Ꙅ","Ꙇ","Ꙉ","Ꙋ","Ꙍ","Ꙏ","Ꙑ","Ꙓ","Ꙕ","Ꙗ","Ꙙ","Ꙛ","Ꙝ","Ꙟ","Ꙡ","Ꙣ","Ꙥ","Ꙧ","Ꙩ","Ꙫ","Ꙭ","Ꚁ","Ꚃ","Ꚅ","Ꚇ","Ꚉ","Ꚋ","Ꚍ","Ꚏ","Ꚑ","Ꚓ","Ꚕ","Ꚗ","Ꚙ","Ꚛ","Ꜣ","Ꜥ","Ꜧ","Ꜩ","Ꜫ","Ꜭ","Ꜯ","Ꜳ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ꜿ","Ꝁ","Ꝃ","Ꝅ","Ꝇ","Ꝉ","Ꝋ","Ꝍ","Ꝏ","Ꝑ","Ꝓ","Ꝕ","Ꝗ","Ꝙ","Ꝛ","Ꝝ","Ꝟ","Ꝡ","Ꝣ","Ꝥ","Ꝧ","Ꝩ","Ꝫ","Ꝭ","Ꝯ","Ꝺ","Ꝼ",["Ᵹ","Ꝿ"],"Ꞁ","Ꞃ","Ꞅ","Ꞇ","Ꞌ","Ɥ","Ꞑ","Ꞓ","Ꞗ","Ꞙ","Ꞛ","Ꞝ","Ꞟ","Ꞡ","Ꞣ","Ꞥ","Ꞧ","Ꞩ",["Ɦ","Ɪ"],["Ʞ","Ꞵ"],"Ꞷ","Ꞹ",["Ａ","Ｚ"]],!1,!1),Qn=F([["ᛮ","ᛰ"],["Ⅰ","ↂ"],["ↅ","ↈ"],"〇",["〡","〩"],["〸","〺"],["ꛦ","ꛯ"]],!1,!1),en=function(){return parseFloat(Mr())},hr=function(I){const ue=I.join("");return ue==="."||ue==="_"},dr=function(I){return new ki(I.join(""))},Un=function(I){return I},jn=function(I,ue){return I.arguments_.stepsPerCycle=ue,I},mr=function(I){return I},Vn=function(I){return I.arguments_.alignment="polymeter_slowcat",I},gr=function(I){return ue=>ue.options_.weight=(ue.options_.weight??1)+(I??2)-1},Wn=function(I){return ue=>{const me=(ue.options_.reps??1)+(I??2)-1;ue.options_.reps=me,ue.options_.ops=ue.options_.ops.filter(De=>De.type_!=="replicate"),ue.options_.ops.push({type_:"replicate",arguments_:{amount:me}}),ue.options_.weight=me}},yr=function(I,ue,me){return De=>De.options_.ops.push({type_:"bjorklund",arguments_:{pulse:I,step:ue,rotation:me}})},br=function(I){return ue=>ue.options_.ops.push({type_:"stretch",arguments_:{amount:I,type:"slow"}})},fn=function(I){return ue=>ue.options_.ops.push({type_:"stretch",arguments_:{amount:I,type:"fast"}})},bt=function(I){return ue=>ue.options_.ops.push({type_:"degradeBy",arguments_:{amount:I,seed:Tr++}})},_r=function(I){return ue=>ue.options_.ops.push({type_:"tail",arguments_:{element:I}})},vn=function(I){return ue=>ue.options_.ops.push({type_:"range",arguments_:{element:I}})},vr=function(I,ue){const me=new Ei(I,{ops:[],weight:1,reps:1});for(const De of ue)De(me);return me},bn=function(I,ue){return new er(ue,"fastcat",void 0,!!I)},Cr=function(I){return{alignment:"stack",list:I}},Cn=function(I){return{alignment:"rand",list:I,seed:Tr++}},Zn=function(I){return{alignment:"feet",list:I,seed:Tr++}},Xn=function(I,ue){return ue&&ue.list.length>0?new er([I,...ue.list],ue.alignment,ue.seed):I},Or=function(I,ue){return new er(ue?[I,...ue.list]:[I],"polymeter")},Pn=function(I){return I},Sr=function(I){return{name:"struct",args:{mini:I}}},En=function(I){return{name:"target",args:{name:I}}},On=function(I,ue,me){return{name:"bjorklund",args:{pulse:I,step:parseInt(ue)}}},qn=function(I){return{name:"stretch",args:{amount:I}}},Hn=function(I){return{name:"shift",args:{amount:"-"+I}}},zn=function(I){return{name:"shift",args:{amount:I}}},Yt=function(I){return{name:"stretch",args:{amount:"1/"+I}}},Ar=function(I){return{name:"scale",args:{scale:I.join("")}}},an=function(I,ue){return ue},Yn=function(I,ue){return ue.unshift(I),new er(ue,"slowcat")},wr=function(I){return I},xr=function(I,ue){return new Pi(I.name,I.args,ue)},kr=function(I){return I},Pr=function(I){return I},Er=function(I){return new $r("setcps",{value:I})},Jn=function(I){return new $r("setcps",{value:I/120/2})},Kn=function(){return new $r("hush")},fe=0,Ke=0,_n=[{line:1,column:1}],Jt=0,Sn=[],Ue=0,gn;if("startRule"in e){if(!(e.startRule in u))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');f=u[e.startRule]}function Mr(){return o.substring(Ke,fe)}function S(){return te(Ke,fe)}function E(I,ue){return{type:"literal",text:I,ignoreCase:ue}}function F(I,ue,me){return{type:"class",parts:I,inverted:ue,ignoreCase:me}}function $(){return{type:"end"}}function U(I){return{type:"other",description:I}}function j(I){var ue=_n[I],me;if(ue)return ue;for(me=I-1;!_n[me];)me--;for(ue=_n[me],ue={line:ue.line,column:ue.column};me<I;)o.charCodeAt(me)===10?(ue.line++,ue.column=1):ue.column++,me++;return _n[I]=ue,ue}function te(I,ue,me){var De=j(I),ze=j(ue),Ot={source:l,start:{offset:I,line:De.line,column:De.column},end:{offset:ue,line:ze.line,column:ze.column}};return me&&l&&typeof l.offset=="function"&&(Ot.start=l.offset(Ot.start),Ot.end=l.offset(Ot.end)),Ot}function ee(I){fe<Jt||(fe>Jt&&(Jt=fe,Sn=[]),Sn.push(I))}function le(I,ue,me){return new peg$SyntaxError(peg$SyntaxError.buildMessage(I,ue),I,ue,me)}function ge(){var I;return I=_i(),I}function ye(){var I,ue;return Ue++,I=fe,He(),ue=Me(),ue!==a?(Re(),ve(),Ke=I,I=en()):(fe=I,I=a),Ue--,I===a&&Ue===0&&ee(zt),I}function we(){var I;return o.charCodeAt(fe)===46?(I=d,fe++):(I=a,Ue===0&&ee(Zt)),I}function Pe(){var I;return Lt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(nt)),I}function Se(){var I;return pt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(kt)),I}function ve(){var I,ue,me,De,ze;if(I=fe,ue=Se(),ue!==a){if(me=He(),me===a&&(me=Ye()),me===a&&(me=null),De=[],ze=ft(),ze!==a)for(;ze!==a;)De.push(ze),ze=ft();else De=a;De!==a?(ue=[ue,me,De],I=ue):(fe=I,I=a)}else fe=I,I=a;return I}function Re(){var I,ue,me,De;if(I=fe,ue=we(),ue!==a){if(me=[],De=ft(),De!==a)for(;De!==a;)me.push(De),De=ft();else me=a;me!==a?(ue=[ue,me],I=ue):(fe=I,I=a)}else fe=I,I=a;return I}function Me(){var I,ue,me,De;if(I=qe(),I===a)if(I=fe,ue=Pe(),ue!==a){for(me=[],De=ft();De!==a;)me.push(De),De=ft();ue=[ue,me],I=ue}else fe=I,I=a;return I}function He(){var I;return o.charCodeAt(fe)===45?(I=p,fe++):(I=a,Ue===0&&ee(Xe)),I}function Ye(){var I;return o.charCodeAt(fe)===43?(I=g,fe++):(I=a,Ue===0&&ee(Pt)),I}function qe(){var I;return o.charCodeAt(fe)===48?(I=b,fe++):(I=a,Ue===0&&ee(tt)),I}function ft(){var I;return qt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(un)),I}function We(){var I,ue;for(Ue++,I=[],yt.test(o.charAt(fe))?(ue=o.charAt(fe),fe++):(ue=a,Ue===0&&ee(ut));ue!==a;)I.push(ue),yt.test(o.charAt(fe))?(ue=o.charAt(fe),fe++):(ue=a,Ue===0&&ee(ut));return Ue--,ue=a,Ue===0&&ee(Ct),I}function _t(){var I,ue,me,De;return I=fe,ue=We(),o.charCodeAt(fe)===44?(me=O,fe++):(me=a,Ue===0&&ee(nn)),me!==a?(De=We(),ue=[ue,me,De],I=ue):(fe=I,I=a),I}function $t(){var I,ue,me,De;return I=fe,ue=We(),o.charCodeAt(fe)===124?(me=A,fe++):(me=a,Ue===0&&ee(jt)),me!==a?(De=We(),ue=[ue,me,De],I=ue):(fe=I,I=a),I}function at(){var I,ue,me,De;return I=fe,ue=We(),o.charCodeAt(fe)===46?(me=d,fe++):(me=a,Ue===0&&ee(Zt)),me!==a?(De=We(),ue=[ue,me,De],I=ue):(fe=I,I=a),I}function rt(){var I;return o.charCodeAt(fe)===34?(I=k,fe++):(I=a,Ue===0&&ee(At)),I===a&&(o.charCodeAt(fe)===39?(I=M,fe++):(I=a,Ue===0&&ee(ct))),I}function It(){var I;return Ue++,I=vi(),I===a&&(wt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(Qe)),I===a&&(o.charCodeAt(fe)===45?(I=p,fe++):(I=a,Ue===0&&ee(Xe)),I===a&&(o.charCodeAt(fe)===35?(I=B,fe++):(I=a,Ue===0&&ee(st)),I===a&&(o.charCodeAt(fe)===46?(I=d,fe++):(I=a,Ue===0&&ee(Zt)),I===a&&(o.charCodeAt(fe)===94?(I=N,fe++):(I=a,Ue===0&&ee(Bt)),I===a&&(o.charCodeAt(fe)===95?(I=L,fe++):(I=a,Ue===0&&ee(Gt)))))))),Ue--,I===a&&Ue===0&&ee(Rt),I}function Ft(){var I,ue,me,De;if(I=fe,We(),ue=[],me=It(),me!==a)for(;me!==a;)ue.push(me),me=It();else ue=a;return ue!==a?(me=We(),Ke=fe,De=hr(ue),De?De=a:De=void 0,De!==a?(Ke=I,I=dr(ue)):(fe=I,I=a)):(fe=I,I=a),I}function Tt(){var I,ue,me,De;return I=fe,We(),o.charCodeAt(fe)===91?(ue=V,fe++):(ue=a,Ue===0&&ee(Dt)),ue!==a?(We(),me=Lr(),me!==a?(We(),o.charCodeAt(fe)===93?(De=se,fe++):(De=a,Ue===0&&ee(pn)),De!==a?(We(),Ke=I,I=Un(me)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function hn(){var I,ue,me,De,ze;return I=fe,We(),o.charCodeAt(fe)===123?(ue=pe,fe++):(ue=a,Ue===0&&ee(xn)),ue!==a?(We(),me=Gr(),me!==a?(We(),o.charCodeAt(fe)===125?(De=re,fe++):(De=a,Ue===0&&ee(R)),De!==a?(ze=Dr(),ze===a&&(ze=null),We(),Ke=I,I=jn(me,ze)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function Dr(){var I,ue,me;return I=fe,o.charCodeAt(fe)===37?(ue=z,fe++):(ue=a,Ue===0&&ee(q)),ue!==a?(me=dn(),me!==a?(Ke=I,I=mr(me)):(fe=I,I=a)):(fe=I,I=a),I}function Fr(){var I,ue,me,De;return I=fe,We(),o.charCodeAt(fe)===60?(ue=oe,fe++):(ue=a,Ue===0&&ee(Z)),ue!==a?(We(),me=Gr(),me!==a?(We(),o.charCodeAt(fe)===62?(De=de,fe++):(De=a,Ue===0&&ee(K)),De!==a?(We(),Ke=I,I=Vn(me)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function dn(){var I;return I=Ft(),I===a&&(I=Tt(),I===a&&(I=hn(),I===a&&(I=Fr()))),I}function Nr(){var I;return I=Wr(),I===a&&(I=Xr(),I===a&&(I=qr(),I===a&&(I=Hr(),I===a&&(I=Zr(),I===a&&(I=zr(),I===a&&(I=Yr(),I===a&&(I=Jr()))))))),I}function Wr(){var I,ue,me;return I=fe,We(),o.charCodeAt(fe)===64?(ue=_e,fe++):(ue=a,Ue===0&&ee(he)),ue===a&&(o.charCodeAt(fe)===95?(ue=L,fe++):(ue=a,Ue===0&&ee(Gt))),ue!==a?(me=ye(),me===a&&(me=null),Ke=I,I=gr(me)):(fe=I,I=a),I}function Zr(){var I,ue,me;return I=fe,We(),o.charCodeAt(fe)===33?(ue=Ce,fe++):(ue=a,Ue===0&&ee(Ae)),ue!==a?(me=ye(),me===a&&(me=null),Ke=I,I=Wn(me)):(fe=I,I=a),I}function Xr(){var I,ue,me,De,ze,Ot,ln;return I=fe,o.charCodeAt(fe)===40?(ue=be,fe++):(ue=a,Ue===0&&ee(Ee)),ue!==a?(We(),me=Mn(),me!==a?(We(),De=_t(),De!==a?(We(),ze=Mn(),ze!==a?(We(),_t(),We(),Ot=Mn(),Ot===a&&(Ot=null),We(),o.charCodeAt(fe)===41?(ln=xe,fe++):(ln=a,Ue===0&&ee(Te)),ln!==a?(Ke=I,I=yr(me,ze,Ot)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function qr(){var I,ue,me;return I=fe,o.charCodeAt(fe)===47?(ue=Oe,fe++):(ue=a,Ue===0&&ee(je)),ue!==a?(me=dn(),me!==a?(Ke=I,I=br(me)):(fe=I,I=a)):(fe=I,I=a),I}function Hr(){var I,ue,me;return I=fe,o.charCodeAt(fe)===42?(ue=ke,fe++):(ue=a,Ue===0&&ee(it)),ue!==a?(me=dn(),me!==a?(Ke=I,I=fn(me)):(fe=I,I=a)):(fe=I,I=a),I}function zr(){var I,ue,me;return I=fe,o.charCodeAt(fe)===63?(ue=Ie,fe++):(ue=a,Ue===0&&ee(mt)),ue!==a?(me=ye(),me===a&&(me=null),Ke=I,I=bt(me)):(fe=I,I=a),I}function Yr(){var I,ue,me;return I=fe,o.charCodeAt(fe)===58?(ue=Fe,fe++):(ue=a,Ue===0&&ee(rn)),ue!==a?(me=dn(),me!==a?(Ke=I,I=_r(me)):(fe=I,I=a)):(fe=I,I=a),I}function Jr(){var I,ue,me;return I=fe,o.substr(fe,2)===Be?(ue=Be,fe+=2):(ue=a,Ue===0&&ee(cn)),ue!==a?(me=dn(),me!==a?(Ke=I,I=vn(me)):(fe=I,I=a)):(fe=I,I=a),I}function Mn(){var I,ue,me,De;if(I=fe,ue=dn(),ue!==a){for(me=[],De=Nr();De!==a;)me.push(De),De=Nr();Ke=I,I=vr(ue,me)}else fe=I,I=a;return I}function yn(){var I,ue,me,De;if(I=fe,o.charCodeAt(fe)===94?(ue=N,fe++):(ue=a,Ue===0&&ee(Bt)),ue===a&&(ue=null),me=[],De=Mn(),De!==a)for(;De!==a;)me.push(De),De=Mn();else me=a;return me!==a?(Ke=I,I=bn(ue,me)):(fe=I,I=a),I}function Rr(){var I,ue,me,De,ze;if(I=fe,ue=[],me=fe,De=_t(),De!==a?(ze=yn(),ze!==a?me=ze:(fe=me,me=a)):(fe=me,me=a),me!==a)for(;me!==a;)ue.push(me),me=fe,De=_t(),De!==a?(ze=yn(),ze!==a?me=ze:(fe=me,me=a)):(fe=me,me=a);else ue=a;return ue!==a&&(Ke=I,ue=Cr(ue)),I=ue,I}function Kr(){var I,ue,me,De,ze;if(I=fe,ue=[],me=fe,De=$t(),De!==a?(ze=yn(),ze!==a?me=ze:(fe=me,me=a)):(fe=me,me=a),me!==a)for(;me!==a;)ue.push(me),me=fe,De=$t(),De!==a?(ze=yn(),ze!==a?me=ze:(fe=me,me=a)):(fe=me,me=a);else ue=a;return ue!==a&&(Ke=I,ue=Cn(ue)),I=ue,I}function ei(){var I,ue,me,De,ze;if(I=fe,ue=[],me=fe,De=at(),De!==a?(ze=yn(),ze!==a?me=ze:(fe=me,me=a)):(fe=me,me=a),me!==a)for(;me!==a;)ue.push(me),me=fe,De=at(),De!==a?(ze=yn(),ze!==a?me=ze:(fe=me,me=a)):(fe=me,me=a);else ue=a;return ue!==a&&(Ke=I,ue=Zn(ue)),I=ue,I}function Lr(){var I,ue,me;return I=fe,ue=yn(),ue!==a?(me=Rr(),me===a&&(me=Kr(),me===a&&(me=ei())),me===a&&(me=null),Ke=I,I=Xn(ue,me)):(fe=I,I=a),I}function Gr(){var I,ue,me;return I=fe,ue=yn(),ue!==a?(me=Rr(),me===a&&(me=null),Ke=I,I=Or(ue,me)):(fe=I,I=a),I}function ti(){var I,ue,me,De;return I=fe,We(),ue=rt(),ue!==a?(We(),me=Lr(),me!==a?(We(),De=rt(),De!==a?(Ke=I,I=Pn(me)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function ni(){var I;return I=ci(),I===a&&(I=ai(),I===a&&(I=ui(),I===a&&(I=ii(),I===a&&(I=si(),I===a&&(I=ri(),I===a&&(I=li(),I===a&&(I=oi()))))))),I}function ri(){var I,ue,me;return I=fe,o.substr(fe,6)===Ge?(ue=Ge,fe+=6):(ue=a,Ue===0&&ee(Vt)),ue!==a?(We(),me=An(),me!==a?(Ke=I,I=Sr(me)):(fe=I,I=a)):(fe=I,I=a),I}function ii(){var I,ue,me,De,ze;return I=fe,o.substr(fe,6)===Ne?(ue=Ne,fe+=6):(ue=a,Ue===0&&ee(mn)),ue!==a?(We(),me=rt(),me!==a?(De=Ft(),De!==a?(ze=rt(),ze!==a?(Ke=I,I=En(De)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function si(){var I,ue,me,De;return I=fe,o.substr(fe,6)===Ve?(ue=Ve,fe+=6):(ue=a,Ue===0&&ee(Xt)),ue!==a?(We(),me=Me(),me!==a?(We(),De=Me(),De!==a?(We(),Me(),Ke=I,I=On(me,De)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a),I}function ai(){var I,ue,me;return I=fe,o.substr(fe,4)===Ze?(ue=Ze,fe+=4):(ue=a,Ue===0&&ee(Fn)),ue!==a?(We(),me=ye(),me!==a?(Ke=I,I=qn(me)):(fe=I,I=a)):(fe=I,I=a),I}function oi(){var I,ue,me;return I=fe,o.substr(fe,4)===Je?(ue=Je,fe+=4):(ue=a,Ue===0&&ee(Bn)),ue!==a?(We(),me=ye(),me!==a?(Ke=I,I=Hn(me)):(fe=I,I=a)):(fe=I,I=a),I}function li(){var I,ue,me;return I=fe,o.substr(fe,4)===$e?(ue=$e,fe+=4):(ue=a,Ue===0&&ee(rr)),ue!==a?(We(),me=ye(),me!==a?(Ke=I,I=zn(me)):(fe=I,I=a)):(fe=I,I=a),I}function ui(){var I,ue,me;return I=fe,o.substr(fe,4)===ht?(ue=ht,fe+=4):(ue=a,Ue===0&&ee($n)),ue!==a?(We(),me=ye(),me!==a?(Ke=I,I=Yt(me)):(fe=I,I=a)):(fe=I,I=a),I}function ci(){var I,ue,me,De,ze;if(I=fe,o.substr(fe,5)===xt?(ue=xt,fe+=5):(ue=a,Ue===0&&ee(sr)),ue!==a)if(We(),me=rt(),me!==a){if(De=[],ze=It(),ze!==a)for(;ze!==a;)De.push(ze),ze=It();else De=a;De!==a?(ze=rt(),ze!==a?(Ke=I,I=Ar(De)):(fe=I,I=a)):(fe=I,I=a)}else fe=I,I=a;else fe=I,I=a;return I}function Br(){var I,ue,me,De;if(I=fe,o.substr(fe,2)===Et?(ue=Et,fe+=2):(ue=a,Ue===0&&ee(Tn)),ue!==a){for(me=[],Wt.test(o.charAt(fe))?(De=o.charAt(fe),fe++):(De=a,Ue===0&&ee(In));De!==a;)me.push(De),Wt.test(o.charAt(fe))?(De=o.charAt(fe),fe++):(De=a,Ue===0&&ee(In));ue=[ue,me],I=ue}else fe=I,I=a;return I}function fi(){var I,ue,me,De,ze,Ot,ln,wn;if(I=fe,o.substr(fe,3)===et?(ue=et,fe+=3):(ue=a,Ue===0&&ee(Nn)),ue!==a)if(We(),o.charCodeAt(fe)===91?(me=V,fe++):(me=a,Ue===0&&ee(Dt)),me!==a)if(We(),De=An(),De!==a){for(ze=[],Ot=fe,ln=_t(),ln!==a?(wn=An(),wn!==a?(Ke=Ot,Ot=an(De,wn)):(fe=Ot,Ot=a)):(fe=Ot,Ot=a);Ot!==a;)ze.push(Ot),Ot=fe,ln=_t(),ln!==a?(wn=An(),wn!==a?(Ke=Ot,Ot=an(De,wn)):(fe=Ot,Ot=a)):(fe=Ot,Ot=a);Ot=We(),o.charCodeAt(fe)===93?(ln=se,fe++):(ln=a,Ue===0&&ee(pn)),ln!==a?(Ke=I,I=Yn(De,ze)):(fe=I,I=a)}else fe=I,I=a;else fe=I,I=a;else fe=I,I=a;return I}function hi(){var I;return I=fi(),I===a&&(I=ti()),I}function An(){var I,ue,me,De,ze;if(I=fe,ue=hi(),ue!==a){for(We(),me=[],De=Br();De!==a;)me.push(De),De=Br();Ke=I,I=wr(ue)}else fe=I,I=a;return I===a&&(I=fe,ue=ni(),ue!==a?(We(),o.charCodeAt(fe)===36?(me=Le,fe++):(me=a,Ue===0&&ee(kn)),me!==a?(De=We(),ze=An(),ze!==a?(Ke=I,I=xr(ue,ze)):(fe=I,I=a)):(fe=I,I=a)):(fe=I,I=a)),I}function di(){var I,ue;return I=fe,ue=An(),ue!==a&&(Ke=I,ue=kr(ue)),I=ue,I===a&&(I=Br()),I}function pi(){var I;return I=di(),I}function mi(){var I,ue;return I=fe,We(),ue=gi(),ue===a&&(ue=yi(),ue===a&&(ue=bi())),ue!==a?(We(),Ke=I,I=Pr(ue)):(fe=I,I=a),I}function gi(){var I,ue,me;return I=fe,o.substr(fe,6)===ot?(ue=ot,fe+=6):(ue=a,Ue===0&&ee(lr)),ue!==a?(We(),me=ye(),me!==a?(Ke=I,I=Er(me)):(fe=I,I=a)):(fe=I,I=a),I}function yi(){var I,ue,me;return I=fe,o.substr(fe,6)===St?(ue=St,fe+=6):(ue=a,Ue===0&&ee(sn)),ue!==a?(We(),me=ye(),me!==a?(Ke=I,I=Jn(me)):(fe=I,I=a)):(fe=I,I=a),I}function bi(){var I,ue;return I=fe,o.substr(fe,4)===vt?(ue=vt,fe+=4):(ue=a,Ue===0&&ee(ur)),ue!==a&&(Ke=I,ue=Kn()),I=ue,I}function _i(){var I;return I=pi(),I===a&&(I=mi()),I}function vi(){var I;return I=wi(),I===a&&(I=Ci(),I===a&&(I=Ai(),I===a&&(I=Oi(),I===a&&(I=Si(),I===a&&(I=xi()))))),I}function Ci(){var I;return Mt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(Rn)),I}function Oi(){var I;return tn.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(Ln)),I}function Si(){var I;return Kt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(cr)),I}function Ai(){var I;return Ht.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(Gn)),I}function wi(){var I;return Ut.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(fr)),I}function xi(){var I;return Nt.test(o.charAt(fe))?(I=o.charAt(fe),fe++):(I=a,Ue===0&&ee(Qn)),I}var ki=function(I){this.type_="atom",this.source_=I,this.location_=S()},er=function(I,ue,me,De){this.type_="pattern",this.arguments_={alignment:ue,tactus:De},me!==void 0&&(this.arguments_.seed=me),this.source_=I},Pi=function(I,ue,me){this.type_=I,this.arguments_=ue,this.source_=me},Ei=function(I,ue){this.type_="element",this.source_=I,this.options_=ue,this.location_=S()},$r=function(I,ue){this.type_="command",this.name_=I,this.options_=ue},Tr=0;if(gn=f(),gn!==a&&fe===o.length)return gn;throw gn!==a&&fe<o.length&&ee($()),le(Sn,Jt<o.length?o.charAt(Jt):null,Jt<o.length?te(Jt,Jt+1):te(Jt,Jt))}const randOffset=3e-4,applyOptions=(o,e)=>(a,l)=>{const d=o.source_[l].options_?.ops;if(d)for(const p of d)switch(p.type_){case"stretch":{const g=["fast","slow"],{type:b,amount:O}=p.arguments_;if(!g.includes(b))throw new Error(`mini: stretch: type must be one of ${g.join("|")} but got ${b}`);a=reify(a)[b](e(O));break}case"replicate":{const{amount:g}=p.arguments_;a=reify(a),a=a._repeatCycles(g)._fast(g);break}case"bjorklund":{p.arguments_.rotation?a=a.euclidRot(e(p.arguments_.pulse),e(p.arguments_.step),e(p.arguments_.rotation)):a=a.euclid(e(p.arguments_.pulse),e(p.arguments_.step));break}case"degradeBy":{a=reify(a)._degradeByWith(rand.early(randOffset*p.arguments_.seed),p.arguments_.amount??.5);break}case"tail":{const g=e(p.arguments_.element);a=a.fmap(b=>O=>Array.isArray(b)?[...b,O]:[b,O]).appLeft(g);break}case"range":{const g=e(p.arguments_.element);a=reify(a);const b=(A,k,M=1)=>Array.from({length:Math.abs(k-A)/M+1},(B,N)=>A<k?A+N*M:A-N*M);a=((A,k)=>A.squeezeBind(M=>k.bind(B=>fastcat(...b(M,B)))))(a,g);break}default:console.warn(`operator "${p.type_}" not implemented`)}return a};function patternifyAST(o,e,a,l=0){a?.(o);const u=f=>patternifyAST(f,e,a,l);switch(o.type_){case"pattern":{const f=o.source_.map(b=>u(b)).map(applyOptions(o,u)),d=o.arguments_.alignment,p=f.filter(b=>b.__tactus_source);let g;switch(d){case"stack":{g=stack(...f),p.length&&(g.tactus=lcm(...p.map(b=>fraction$1(b.tactus))));break}case"polymeter_slowcat":{g=stack(...f.map(b=>b._slow(b.__weight))),p.length&&(g.tactus=lcm(...p.map(b=>fraction$1(b.tactus))));break}case"polymeter":{const b=o.arguments_.stepsPerCycle?u(o.arguments_.stepsPerCycle).fmap(A=>fraction$1(A)):pure(fraction$1(f.length>0?f[0].__weight:1)),O=f.map(A=>A.fast(b.fmap(k=>k.div(A.__weight))));g=stack(...O);break}case"rand":{g=chooseInWith(rand.early(randOffset*o.arguments_.seed).segment(1),f),p.length&&(g.tactus=lcm(...p.map(b=>fraction$1(b.tactus))));break}case"feet":{g=fastcat(...f);break}default:{if(o.source_.some(O=>!!O.options_?.weight)){const O=o.source_.reduce((A,k)=>A.add(k.options_?.weight||fraction$1(1)),fraction$1(0));g=timeCat(...o.source_.map((A,k)=>[A.options_?.weight||fraction$1(1),f[k]])),g.__weight=O,g.tactus=O,p.length&&(g.tactus=g.tactus.mul(lcm(...p.map(A=>fraction$1(A.tactus)))))}else g=sequence(...f),g.tactus=f.length;o.arguments_.tactus&&(g.__tactus_source=!0)}}return p.length&&(g.__tactus_source=!0),g}case"element":return u(o.source_);case"atom":{if(o.source_==="~"||o.source_==="-")return silence;if(!o.location_)return console.warn("no location for",o),o.source_;const f=isNaN(Number(o.source_))?o.source_:Number(o.source_);if(l===-1)return pure(f);const[d,p]=getLeafLocation(e,o,l);return pure(f).withLoc(d,p)}case"stretch":return u(o.source_).slow(u(o.arguments_.amount));default:return console.warn(`node type "${o.type_}" not implemented -> returning silence`),silence}}const getLeafLocation=(o,e,a=0)=>{const{start:l,end:u}=e.location_,f=o?.split("").slice(l.offset,u.offset).join(""),[d=0,p=0]=f?f.split(e.source_).map(g=>g.split("").filter(b=>b===" ").length):[];return[l.offset+d+a,u.offset-p+a]},mini2ast=(o,e=0,a=o)=>{try{return peg$parse(o)}catch(l){const u=[l.location.start.offset+e,l.location.end.offset+e],f=a.slice(0,u[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${f}: ${l.message}`)}},getLeaves=(o,e,a)=>{const l=mini2ast(o,e,a);let u=[];return patternifyAST(l,o,f=>{f.type_==="atom"&&u.push(f)},-1),u},getLeafLocations=(o,e=0,a)=>getLeaves(o,e,a).map(l=>getLeafLocation(o,l,e)),mini$1=(...o)=>{const e=o.map(a=>{const l=`"${a}"`,u=mini2ast(l);return patternifyAST(u,l)});return sequence(...e)},m$1=(o,e)=>{const a=`"${o}"`,l=mini2ast(a);return patternifyAST(l,a,null,e)},h$1=o=>{const e=mini2ast(o);return patternifyAST(e,o)};function minify(o){return typeof o=="string"?mini$1(o):reify(o)}function miniAllStrings(){setStringParser(mini$1)}const index$9=Object.freeze(Object.defineProperty({__proto__:null,SyntaxError:peg$SyntaxError,getLeafLocation,getLeafLocations,getLeaves,h:h$1,m:m$1,mini:mini$1,mini2ast,miniAllStrings,minify,parse:peg$parse,patternifyAST},Symbol.toStringTag,{value:"Module"}));var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(o,e){for(var a=65536,l=0;l<e.length;l+=2){if(a+=e[l],a>o)return!1;if(a+=e[l+1],a>=o)return!0}return!1}function isIdentifierStart(o,e){return o<65?o===36:o<91?!0:o<97?o===95:o<123?!0:o<=65535?o>=170&&nonASCIIidentifierStart.test(String.fromCharCode(o)):e===!1?!1:isInAstralSet(o,astralIdentifierStartCodes)}function isIdentifierChar(o,e){return o<48?o===36:o<58?!0:o<65?!1:o<91?!0:o<97?o===95:o<123?!0:o<=65535?o>=170&&nonASCIIidentifier.test(String.fromCharCode(o)):e===!1?!1:isInAstralSet(o,astralIdentifierStartCodes)||isInAstralSet(o,astralIdentifierCodes)}var TokenType=function(e,a){a===void 0&&(a={}),this.label=e,this.keyword=a.keyword,this.beforeExpr=!!a.beforeExpr,this.startsExpr=!!a.startsExpr,this.isLoop=!!a.isLoop,this.isAssign=!!a.isAssign,this.prefix=!!a.prefix,this.postfix=!!a.postfix,this.binop=a.binop||null,this.updateContext=null};function binop(o,e){return new TokenType(o,{beforeExpr:!0,binop:e})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords$2={};function kw(o,e){return e===void 0&&(e={}),e.keyword=o,keywords$2[o]=new TokenType(o,e)}var types$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(o){return o===10||o===13||o===8232||o===8233}function nextLineBreak(o,e,a){a===void 0&&(a=o.length);for(var l=e;l<a;l++){var u=o.charCodeAt(l);if(isNewLine(u))return l<a-1&&u===13&&o.charCodeAt(l+1)===10?l+2:l+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||function(o,e){return hasOwnProperty.call(o,e)},isArray=Array.isArray||function(o){return toString.call(o)==="[object Array]"},regexpCache=Object.create(null);function wordsRegexp(o){return regexpCache[o]||(regexpCache[o]=new RegExp("^(?:"+o.replace(/ /g,"|")+")$"))}function codePointToString(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function(e,a){this.line=e,this.column=a};Position.prototype.offset=function(e){return new Position(this.line,this.column+e)};var SourceLocation=function(e,a,l){this.start=a,this.end=l,e.sourceFile!==null&&(this.source=e.sourceFile)};function getLineInfo(o,e){for(var a=1,l=0;;){var u=nextLineBreak(o,l,e);if(u<0)return new Position(a,e-l);++a,l=u}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(o){var e={};for(var a in defaultOptions)e[a]=o&&hasOwn(o,a)?o[a]:defaultOptions[a];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!o||o.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),isArray(e.onToken)){var l=e.onToken;e.onToken=function(u){return l.push(u)}}return isArray(e.onComment)&&(e.onComment=pushComment(e,e.onComment)),e}function pushComment(o,e){return function(a,l,u,f,d,p){var g={type:a?"Block":"Line",value:l,start:u,end:f};o.locations&&(g.loc=new SourceLocation(this,d,p)),o.ranges&&(g.range=[u,f]),e.push(g)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(o,e){return SCOPE_FUNCTION|(o?SCOPE_ASYNC:0)|(e?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser$1=function(e,a,l){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=wordsRegexp(keywords$1[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var u="";e.allowReserved!==!0&&(u=reservedWords[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(u+=" await")),this.reservedWords=wordsRegexp(u);var f=(u?u+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(f),this.reservedWordsStrictBind=wordsRegexp(f+" "+reservedWords.strictBind),this.input=String(a),this.containsEsc=!1,l?(this.pos=l,this.lineStart=this.input.lastIndexOf(`
`,l-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser$1.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.canAwait.get=function(){for(var o=this.scopeStack.length-1;o>=0;o--){var e=this.scopeStack[o];if(e.inClassFieldInit||e.flags&SCOPE_CLASS_STATIC_BLOCK)return!1;if(e.flags&SCOPE_FUNCTION)return(e.flags&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var o=this.currentThisScope(),e=o.flags,a=o.inClassFieldInit;return(e&SCOPE_SUPER)>0||a||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){var o=this.currentThisScope(),e=o.flags,a=o.inClassFieldInit;return(e&(SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK))>0||a},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser$1.extend=function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];for(var l=this,u=0;u<e.length;u++)l=e[u](l);return l},Parser$1.parse=function(e,a){return new this(a,e).parse()},Parser$1.parseExpressionAt=function(e,a,l){var u=new this(l,e,a);return u.nextToken(),u.parseExpression()},Parser$1.tokenizer=function(e,a){return new this(a,e)},Object.defineProperties(Parser$1.prototype,prototypeAccessors);var pp$9=Parser$1.prototype,literal$1=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;pp$9.strictDirective=function(o){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=o,o+=skipWhiteSpace.exec(this.input)[0].length;var e=literal$1.exec(this.input.slice(o));if(!e)return!1;if((e[1]||e[2])==="use strict"){skipWhiteSpace.lastIndex=o+e[0].length;var a=skipWhiteSpace.exec(this.input),l=a.index+a[0].length,u=this.input.charAt(l);return u===";"||u==="}"||lineBreak.test(a[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(u)||u==="!"&&this.input.charAt(l+1)==="=")}o+=e[0].length,skipWhiteSpace.lastIndex=o,o+=skipWhiteSpace.exec(this.input)[0].length,this.input[o]===";"&&o++}},pp$9.eat=function(o){return this.type===o?(this.next(),!0):!1},pp$9.isContextual=function(o){return this.type===types$1.name&&this.value===o&&!this.containsEsc},pp$9.eatContextual=function(o){return this.isContextual(o)?(this.next(),!0):!1},pp$9.expectContextual=function(o){this.eatContextual(o)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1.eof||this.type===types$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(o,e){if(this.type===o)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},pp$9.expect=function(o){this.eat(o)||this.unexpected()},pp$9.unexpected=function(o){this.raise(o??this.start,"Unexpected token")};var DestructuringErrors=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(o,e){if(o){o.trailingComma>-1&&this.raiseRecoverable(o.trailingComma,"Comma is not permitted after the rest element");var a=e?o.parenthesizedAssign:o.parenthesizedBind;a>-1&&this.raiseRecoverable(a,e?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(o,e){if(!o)return!1;var a=o.shorthandAssign,l=o.doubleProto;if(!e)return a>=0||l>=0;a>=0&&this.raise(a,"Shorthand property assignments are valid only in destructuring patterns"),l>=0&&this.raiseRecoverable(l,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(o){return o.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(o.expression):o.type==="Identifier"||o.type==="MemberExpression"};var pp$8=Parser$1.prototype;pp$8.parseTopLevel=function(o){var e=Object.create(null);for(o.body||(o.body=[]);this.type!==types$1.eof;){var a=this.parseStatement(null,!0,e);o.body.push(a)}if(this.inModule)for(var l=0,u=Object.keys(this.undefinedExports);l<u.length;l+=1){var f=u[l];this.raiseRecoverable(this.undefinedExports[f].start,"Export '"+f+"' is not defined")}return this.adaptDirectivePrologue(o.body),this.next(),o.sourceType=this.options.sourceType,this.finishNode(o,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(o){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),a=this.pos+e[0].length,l=this.input.charCodeAt(a);if(l===91||l===92)return!0;if(o)return!1;if(l===123||l>55295&&l<56320)return!0;if(isIdentifierStart(l,!0)){for(var u=a+1;isIdentifierChar(l=this.input.charCodeAt(u),!0);)++u;if(l===92||l>55295&&l<56320)return!0;var f=this.input.slice(a,u);if(!keywordRelationalOperator.test(f))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var o=skipWhiteSpace.exec(this.input),e=this.pos+o[0].length,a;return!lineBreak.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(isIdentifierChar(a=this.input.charCodeAt(e+8))||a>55295&&a<56320))},pp$8.parseStatement=function(o,e,a){var l=this.type,u=this.startNode(),f;switch(this.isLet(o)&&(l=types$1._var,f="let"),l){case types$1._break:case types$1._continue:return this.parseBreakContinueStatement(u,l.keyword);case types$1._debugger:return this.parseDebuggerStatement(u);case types$1._do:return this.parseDoStatement(u);case types$1._for:return this.parseForStatement(u);case types$1._function:return o&&(this.strict||o!=="if"&&o!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(u,!1,!o);case types$1._class:return o&&this.unexpected(),this.parseClass(u,!0);case types$1._if:return this.parseIfStatement(u);case types$1._return:return this.parseReturnStatement(u);case types$1._switch:return this.parseSwitchStatement(u);case types$1._throw:return this.parseThrowStatement(u);case types$1._try:return this.parseTryStatement(u);case types$1._const:case types$1._var:return f=f||this.value,o&&f!=="var"&&this.unexpected(),this.parseVarStatement(u,f);case types$1._while:return this.parseWhileStatement(u);case types$1._with:return this.parseWithStatement(u);case types$1.braceL:return this.parseBlock(!0,u);case types$1.semi:return this.parseEmptyStatement(u);case types$1._export:case types$1._import:if(this.options.ecmaVersion>10&&l===types$1._import){skipWhiteSpace.lastIndex=this.pos;var d=skipWhiteSpace.exec(this.input),p=this.pos+d[0].length,g=this.input.charCodeAt(p);if(g===40||g===46)return this.parseExpressionStatement(u,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),l===types$1._import?this.parseImport(u):this.parseExport(u,a);default:if(this.isAsyncFunction())return o&&this.unexpected(),this.next(),this.parseFunctionStatement(u,!0,!o);var b=this.value,O=this.parseExpression();return l===types$1.name&&O.type==="Identifier"&&this.eat(types$1.colon)?this.parseLabeledStatement(u,b,O,o):this.parseExpressionStatement(u,O)}},pp$8.parseBreakContinueStatement=function(o,e){var a=e==="break";this.next(),this.eat(types$1.semi)||this.insertSemicolon()?o.label=null:this.type!==types$1.name?this.unexpected():(o.label=this.parseIdent(),this.semicolon());for(var l=0;l<this.labels.length;++l){var u=this.labels[l];if((o.label==null||u.name===o.label.name)&&(u.kind!=null&&(a||u.kind==="loop")||o.label&&a))break}return l===this.labels.length&&this.raise(o.start,"Unsyntactic "+e),this.finishNode(o,a?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(o){return this.next(),this.semicolon(),this.finishNode(o,"DebuggerStatement")},pp$8.parseDoStatement=function(o){return this.next(),this.labels.push(loopLabel),o.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1._while),o.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1.semi):this.semicolon(),this.finishNode(o,"DoWhileStatement")},pp$8.parseForStatement=function(o){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1.parenL),this.type===types$1.semi)return e>-1&&this.unexpected(e),this.parseFor(o,null);var a=this.isLet();if(this.type===types$1._var||this.type===types$1._const||a){var l=this.startNode(),u=a?"let":this.value;return this.next(),this.parseVar(l,!0,u),this.finishNode(l,"VariableDeclaration"),(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&l.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1._in?e>-1&&this.unexpected(e):o.await=e>-1),this.parseForIn(o,l)):(e>-1&&this.unexpected(e),this.parseFor(o,l))}var f=this.isContextual("let"),d=!1,p=new DestructuringErrors,g=this.parseExpression(e>-1?"await":!0,p);return this.type===types$1._in||(d=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===types$1._in?e>-1&&this.unexpected(e):o.await=e>-1),f&&d&&this.raise(g.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(g,!1,p),this.checkLValPattern(g),this.parseForIn(o,g)):(this.checkExpressionErrors(p,!0),e>-1&&this.unexpected(e),this.parseFor(o,g))},pp$8.parseFunctionStatement=function(o,e,a){return this.next(),this.parseFunction(o,FUNC_STATEMENT|(a?0:FUNC_HANGING_STATEMENT),!1,e)},pp$8.parseIfStatement=function(o){return this.next(),o.test=this.parseParenExpression(),o.consequent=this.parseStatement("if"),o.alternate=this.eat(types$1._else)?this.parseStatement("if"):null,this.finishNode(o,"IfStatement")},pp$8.parseReturnStatement=function(o){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1.semi)||this.insertSemicolon()?o.argument=null:(o.argument=this.parseExpression(),this.semicolon()),this.finishNode(o,"ReturnStatement")},pp$8.parseSwitchStatement=function(o){this.next(),o.discriminant=this.parseParenExpression(),o.cases=[],this.expect(types$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var e,a=!1;this.type!==types$1.braceR;)if(this.type===types$1._case||this.type===types$1._default){var l=this.type===types$1._case;e&&this.finishNode(e,"SwitchCase"),o.cases.push(e=this.startNode()),e.consequent=[],this.next(),l?e.test=this.parseExpression():(a&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),a=!0,e.test=null),this.expect(types$1.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(o,"SwitchStatement")},pp$8.parseThrowStatement=function(o){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),o.argument=this.parseExpression(),this.semicolon(),this.finishNode(o,"ThrowStatement")};var empty$1=[];pp$8.parseCatchClauseParam=function(){var o=this.parseBindingAtom(),e=o.type==="Identifier";return this.enterScope(e?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(o,e?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1.parenR),o},pp$8.parseTryStatement=function(o){if(this.next(),o.block=this.parseBlock(),o.handler=null,this.type===types$1._catch){var e=this.startNode();this.next(),this.eat(types$1.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),o.handler=this.finishNode(e,"CatchClause")}return o.finalizer=this.eat(types$1._finally)?this.parseBlock():null,!o.handler&&!o.finalizer&&this.raise(o.start,"Missing catch or finally clause"),this.finishNode(o,"TryStatement")},pp$8.parseVarStatement=function(o,e,a){return this.next(),this.parseVar(o,!1,e,a),this.semicolon(),this.finishNode(o,"VariableDeclaration")},pp$8.parseWhileStatement=function(o){return this.next(),o.test=this.parseParenExpression(),this.labels.push(loopLabel),o.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(o,"WhileStatement")},pp$8.parseWithStatement=function(o){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),o.object=this.parseParenExpression(),o.body=this.parseStatement("with"),this.finishNode(o,"WithStatement")},pp$8.parseEmptyStatement=function(o){return this.next(),this.finishNode(o,"EmptyStatement")},pp$8.parseLabeledStatement=function(o,e,a,l){for(var u=0,f=this.labels;u<f.length;u+=1){var d=f[u];d.name===e&&this.raise(a.start,"Label '"+e+"' is already declared")}for(var p=this.type.isLoop?"loop":this.type===types$1._switch?"switch":null,g=this.labels.length-1;g>=0;g--){var b=this.labels[g];if(b.statementStart===o.start)b.statementStart=this.start,b.kind=p;else break}return this.labels.push({name:e,kind:p,statementStart:this.start}),o.body=this.parseStatement(l?l.indexOf("label")===-1?l+"label":l:"label"),this.labels.pop(),o.label=a,this.finishNode(o,"LabeledStatement")},pp$8.parseExpressionStatement=function(o,e){return o.expression=e,this.semicolon(),this.finishNode(o,"ExpressionStatement")},pp$8.parseBlock=function(o,e,a){for(o===void 0&&(o=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(types$1.braceL),o&&this.enterScope(0);this.type!==types$1.braceR;){var l=this.parseStatement(null);e.body.push(l)}return a&&(this.strict=!1),this.next(),o&&this.exitScope(),this.finishNode(e,"BlockStatement")},pp$8.parseFor=function(o,e){return o.init=e,this.expect(types$1.semi),o.test=this.type===types$1.semi?null:this.parseExpression(),this.expect(types$1.semi),o.update=this.type===types$1.parenR?null:this.parseExpression(),this.expect(types$1.parenR),o.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(o,"ForStatement")},pp$8.parseForIn=function(o,e){var a=this.type===types$1._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!a||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(a?"for-in":"for-of")+" loop variable declaration may not have an initializer"),o.left=e,o.right=a?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1.parenR),o.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(o,a?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(o,e,a,l){for(o.declarations=[],o.kind=a;;){var u=this.startNode();if(this.parseVarId(u,a),this.eat(types$1.eq)?u.init=this.parseMaybeAssign(e):!l&&a==="const"&&!(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!l&&u.id.type!=="Identifier"&&!(e&&(this.type===types$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):u.init=null,o.declarations.push(this.finishNode(u,"VariableDeclarator")),!this.eat(types$1.comma))break}return o},pp$8.parseVarId=function(o,e){o.id=this.parseBindingAtom(),this.checkLValPattern(o.id,e==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(o,e,a,l,u){this.initFunction(o),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!l)&&(this.type===types$1.star&&e&FUNC_HANGING_STATEMENT&&this.unexpected(),o.generator=this.eat(types$1.star)),this.options.ecmaVersion>=8&&(o.async=!!l),e&FUNC_STATEMENT&&(o.id=e&FUNC_NULLABLE_ID&&this.type!==types$1.name?null:this.parseIdent(),o.id&&!(e&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(o.id,this.strict||o.generator||o.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(o.async,o.generator)),e&FUNC_STATEMENT||(o.id=this.type===types$1.name?this.parseIdent():null),this.parseFunctionParams(o),this.parseFunctionBody(o,a,!1,u),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.finishNode(o,e&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(o){this.expect(types$1.parenL),o.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(o,e){this.next();var a=this.strict;this.strict=!0,this.parseClassId(o,e),this.parseClassSuper(o);var l=this.enterClassBody(),u=this.startNode(),f=!1;for(u.body=[],this.expect(types$1.braceL);this.type!==types$1.braceR;){var d=this.parseClassElement(o.superClass!==null);d&&(u.body.push(d),d.type==="MethodDefinition"&&d.kind==="constructor"?(f&&this.raiseRecoverable(d.start,"Duplicate constructor in the same class"),f=!0):d.key&&d.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(l,d)&&this.raiseRecoverable(d.key.start,"Identifier '#"+d.key.name+"' has already been declared"))}return this.strict=a,this.next(),o.body=this.finishNode(u,"ClassBody"),this.exitClassBody(),this.finishNode(o,e?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(o){if(this.eat(types$1.semi))return null;var e=this.options.ecmaVersion,a=this.startNode(),l="",u=!1,f=!1,d="method",p=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(types$1.braceL))return this.parseClassStaticBlock(a),a;this.isClassElementNameStart()||this.type===types$1.star?p=!0:l="static"}if(a.static=p,!l&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1.star)&&!this.canInsertSemicolon()?f=!0:l="async"),!l&&(e>=9||!f)&&this.eat(types$1.star)&&(u=!0),!l&&!f&&!u){var g=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?d=g:l=g)}if(l?(a.computed=!1,a.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),a.key.name=l,this.finishNode(a.key,"Identifier")):this.parseClassElementName(a),e<13||this.type===types$1.parenL||d!=="method"||u||f){var b=!a.static&&checkKeyName(a,"constructor"),O=b&&o;b&&d!=="method"&&this.raise(a.key.start,"Constructor can't have get/set modifier"),a.kind=b?"constructor":d,this.parseClassMethod(a,u,f,O)}else this.parseClassField(a);return a},pp$8.isClassElementNameStart=function(){return this.type===types$1.name||this.type===types$1.privateId||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(o){this.type===types$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),o.computed=!1,o.key=this.parsePrivateIdent()):this.parsePropertyName(o)},pp$8.parseClassMethod=function(o,e,a,l){var u=o.key;o.kind==="constructor"?(e&&this.raise(u.start,"Constructor can't be a generator"),a&&this.raise(u.start,"Constructor can't be an async method")):o.static&&checkKeyName(o,"prototype")&&this.raise(u.start,"Classes may not have a static property named prototype");var f=o.value=this.parseMethod(e,a,l);return o.kind==="get"&&f.params.length!==0&&this.raiseRecoverable(f.start,"getter should have no params"),o.kind==="set"&&f.params.length!==1&&this.raiseRecoverable(f.start,"setter should have exactly one param"),o.kind==="set"&&f.params[0].type==="RestElement"&&this.raiseRecoverable(f.params[0].start,"Setter cannot use rest params"),this.finishNode(o,"MethodDefinition")},pp$8.parseClassField=function(o){if(checkKeyName(o,"constructor")?this.raise(o.key.start,"Classes can't have a field named 'constructor'"):o.static&&checkKeyName(o,"prototype")&&this.raise(o.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1.eq)){var e=this.currentThisScope(),a=e.inClassFieldInit;e.inClassFieldInit=!0,o.value=this.parseMaybeAssign(),e.inClassFieldInit=a}else o.value=null;return this.semicolon(),this.finishNode(o,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(o){o.body=[];var e=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1.braceR;){var a=this.parseStatement(null);o.body.push(a)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(o,"StaticBlock")},pp$8.parseClassId=function(o,e){this.type===types$1.name?(o.id=this.parseIdent(),e&&this.checkLValSimple(o.id,BIND_LEXICAL,!1)):(e===!0&&this.unexpected(),o.id=null)},pp$8.parseClassSuper=function(o){o.superClass=this.eat(types$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var o={declared:Object.create(null),used:[]};return this.privateNameStack.push(o),o.declared},pp$8.exitClassBody=function(){var o=this.privateNameStack.pop(),e=o.declared,a=o.used;if(this.options.checkPrivateFields)for(var l=this.privateNameStack.length,u=l===0?null:this.privateNameStack[l-1],f=0;f<a.length;++f){var d=a[f];hasOwn(e,d.name)||(u?u.used.push(d):this.raiseRecoverable(d.start,"Private field '#"+d.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(o,e){var a=e.key.name,l=o[a],u="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(u=(e.static?"s":"i")+e.kind),l==="iget"&&u==="iset"||l==="iset"&&u==="iget"||l==="sget"&&u==="sset"||l==="sset"&&u==="sget"?(o[a]="true",!1):l?!0:(o[a]=u,!1)}function checkKeyName(o,e){var a=o.computed,l=o.key;return!a&&(l.type==="Identifier"&&l.name===e||l.type==="Literal"&&l.value===e)}pp$8.parseExportAllDeclaration=function(o,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(o.exported=this.parseModuleExportName(),this.checkExport(e,o.exported,this.lastTokStart)):o.exported=null),this.expectContextual("from"),this.type!==types$1.string&&this.unexpected(),o.source=this.parseExprAtom(),this.semicolon(),this.finishNode(o,"ExportAllDeclaration")},pp$8.parseExport=function(o,e){if(this.next(),this.eat(types$1.star))return this.parseExportAllDeclaration(o,e);if(this.eat(types$1._default))return this.checkExport(e,"default",this.lastTokStart),o.declaration=this.parseExportDefaultDeclaration(),this.finishNode(o,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())o.declaration=this.parseExportDeclaration(o),o.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,o.declaration.declarations):this.checkExport(e,o.declaration.id,o.declaration.id.start),o.specifiers=[],o.source=null;else{if(o.declaration=null,o.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==types$1.string&&this.unexpected(),o.source=this.parseExprAtom();else{for(var a=0,l=o.specifiers;a<l.length;a+=1){var u=l[a];this.checkUnreserved(u.local),this.checkLocalExport(u.local),u.local.type==="Literal"&&this.raise(u.local.start,"A string literal cannot be used as an exported binding without `from`.")}o.source=null}this.semicolon()}return this.finishNode(o,"ExportNamedDeclaration")},pp$8.parseExportDeclaration=function(o){return this.parseStatement(null)},pp$8.parseExportDefaultDeclaration=function(){var o;if(this.type===types$1._function||(o=this.isAsyncFunction())){var e=this.startNode();return this.next(),o&&this.next(),this.parseFunction(e,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,o)}else if(this.type===types$1._class){var a=this.startNode();return this.parseClass(a,"nullableID")}else{var l=this.parseMaybeAssign();return this.semicolon(),l}},pp$8.checkExport=function(o,e,a){o&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),hasOwn(o,e)&&this.raiseRecoverable(a,"Duplicate export '"+e+"'"),o[e]=!0)},pp$8.checkPatternExport=function(o,e){var a=e.type;if(a==="Identifier")this.checkExport(o,e,e.start);else if(a==="ObjectPattern")for(var l=0,u=e.properties;l<u.length;l+=1){var f=u[l];this.checkPatternExport(o,f)}else if(a==="ArrayPattern")for(var d=0,p=e.elements;d<p.length;d+=1){var g=p[d];g&&this.checkPatternExport(o,g)}else a==="Property"?this.checkPatternExport(o,e.value):a==="AssignmentPattern"?this.checkPatternExport(o,e.left):a==="RestElement"&&this.checkPatternExport(o,e.argument)},pp$8.checkVariableExport=function(o,e){if(o)for(var a=0,l=e;a<l.length;a+=1){var u=l[a];this.checkPatternExport(o,u.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifier=function(o){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(o,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},pp$8.parseExportSpecifiers=function(o){var e=[],a=!0;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(a)a=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;e.push(this.parseExportSpecifier(o))}return e},pp$8.parseImport=function(o){return this.next(),this.type===types$1.string?(o.specifiers=empty$1,o.source=this.parseExprAtom()):(o.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),o.source=this.type===types$1.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(o,"ImportDeclaration")},pp$8.parseImportSpecifier=function(){var o=this.startNode();return o.imported=this.parseModuleExportName(),this.eatContextual("as")?o.local=this.parseIdent():(this.checkUnreserved(o.imported),o.local=o.imported),this.checkLValSimple(o.local,BIND_LEXICAL),this.finishNode(o,"ImportSpecifier")},pp$8.parseImportDefaultSpecifier=function(){var o=this.startNode();return o.local=this.parseIdent(),this.checkLValSimple(o.local,BIND_LEXICAL),this.finishNode(o,"ImportDefaultSpecifier")},pp$8.parseImportNamespaceSpecifier=function(){var o=this.startNode();return this.next(),this.expectContextual("as"),o.local=this.parseIdent(),this.checkLValSimple(o.local,BIND_LEXICAL),this.finishNode(o,"ImportNamespaceSpecifier")},pp$8.parseImportSpecifiers=function(){var o=[],e=!0;if(this.type===types$1.name&&(o.push(this.parseImportDefaultSpecifier()),!this.eat(types$1.comma)))return o;if(this.type===types$1.star)return o.push(this.parseImportNamespaceSpecifier()),o;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(e)e=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;o.push(this.parseImportSpecifier())}return o},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1.string){var o=this.parseLiteral(this.value);return loneSurrogate.test(o.value)&&this.raise(o.start,"An export name cannot include a lone surrogate."),o}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(o){for(var e=0;e<o.length&&this.isDirectiveCandidate(o[e]);++e)o[e].directive=o[e].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(o){return this.options.ecmaVersion>=5&&o.type==="ExpressionStatement"&&o.expression.type==="Literal"&&typeof o.expression.value=="string"&&(this.input[o.start]==='"'||this.input[o.start]==="'")};var pp$7=Parser$1.prototype;pp$7.toAssignable=function(o,e,a){if(this.options.ecmaVersion>=6&&o)switch(o.type){case"Identifier":this.inAsync&&o.name==="await"&&this.raise(o.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":o.type="ObjectPattern",a&&this.checkPatternErrors(a,!0);for(var l=0,u=o.properties;l<u.length;l+=1){var f=u[l];this.toAssignable(f,e),f.type==="RestElement"&&(f.argument.type==="ArrayPattern"||f.argument.type==="ObjectPattern")&&this.raise(f.argument.start,"Unexpected token")}break;case"Property":o.kind!=="init"&&this.raise(o.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(o.value,e);break;case"ArrayExpression":o.type="ArrayPattern",a&&this.checkPatternErrors(a,!0),this.toAssignableList(o.elements,e);break;case"SpreadElement":o.type="RestElement",this.toAssignable(o.argument,e),o.argument.type==="AssignmentPattern"&&this.raise(o.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":o.operator!=="="&&this.raise(o.left.end,"Only '=' operator can be used for specifying default value."),o.type="AssignmentPattern",delete o.operator,this.toAssignable(o.left,e);break;case"ParenthesizedExpression":this.toAssignable(o.expression,e,a);break;case"ChainExpression":this.raiseRecoverable(o.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(o.start,"Assigning to rvalue")}else a&&this.checkPatternErrors(a,!0);return o},pp$7.toAssignableList=function(o,e){for(var a=o.length,l=0;l<a;l++){var u=o[l];u&&this.toAssignable(u,e)}if(a){var f=o[a-1];this.options.ecmaVersion===6&&e&&f&&f.type==="RestElement"&&f.argument.type!=="Identifier"&&this.unexpected(f.argument.start)}return o},pp$7.parseSpread=function(o){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,o),this.finishNode(e,"SpreadElement")},pp$7.parseRestBinding=function(){var o=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1.name&&this.unexpected(),o.argument=this.parseBindingAtom(),this.finishNode(o,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1.bracketL:var o=this.startNode();return this.next(),o.elements=this.parseBindingList(types$1.bracketR,!0,!0),this.finishNode(o,"ArrayPattern");case types$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(o,e,a,l){for(var u=[],f=!0;!this.eat(o);)if(f?f=!1:this.expect(types$1.comma),e&&this.type===types$1.comma)u.push(null);else{if(a&&this.afterTrailingComma(o))break;if(this.type===types$1.ellipsis){var d=this.parseRestBinding();this.parseBindingListItem(d),u.push(d),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(o);break}else u.push(this.parseAssignableListItem(l))}return u},pp$7.parseAssignableListItem=function(o){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e},pp$7.parseBindingListItem=function(o){return o},pp$7.parseMaybeDefault=function(o,e,a){if(a=a||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1.eq))return a;var l=this.startNodeAt(o,e);return l.left=a,l.right=this.parseMaybeAssign(),this.finishNode(l,"AssignmentPattern")},pp$7.checkLValSimple=function(o,e,a){e===void 0&&(e=BIND_NONE);var l=e!==BIND_NONE;switch(o.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(o.name)&&this.raiseRecoverable(o.start,(l?"Binding ":"Assigning to ")+o.name+" in strict mode"),l&&(e===BIND_LEXICAL&&o.name==="let"&&this.raiseRecoverable(o.start,"let is disallowed as a lexically bound name"),a&&(hasOwn(a,o.name)&&this.raiseRecoverable(o.start,"Argument name clash"),a[o.name]=!0),e!==BIND_OUTSIDE&&this.declareName(o.name,e,o.start));break;case"ChainExpression":this.raiseRecoverable(o.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":l&&this.raiseRecoverable(o.start,"Binding member expression");break;case"ParenthesizedExpression":return l&&this.raiseRecoverable(o.start,"Binding parenthesized expression"),this.checkLValSimple(o.expression,e,a);default:this.raise(o.start,(l?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(o,e,a){switch(e===void 0&&(e=BIND_NONE),o.type){case"ObjectPattern":for(var l=0,u=o.properties;l<u.length;l+=1){var f=u[l];this.checkLValInnerPattern(f,e,a)}break;case"ArrayPattern":for(var d=0,p=o.elements;d<p.length;d+=1){var g=p[d];g&&this.checkLValInnerPattern(g,e,a)}break;default:this.checkLValSimple(o,e,a)}},pp$7.checkLValInnerPattern=function(o,e,a){switch(e===void 0&&(e=BIND_NONE),o.type){case"Property":this.checkLValInnerPattern(o.value,e,a);break;case"AssignmentPattern":this.checkLValPattern(o.left,e,a);break;case"RestElement":this.checkLValPattern(o.argument,e,a);break;default:this.checkLValPattern(o,e,a)}};var TokContext=function(e,a,l,u,f){this.token=e,this.isExpr=!!a,this.preserveSpace=!!l,this.override=u,this.generator=!!f},types$2={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(o){return o.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser$1.prototype;pp$6.initialContext=function(){return[types$2.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(o){var e=this.curContext();return e===types$2.f_expr||e===types$2.f_stat?!0:o===types$1.colon&&(e===types$2.b_stat||e===types$2.b_expr)?!e.isExpr:o===types$1._return||o===types$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):o===types$1._else||o===types$1.semi||o===types$1.eof||o===types$1.parenR||o===types$1.arrow?!0:o===types$1.braceL?e===types$2.b_stat:o===types$1._var||o===types$1._const||o===types$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var o=this.context.length-1;o>=1;o--){var e=this.context[o];if(e.token==="function")return e.generator}return!1},pp$6.updateContext=function(o){var e,a=this.type;a.keyword&&o===types$1.dot?this.exprAllowed=!1:(e=a.updateContext)?e.call(this,o):this.exprAllowed=a.beforeExpr},pp$6.overrideContext=function(o){this.curContext()!==o&&(this.context[this.context.length-1]=o)},types$1.parenR.updateContext=types$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var o=this.context.pop();o===types$2.b_stat&&this.curContext().token==="function"&&(o=this.context.pop()),this.exprAllowed=!o.isExpr},types$1.braceL.updateContext=function(o){this.context.push(this.braceIsBlock(o)?types$2.b_stat:types$2.b_expr),this.exprAllowed=!0},types$1.dollarBraceL.updateContext=function(){this.context.push(types$2.b_tmpl),this.exprAllowed=!0},types$1.parenL.updateContext=function(o){var e=o===types$1._if||o===types$1._for||o===types$1._with||o===types$1._while;this.context.push(e?types$2.p_stat:types$2.p_expr),this.exprAllowed=!0},types$1.incDec.updateContext=function(){},types$1._function.updateContext=types$1._class.updateContext=function(o){o.beforeExpr&&o!==types$1._else&&!(o===types$1.semi&&this.curContext()!==types$2.p_stat)&&!(o===types$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((o===types$1.colon||o===types$1.braceL)&&this.curContext()===types$2.b_stat)?this.context.push(types$2.f_expr):this.context.push(types$2.f_stat),this.exprAllowed=!1},types$1.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},types$1.backQuote.updateContext=function(){this.curContext()===types$2.q_tmpl?this.context.pop():this.context.push(types$2.q_tmpl),this.exprAllowed=!1},types$1.star.updateContext=function(o){if(o===types$1._function){var e=this.context.length-1;this.context[e]===types$2.f_expr?this.context[e]=types$2.f_expr_gen:this.context[e]=types$2.f_gen}this.exprAllowed=!0},types$1.name.updateContext=function(o){var e=!1;this.options.ecmaVersion>=6&&o!==types$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var pp$5=Parser$1.prototype;pp$5.checkPropClash=function(o,e,a){if(!(this.options.ecmaVersion>=9&&o.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(o.computed||o.method||o.shorthand))){var l=o.key,u;switch(l.type){case"Identifier":u=l.name;break;case"Literal":u=String(l.value);break;default:return}var f=o.kind;if(this.options.ecmaVersion>=6){u==="__proto__"&&f==="init"&&(e.proto&&(a?a.doubleProto<0&&(a.doubleProto=l.start):this.raiseRecoverable(l.start,"Redefinition of __proto__ property")),e.proto=!0);return}u="$"+u;var d=e[u];if(d){var p;f==="init"?p=this.strict&&d.init||d.get||d.set:p=d.init||d[f],p&&this.raiseRecoverable(l.start,"Redefinition of property")}else d=e[u]={init:!1,get:!1,set:!1};d[f]=!0}},pp$5.parseExpression=function(o,e){var a=this.start,l=this.startLoc,u=this.parseMaybeAssign(o,e);if(this.type===types$1.comma){var f=this.startNodeAt(a,l);for(f.expressions=[u];this.eat(types$1.comma);)f.expressions.push(this.parseMaybeAssign(o,e));return this.finishNode(f,"SequenceExpression")}return u},pp$5.parseMaybeAssign=function(o,e,a){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(o);this.exprAllowed=!1}var l=!1,u=-1,f=-1,d=-1;e?(u=e.parenthesizedAssign,f=e.trailingComma,d=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new DestructuringErrors,l=!0);var p=this.start,g=this.startLoc;(this.type===types$1.parenL||this.type===types$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=o==="await");var b=this.parseMaybeConditional(o,e);if(a&&(b=a.call(this,b,p,g)),this.type.isAssign){var O=this.startNodeAt(p,g);return O.operator=this.value,this.type===types$1.eq&&(b=this.toAssignable(b,!1,e)),l||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=b.start&&(e.shorthandAssign=-1),this.type===types$1.eq?this.checkLValPattern(b):this.checkLValSimple(b),O.left=b,this.next(),O.right=this.parseMaybeAssign(o),d>-1&&(e.doubleProto=d),this.finishNode(O,"AssignmentExpression")}else l&&this.checkExpressionErrors(e,!0);return u>-1&&(e.parenthesizedAssign=u),f>-1&&(e.trailingComma=f),b},pp$5.parseMaybeConditional=function(o,e){var a=this.start,l=this.startLoc,u=this.parseExprOps(o,e);if(this.checkExpressionErrors(e))return u;if(this.eat(types$1.question)){var f=this.startNodeAt(a,l);return f.test=u,f.consequent=this.parseMaybeAssign(),this.expect(types$1.colon),f.alternate=this.parseMaybeAssign(o),this.finishNode(f,"ConditionalExpression")}return u},pp$5.parseExprOps=function(o,e){var a=this.start,l=this.startLoc,u=this.parseMaybeUnary(e,!1,!1,o);return this.checkExpressionErrors(e)||u.start===a&&u.type==="ArrowFunctionExpression"?u:this.parseExprOp(u,a,l,-1,o)},pp$5.parseExprOp=function(o,e,a,l,u){var f=this.type.binop;if(f!=null&&(!u||this.type!==types$1._in)&&f>l){var d=this.type===types$1.logicalOR||this.type===types$1.logicalAND,p=this.type===types$1.coalesce;p&&(f=types$1.logicalAND.binop);var g=this.value;this.next();var b=this.start,O=this.startLoc,A=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,u),b,O,f,u),k=this.buildBinary(e,a,o,A,g,d||p);return(d&&this.type===types$1.coalesce||p&&(this.type===types$1.logicalOR||this.type===types$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(k,e,a,l,u)}return o},pp$5.buildBinary=function(o,e,a,l,u,f){l.type==="PrivateIdentifier"&&this.raise(l.start,"Private identifier can only be left side of binary expression");var d=this.startNodeAt(o,e);return d.left=a,d.operator=u,d.right=l,this.finishNode(d,f?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(o,e,a,l){var u=this.start,f=this.startLoc,d;if(this.isContextual("await")&&this.canAwait)d=this.parseAwait(l),e=!0;else if(this.type.prefix){var p=this.startNode(),g=this.type===types$1.incDec;p.operator=this.value,p.prefix=!0,this.next(),p.argument=this.parseMaybeUnary(null,!0,g,l),this.checkExpressionErrors(o,!0),g?this.checkLValSimple(p.argument):this.strict&&p.operator==="delete"&&p.argument.type==="Identifier"?this.raiseRecoverable(p.start,"Deleting local variable in strict mode"):p.operator==="delete"&&isPrivateFieldAccess(p.argument)?this.raiseRecoverable(p.start,"Private fields can not be deleted"):e=!0,d=this.finishNode(p,g?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===types$1.privateId)(l||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),d=this.parsePrivateIdent(),this.type!==types$1._in&&this.unexpected();else{if(d=this.parseExprSubscripts(o,l),this.checkExpressionErrors(o))return d;for(;this.type.postfix&&!this.canInsertSemicolon();){var b=this.startNodeAt(u,f);b.operator=this.value,b.prefix=!1,b.argument=d,this.checkLValSimple(d),this.next(),d=this.finishNode(b,"UpdateExpression")}}if(!a&&this.eat(types$1.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(u,f,d,this.parseMaybeUnary(null,!1,!1,l),"**",!1);else return d};function isPrivateFieldAccess(o){return o.type==="MemberExpression"&&o.property.type==="PrivateIdentifier"||o.type==="ChainExpression"&&isPrivateFieldAccess(o.expression)}pp$5.parseExprSubscripts=function(o,e){var a=this.start,l=this.startLoc,u=this.parseExprAtom(o,e);if(u.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return u;var f=this.parseSubscripts(u,a,l,!1,e);return o&&f.type==="MemberExpression"&&(o.parenthesizedAssign>=f.start&&(o.parenthesizedAssign=-1),o.parenthesizedBind>=f.start&&(o.parenthesizedBind=-1),o.trailingComma>=f.start&&(o.trailingComma=-1)),f},pp$5.parseSubscripts=function(o,e,a,l,u){for(var f=this.options.ecmaVersion>=8&&o.type==="Identifier"&&o.name==="async"&&this.lastTokEnd===o.end&&!this.canInsertSemicolon()&&o.end-o.start===5&&this.potentialArrowAt===o.start,d=!1;;){var p=this.parseSubscript(o,e,a,l,f,d,u);if(p.optional&&(d=!0),p===o||p.type==="ArrowFunctionExpression"){if(d){var g=this.startNodeAt(e,a);g.expression=p,p=this.finishNode(g,"ChainExpression")}return p}o=p}},pp$5.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(types$1.arrow)},pp$5.parseSubscriptAsyncArrow=function(o,e,a,l){return this.parseArrowExpression(this.startNodeAt(o,e),a,!0,l)},pp$5.parseSubscript=function(o,e,a,l,u,f,d){var p=this.options.ecmaVersion>=11,g=p&&this.eat(types$1.questionDot);l&&g&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var b=this.eat(types$1.bracketL);if(b||g&&this.type!==types$1.parenL&&this.type!==types$1.backQuote||this.eat(types$1.dot)){var O=this.startNodeAt(e,a);O.object=o,b?(O.property=this.parseExpression(),this.expect(types$1.bracketR)):this.type===types$1.privateId&&o.type!=="Super"?O.property=this.parsePrivateIdent():O.property=this.parseIdent(this.options.allowReserved!=="never"),O.computed=!!b,p&&(O.optional=g),o=this.finishNode(O,"MemberExpression")}else if(!l&&this.eat(types$1.parenL)){var A=new DestructuringErrors,k=this.yieldPos,M=this.awaitPos,B=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var N=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1,A);if(u&&!g&&this.shouldParseAsyncArrow())return this.checkPatternErrors(A,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=k,this.awaitPos=M,this.awaitIdentPos=B,this.parseSubscriptAsyncArrow(e,a,N,d);this.checkExpressionErrors(A,!0),this.yieldPos=k||this.yieldPos,this.awaitPos=M||this.awaitPos,this.awaitIdentPos=B||this.awaitIdentPos;var L=this.startNodeAt(e,a);L.callee=o,L.arguments=N,p&&(L.optional=g),o=this.finishNode(L,"CallExpression")}else if(this.type===types$1.backQuote){(g||f)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var V=this.startNodeAt(e,a);V.tag=o,V.quasi=this.parseTemplate({isTagged:!0}),o=this.finishNode(V,"TaggedTemplateExpression")}return o},pp$5.parseExprAtom=function(o,e,a){this.type===types$1.slash&&this.readRegexp();var l,u=this.potentialArrowAt===this.start;switch(this.type){case types$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),l=this.startNode(),this.next(),this.type===types$1.parenL&&!this.allowDirectSuper&&this.raise(l.start,"super() call outside constructor of a subclass"),this.type!==types$1.dot&&this.type!==types$1.bracketL&&this.type!==types$1.parenL&&this.unexpected(),this.finishNode(l,"Super");case types$1._this:return l=this.startNode(),this.next(),this.finishNode(l,"ThisExpression");case types$1.name:var f=this.start,d=this.startLoc,p=this.containsEsc,g=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!p&&g.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1._function))return this.overrideContext(types$2.f_expr),this.parseFunction(this.startNodeAt(f,d),0,!1,!0,e);if(u&&!this.canInsertSemicolon()){if(this.eat(types$1.arrow))return this.parseArrowExpression(this.startNodeAt(f,d),[g],!1,e);if(this.options.ecmaVersion>=8&&g.name==="async"&&this.type===types$1.name&&!p&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return g=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(f,d),[g],!0,e)}return g;case types$1.regexp:var b=this.value;return l=this.parseLiteral(b.value),l.regex={pattern:b.pattern,flags:b.flags},l;case types$1.num:case types$1.string:return this.parseLiteral(this.value);case types$1._null:case types$1._true:case types$1._false:return l=this.startNode(),l.value=this.type===types$1._null?null:this.type===types$1._true,l.raw=this.type.keyword,this.next(),this.finishNode(l,"Literal");case types$1.parenL:var O=this.start,A=this.parseParenAndDistinguishExpression(u,e);return o&&(o.parenthesizedAssign<0&&!this.isSimpleAssignTarget(A)&&(o.parenthesizedAssign=O),o.parenthesizedBind<0&&(o.parenthesizedBind=O)),A;case types$1.bracketL:return l=this.startNode(),this.next(),l.elements=this.parseExprList(types$1.bracketR,!0,!0,o),this.finishNode(l,"ArrayExpression");case types$1.braceL:return this.overrideContext(types$2.b_expr),this.parseObj(!1,o);case types$1._function:return l=this.startNode(),this.next(),this.parseFunction(l,0);case types$1._class:return this.parseClass(this.startNode(),!1);case types$1._new:return this.parseNew();case types$1.backQuote:return this.parseTemplate();case types$1._import:return this.options.ecmaVersion>=11?this.parseExprImport(a):this.unexpected();default:return this.parseExprAtomDefault()}},pp$5.parseExprAtomDefault=function(){this.unexpected()},pp$5.parseExprImport=function(o){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===types$1.parenL&&!o)return this.parseDynamicImport(e);if(this.type===types$1.dot){var a=this.startNodeAt(e.start,e.loc&&e.loc.start);return a.name="import",e.meta=this.finishNode(a,"Identifier"),this.parseImportMeta(e)}else this.unexpected()},pp$5.parseDynamicImport=function(o){if(this.next(),o.source=this.parseMaybeAssign(),!this.eat(types$1.parenR)){var e=this.start;this.eat(types$1.comma)&&this.eat(types$1.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(o,"ImportExpression")},pp$5.parseImportMeta=function(o){this.next();var e=this.containsEsc;return o.property=this.parseIdent(!0),o.property.name!=="meta"&&this.raiseRecoverable(o.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(o.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(o.start,"Cannot use 'import.meta' outside a module"),this.finishNode(o,"MetaProperty")},pp$5.parseLiteral=function(o){var e=this.startNode();return e.value=o,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1.parenL);var o=this.parseExpression();return this.expect(types$1.parenR),o},pp$5.shouldParseArrow=function(o){return!this.canInsertSemicolon()},pp$5.parseParenAndDistinguishExpression=function(o,e){var a=this.start,l=this.startLoc,u,f=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var d=this.start,p=this.startLoc,g=[],b=!0,O=!1,A=new DestructuringErrors,k=this.yieldPos,M=this.awaitPos,B;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1.parenR;)if(b?b=!1:this.expect(types$1.comma),f&&this.afterTrailingComma(types$1.parenR,!0)){O=!0;break}else if(this.type===types$1.ellipsis){B=this.start,g.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else g.push(this.parseMaybeAssign(!1,A,this.parseParenItem));var N=this.lastTokEnd,L=this.lastTokEndLoc;if(this.expect(types$1.parenR),o&&this.shouldParseArrow(g)&&this.eat(types$1.arrow))return this.checkPatternErrors(A,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=k,this.awaitPos=M,this.parseParenArrowList(a,l,g,e);(!g.length||O)&&this.unexpected(this.lastTokStart),B&&this.unexpected(B),this.checkExpressionErrors(A,!0),this.yieldPos=k||this.yieldPos,this.awaitPos=M||this.awaitPos,g.length>1?(u=this.startNodeAt(d,p),u.expressions=g,this.finishNodeAt(u,"SequenceExpression",N,L)):u=g[0]}else u=this.parseParenExpression();if(this.options.preserveParens){var V=this.startNodeAt(a,l);return V.expression=u,this.finishNode(V,"ParenthesizedExpression")}else return u},pp$5.parseParenItem=function(o){return o},pp$5.parseParenArrowList=function(o,e,a,l){return this.parseArrowExpression(this.startNodeAt(o,e),a,!1,l)};var empty$2=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var o=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===types$1.dot){var e=this.startNodeAt(o.start,o.loc&&o.loc.start);e.name="new",o.meta=this.finishNode(e,"Identifier"),this.next();var a=this.containsEsc;return o.property=this.parseIdent(!0),o.property.name!=="target"&&this.raiseRecoverable(o.property.start,"The only valid meta property for new is 'new.target'"),a&&this.raiseRecoverable(o.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(o.start,"'new.target' can only be used in functions and class static block"),this.finishNode(o,"MetaProperty")}var l=this.start,u=this.startLoc;return o.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),l,u,!0,!1),this.eat(types$1.parenL)?o.arguments=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1):o.arguments=empty$2,this.finishNode(o,"NewExpression")},pp$5.parseTemplateElement=function(o){var e=o.isTagged,a=this.startNode();return this.type===types$1.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),a.value={raw:this.value,cooked:null}):a.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),a.tail=this.type===types$1.backQuote,this.finishNode(a,"TemplateElement")},pp$5.parseTemplate=function(o){o===void 0&&(o={});var e=o.isTagged;e===void 0&&(e=!1);var a=this.startNode();this.next(),a.expressions=[];var l=this.parseTemplateElement({isTagged:e});for(a.quasis=[l];!l.tail;)this.type===types$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1.dollarBraceL),a.expressions.push(this.parseExpression()),this.expect(types$1.braceR),a.quasis.push(l=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(a,"TemplateLiteral")},pp$5.isAsyncProp=function(o){return!o.computed&&o.key.type==="Identifier"&&o.key.name==="async"&&(this.type===types$1.name||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(o,e){var a=this.startNode(),l=!0,u={};for(a.properties=[],this.next();!this.eat(types$1.braceR);){if(l)l=!1;else if(this.expect(types$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1.braceR))break;var f=this.parseProperty(o,e);o||this.checkPropClash(f,u,e),a.properties.push(f)}return this.finishNode(a,o?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(o,e){var a=this.startNode(),l,u,f,d;if(this.options.ecmaVersion>=9&&this.eat(types$1.ellipsis))return o?(a.argument=this.parseIdent(!1),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===types$1.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(o||e)&&(f=this.start,d=this.startLoc),o||(l=this.eat(types$1.star)));var p=this.containsEsc;return this.parsePropertyName(a),!o&&!p&&this.options.ecmaVersion>=8&&!l&&this.isAsyncProp(a)?(u=!0,l=this.options.ecmaVersion>=9&&this.eat(types$1.star),this.parsePropertyName(a)):u=!1,this.parsePropertyValue(a,o,l,u,f,d,e,p),this.finishNode(a,"Property")},pp$5.parseGetterSetter=function(o){o.kind=o.key.name,this.parsePropertyName(o),o.value=this.parseMethod(!1);var e=o.kind==="get"?0:1;if(o.value.params.length!==e){var a=o.value.start;o.kind==="get"?this.raiseRecoverable(a,"getter should have no params"):this.raiseRecoverable(a,"setter should have exactly one param")}else o.kind==="set"&&o.value.params[0].type==="RestElement"&&this.raiseRecoverable(o.value.params[0].start,"Setter cannot use rest params")},pp$5.parsePropertyValue=function(o,e,a,l,u,f,d,p){(a||l)&&this.type===types$1.colon&&this.unexpected(),this.eat(types$1.colon)?(o.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,d),o.kind="init"):this.options.ecmaVersion>=6&&this.type===types$1.parenL?(e&&this.unexpected(),o.kind="init",o.method=!0,o.value=this.parseMethod(a,l)):!e&&!p&&this.options.ecmaVersion>=5&&!o.computed&&o.key.type==="Identifier"&&(o.key.name==="get"||o.key.name==="set")&&this.type!==types$1.comma&&this.type!==types$1.braceR&&this.type!==types$1.eq?((a||l)&&this.unexpected(),this.parseGetterSetter(o)):this.options.ecmaVersion>=6&&!o.computed&&o.key.type==="Identifier"?((a||l)&&this.unexpected(),this.checkUnreserved(o.key),o.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=u),o.kind="init",e?o.value=this.parseMaybeDefault(u,f,this.copyNode(o.key)):this.type===types$1.eq&&d?(d.shorthandAssign<0&&(d.shorthandAssign=this.start),o.value=this.parseMaybeDefault(u,f,this.copyNode(o.key))):o.value=this.copyNode(o.key),o.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(o){if(this.options.ecmaVersion>=6){if(this.eat(types$1.bracketL))return o.computed=!0,o.key=this.parseMaybeAssign(),this.expect(types$1.bracketR),o.key;o.computed=!1}return o.key=this.type===types$1.num||this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(o){o.id=null,this.options.ecmaVersion>=6&&(o.generator=o.expression=!1),this.options.ecmaVersion>=8&&(o.async=!1)},pp$5.parseMethod=function(o,e,a){var l=this.startNode(),u=this.yieldPos,f=this.awaitPos,d=this.awaitIdentPos;return this.initFunction(l),this.options.ecmaVersion>=6&&(l.generator=o),this.options.ecmaVersion>=8&&(l.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e,l.generator)|SCOPE_SUPER|(a?SCOPE_DIRECT_SUPER:0)),this.expect(types$1.parenL),l.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(l,!1,!0,!1),this.yieldPos=u,this.awaitPos=f,this.awaitIdentPos=d,this.finishNode(l,"FunctionExpression")},pp$5.parseArrowExpression=function(o,e,a,l){var u=this.yieldPos,f=this.awaitPos,d=this.awaitIdentPos;return this.enterScope(functionFlags(a,!1)|SCOPE_ARROW),this.initFunction(o),this.options.ecmaVersion>=8&&(o.async=!!a),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,o.params=this.toAssignableList(e,!0),this.parseFunctionBody(o,!0,!1,l),this.yieldPos=u,this.awaitPos=f,this.awaitIdentPos=d,this.finishNode(o,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(o,e,a,l){var u=e&&this.type!==types$1.braceL,f=this.strict,d=!1;if(u)o.body=this.parseMaybeAssign(l),o.expression=!0,this.checkParams(o,!1);else{var p=this.options.ecmaVersion>=7&&!this.isSimpleParamList(o.params);(!f||p)&&(d=this.strictDirective(this.end),d&&p&&this.raiseRecoverable(o.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var g=this.labels;this.labels=[],d&&(this.strict=!0),this.checkParams(o,!f&&!d&&!e&&!a&&this.isSimpleParamList(o.params)),this.strict&&o.id&&this.checkLValSimple(o.id,BIND_OUTSIDE),o.body=this.parseBlock(!1,void 0,d&&!f),o.expression=!1,this.adaptDirectivePrologue(o.body.body),this.labels=g}this.exitScope()},pp$5.isSimpleParamList=function(o){for(var e=0,a=o;e<a.length;e+=1){var l=a[e];if(l.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(o,e){for(var a=Object.create(null),l=0,u=o.params;l<u.length;l+=1){var f=u[l];this.checkLValInnerPattern(f,BIND_VAR,e?null:a)}},pp$5.parseExprList=function(o,e,a,l){for(var u=[],f=!0;!this.eat(o);){if(f)f=!1;else if(this.expect(types$1.comma),e&&this.afterTrailingComma(o))break;var d=void 0;a&&this.type===types$1.comma?d=null:this.type===types$1.ellipsis?(d=this.parseSpread(l),l&&this.type===types$1.comma&&l.trailingComma<0&&(l.trailingComma=this.start)):d=this.parseMaybeAssign(!1,l),u.push(d)}return u},pp$5.checkUnreserved=function(o){var e=o.start,a=o.end,l=o.name;if(this.inGenerator&&l==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&l==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&l==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(l==="arguments"||l==="await")&&this.raise(e,"Cannot use "+l+" in class static initialization block"),this.keywords.test(l)&&this.raise(e,"Unexpected keyword '"+l+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,a).indexOf("\\")!==-1)){var u=this.strict?this.reservedWordsStrict:this.reservedWords;u.test(l)&&(!this.inAsync&&l==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+l+"' is reserved"))}},pp$5.parseIdent=function(o){var e=this.parseIdentNode();return this.next(!!o),this.finishNode(e,"Identifier"),o||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e},pp$5.parseIdentNode=function(){var o=this.startNode();return this.type===types$1.name?o.name=this.value:this.type.keyword?(o.name=this.type.keyword,(o.name==="class"||o.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=types$1.name):this.unexpected(),o},pp$5.parsePrivateIdent=function(){var o=this.startNode();return this.type===types$1.privateId?o.name=this.value:this.unexpected(),this.next(),this.finishNode(o,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(o)),o},pp$5.parseYield=function(o){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===types$1.semi||this.canInsertSemicolon()||this.type!==types$1.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(types$1.star),e.argument=this.parseMaybeAssign(o)),this.finishNode(e,"YieldExpression")},pp$5.parseAwait=function(o){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,o),this.finishNode(e,"AwaitExpression")};var pp$4=Parser$1.prototype;pp$4.raise=function(o,e){var a=getLineInfo(this.input,o);e+=" ("+a.line+":"+a.column+")";var l=new SyntaxError(e);throw l.pos=o,l.loc=a,l.raisedAt=this.pos,l},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser$1.prototype,Scope=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};pp$3.enterScope=function(o){this.scopeStack.push(new Scope(o))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(o){return o.flags&SCOPE_FUNCTION||!this.inModule&&o.flags&SCOPE_TOP},pp$3.declareName=function(o,e,a){var l=!1;if(e===BIND_LEXICAL){var u=this.currentScope();l=u.lexical.indexOf(o)>-1||u.functions.indexOf(o)>-1||u.var.indexOf(o)>-1,u.lexical.push(o),this.inModule&&u.flags&SCOPE_TOP&&delete this.undefinedExports[o]}else if(e===BIND_SIMPLE_CATCH){var f=this.currentScope();f.lexical.push(o)}else if(e===BIND_FUNCTION){var d=this.currentScope();this.treatFunctionsAsVar?l=d.lexical.indexOf(o)>-1:l=d.lexical.indexOf(o)>-1||d.var.indexOf(o)>-1,d.functions.push(o)}else for(var p=this.scopeStack.length-1;p>=0;--p){var g=this.scopeStack[p];if(g.lexical.indexOf(o)>-1&&!(g.flags&SCOPE_SIMPLE_CATCH&&g.lexical[0]===o)||!this.treatFunctionsAsVarInScope(g)&&g.functions.indexOf(o)>-1){l=!0;break}if(g.var.push(o),this.inModule&&g.flags&SCOPE_TOP&&delete this.undefinedExports[o],g.flags&SCOPE_VAR)break}l&&this.raiseRecoverable(a,"Identifier '"+o+"' has already been declared")},pp$3.checkLocalExport=function(o){this.scopeStack[0].lexical.indexOf(o.name)===-1&&this.scopeStack[0].var.indexOf(o.name)===-1&&(this.undefinedExports[o.name]=o)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var o=this.scopeStack.length-1;;o--){var e=this.scopeStack[o];if(e.flags&SCOPE_VAR)return e}},pp$3.currentThisScope=function(){for(var o=this.scopeStack.length-1;;o--){var e=this.scopeStack[o];if(e.flags&SCOPE_VAR&&!(e.flags&SCOPE_ARROW))return e}};var Node=function(e,a,l){this.type="",this.start=a,this.end=0,e.options.locations&&(this.loc=new SourceLocation(e,l)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[a,0])},pp$2=Parser$1.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(o,e){return new Node(this,o,e)};function finishNodeAt(o,e,a,l){return o.type=e,o.end=a,this.options.locations&&(o.loc.end=l),this.options.ranges&&(o.range[1]=a),o}pp$2.finishNode=function(o,e){return finishNodeAt.call(this,o,e,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(o,e,a,l){return finishNodeAt.call(this,o,e,a,l)},pp$2.copyNode=function(o){var e=new Node(this,o.start,this.startLoc);for(var a in o)e[a]=o[a];return e};var ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},ecma14BinaryPropertiesOfStrings="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",unicodeBinaryPropertiesOfStrings={9:"",10:"",11:"",12:"",13:"",14:ecma14BinaryPropertiesOfStrings},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(o){var e=data[o]={binary:wordsRegexp(unicodeBinaryProperties[o]+" "+unicodeGeneralCategoryValues),binaryOfStrings:wordsRegexp(unicodeBinaryPropertiesOfStrings[o]),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[o])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var i$1=0,list$1=[9,10,11,12,13,14];i$1<list$1.length;i$1+=1){var ecmaVersion=list$1[i$1];buildUnicodeData(ecmaVersion)}var pp$1=Parser$1.prototype,RegExpValidationState=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=data[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};RegExpValidationState.prototype.reset=function(e,a,l){var u=l.indexOf("v")!==-1,f=l.indexOf("u")!==-1;this.start=e|0,this.source=a+"",this.flags=l,u&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=f&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=f&&this.parser.options.ecmaVersion>=9)},RegExpValidationState.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},RegExpValidationState.prototype.at=function(e,a){a===void 0&&(a=!1);var l=this.source,u=l.length;if(e>=u)return-1;var f=l.charCodeAt(e);if(!(a||this.switchU)||f<=55295||f>=57344||e+1>=u)return f;var d=l.charCodeAt(e+1);return d>=56320&&d<=57343?(f<<10)+d-56613888:f},RegExpValidationState.prototype.nextIndex=function(e,a){a===void 0&&(a=!1);var l=this.source,u=l.length;if(e>=u)return u;var f=l.charCodeAt(e),d;return!(a||this.switchU)||f<=55295||f>=57344||e+1>=u||(d=l.charCodeAt(e+1))<56320||d>57343?e+1:e+2},RegExpValidationState.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)},RegExpValidationState.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},RegExpValidationState.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)},RegExpValidationState.prototype.eat=function(e,a){return a===void 0&&(a=!1),this.current(a)===e?(this.advance(a),!0):!1},RegExpValidationState.prototype.eatChars=function(e,a){a===void 0&&(a=!1);for(var l=this.pos,u=0,f=e;u<f.length;u+=1){var d=f[u],p=this.at(l,a);if(p===-1||p!==d)return!1;l=this.nextIndex(l,a)}return this.pos=l,!0},pp$1.validateRegExpFlags=function(o){for(var e=o.validFlags,a=o.flags,l=!1,u=!1,f=0;f<a.length;f++){var d=a.charAt(f);e.indexOf(d)===-1&&this.raise(o.start,"Invalid regular expression flag"),a.indexOf(d,f+1)>-1&&this.raise(o.start,"Duplicate regular expression flag"),d==="u"&&(l=!0),d==="v"&&(u=!0)}this.options.ecmaVersion>=15&&l&&u&&this.raise(o.start,"Invalid regular expression flag")},pp$1.validateRegExpPattern=function(o){this.regexp_pattern(o),!o.switchN&&this.options.ecmaVersion>=9&&o.groupNames.length>0&&(o.switchN=!0,this.regexp_pattern(o))},pp$1.regexp_pattern=function(o){o.pos=0,o.lastIntValue=0,o.lastStringValue="",o.lastAssertionIsQuantifiable=!1,o.numCapturingParens=0,o.maxBackReference=0,o.groupNames.length=0,o.backReferenceNames.length=0,this.regexp_disjunction(o),o.pos!==o.source.length&&(o.eat(41)&&o.raise("Unmatched ')'"),(o.eat(93)||o.eat(125))&&o.raise("Lone quantifier brackets")),o.maxBackReference>o.numCapturingParens&&o.raise("Invalid escape");for(var e=0,a=o.backReferenceNames;e<a.length;e+=1){var l=a[e];o.groupNames.indexOf(l)===-1&&o.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(o){for(this.regexp_alternative(o);o.eat(124);)this.regexp_alternative(o);this.regexp_eatQuantifier(o,!0)&&o.raise("Nothing to repeat"),o.eat(123)&&o.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(o){for(;o.pos<o.source.length&&this.regexp_eatTerm(o););},pp$1.regexp_eatTerm=function(o){return this.regexp_eatAssertion(o)?(o.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(o)&&o.switchU&&o.raise("Invalid quantifier"),!0):(o.switchU?this.regexp_eatAtom(o):this.regexp_eatExtendedAtom(o))?(this.regexp_eatQuantifier(o),!0):!1},pp$1.regexp_eatAssertion=function(o){var e=o.pos;if(o.lastAssertionIsQuantifiable=!1,o.eat(94)||o.eat(36))return!0;if(o.eat(92)){if(o.eat(66)||o.eat(98))return!0;o.pos=e}if(o.eat(40)&&o.eat(63)){var a=!1;if(this.options.ecmaVersion>=9&&(a=o.eat(60)),o.eat(61)||o.eat(33))return this.regexp_disjunction(o),o.eat(41)||o.raise("Unterminated group"),o.lastAssertionIsQuantifiable=!a,!0}return o.pos=e,!1},pp$1.regexp_eatQuantifier=function(o,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(o,e)?(o.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(o,e){return o.eat(42)||o.eat(43)||o.eat(63)||this.regexp_eatBracedQuantifier(o,e)},pp$1.regexp_eatBracedQuantifier=function(o,e){var a=o.pos;if(o.eat(123)){var l=0,u=-1;if(this.regexp_eatDecimalDigits(o)&&(l=o.lastIntValue,o.eat(44)&&this.regexp_eatDecimalDigits(o)&&(u=o.lastIntValue),o.eat(125)))return u!==-1&&u<l&&!e&&o.raise("numbers out of order in {} quantifier"),!0;o.switchU&&!e&&o.raise("Incomplete quantifier"),o.pos=a}return!1},pp$1.regexp_eatAtom=function(o){return this.regexp_eatPatternCharacters(o)||o.eat(46)||this.regexp_eatReverseSolidusAtomEscape(o)||this.regexp_eatCharacterClass(o)||this.regexp_eatUncapturingGroup(o)||this.regexp_eatCapturingGroup(o)},pp$1.regexp_eatReverseSolidusAtomEscape=function(o){var e=o.pos;if(o.eat(92)){if(this.regexp_eatAtomEscape(o))return!0;o.pos=e}return!1},pp$1.regexp_eatUncapturingGroup=function(o){var e=o.pos;if(o.eat(40)){if(o.eat(63)&&o.eat(58)){if(this.regexp_disjunction(o),o.eat(41))return!0;o.raise("Unterminated group")}o.pos=e}return!1},pp$1.regexp_eatCapturingGroup=function(o){if(o.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(o):o.current()===63&&o.raise("Invalid group"),this.regexp_disjunction(o),o.eat(41))return o.numCapturingParens+=1,!0;o.raise("Unterminated group")}return!1},pp$1.regexp_eatExtendedAtom=function(o){return o.eat(46)||this.regexp_eatReverseSolidusAtomEscape(o)||this.regexp_eatCharacterClass(o)||this.regexp_eatUncapturingGroup(o)||this.regexp_eatCapturingGroup(o)||this.regexp_eatInvalidBracedQuantifier(o)||this.regexp_eatExtendedPatternCharacter(o)},pp$1.regexp_eatInvalidBracedQuantifier=function(o){return this.regexp_eatBracedQuantifier(o,!0)&&o.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(o){var e=o.current();return isSyntaxCharacter(e)?(o.lastIntValue=e,o.advance(),!0):!1};function isSyntaxCharacter(o){return o===36||o>=40&&o<=43||o===46||o===63||o>=91&&o<=94||o>=123&&o<=125}pp$1.regexp_eatPatternCharacters=function(o){for(var e=o.pos,a=0;(a=o.current())!==-1&&!isSyntaxCharacter(a);)o.advance();return o.pos!==e},pp$1.regexp_eatExtendedPatternCharacter=function(o){var e=o.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(o.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(o){if(o.eat(63)){if(this.regexp_eatGroupName(o)){o.groupNames.indexOf(o.lastStringValue)!==-1&&o.raise("Duplicate capture group name"),o.groupNames.push(o.lastStringValue);return}o.raise("Invalid group")}},pp$1.regexp_eatGroupName=function(o){if(o.lastStringValue="",o.eat(60)){if(this.regexp_eatRegExpIdentifierName(o)&&o.eat(62))return!0;o.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(o){if(o.lastStringValue="",this.regexp_eatRegExpIdentifierStart(o)){for(o.lastStringValue+=codePointToString(o.lastIntValue);this.regexp_eatRegExpIdentifierPart(o);)o.lastStringValue+=codePointToString(o.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(o){var e=o.pos,a=this.options.ecmaVersion>=11,l=o.current(a);return o.advance(a),l===92&&this.regexp_eatRegExpUnicodeEscapeSequence(o,a)&&(l=o.lastIntValue),isRegExpIdentifierStart(l)?(o.lastIntValue=l,!0):(o.pos=e,!1)};function isRegExpIdentifierStart(o){return isIdentifierStart(o,!0)||o===36||o===95}pp$1.regexp_eatRegExpIdentifierPart=function(o){var e=o.pos,a=this.options.ecmaVersion>=11,l=o.current(a);return o.advance(a),l===92&&this.regexp_eatRegExpUnicodeEscapeSequence(o,a)&&(l=o.lastIntValue),isRegExpIdentifierPart(l)?(o.lastIntValue=l,!0):(o.pos=e,!1)};function isRegExpIdentifierPart(o){return isIdentifierChar(o,!0)||o===36||o===95||o===8204||o===8205}pp$1.regexp_eatAtomEscape=function(o){return this.regexp_eatBackReference(o)||this.regexp_eatCharacterClassEscape(o)||this.regexp_eatCharacterEscape(o)||o.switchN&&this.regexp_eatKGroupName(o)?!0:(o.switchU&&(o.current()===99&&o.raise("Invalid unicode escape"),o.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(o){var e=o.pos;if(this.regexp_eatDecimalEscape(o)){var a=o.lastIntValue;if(o.switchU)return a>o.maxBackReference&&(o.maxBackReference=a),!0;if(a<=o.numCapturingParens)return!0;o.pos=e}return!1},pp$1.regexp_eatKGroupName=function(o){if(o.eat(107)){if(this.regexp_eatGroupName(o))return o.backReferenceNames.push(o.lastStringValue),!0;o.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(o){return this.regexp_eatControlEscape(o)||this.regexp_eatCControlLetter(o)||this.regexp_eatZero(o)||this.regexp_eatHexEscapeSequence(o)||this.regexp_eatRegExpUnicodeEscapeSequence(o,!1)||!o.switchU&&this.regexp_eatLegacyOctalEscapeSequence(o)||this.regexp_eatIdentityEscape(o)},pp$1.regexp_eatCControlLetter=function(o){var e=o.pos;if(o.eat(99)){if(this.regexp_eatControlLetter(o))return!0;o.pos=e}return!1},pp$1.regexp_eatZero=function(o){return o.current()===48&&!isDecimalDigit(o.lookahead())?(o.lastIntValue=0,o.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(o){var e=o.current();return e===116?(o.lastIntValue=9,o.advance(),!0):e===110?(o.lastIntValue=10,o.advance(),!0):e===118?(o.lastIntValue=11,o.advance(),!0):e===102?(o.lastIntValue=12,o.advance(),!0):e===114?(o.lastIntValue=13,o.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(o){var e=o.current();return isControlLetter(e)?(o.lastIntValue=e%32,o.advance(),!0):!1};function isControlLetter(o){return o>=65&&o<=90||o>=97&&o<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(o,e){e===void 0&&(e=!1);var a=o.pos,l=e||o.switchU;if(o.eat(117)){if(this.regexp_eatFixedHexDigits(o,4)){var u=o.lastIntValue;if(l&&u>=55296&&u<=56319){var f=o.pos;if(o.eat(92)&&o.eat(117)&&this.regexp_eatFixedHexDigits(o,4)){var d=o.lastIntValue;if(d>=56320&&d<=57343)return o.lastIntValue=(u-55296)*1024+(d-56320)+65536,!0}o.pos=f,o.lastIntValue=u}return!0}if(l&&o.eat(123)&&this.regexp_eatHexDigits(o)&&o.eat(125)&&isValidUnicode(o.lastIntValue))return!0;l&&o.raise("Invalid unicode escape"),o.pos=a}return!1};function isValidUnicode(o){return o>=0&&o<=1114111}pp$1.regexp_eatIdentityEscape=function(o){if(o.switchU)return this.regexp_eatSyntaxCharacter(o)?!0:o.eat(47)?(o.lastIntValue=47,!0):!1;var e=o.current();return e!==99&&(!o.switchN||e!==107)?(o.lastIntValue=e,o.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(o){o.lastIntValue=0;var e=o.current();if(e>=49&&e<=57){do o.lastIntValue=10*o.lastIntValue+(e-48),o.advance();while((e=o.current())>=48&&e<=57);return!0}return!1};var CharSetNone=0,CharSetOk=1,CharSetString=2;pp$1.regexp_eatCharacterClassEscape=function(o){var e=o.current();if(isCharacterClassEscape(e))return o.lastIntValue=-1,o.advance(),CharSetOk;var a=!1;if(o.switchU&&this.options.ecmaVersion>=9&&((a=e===80)||e===112)){o.lastIntValue=-1,o.advance();var l;if(o.eat(123)&&(l=this.regexp_eatUnicodePropertyValueExpression(o))&&o.eat(125))return a&&l===CharSetString&&o.raise("Invalid property name"),l;o.raise("Invalid property name")}return CharSetNone};function isCharacterClassEscape(o){return o===100||o===68||o===115||o===83||o===119||o===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(o){var e=o.pos;if(this.regexp_eatUnicodePropertyName(o)&&o.eat(61)){var a=o.lastStringValue;if(this.regexp_eatUnicodePropertyValue(o)){var l=o.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(o,a,l),CharSetOk}}if(o.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(o)){var u=o.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(o,u)}return CharSetNone},pp$1.regexp_validateUnicodePropertyNameAndValue=function(o,e,a){hasOwn(o.unicodeProperties.nonBinary,e)||o.raise("Invalid property name"),o.unicodeProperties.nonBinary[e].test(a)||o.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(o,e){if(o.unicodeProperties.binary.test(e))return CharSetOk;if(o.switchV&&o.unicodeProperties.binaryOfStrings.test(e))return CharSetString;o.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(o){var e=0;for(o.lastStringValue="";isUnicodePropertyNameCharacter(e=o.current());)o.lastStringValue+=codePointToString(e),o.advance();return o.lastStringValue!==""};function isUnicodePropertyNameCharacter(o){return isControlLetter(o)||o===95}pp$1.regexp_eatUnicodePropertyValue=function(o){var e=0;for(o.lastStringValue="";isUnicodePropertyValueCharacter(e=o.current());)o.lastStringValue+=codePointToString(e),o.advance();return o.lastStringValue!==""};function isUnicodePropertyValueCharacter(o){return isUnicodePropertyNameCharacter(o)||isDecimalDigit(o)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(o){return this.regexp_eatUnicodePropertyValue(o)},pp$1.regexp_eatCharacterClass=function(o){if(o.eat(91)){var e=o.eat(94),a=this.regexp_classContents(o);return o.eat(93)||o.raise("Unterminated character class"),e&&a===CharSetString&&o.raise("Negated character class may contain strings"),!0}return!1},pp$1.regexp_classContents=function(o){return o.current()===93?CharSetOk:o.switchV?this.regexp_classSetExpression(o):(this.regexp_nonEmptyClassRanges(o),CharSetOk)},pp$1.regexp_nonEmptyClassRanges=function(o){for(;this.regexp_eatClassAtom(o);){var e=o.lastIntValue;if(o.eat(45)&&this.regexp_eatClassAtom(o)){var a=o.lastIntValue;o.switchU&&(e===-1||a===-1)&&o.raise("Invalid character class"),e!==-1&&a!==-1&&e>a&&o.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(o){var e=o.pos;if(o.eat(92)){if(this.regexp_eatClassEscape(o))return!0;if(o.switchU){var a=o.current();(a===99||isOctalDigit(a))&&o.raise("Invalid class escape"),o.raise("Invalid escape")}o.pos=e}var l=o.current();return l!==93?(o.lastIntValue=l,o.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(o){var e=o.pos;if(o.eat(98))return o.lastIntValue=8,!0;if(o.switchU&&o.eat(45))return o.lastIntValue=45,!0;if(!o.switchU&&o.eat(99)){if(this.regexp_eatClassControlLetter(o))return!0;o.pos=e}return this.regexp_eatCharacterClassEscape(o)||this.regexp_eatCharacterEscape(o)},pp$1.regexp_classSetExpression=function(o){var e=CharSetOk,a;if(!this.regexp_eatClassSetRange(o))if(a=this.regexp_eatClassSetOperand(o)){a===CharSetString&&(e=CharSetString);for(var l=o.pos;o.eatChars([38,38]);){if(o.current()!==38&&(a=this.regexp_eatClassSetOperand(o))){a!==CharSetString&&(e=CharSetOk);continue}o.raise("Invalid character in character class")}if(l!==o.pos)return e;for(;o.eatChars([45,45]);)this.regexp_eatClassSetOperand(o)||o.raise("Invalid character in character class");if(l!==o.pos)return e}else o.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(o)){if(a=this.regexp_eatClassSetOperand(o),!a)return e;a===CharSetString&&(e=CharSetString)}},pp$1.regexp_eatClassSetRange=function(o){var e=o.pos;if(this.regexp_eatClassSetCharacter(o)){var a=o.lastIntValue;if(o.eat(45)&&this.regexp_eatClassSetCharacter(o)){var l=o.lastIntValue;return a!==-1&&l!==-1&&a>l&&o.raise("Range out of order in character class"),!0}o.pos=e}return!1},pp$1.regexp_eatClassSetOperand=function(o){return this.regexp_eatClassSetCharacter(o)?CharSetOk:this.regexp_eatClassStringDisjunction(o)||this.regexp_eatNestedClass(o)},pp$1.regexp_eatNestedClass=function(o){var e=o.pos;if(o.eat(91)){var a=o.eat(94),l=this.regexp_classContents(o);if(o.eat(93))return a&&l===CharSetString&&o.raise("Negated character class may contain strings"),l;o.pos=e}if(o.eat(92)){var u=this.regexp_eatCharacterClassEscape(o);if(u)return u;o.pos=e}return null},pp$1.regexp_eatClassStringDisjunction=function(o){var e=o.pos;if(o.eatChars([92,113])){if(o.eat(123)){var a=this.regexp_classStringDisjunctionContents(o);if(o.eat(125))return a}else o.raise("Invalid escape");o.pos=e}return null},pp$1.regexp_classStringDisjunctionContents=function(o){for(var e=this.regexp_classString(o);o.eat(124);)this.regexp_classString(o)===CharSetString&&(e=CharSetString);return e},pp$1.regexp_classString=function(o){for(var e=0;this.regexp_eatClassSetCharacter(o);)e++;return e===1?CharSetOk:CharSetString},pp$1.regexp_eatClassSetCharacter=function(o){var e=o.pos;if(o.eat(92))return this.regexp_eatCharacterEscape(o)||this.regexp_eatClassSetReservedPunctuator(o)?!0:o.eat(98)?(o.lastIntValue=8,!0):(o.pos=e,!1);var a=o.current();return a<0||a===o.lookahead()&&isClassSetReservedDoublePunctuatorCharacter(a)||isClassSetSyntaxCharacter(a)?!1:(o.advance(),o.lastIntValue=a,!0)};function isClassSetReservedDoublePunctuatorCharacter(o){return o===33||o>=35&&o<=38||o>=42&&o<=44||o===46||o>=58&&o<=64||o===94||o===96||o===126}function isClassSetSyntaxCharacter(o){return o===40||o===41||o===45||o===47||o>=91&&o<=93||o>=123&&o<=125}pp$1.regexp_eatClassSetReservedPunctuator=function(o){var e=o.current();return isClassSetReservedPunctuator(e)?(o.lastIntValue=e,o.advance(),!0):!1};function isClassSetReservedPunctuator(o){return o===33||o===35||o===37||o===38||o===44||o===45||o>=58&&o<=62||o===64||o===96||o===126}pp$1.regexp_eatClassControlLetter=function(o){var e=o.current();return isDecimalDigit(e)||e===95?(o.lastIntValue=e%32,o.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(o){var e=o.pos;if(o.eat(120)){if(this.regexp_eatFixedHexDigits(o,2))return!0;o.switchU&&o.raise("Invalid escape"),o.pos=e}return!1},pp$1.regexp_eatDecimalDigits=function(o){var e=o.pos,a=0;for(o.lastIntValue=0;isDecimalDigit(a=o.current());)o.lastIntValue=10*o.lastIntValue+(a-48),o.advance();return o.pos!==e};function isDecimalDigit(o){return o>=48&&o<=57}pp$1.regexp_eatHexDigits=function(o){var e=o.pos,a=0;for(o.lastIntValue=0;isHexDigit(a=o.current());)o.lastIntValue=16*o.lastIntValue+hexToInt(a),o.advance();return o.pos!==e};function isHexDigit(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102}function hexToInt(o){return o>=65&&o<=70?10+(o-65):o>=97&&o<=102?10+(o-97):o-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(o){if(this.regexp_eatOctalDigit(o)){var e=o.lastIntValue;if(this.regexp_eatOctalDigit(o)){var a=o.lastIntValue;e<=3&&this.regexp_eatOctalDigit(o)?o.lastIntValue=e*64+a*8+o.lastIntValue:o.lastIntValue=e*8+a}else o.lastIntValue=e;return!0}return!1},pp$1.regexp_eatOctalDigit=function(o){var e=o.current();return isOctalDigit(e)?(o.lastIntValue=e-48,o.advance(),!0):(o.lastIntValue=0,!1)};function isOctalDigit(o){return o>=48&&o<=55}pp$1.regexp_eatFixedHexDigits=function(o,e){var a=o.pos;o.lastIntValue=0;for(var l=0;l<e;++l){var u=o.current();if(!isHexDigit(u))return o.pos=a,!1;o.lastIntValue=16*o.lastIntValue+hexToInt(u),o.advance()}return!0};var Token=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},pp=Parser$1.prototype;pp.next=function(o){!o&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var o=this;return{next:function(){var e=o.getToken();return{done:e.type===types$1.eof,value:e}}}}),pp.nextToken=function(){var o=this.curContext();if((!o||!o.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1.eof);if(o.override)return o.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(o){return isIdentifierStart(o,this.options.ecmaVersion>=6)||o===92?this.readWord():this.getTokenFromCode(o)},pp.fullCharCodeAtPos=function(){var o=this.input.charCodeAt(this.pos);if(o<=55295||o>=56320)return o;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?o:(o<<10)+e-56613888},pp.skipBlockComment=function(){var o=this.options.onComment&&this.curPosition(),e=this.pos,a=this.input.indexOf("*/",this.pos+=2);if(a===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=a+2,this.options.locations)for(var l=void 0,u=e;(l=nextLineBreak(this.input,u,this.pos))>-1;)++this.curLine,u=this.lineStart=l;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,a),e,this.pos,o,this.curPosition())},pp.skipLineComment=function(o){for(var e=this.pos,a=this.options.onComment&&this.curPosition(),l=this.input.charCodeAt(this.pos+=o);this.pos<this.input.length&&!isNewLine(l);)l=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+o,this.pos),e,this.pos,a,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var o=this.input.charCodeAt(this.pos);switch(o){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(o>8&&o<14||o>=5760&&nonASCIIwhitespace.test(String.fromCharCode(o)))++this.pos;else break e}}},pp.finishToken=function(o,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var a=this.type;this.type=o,this.value=e,this.updateContext(a)},pp.readToken_dot=function(){var o=this.input.charCodeAt(this.pos+1);if(o>=48&&o<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&o===46&&e===46?(this.pos+=3,this.finishToken(types$1.ellipsis)):(++this.pos,this.finishToken(types$1.dot))},pp.readToken_slash=function(){var o=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):o===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.slash,1)},pp.readToken_mult_modulo_exp=function(o){var e=this.input.charCodeAt(this.pos+1),a=1,l=o===42?types$1.star:types$1.modulo;return this.options.ecmaVersion>=7&&o===42&&e===42&&(++a,l=types$1.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(types$1.assign,a+1):this.finishOp(l,a)},pp.readToken_pipe_amp=function(o){var e=this.input.charCodeAt(this.pos+1);if(e===o){if(this.options.ecmaVersion>=12){var a=this.input.charCodeAt(this.pos+2);if(a===61)return this.finishOp(types$1.assign,3)}return this.finishOp(o===124?types$1.logicalOR:types$1.logicalAND,2)}return e===61?this.finishOp(types$1.assign,2):this.finishOp(o===124?types$1.bitwiseOR:types$1.bitwiseAND,1)},pp.readToken_caret=function(){var o=this.input.charCodeAt(this.pos+1);return o===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.bitwiseXOR,1)},pp.readToken_plus_min=function(o){var e=this.input.charCodeAt(this.pos+1);return e===o?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1.incDec,2):e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.plusMin,1)},pp.readToken_lt_gt=function(o){var e=this.input.charCodeAt(this.pos+1),a=1;return e===o?(a=o===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+a)===61?this.finishOp(types$1.assign,a+1):this.finishOp(types$1.bitShift,a)):e===33&&o===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(a=2),this.finishOp(types$1.relational,a))},pp.readToken_eq_excl=function(o){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(types$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):o===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1.arrow)):this.finishOp(o===61?types$1.eq:types$1.prefix,1)},pp.readToken_question=function(){var o=this.options.ecmaVersion;if(o>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var a=this.input.charCodeAt(this.pos+2);if(a<48||a>57)return this.finishOp(types$1.questionDot,2)}if(e===63){if(o>=12){var l=this.input.charCodeAt(this.pos+2);if(l===61)return this.finishOp(types$1.assign,3)}return this.finishOp(types$1.coalesce,2)}}return this.finishOp(types$1.question,1)},pp.readToken_numberSign=function(){var o=this.options.ecmaVersion,e=35;if(o>=13&&(++this.pos,e=this.fullCharCodeAtPos(),isIdentifierStart(e,!0)||e===92))return this.finishToken(types$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},pp.getTokenFromCode=function(o){switch(o){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1.parenL);case 41:return++this.pos,this.finishToken(types$1.parenR);case 59:return++this.pos,this.finishToken(types$1.semi);case 44:return++this.pos,this.finishToken(types$1.comma);case 91:return++this.pos,this.finishToken(types$1.bracketL);case 93:return++this.pos,this.finishToken(types$1.bracketR);case 123:return++this.pos,this.finishToken(types$1.braceL);case 125:return++this.pos,this.finishToken(types$1.braceR);case 58:return++this.pos,this.finishToken(types$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(o);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(o);case 124:case 38:return this.readToken_pipe_amp(o);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(o);case 60:case 62:return this.readToken_lt_gt(o);case 61:case 33:return this.readToken_eq_excl(o);case 63:return this.readToken_question();case 126:return this.finishOp(types$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(o)+"'")},pp.finishOp=function(o,e){var a=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(o,a)},pp.readRegexp=function(){for(var o,e,a=this.pos;;){this.pos>=this.input.length&&this.raise(a,"Unterminated regular expression");var l=this.input.charAt(this.pos);if(lineBreak.test(l)&&this.raise(a,"Unterminated regular expression"),o)o=!1;else{if(l==="[")e=!0;else if(l==="]"&&e)e=!1;else if(l==="/"&&!e)break;o=l==="\\"}++this.pos}var u=this.input.slice(a,this.pos);++this.pos;var f=this.pos,d=this.readWord1();this.containsEsc&&this.unexpected(f);var p=this.regexpState||(this.regexpState=new RegExpValidationState(this));p.reset(a,u,d),this.validateRegExpFlags(p),this.validateRegExpPattern(p);var g=null;try{g=new RegExp(u,d)}catch{}return this.finishToken(types$1.regexp,{pattern:u,flags:d,value:g})},pp.readInt=function(o,e,a){for(var l=this.options.ecmaVersion>=12&&e===void 0,u=a&&this.input.charCodeAt(this.pos)===48,f=this.pos,d=0,p=0,g=0,b=e??1/0;g<b;++g,++this.pos){var O=this.input.charCodeAt(this.pos),A=void 0;if(l&&O===95){u&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),p===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),g===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),p=O;continue}if(O>=97?A=O-97+10:O>=65?A=O-65+10:O>=48&&O<=57?A=O-48:A=1/0,A>=o)break;p=O,d=d*o+A}return l&&p===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===f||e!=null&&this.pos-f!==e?null:d};function stringToNumber(o,e){return e?parseInt(o,8):parseFloat(o.replace(/_/g,""))}function stringToBigInt(o){return typeof BigInt!="function"?null:BigInt(o.replace(/_/g,""))}pp.readRadixNumber=function(o){var e=this.pos;this.pos+=2;var a=this.readInt(o);return a==null&&this.raise(this.start+2,"Expected number in radix "+o),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(a=stringToBigInt(this.input.slice(e,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,a)},pp.readNumber=function(o){var e=this.pos;!o&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var a=this.pos-e>=2&&this.input.charCodeAt(e)===48;a&&this.strict&&this.raise(e,"Invalid number");var l=this.input.charCodeAt(this.pos);if(!a&&!o&&this.options.ecmaVersion>=11&&l===110){var u=stringToBigInt(this.input.slice(e,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,u)}a&&/[89]/.test(this.input.slice(e,this.pos))&&(a=!1),l===46&&!a&&(++this.pos,this.readInt(10),l=this.input.charCodeAt(this.pos)),(l===69||l===101)&&!a&&(l=this.input.charCodeAt(++this.pos),(l===43||l===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var f=stringToNumber(this.input.slice(e,this.pos),a);return this.finishToken(types$1.num,f)},pp.readCodePoint=function(){var o=this.input.charCodeAt(this.pos),e;if(o===123){this.options.ecmaVersion<6&&this.unexpected();var a=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(a,"Code point out of bounds")}else e=this.readHexChar(4);return e},pp.readString=function(o){for(var e="",a=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var l=this.input.charCodeAt(this.pos);if(l===o)break;l===92?(e+=this.input.slice(a,this.pos),e+=this.readEscapedChar(!1),a=this.pos):l===8232||l===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(l)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(a,this.pos++),this.finishToken(types$1.string,e)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(o){if(o===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw o}this.inTemplateElement=!1},pp.invalidStringToken=function(o,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(o,e)},pp.readTmplToken=function(){for(var o="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var a=this.input.charCodeAt(this.pos);if(a===96||a===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1.template||this.type===types$1.invalidTemplate)?a===36?(this.pos+=2,this.finishToken(types$1.dollarBraceL)):(++this.pos,this.finishToken(types$1.backQuote)):(o+=this.input.slice(e,this.pos),this.finishToken(types$1.template,o));if(a===92)o+=this.input.slice(e,this.pos),o+=this.readEscapedChar(!0),e=this.pos;else if(isNewLine(a)){switch(o+=this.input.slice(e,this.pos),++this.pos,a){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:o+=`
`;break;default:o+=String.fromCharCode(a);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(o){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),o){var a=this.pos-1;this.invalidStringToken(a,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var l=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],u=parseInt(l,8);return u>255&&(l=l.slice(0,-1),u=parseInt(l,8)),this.pos+=l.length-1,e=this.input.charCodeAt(this.pos),(l!=="0"||e===56||e===57)&&(this.strict||o)&&this.invalidStringToken(this.pos-1-l.length,o?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(u)}return isNewLine(e)?"":String.fromCharCode(e)}},pp.readHexChar=function(o){var e=this.pos,a=this.readInt(16,o);return a===null&&this.invalidStringToken(e,"Bad character escape sequence"),a},pp.readWord1=function(){this.containsEsc=!1;for(var o="",e=!0,a=this.pos,l=this.options.ecmaVersion>=6;this.pos<this.input.length;){var u=this.fullCharCodeAtPos();if(isIdentifierChar(u,l))this.pos+=u<=65535?1:2;else if(u===92){this.containsEsc=!0,o+=this.input.slice(a,this.pos);var f=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var d=this.readCodePoint();(e?isIdentifierStart:isIdentifierChar)(d,l)||this.invalidStringToken(f,"Invalid Unicode escape"),o+=codePointToString(d),a=this.pos}else break;e=!1}return o+this.input.slice(a,this.pos)},pp.readWord=function(){var o=this.readWord1(),e=types$1.name;return this.keywords.test(o)&&(e=keywords$2[o]),this.finishToken(e,o)};var version$1="8.11.3";Parser$1.acorn={Parser:Parser$1,version:version$1,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1,keywordTypes:keywords$2,TokContext,tokContexts:types$2,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse$3(o,e){return Parser$1.parse(o,e)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var e=o.default;if(typeof e=="function"){var a=function l(){return this instanceof l?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(l){var u=Object.getOwnPropertyDescriptor(o,l);Object.defineProperty(a,l,u.get?u:{enumerable:!0,get:function(){return o[l]}})}),a}var escodegen$1={},estraverse={};(function(o){(function e(a){var l,u,f,d,p,g;function b(z){var oe={},de,_e;for(de in z)z.hasOwnProperty(de)&&(_e=z[de],typeof _e=="object"&&_e!==null?oe[de]=b(_e):oe[de]=_e);return oe}function O(z,oe){var de,_e,Ce,be;for(_e=z.length,Ce=0;_e;)de=_e>>>1,be=Ce+de,oe(z[be])?_e=de:(Ce=be+1,_e-=de+1);return Ce}l={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},f={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},d={},p={},g={},u={Break:d,Skip:p,Remove:g};function A(z,oe){this.parent=z,this.key=oe}A.prototype.replace=function(oe){this.parent[this.key]=oe},A.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function k(z,oe,de,_e){this.node=z,this.path=oe,this.wrap=de,this.ref=_e}function M(){}M.prototype.path=function(){var oe,de,_e,Ce,be,xe;function Oe(ke,Ie){if(Array.isArray(Ie))for(_e=0,Ce=Ie.length;_e<Ce;++_e)ke.push(Ie[_e]);else ke.push(Ie)}if(!this.__current.path)return null;for(be=[],oe=2,de=this.__leavelist.length;oe<de;++oe)xe=this.__leavelist[oe],Oe(be,xe.path);return Oe(be,this.__current.path),be},M.prototype.type=function(){var z=this.current();return z.type||this.__current.wrap},M.prototype.parents=function(){var oe,de,_e;for(_e=[],oe=1,de=this.__leavelist.length;oe<de;++oe)_e.push(this.__leavelist[oe].node);return _e},M.prototype.current=function(){return this.__current.node},M.prototype.__execute=function(oe,de){var _e,Ce;return Ce=void 0,_e=this.__current,this.__current=de,this.__state=null,oe&&(Ce=oe.call(this,de.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=_e,Ce},M.prototype.notify=function(oe){this.__state=oe},M.prototype.skip=function(){this.notify(p)},M.prototype.break=function(){this.notify(d)},M.prototype.remove=function(){this.notify(g)},M.prototype.__initialize=function(z,oe){this.visitor=oe,this.root=z,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,oe.fallback==="iteration"?this.__fallback=Object.keys:typeof oe.fallback=="function"&&(this.__fallback=oe.fallback),this.__keys=f,oe.keys&&(this.__keys=Object.assign(Object.create(this.__keys),oe.keys))};function B(z){return z==null?!1:typeof z=="object"&&typeof z.type=="string"}function N(z,oe){return(z===l.ObjectExpression||z===l.ObjectPattern)&&oe==="properties"}function L(z,oe){for(var de=z.length-1;de>=0;--de)if(z[de].node===oe)return!0;return!1}M.prototype.traverse=function(oe,de){var _e,Ce,be,xe,Oe,ke,Ie,Fe,Be,Ge,Ne,Ve;for(this.__initialize(oe,de),Ve={},_e=this.__worklist,Ce=this.__leavelist,_e.push(new k(oe,null,null,null)),Ce.push(new k(null,null,null,null));_e.length;){if(be=_e.pop(),be===Ve){if(be=Ce.pop(),ke=this.__execute(de.leave,be),this.__state===d||ke===d)return;continue}if(be.node){if(ke=this.__execute(de.enter,be),this.__state===d||ke===d)return;if(_e.push(Ve),Ce.push(be),this.__state===p||ke===p)continue;if(xe=be.node,Oe=xe.type||be.wrap,Ge=this.__keys[Oe],!Ge)if(this.__fallback)Ge=this.__fallback(xe);else throw new Error("Unknown node type "+Oe+".");for(Fe=Ge.length;(Fe-=1)>=0;)if(Ie=Ge[Fe],Ne=xe[Ie],!!Ne){if(Array.isArray(Ne)){for(Be=Ne.length;(Be-=1)>=0;)if(Ne[Be]&&!L(Ce,Ne[Be])){if(N(Oe,Ge[Fe]))be=new k(Ne[Be],[Ie,Be],"Property",null);else if(B(Ne[Be]))be=new k(Ne[Be],[Ie,Be],null,null);else continue;_e.push(be)}}else if(B(Ne)){if(L(Ce,Ne))continue;_e.push(new k(Ne,Ie,null,null))}}}}},M.prototype.replace=function(oe,de){var _e,Ce,be,xe,Oe,ke,Ie,Fe,Be,Ge,Ne,Ve,Ze;function Je($e){var ht,xt,Et,et;if($e.ref.remove()){for(xt=$e.ref.key,et=$e.ref.parent,ht=_e.length;ht--;)if(Et=_e[ht],Et.ref&&Et.ref.parent===et){if(Et.ref.key<xt)break;--Et.ref.key}}}for(this.__initialize(oe,de),Ne={},_e=this.__worklist,Ce=this.__leavelist,Ve={root:oe},ke=new k(oe,null,null,new A(Ve,"root")),_e.push(ke),Ce.push(ke);_e.length;){if(ke=_e.pop(),ke===Ne){if(ke=Ce.pop(),Oe=this.__execute(de.leave,ke),Oe!==void 0&&Oe!==d&&Oe!==p&&Oe!==g&&ke.ref.replace(Oe),(this.__state===g||Oe===g)&&Je(ke),this.__state===d||Oe===d)return Ve.root;continue}if(Oe=this.__execute(de.enter,ke),Oe!==void 0&&Oe!==d&&Oe!==p&&Oe!==g&&(ke.ref.replace(Oe),ke.node=Oe),(this.__state===g||Oe===g)&&(Je(ke),ke.node=null),this.__state===d||Oe===d)return Ve.root;if(be=ke.node,!!be&&(_e.push(Ne),Ce.push(ke),!(this.__state===p||Oe===p))){if(xe=be.type||ke.wrap,Be=this.__keys[xe],!Be)if(this.__fallback)Be=this.__fallback(be);else throw new Error("Unknown node type "+xe+".");for(Ie=Be.length;(Ie-=1)>=0;)if(Ze=Be[Ie],Ge=be[Ze],!!Ge)if(Array.isArray(Ge)){for(Fe=Ge.length;(Fe-=1)>=0;)if(Ge[Fe]){if(N(xe,Be[Ie]))ke=new k(Ge[Fe],[Ze,Fe],"Property",new A(Ge,Fe));else if(B(Ge[Fe]))ke=new k(Ge[Fe],[Ze,Fe],null,new A(Ge,Fe));else continue;_e.push(ke)}}else B(Ge)&&_e.push(new k(Ge,Ze,null,new A(be,Ze)))}}return Ve.root};function V(z,oe){var de=new M;return de.traverse(z,oe)}function se(z,oe){var de=new M;return de.replace(z,oe)}function pe(z,oe){var de;return de=O(oe,function(Ce){return Ce.range[0]>z.range[0]}),z.extendedRange=[z.range[0],z.range[1]],de!==oe.length&&(z.extendedRange[1]=oe[de].range[0]),de-=1,de>=0&&(z.extendedRange[0]=oe[de].range[1]),z}function re(z,oe,de){var _e=[],Ce,be,xe,Oe;if(!z.range)throw new Error("attachComments needs range information");if(!de.length){if(oe.length){for(xe=0,be=oe.length;xe<be;xe+=1)Ce=b(oe[xe]),Ce.extendedRange=[0,z.range[0]],_e.push(Ce);z.leadingComments=_e}return z}for(xe=0,be=oe.length;xe<be;xe+=1)_e.push(pe(b(oe[xe]),de));return Oe=0,V(z,{enter:function(ke){for(var Ie;Oe<_e.length&&(Ie=_e[Oe],!(Ie.extendedRange[1]>ke.range[0]));)Ie.extendedRange[1]===ke.range[0]?(ke.leadingComments||(ke.leadingComments=[]),ke.leadingComments.push(Ie),_e.splice(Oe,1)):Oe+=1;if(Oe===_e.length)return u.Break;if(_e[Oe].extendedRange[0]>ke.range[1])return u.Skip}}),Oe=0,V(z,{leave:function(ke){for(var Ie;Oe<_e.length&&(Ie=_e[Oe],!(ke.range[1]<Ie.extendedRange[0]));)ke.range[1]===Ie.extendedRange[0]?(ke.trailingComments||(ke.trailingComments=[]),ke.trailingComments.push(Ie),_e.splice(Oe,1)):Oe+=1;if(Oe===_e.length)return u.Break;if(_e[Oe].extendedRange[0]>ke.range[1])return u.Skip}}),z}return a.Syntax=l,a.traverse=V,a.replace=se,a.attachComments=re,a.VisitorKeys=f,a.VisitorOption=u,a.Controller=M,a.cloneEnvironment=function(){return e({})},a})(o)})(estraverse);var utils={},ast={exports:{}};(function(){function o(d){if(d==null)return!1;switch(d.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(d){if(d==null)return!1;switch(d.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function a(d){if(d==null)return!1;switch(d.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function l(d){return a(d)||d!=null&&d.type==="FunctionDeclaration"}function u(d){switch(d.type){case"IfStatement":return d.alternate!=null?d.alternate:d.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return d.body}return null}function f(d){var p;if(d.type!=="IfStatement"||d.alternate==null)return!1;p=d.consequent;do{if(p.type==="IfStatement"&&p.alternate==null)return!0;p=u(p)}while(p);return!1}ast.exports={isExpression:o,isStatement:a,isIterationStatement:e,isSourceElement:l,isProblematicIfStatement:f,trailingStatement:u}})();var astExports=ast.exports,code$1={exports:{}};(function(){var o,e,a,l,u,f;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},o={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function d(L){return 48<=L&&L<=57}function p(L){return 48<=L&&L<=57||97<=L&&L<=102||65<=L&&L<=70}function g(L){return L>=48&&L<=55}a=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function b(L){return L===32||L===9||L===11||L===12||L===160||L>=5760&&a.indexOf(L)>=0}function O(L){return L===10||L===13||L===8232||L===8233}function A(L){if(L<=65535)return String.fromCharCode(L);var V=String.fromCharCode(Math.floor((L-65536)/1024)+55296),se=String.fromCharCode((L-65536)%1024+56320);return V+se}for(l=new Array(128),f=0;f<128;++f)l[f]=f>=97&&f<=122||f>=65&&f<=90||f===36||f===95;for(u=new Array(128),f=0;f<128;++f)u[f]=f>=97&&f<=122||f>=65&&f<=90||f>=48&&f<=57||f===36||f===95;function k(L){return L<128?l[L]:e.NonAsciiIdentifierStart.test(A(L))}function M(L){return L<128?u[L]:e.NonAsciiIdentifierPart.test(A(L))}function B(L){return L<128?l[L]:o.NonAsciiIdentifierStart.test(A(L))}function N(L){return L<128?u[L]:o.NonAsciiIdentifierPart.test(A(L))}code$1.exports={isDecimalDigit:d,isHexDigit:p,isOctalDigit:g,isWhiteSpace:b,isLineTerminator:O,isIdentifierStartES5:k,isIdentifierPartES5:M,isIdentifierStartES6:B,isIdentifierPartES6:N}})();var codeExports=code$1.exports,keyword$1={exports:{}};(function(){var o=codeExports;function e(k){switch(k){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function a(k,M){return!M&&k==="yield"?!1:l(k,M)}function l(k,M){if(M&&e(k))return!0;switch(k.length){case 2:return k==="if"||k==="in"||k==="do";case 3:return k==="var"||k==="for"||k==="new"||k==="try";case 4:return k==="this"||k==="else"||k==="case"||k==="void"||k==="with"||k==="enum";case 5:return k==="while"||k==="break"||k==="catch"||k==="throw"||k==="const"||k==="yield"||k==="class"||k==="super";case 6:return k==="return"||k==="typeof"||k==="delete"||k==="switch"||k==="export"||k==="import";case 7:return k==="default"||k==="finally"||k==="extends";case 8:return k==="function"||k==="continue"||k==="debugger";case 10:return k==="instanceof";default:return!1}}function u(k,M){return k==="null"||k==="true"||k==="false"||a(k,M)}function f(k,M){return k==="null"||k==="true"||k==="false"||l(k,M)}function d(k){return k==="eval"||k==="arguments"}function p(k){var M,B,N;if(k.length===0||(N=k.charCodeAt(0),!o.isIdentifierStartES5(N)))return!1;for(M=1,B=k.length;M<B;++M)if(N=k.charCodeAt(M),!o.isIdentifierPartES5(N))return!1;return!0}function g(k,M){return(k-55296)*1024+(M-56320)+65536}function b(k){var M,B,N,L,V;if(k.length===0)return!1;for(V=o.isIdentifierStartES6,M=0,B=k.length;M<B;++M){if(N=k.charCodeAt(M),55296<=N&&N<=56319){if(++M,M>=B||(L=k.charCodeAt(M),!(56320<=L&&L<=57343)))return!1;N=g(N,L)}if(!V(N))return!1;V=o.isIdentifierPartES6}return!0}function O(k,M){return p(k)&&!u(k,M)}function A(k,M){return b(k)&&!f(k,M)}keyword$1.exports={isKeywordES5:a,isKeywordES6:l,isReservedWordES5:u,isReservedWordES6:f,isRestrictedWord:d,isIdentifierNameES5:p,isIdentifierNameES6:b,isIdentifierES5:O,isIdentifierES6:A}})();var keywordExports=keyword$1.exports;(function(){utils.ast=astExports,utils.code=codeExports,utils.keyword=keywordExports})();var sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(e){if(0<=e&&e<o.length)return o[e];throw new TypeError("Must be between 0 and 63: "+e)},base64.decode=function(e){var a=65,l=90,u=97,f=122,d=48,p=57,g=43,b=47,O=26,A=52;return a<=e&&e<=l?e-a:u<=e&&e<=f?e-u+O:d<=e&&e<=p?e-d+A:e==g?62:e==b?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var o=requireBase64(),e=5,a=1<<e,l=a-1,u=a;function f(p){return p<0?(-p<<1)+1:(p<<1)+0}function d(p){var g=(p&1)===1,b=p>>1;return g?-b:b}return base64Vlq.encode=function(g){var b="",O,A=f(g);do O=A&l,A>>>=e,A>0&&(O|=u),b+=o.encode(O);while(A>0);return b},base64Vlq.decode=function(g,b,O){var A=g.length,k=0,M=0,B,N;do{if(b>=A)throw new Error("Expected more digits in base 64 VLQ value.");if(N=o.decode(g.charCodeAt(b++)),N===-1)throw new Error("Invalid base64 digit: "+g.charAt(b-1));B=!!(N&u),N&=l,k=k+(N<<M),M+=e}while(B);O.value=d(k),O.rest=b},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(o){function e(re,z,oe){if(z in re)return re[z];if(arguments.length===3)return oe;throw new Error('"'+z+'" is a required argument.')}o.getArg=e;var a=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,l=/^data:.+\,.+$/;function u(re){var z=re.match(a);return z?{scheme:z[1],auth:z[2],host:z[3],port:z[4],path:z[5]}:null}o.urlParse=u;function f(re){var z="";return re.scheme&&(z+=re.scheme+":"),z+="//",re.auth&&(z+=re.auth+"@"),re.host&&(z+=re.host),re.port&&(z+=":"+re.port),re.path&&(z+=re.path),z}o.urlGenerate=f;function d(re){var z=re,oe=u(re);if(oe){if(!oe.path)return re;z=oe.path}for(var de=o.isAbsolute(z),_e=z.split(/\/+/),Ce,be=0,xe=_e.length-1;xe>=0;xe--)Ce=_e[xe],Ce==="."?_e.splice(xe,1):Ce===".."?be++:be>0&&(Ce===""?(_e.splice(xe+1,be),be=0):(_e.splice(xe,2),be--));return z=_e.join("/"),z===""&&(z=de?"/":"."),oe?(oe.path=z,f(oe)):z}o.normalize=d;function p(re,z){re===""&&(re="."),z===""&&(z=".");var oe=u(z),de=u(re);if(de&&(re=de.path||"/"),oe&&!oe.scheme)return de&&(oe.scheme=de.scheme),f(oe);if(oe||z.match(l))return z;if(de&&!de.host&&!de.path)return de.host=z,f(de);var _e=z.charAt(0)==="/"?z:d(re.replace(/\/+$/,"")+"/"+z);return de?(de.path=_e,f(de)):_e}o.join=p,o.isAbsolute=function(re){return re.charAt(0)==="/"||a.test(re)};function g(re,z){re===""&&(re="."),re=re.replace(/\/$/,"");for(var oe=0;z.indexOf(re+"/")!==0;){var de=re.lastIndexOf("/");if(de<0||(re=re.slice(0,de),re.match(/^([^\/]+:\/)?\/*$/)))return z;++oe}return Array(oe+1).join("../")+z.substr(re.length+1)}o.relative=g;var b=function(){var re=Object.create(null);return!("__proto__"in re)}();function O(re){return re}function A(re){return M(re)?"$"+re:re}o.toSetString=b?O:A;function k(re){return M(re)?re.slice(1):re}o.fromSetString=b?O:k;function M(re){if(!re)return!1;var z=re.length;if(z<9||re.charCodeAt(z-1)!==95||re.charCodeAt(z-2)!==95||re.charCodeAt(z-3)!==111||re.charCodeAt(z-4)!==116||re.charCodeAt(z-5)!==111||re.charCodeAt(z-6)!==114||re.charCodeAt(z-7)!==112||re.charCodeAt(z-8)!==95||re.charCodeAt(z-9)!==95)return!1;for(var oe=z-10;oe>=0;oe--)if(re.charCodeAt(oe)!==36)return!1;return!0}function B(re,z,oe){var de=L(re.source,z.source);return de!==0||(de=re.originalLine-z.originalLine,de!==0)||(de=re.originalColumn-z.originalColumn,de!==0||oe)||(de=re.generatedColumn-z.generatedColumn,de!==0)||(de=re.generatedLine-z.generatedLine,de!==0)?de:L(re.name,z.name)}o.compareByOriginalPositions=B;function N(re,z,oe){var de=re.generatedLine-z.generatedLine;return de!==0||(de=re.generatedColumn-z.generatedColumn,de!==0||oe)||(de=L(re.source,z.source),de!==0)||(de=re.originalLine-z.originalLine,de!==0)||(de=re.originalColumn-z.originalColumn,de!==0)?de:L(re.name,z.name)}o.compareByGeneratedPositionsDeflated=N;function L(re,z){return re===z?0:re===null?1:z===null?-1:re>z?1:-1}function V(re,z){var oe=re.generatedLine-z.generatedLine;return oe!==0||(oe=re.generatedColumn-z.generatedColumn,oe!==0)||(oe=L(re.source,z.source),oe!==0)||(oe=re.originalLine-z.originalLine,oe!==0)||(oe=re.originalColumn-z.originalColumn,oe!==0)?oe:L(re.name,z.name)}o.compareByGeneratedPositionsInflated=V;function se(re){return JSON.parse(re.replace(/^\)]}'[^\n]*\n/,""))}o.parseSourceMapInput=se;function pe(re,z,oe){if(z=z||"",re&&(re[re.length-1]!=="/"&&z[0]!=="/"&&(re+="/"),z=re+z),oe){var de=u(oe);if(!de)throw new Error("sourceMapURL could not be parsed");if(de.path){var _e=de.path.lastIndexOf("/");_e>=0&&(de.path=de.path.substring(0,_e+1))}z=p(f(de),z)}return d(z)}o.computeSourceURL=pe}(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var o=requireUtil(),e=Object.prototype.hasOwnProperty,a=typeof Map<"u";function l(){this._array=[],this._set=a?new Map:Object.create(null)}return l.fromArray=function(f,d){for(var p=new l,g=0,b=f.length;g<b;g++)p.add(f[g],d);return p},l.prototype.size=function(){return a?this._set.size:Object.getOwnPropertyNames(this._set).length},l.prototype.add=function(f,d){var p=a?f:o.toSetString(f),g=a?this.has(f):e.call(this._set,p),b=this._array.length;(!g||d)&&this._array.push(f),g||(a?this._set.set(f,b):this._set[p]=b)},l.prototype.has=function(f){if(a)return this._set.has(f);var d=o.toSetString(f);return e.call(this._set,d)},l.prototype.indexOf=function(f){if(a){var d=this._set.get(f);if(d>=0)return d}else{var p=o.toSetString(f);if(e.call(this._set,p))return this._set[p]}throw new Error('"'+f+'" is not in the set.')},l.prototype.at=function(f){if(f>=0&&f<this._array.length)return this._array[f];throw new Error("No element indexed by "+f)},l.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=l,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var o=requireUtil();function e(l,u){var f=l.generatedLine,d=u.generatedLine,p=l.generatedColumn,g=u.generatedColumn;return d>f||d==f&&g>=p||o.compareByGeneratedPositionsInflated(l,u)<=0}function a(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return a.prototype.unsortedForEach=function(u,f){this._array.forEach(u,f)},a.prototype.add=function(u){e(this._last,u)?(this._last=u,this._array.push(u)):(this._sorted=!1,this._array.push(u))},a.prototype.toArray=function(){return this._sorted||(this._array.sort(o.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=a,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var o=requireBase64Vlq(),e=requireUtil(),a=requireArraySet().ArraySet,l=requireMappingList().MappingList;function u(f){f||(f={}),this._file=e.getArg(f,"file",null),this._sourceRoot=e.getArg(f,"sourceRoot",null),this._skipValidation=e.getArg(f,"skipValidation",!1),this._sources=new a,this._names=new a,this._mappings=new l,this._sourcesContents=null}return u.prototype._version=3,u.fromSourceMap=function(d){var p=d.sourceRoot,g=new u({file:d.file,sourceRoot:p});return d.eachMapping(function(b){var O={generated:{line:b.generatedLine,column:b.generatedColumn}};b.source!=null&&(O.source=b.source,p!=null&&(O.source=e.relative(p,O.source)),O.original={line:b.originalLine,column:b.originalColumn},b.name!=null&&(O.name=b.name)),g.addMapping(O)}),d.sources.forEach(function(b){var O=b;p!==null&&(O=e.relative(p,b)),g._sources.has(O)||g._sources.add(O);var A=d.sourceContentFor(b);A!=null&&g.setSourceContent(b,A)}),g},u.prototype.addMapping=function(d){var p=e.getArg(d,"generated"),g=e.getArg(d,"original",null),b=e.getArg(d,"source",null),O=e.getArg(d,"name",null);this._skipValidation||this._validateMapping(p,g,b,O),b!=null&&(b=String(b),this._sources.has(b)||this._sources.add(b)),O!=null&&(O=String(O),this._names.has(O)||this._names.add(O)),this._mappings.add({generatedLine:p.line,generatedColumn:p.column,originalLine:g!=null&&g.line,originalColumn:g!=null&&g.column,source:b,name:O})},u.prototype.setSourceContent=function(d,p){var g=d;this._sourceRoot!=null&&(g=e.relative(this._sourceRoot,g)),p!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(g)]=p):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(g)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},u.prototype.applySourceMap=function(d,p,g){var b=p;if(p==null){if(d.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);b=d.file}var O=this._sourceRoot;O!=null&&(b=e.relative(O,b));var A=new a,k=new a;this._mappings.unsortedForEach(function(M){if(M.source===b&&M.originalLine!=null){var B=d.originalPositionFor({line:M.originalLine,column:M.originalColumn});B.source!=null&&(M.source=B.source,g!=null&&(M.source=e.join(g,M.source)),O!=null&&(M.source=e.relative(O,M.source)),M.originalLine=B.line,M.originalColumn=B.column,B.name!=null&&(M.name=B.name))}var N=M.source;N!=null&&!A.has(N)&&A.add(N);var L=M.name;L!=null&&!k.has(L)&&k.add(L)},this),this._sources=A,this._names=k,d.sources.forEach(function(M){var B=d.sourceContentFor(M);B!=null&&(g!=null&&(M=e.join(g,M)),O!=null&&(M=e.relative(O,M)),this.setSourceContent(M,B))},this)},u.prototype._validateMapping=function(d,p,g,b){if(p&&typeof p.line!="number"&&typeof p.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(d&&"line"in d&&"column"in d&&d.line>0&&d.column>=0&&!p&&!g&&!b)){if(d&&"line"in d&&"column"in d&&p&&"line"in p&&"column"in p&&d.line>0&&d.column>=0&&p.line>0&&p.column>=0&&g)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:d,source:g,original:p,name:b}))}},u.prototype._serializeMappings=function(){for(var d=0,p=1,g=0,b=0,O=0,A=0,k="",M,B,N,L,V=this._mappings.toArray(),se=0,pe=V.length;se<pe;se++){if(B=V[se],M="",B.generatedLine!==p)for(d=0;B.generatedLine!==p;)M+=";",p++;else if(se>0){if(!e.compareByGeneratedPositionsInflated(B,V[se-1]))continue;M+=","}M+=o.encode(B.generatedColumn-d),d=B.generatedColumn,B.source!=null&&(L=this._sources.indexOf(B.source),M+=o.encode(L-A),A=L,M+=o.encode(B.originalLine-1-b),b=B.originalLine-1,M+=o.encode(B.originalColumn-g),g=B.originalColumn,B.name!=null&&(N=this._names.indexOf(B.name),M+=o.encode(N-O),O=N)),k+=M}return k},u.prototype._generateSourcesContent=function(d,p){return d.map(function(g){if(!this._sourcesContents)return null;p!=null&&(g=e.relative(p,g));var b=e.toSetString(g);return Object.prototype.hasOwnProperty.call(this._sourcesContents,b)?this._sourcesContents[b]:null},this)},u.prototype.toJSON=function(){var d={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(d.file=this._file),this._sourceRoot!=null&&(d.sourceRoot=this._sourceRoot),this._sourcesContents&&(d.sourcesContent=this._generateSourcesContent(d.sources,d.sourceRoot)),d},u.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=u,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,function(o){o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2;function e(a,l,u,f,d,p){var g=Math.floor((l-a)/2)+a,b=d(u,f[g],!0);return b===0?g:b>0?l-g>1?e(g,l,u,f,d,p):p==o.LEAST_UPPER_BOUND?l<f.length?l:-1:g:g-a>1?e(a,g,u,f,d,p):p==o.LEAST_UPPER_BOUND?g:a<0?-1:a}o.search=function(l,u,f,d){if(u.length===0)return-1;var p=e(-1,u.length,l,u,f,d||o.GREATEST_LOWER_BOUND);if(p<0)return-1;for(;p-1>=0&&f(u[p],u[p-1],!0)===0;)--p;return p}}(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function o(l,u,f){var d=l[u];l[u]=l[f],l[f]=d}function e(l,u){return Math.round(l+Math.random()*(u-l))}function a(l,u,f,d){if(f<d){var p=e(f,d),g=f-1;o(l,p,d);for(var b=l[d],O=f;O<d;O++)u(l[O],b)<=0&&(g+=1,o(l,g,O));o(l,g+1,O);var A=g+1;a(l,u,f,A-1),a(l,u,A+1,d)}}return quickSort.quickSort=function(l,u){a(l,u,0,l.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var o=requireUtil(),e=requireBinarySearch(),a=requireArraySet().ArraySet,l=requireBase64Vlq(),u=requireQuickSort().quickSort;function f(b,O){var A=b;return typeof b=="string"&&(A=o.parseSourceMapInput(b)),A.sections!=null?new g(A,O):new d(A,O)}f.fromSourceMap=function(b,O){return d.fromSourceMap(b,O)},f.prototype._version=3,f.prototype.__generatedMappings=null,Object.defineProperty(f.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),f.prototype.__originalMappings=null,Object.defineProperty(f.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),f.prototype._charIsMappingSeparator=function(O,A){var k=O.charAt(A);return k===";"||k===","},f.prototype._parseMappings=function(O,A){throw new Error("Subclasses must implement _parseMappings")},f.GENERATED_ORDER=1,f.ORIGINAL_ORDER=2,f.GREATEST_LOWER_BOUND=1,f.LEAST_UPPER_BOUND=2,f.prototype.eachMapping=function(O,A,k){var M=A||null,B=k||f.GENERATED_ORDER,N;switch(B){case f.GENERATED_ORDER:N=this._generatedMappings;break;case f.ORIGINAL_ORDER:N=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var L=this.sourceRoot;N.map(function(V){var se=V.source===null?null:this._sources.at(V.source);return se=o.computeSourceURL(L,se,this._sourceMapURL),{source:se,generatedLine:V.generatedLine,generatedColumn:V.generatedColumn,originalLine:V.originalLine,originalColumn:V.originalColumn,name:V.name===null?null:this._names.at(V.name)}},this).forEach(O,M)},f.prototype.allGeneratedPositionsFor=function(O){var A=o.getArg(O,"line"),k={source:o.getArg(O,"source"),originalLine:A,originalColumn:o.getArg(O,"column",0)};if(k.source=this._findSourceIndex(k.source),k.source<0)return[];var M=[],B=this._findMapping(k,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(B>=0){var N=this._originalMappings[B];if(O.column===void 0)for(var L=N.originalLine;N&&N.originalLine===L;)M.push({line:o.getArg(N,"generatedLine",null),column:o.getArg(N,"generatedColumn",null),lastColumn:o.getArg(N,"lastGeneratedColumn",null)}),N=this._originalMappings[++B];else for(var V=N.originalColumn;N&&N.originalLine===A&&N.originalColumn==V;)M.push({line:o.getArg(N,"generatedLine",null),column:o.getArg(N,"generatedColumn",null),lastColumn:o.getArg(N,"lastGeneratedColumn",null)}),N=this._originalMappings[++B]}return M},sourceMapConsumer.SourceMapConsumer=f;function d(b,O){var A=b;typeof b=="string"&&(A=o.parseSourceMapInput(b));var k=o.getArg(A,"version"),M=o.getArg(A,"sources"),B=o.getArg(A,"names",[]),N=o.getArg(A,"sourceRoot",null),L=o.getArg(A,"sourcesContent",null),V=o.getArg(A,"mappings"),se=o.getArg(A,"file",null);if(k!=this._version)throw new Error("Unsupported version: "+k);N&&(N=o.normalize(N)),M=M.map(String).map(o.normalize).map(function(pe){return N&&o.isAbsolute(N)&&o.isAbsolute(pe)?o.relative(N,pe):pe}),this._names=a.fromArray(B.map(String),!0),this._sources=a.fromArray(M,!0),this._absoluteSources=this._sources.toArray().map(function(pe){return o.computeSourceURL(N,pe,O)}),this.sourceRoot=N,this.sourcesContent=L,this._mappings=V,this._sourceMapURL=O,this.file=se}d.prototype=Object.create(f.prototype),d.prototype.consumer=f,d.prototype._findSourceIndex=function(b){var O=b;if(this.sourceRoot!=null&&(O=o.relative(this.sourceRoot,O)),this._sources.has(O))return this._sources.indexOf(O);var A;for(A=0;A<this._absoluteSources.length;++A)if(this._absoluteSources[A]==b)return A;return-1},d.fromSourceMap=function(O,A){var k=Object.create(d.prototype),M=k._names=a.fromArray(O._names.toArray(),!0),B=k._sources=a.fromArray(O._sources.toArray(),!0);k.sourceRoot=O._sourceRoot,k.sourcesContent=O._generateSourcesContent(k._sources.toArray(),k.sourceRoot),k.file=O._file,k._sourceMapURL=A,k._absoluteSources=k._sources.toArray().map(function(oe){return o.computeSourceURL(k.sourceRoot,oe,A)});for(var N=O._mappings.toArray().slice(),L=k.__generatedMappings=[],V=k.__originalMappings=[],se=0,pe=N.length;se<pe;se++){var re=N[se],z=new p;z.generatedLine=re.generatedLine,z.generatedColumn=re.generatedColumn,re.source&&(z.source=B.indexOf(re.source),z.originalLine=re.originalLine,z.originalColumn=re.originalColumn,re.name&&(z.name=M.indexOf(re.name)),V.push(z)),L.push(z)}return u(k.__originalMappings,o.compareByOriginalPositions),k},d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function p(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}d.prototype._parseMappings=function(O,A){for(var k=1,M=0,B=0,N=0,L=0,V=0,se=O.length,pe=0,re={},z={},oe=[],de=[],_e,Ce,be,xe,Oe;pe<se;)if(O.charAt(pe)===";")k++,pe++,M=0;else if(O.charAt(pe)===",")pe++;else{for(_e=new p,_e.generatedLine=k,xe=pe;xe<se&&!this._charIsMappingSeparator(O,xe);xe++);if(Ce=O.slice(pe,xe),be=re[Ce],be)pe+=Ce.length;else{for(be=[];pe<xe;)l.decode(O,pe,z),Oe=z.value,pe=z.rest,be.push(Oe);if(be.length===2)throw new Error("Found a source, but no line and column");if(be.length===3)throw new Error("Found a source and line, but no column");re[Ce]=be}_e.generatedColumn=M+be[0],M=_e.generatedColumn,be.length>1&&(_e.source=L+be[1],L+=be[1],_e.originalLine=B+be[2],B=_e.originalLine,_e.originalLine+=1,_e.originalColumn=N+be[3],N=_e.originalColumn,be.length>4&&(_e.name=V+be[4],V+=be[4])),de.push(_e),typeof _e.originalLine=="number"&&oe.push(_e)}u(de,o.compareByGeneratedPositionsDeflated),this.__generatedMappings=de,u(oe,o.compareByOriginalPositions),this.__originalMappings=oe},d.prototype._findMapping=function(O,A,k,M,B,N){if(O[k]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+O[k]);if(O[M]<0)throw new TypeError("Column must be greater than or equal to 0, got "+O[M]);return e.search(O,A,B,N)},d.prototype.computeColumnSpans=function(){for(var O=0;O<this._generatedMappings.length;++O){var A=this._generatedMappings[O];if(O+1<this._generatedMappings.length){var k=this._generatedMappings[O+1];if(A.generatedLine===k.generatedLine){A.lastGeneratedColumn=k.generatedColumn-1;continue}}A.lastGeneratedColumn=1/0}},d.prototype.originalPositionFor=function(O){var A={generatedLine:o.getArg(O,"line"),generatedColumn:o.getArg(O,"column")},k=this._findMapping(A,this._generatedMappings,"generatedLine","generatedColumn",o.compareByGeneratedPositionsDeflated,o.getArg(O,"bias",f.GREATEST_LOWER_BOUND));if(k>=0){var M=this._generatedMappings[k];if(M.generatedLine===A.generatedLine){var B=o.getArg(M,"source",null);B!==null&&(B=this._sources.at(B),B=o.computeSourceURL(this.sourceRoot,B,this._sourceMapURL));var N=o.getArg(M,"name",null);return N!==null&&(N=this._names.at(N)),{source:B,line:o.getArg(M,"originalLine",null),column:o.getArg(M,"originalColumn",null),name:N}}}return{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(O){return O==null}):!1},d.prototype.sourceContentFor=function(O,A){if(!this.sourcesContent)return null;var k=this._findSourceIndex(O);if(k>=0)return this.sourcesContent[k];var M=O;this.sourceRoot!=null&&(M=o.relative(this.sourceRoot,M));var B;if(this.sourceRoot!=null&&(B=o.urlParse(this.sourceRoot))){var N=M.replace(/^file:\/\//,"");if(B.scheme=="file"&&this._sources.has(N))return this.sourcesContent[this._sources.indexOf(N)];if((!B.path||B.path=="/")&&this._sources.has("/"+M))return this.sourcesContent[this._sources.indexOf("/"+M)]}if(A)return null;throw new Error('"'+M+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(O){var A=o.getArg(O,"source");if(A=this._findSourceIndex(A),A<0)return{line:null,column:null,lastColumn:null};var k={source:A,originalLine:o.getArg(O,"line"),originalColumn:o.getArg(O,"column")},M=this._findMapping(k,this._originalMappings,"originalLine","originalColumn",o.compareByOriginalPositions,o.getArg(O,"bias",f.GREATEST_LOWER_BOUND));if(M>=0){var B=this._originalMappings[M];if(B.source===k.source)return{line:o.getArg(B,"generatedLine",null),column:o.getArg(B,"generatedColumn",null),lastColumn:o.getArg(B,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=d;function g(b,O){var A=b;typeof b=="string"&&(A=o.parseSourceMapInput(b));var k=o.getArg(A,"version"),M=o.getArg(A,"sections");if(k!=this._version)throw new Error("Unsupported version: "+k);this._sources=new a,this._names=new a;var B={line:-1,column:0};this._sections=M.map(function(N){if(N.url)throw new Error("Support for url field in sections not implemented.");var L=o.getArg(N,"offset"),V=o.getArg(L,"line"),se=o.getArg(L,"column");if(V<B.line||V===B.line&&se<B.column)throw new Error("Section offsets must be ordered and non-overlapping.");return B=L,{generatedOffset:{generatedLine:V+1,generatedColumn:se+1},consumer:new f(o.getArg(N,"map"),O)}})}return g.prototype=Object.create(f.prototype),g.prototype.constructor=f,g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){for(var b=[],O=0;O<this._sections.length;O++)for(var A=0;A<this._sections[O].consumer.sources.length;A++)b.push(this._sections[O].consumer.sources[A]);return b}}),g.prototype.originalPositionFor=function(O){var A={generatedLine:o.getArg(O,"line"),generatedColumn:o.getArg(O,"column")},k=e.search(A,this._sections,function(B,N){var L=B.generatedLine-N.generatedOffset.generatedLine;return L||B.generatedColumn-N.generatedOffset.generatedColumn}),M=this._sections[k];return M?M.consumer.originalPositionFor({line:A.generatedLine-(M.generatedOffset.generatedLine-1),column:A.generatedColumn-(M.generatedOffset.generatedLine===A.generatedLine?M.generatedOffset.generatedColumn-1:0),bias:O.bias}):{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(O){return O.consumer.hasContentsOfAllSources()})},g.prototype.sourceContentFor=function(O,A){for(var k=0;k<this._sections.length;k++){var M=this._sections[k],B=M.consumer.sourceContentFor(O,!0);if(B)return B}if(A)return null;throw new Error('"'+O+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(O){for(var A=0;A<this._sections.length;A++){var k=this._sections[A];if(k.consumer._findSourceIndex(o.getArg(O,"source"))!==-1){var M=k.consumer.generatedPositionFor(O);if(M){var B={line:M.line+(k.generatedOffset.generatedLine-1),column:M.column+(k.generatedOffset.generatedLine===M.line?k.generatedOffset.generatedColumn-1:0)};return B}}}return{line:null,column:null}},g.prototype._parseMappings=function(O,A){this.__generatedMappings=[],this.__originalMappings=[];for(var k=0;k<this._sections.length;k++)for(var M=this._sections[k],B=M.consumer._generatedMappings,N=0;N<B.length;N++){var L=B[N],V=M.consumer._sources.at(L.source);V=o.computeSourceURL(M.consumer.sourceRoot,V,this._sourceMapURL),this._sources.add(V),V=this._sources.indexOf(V);var se=null;L.name&&(se=M.consumer._names.at(L.name),this._names.add(se),se=this._names.indexOf(se));var pe={source:V,generatedLine:L.generatedLine+(M.generatedOffset.generatedLine-1),generatedColumn:L.generatedColumn+(M.generatedOffset.generatedLine===L.generatedLine?M.generatedOffset.generatedColumn-1:0),originalLine:L.originalLine,originalColumn:L.originalColumn,name:se};this.__generatedMappings.push(pe),typeof pe.originalLine=="number"&&this.__originalMappings.push(pe)}u(this.__generatedMappings,o.compareByGeneratedPositionsDeflated),u(this.__originalMappings,o.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=g,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var o=requireSourceMapGenerator().SourceMapGenerator,e=requireUtil(),a=/(\r?\n)/,l=10,u="$$$isSourceNode$$$";function f(d,p,g,b,O){this.children=[],this.sourceContents={},this.line=d??null,this.column=p??null,this.source=g??null,this.name=O??null,this[u]=!0,b!=null&&this.add(b)}return f.fromStringWithSourceMap=function(p,g,b){var O=new f,A=p.split(a),k=0,M=function(){var se=re(),pe=re()||"";return se+pe;function re(){return k<A.length?A[k++]:void 0}},B=1,N=0,L=null;return g.eachMapping(function(se){if(L!==null)if(B<se.generatedLine)V(L,M()),B++,N=0;else{var pe=A[k]||"",re=pe.substr(0,se.generatedColumn-N);A[k]=pe.substr(se.generatedColumn-N),N=se.generatedColumn,V(L,re),L=se;return}for(;B<se.generatedLine;)O.add(M()),B++;if(N<se.generatedColumn){var pe=A[k]||"";O.add(pe.substr(0,se.generatedColumn)),A[k]=pe.substr(se.generatedColumn),N=se.generatedColumn}L=se},this),k<A.length&&(L&&V(L,M()),O.add(A.splice(k).join(""))),g.sources.forEach(function(se){var pe=g.sourceContentFor(se);pe!=null&&(b!=null&&(se=e.join(b,se)),O.setSourceContent(se,pe))}),O;function V(se,pe){if(se===null||se.source===void 0)O.add(pe);else{var re=b?e.join(b,se.source):se.source;O.add(new f(se.originalLine,se.originalColumn,re,pe,se.name))}}},f.prototype.add=function(p){if(Array.isArray(p))p.forEach(function(g){this.add(g)},this);else if(p[u]||typeof p=="string")p&&this.children.push(p);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+p);return this},f.prototype.prepend=function(p){if(Array.isArray(p))for(var g=p.length-1;g>=0;g--)this.prepend(p[g]);else if(p[u]||typeof p=="string")this.children.unshift(p);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+p);return this},f.prototype.walk=function(p){for(var g,b=0,O=this.children.length;b<O;b++)g=this.children[b],g[u]?g.walk(p):g!==""&&p(g,{source:this.source,line:this.line,column:this.column,name:this.name})},f.prototype.join=function(p){var g,b,O=this.children.length;if(O>0){for(g=[],b=0;b<O-1;b++)g.push(this.children[b]),g.push(p);g.push(this.children[b]),this.children=g}return this},f.prototype.replaceRight=function(p,g){var b=this.children[this.children.length-1];return b[u]?b.replaceRight(p,g):typeof b=="string"?this.children[this.children.length-1]=b.replace(p,g):this.children.push("".replace(p,g)),this},f.prototype.setSourceContent=function(p,g){this.sourceContents[e.toSetString(p)]=g},f.prototype.walkSourceContents=function(p){for(var g=0,b=this.children.length;g<b;g++)this.children[g][u]&&this.children[g].walkSourceContents(p);for(var O=Object.keys(this.sourceContents),g=0,b=O.length;g<b;g++)p(e.fromSetString(O[g]),this.sourceContents[O[g]])},f.prototype.toString=function(){var p="";return this.walk(function(g){p+=g}),p},f.prototype.toStringWithSourceMap=function(p){var g={code:"",line:1,column:0},b=new o(p),O=!1,A=null,k=null,M=null,B=null;return this.walk(function(N,L){g.code+=N,L.source!==null&&L.line!==null&&L.column!==null?((A!==L.source||k!==L.line||M!==L.column||B!==L.name)&&b.addMapping({source:L.source,original:{line:L.line,column:L.column},generated:{line:g.line,column:g.column},name:L.name}),A=L.source,k=L.line,M=L.column,B=L.name,O=!0):O&&(b.addMapping({generated:{line:g.line,column:g.column}}),A=null,O=!1);for(var V=0,se=N.length;V<se;V++)N.charCodeAt(V)===l?(g.line++,g.column=0,V+1===se?(A=null,O=!1):O&&b.addMapping({source:L.source,original:{line:L.line,column:L.column},generated:{line:g.line,column:g.column},name:L.name})):g.column++}),this.walkSourceContents(function(N,L){b.setSourceContent(N,L)}),{code:g.code,map:b}},sourceNode.SourceNode=f,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}const name$3="escodegen",description="ECMAScript code generator",homepage="http://github.com/estools/escodegen",main="escodegen.js",bin={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version="2.1.0",engines={node:">=6.0"},maintainers=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository={type:"git",url:"http://github.com/estools/escodegen.git"},dependencies={estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1"},optionalDependencies={"source-map":"~0.6.1"},devDependencies={acorn:"^8.0.4",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^4.0.2","gulp-eslint":"^6.0.0","gulp-mocha":"^7.0.2",minimist:"^1.2.5",optionator:"^0.9.1",semver:"^7.3.4"},license="BSD-2-Clause",scripts={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"},require$$3={name:name$3,description,homepage,main,bin,files,version,engines,maintainers,repository,dependencies,optionalDependencies,devDependencies,license,scripts};(function(o){(function(){var e,a,l,u,f,d,p,g,b,O,A,k,M,B,N,L,V,se,pe,re,z,oe,de,_e,Ce,be;f=estraverse,d=utils,e=f.Syntax;function xe(R){return Qe.Expression.hasOwnProperty(R.type)}function Oe(R){return Qe.Statement.hasOwnProperty(R.type)}a={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},l={"??":a.Coalesce,"||":a.LogicalOR,"&&":a.LogicalAND,"|":a.BitwiseOR,"^":a.BitwiseXOR,"&":a.BitwiseAND,"==":a.Equality,"!=":a.Equality,"===":a.Equality,"!==":a.Equality,is:a.Equality,isnt:a.Equality,"<":a.Relational,">":a.Relational,"<=":a.Relational,">=":a.Relational,in:a.Relational,instanceof:a.Relational,"<<":a.BitwiseSHIFT,">>":a.BitwiseSHIFT,">>>":a.BitwiseSHIFT,"+":a.Additive,"-":a.Additive,"*":a.Multiplicative,"%":a.Multiplicative,"/":a.Multiplicative,"**":a.Exponentiation};var ke=1,Ie=2,Fe=4,Be=8,Ge=16,Ne=32,Ve=64,Ze=Ie|Fe,Je=ke|Ie,$e=ke|Ie|Fe,ht=ke,xt=Fe,Et=ke|Fe,et=ke,Le=ke|Ne,ot=0,St=ke|Ge,vt=ke|Be;function Lt(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function pt(R,q){var Z="";for(q|=0;q>0;q>>>=1,R+=R)q&1&&(Z+=R);return Z}function qt(R){return/[\r\n]/g.test(R)}function yt(R){var q=R.length;return q&&d.code.isLineTerminator(R.charCodeAt(q-1))}function wt(R,q){var Z;for(Z in q)q.hasOwnProperty(Z)&&(R[Z]=q[Z]);return R}function Wt(R,q){var Z,K;function he(Ae){return typeof Ae=="object"&&Ae instanceof Object&&!(Ae instanceof RegExp)}for(Z in q)q.hasOwnProperty(Z)&&(K=q[Z],he(K)?he(R[Z])?Wt(R[Z],K):R[Z]=Wt({},K):R[Z]=K);return R}function Mt(R){var q,Z,K,he,Ae;if(R!==R)throw new Error("Numeric literal whose value is NaN");if(R<0||R===0&&1/R<0)throw new Error("Numeric literal whose value is negative");if(R===1/0)return b?"null":O?"1e400":"1e+400";if(q=""+R,!O||q.length<3)return q;for(Z=q.indexOf("."),!b&&q.charCodeAt(0)===48&&Z===1&&(Z=0,q=q.slice(1)),K=q,q=q.replace("e+","e"),he=0,(Ae=K.indexOf("e"))>0&&(he=+K.slice(Ae+1),K=K.slice(0,Ae)),Z>=0&&(he-=K.length-Z-1,K=+(K.slice(0,Z)+K.slice(Z+1))+""),Ae=0;K.charCodeAt(K.length+Ae-1)===48;)--Ae;return Ae!==0&&(he-=Ae,K=K.slice(0,Ae)),he!==0&&(K+="e"+he),(K.length<q.length||A&&R>1e12&&Math.floor(R)===R&&(K="0x"+R.toString(16)).length<q.length)&&+K===R&&(q=K),q}function tn(R,q){return(R&-2)===8232?(q?"u":"\\u")+(R===8232?"2028":"2029"):R===10||R===13?(q?"":"\\")+(R===10?"n":"r"):String.fromCharCode(R)}function Kt(R){var q,Z,K,he,Ae,Ee,Te,je;if(Z=R.toString(),R.source){if(q=Z.match(/\/([^/]*)$/),!q)return Z;for(K=q[1],Z="",Te=!1,je=!1,he=0,Ae=R.source.length;he<Ae;++he)Ee=R.source.charCodeAt(he),je?(Z+=tn(Ee,je),je=!1):(Te?Ee===93&&(Te=!1):Ee===47?Z+="\\":Ee===91&&(Te=!0),Z+=tn(Ee,je),je=Ee===92);return"/"+Z+"/"+K}return Z}function Ht(R,q){var Z;return R===8?"\\b":R===12?"\\f":R===9?"\\t":(Z=R.toString(16).toUpperCase(),b||R>255?"\\u"+"0000".slice(Z.length)+Z:R===0&&!d.code.isDecimalDigit(q)?"\\0":R===11?"\\x0B":"\\x"+"00".slice(Z.length)+Z)}function Ut(R){if(R===92)return"\\\\";if(R===10)return"\\n";if(R===13)return"\\r";if(R===8232)return"\\u2028";if(R===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function Nt(R){var q,Z,K,he;for(he=k==="double"?'"':"'",q=0,Z=R.length;q<Z;++q)if(K=R.charCodeAt(q),K===39){he='"';break}else if(K===34){he="'";break}else K===92&&++q;return he+R+he}function zt(R){var q="",Z,K,he,Ae=0,Ee=0,Te,je;for(Z=0,K=R.length;Z<K;++Z){if(he=R.charCodeAt(Z),he===39)++Ae;else if(he===34)++Ee;else if(he===47&&b)q+="\\";else if(d.code.isLineTerminator(he)||he===92){q+=Ut(he);continue}else if(!d.code.isIdentifierPartES5(he)&&(b&&he<32||!b&&!M&&(he<32||he>126))){q+=Ht(he,R.charCodeAt(Z+1));continue}q+=String.fromCharCode(he)}if(Te=!(k==="double"||k==="auto"&&Ee<Ae),je=Te?"'":'"',!(Te?Ae:Ee))return je+q+je;for(R=q,q=je,Z=0,K=R.length;Z<K;++Z)he=R.charCodeAt(Z),(he===39&&Te||he===34&&!Te)&&(q+="\\"),q+=String.fromCharCode(he);return q+je}function Zt(R){var q,Z,K,he="";for(q=0,Z=R.length;q<Z;++q)K=R[q],he+=Array.isArray(K)?Zt(K):K;return he}function nt(R,q){if(!oe)return Array.isArray(R)?Zt(R):R;if(q==null){if(R instanceof u)return R;q={}}return q.loc==null?new u(null,null,oe,R,q.name||null):new u(q.loc.start.line,q.loc.start.column,oe===!0?q.loc.source||null:oe,R,q.name||null)}function kt(){return N||" "}function Xe(R,q){var Z,K,he,Ae;return Z=nt(R).toString(),Z.length===0?[q]:(K=nt(q).toString(),K.length===0?[R]:(he=Z.charCodeAt(Z.length-1),Ae=K.charCodeAt(0),(he===43||he===45)&&he===Ae||d.code.isIdentifierPartES5(he)&&d.code.isIdentifierPartES5(Ae)||he===47&&Ae===105?[R,kt(),q]:d.code.isWhiteSpace(he)||d.code.isLineTerminator(he)||d.code.isWhiteSpace(Ae)||d.code.isLineTerminator(Ae)?[R,q]:[R,N,q]))}function Pt(R){return[p,R]}function tt(R){var q;q=p,p+=g,R(p),p=q}function un(R){var q;for(q=R.length-1;q>=0&&!d.code.isLineTerminator(R.charCodeAt(q));--q);return R.length-1-q}function Ct(R,q){var Z,K,he,Ae,Ee,Te,je,it;for(Z=R.split(/\r\n|[\r\n]/),Te=Number.MAX_VALUE,K=1,he=Z.length;K<he;++K){for(Ae=Z[K],Ee=0;Ee<Ae.length&&d.code.isWhiteSpace(Ae.charCodeAt(Ee));)++Ee;Te>Ee&&(Te=Ee)}for(typeof q<"u"?(je=p,Z[1][Te]==="*"&&(q+=" "),p=q):(Te&1&&--Te,je=p),K=1,he=Z.length;K<he;++K)it=nt(Pt(Z[K].slice(Te))),Z[K]=oe?it.join(""):it;return p=je,Z.join(`
`)}function ut(R,q){if(R.type==="Line"){if(yt(R.value))return"//"+R.value;var Z="//"+R.value;return _e||(Z+=`
`),Z}return re.format.indent.adjustMultilineComment&&/[\n\r]/.test(R.value)?Ct("/*"+R.value+"*/",q):"/*"+R.value+"*/"}function nn(R,q){var Z,K,he,Ae,Ee,Te,je,it,mt,rn,cn,Vt,mn,Xt;if(R.leadingComments&&R.leadingComments.length>0){if(Ae=q,_e){for(he=R.leadingComments[0],q=[],it=he.extendedRange,mt=he.range,cn=de.substring(it[0],mt[0]),Xt=(cn.match(/\n/g)||[]).length,Xt>0?(q.push(pt(`
`,Xt)),q.push(Pt(ut(he)))):(q.push(cn),q.push(ut(he))),rn=mt,Z=1,K=R.leadingComments.length;Z<K;Z++)he=R.leadingComments[Z],mt=he.range,Vt=de.substring(rn[1],mt[0]),Xt=(Vt.match(/\n/g)||[]).length,q.push(pt(`
`,Xt)),q.push(Pt(ut(he))),rn=mt;mn=de.substring(mt[1],it[1]),Xt=(mn.match(/\n/g)||[]).length,q.push(pt(`
`,Xt))}else for(he=R.leadingComments[0],q=[],se&&R.type===e.Program&&R.body.length===0&&q.push(`
`),q.push(ut(he)),yt(nt(q).toString())||q.push(`
`),Z=1,K=R.leadingComments.length;Z<K;++Z)he=R.leadingComments[Z],je=[ut(he)],yt(nt(je).toString())||je.push(`
`),q.push(Pt(je));q.push(Pt(Ae))}if(R.trailingComments)if(_e)he=R.trailingComments[0],it=he.extendedRange,mt=he.range,cn=de.substring(it[0],mt[0]),Xt=(cn.match(/\n/g)||[]).length,Xt>0?(q.push(pt(`
`,Xt)),q.push(Pt(ut(he)))):(q.push(cn),q.push(ut(he)));else for(Ee=!yt(nt(q).toString()),Te=pt(" ",un(nt([p,q,g]).toString())),Z=0,K=R.trailingComments.length;Z<K;++Z)he=R.trailingComments[Z],Ee?(Z===0?q=[q,g]:q=[q,Te],q.push(ut(he,Te))):q=[q,Pt(ut(he))],Z!==K-1&&!yt(nt(q).toString())&&(q=[q,`
`]);return q}function jt(R,q,Z){var K,he=0;for(K=R;K<q;K++)de[K]===`
`&&he++;for(K=1;K<he;K++)Z.push(B)}function At(R,q,Z){return q<Z?["(",R,")"]:R}function ct(R){var q,Z,K;for(K=R.split(/\r\n|\n/),q=1,Z=K.length;q<Z;q++)K[q]=B+p+K[q];return K}function Rt(R,q){var Z,K,he;return Z=R[re.verbatim],typeof Z=="string"?K=At(ct(Z),a.Sequence,q):(K=ct(Z.content),he=Z.precedence!=null?Z.precedence:a.Sequence,K=At(K,he,q)),nt(K,R)}function Qe(){}Qe.prototype.maybeBlock=function(R,q){var Z,K,he=this;return K=!re.comment||!R.leadingComments,R.type===e.BlockStatement&&K?[N,this.generateStatement(R,q)]:R.type===e.EmptyStatement&&K?";":(tt(function(){Z=[B,Pt(he.generateStatement(R,q))]}),Z)},Qe.prototype.maybeBlockSuffix=function(R,q){var Z=yt(nt(q).toString());return R.type===e.BlockStatement&&(!re.comment||!R.leadingComments)&&!Z?[q,N]:Z?[q,p]:[q,B,p]};function st(R){return nt(R.name,R)}function Bt(R,q){return R.async?"async"+(q?kt():N):""}function Gt(R){var q=R.generator&&!re.moz.starlessGenerator;return q?"*"+N:""}function Dt(R){var q=R.value,Z="";return q.async&&(Z+=Bt(q,!R.computed)),q.generator&&(Z+=Gt(q)?"*":""),Z}Qe.prototype.generatePattern=function(R,q,Z){return R.type===e.Identifier?st(R):this.generateExpression(R,q,Z)},Qe.prototype.generateFunctionParams=function(R){var q,Z,K,he;if(he=!1,R.type===e.ArrowFunctionExpression&&!R.rest&&(!R.defaults||R.defaults.length===0)&&R.params.length===1&&R.params[0].type===e.Identifier)K=[Bt(R,!0),st(R.params[0])];else{for(K=R.type===e.ArrowFunctionExpression?[Bt(R,!1)]:[],K.push("("),R.defaults&&(he=!0),q=0,Z=R.params.length;q<Z;++q)he&&R.defaults[q]?K.push(this.generateAssignment(R.params[q],R.defaults[q],"=",a.Assignment,$e)):K.push(this.generatePattern(R.params[q],a.Assignment,$e)),q+1<Z&&K.push(","+N);R.rest&&(R.params.length&&K.push(","+N),K.push("..."),K.push(st(R.rest))),K.push(")")}return K},Qe.prototype.generateFunctionBody=function(R){var q,Z;return q=this.generateFunctionParams(R),R.type===e.ArrowFunctionExpression&&(q.push(N),q.push("=>")),R.expression?(q.push(N),Z=this.generateExpression(R.body,a.Assignment,$e),Z.toString().charAt(0)==="{"&&(Z=["(",Z,")"]),q.push(Z)):q.push(this.maybeBlock(R.body,vt)),q},Qe.prototype.generateIterationForStatement=function(R,q,Z){var K=["for"+(q.await?kt()+"await":"")+N+"("],he=this;return tt(function(){q.left.type===e.VariableDeclaration?tt(function(){K.push(q.left.kind+kt()),K.push(he.generateStatement(q.left.declarations[0],ot))}):K.push(he.generateExpression(q.left,a.Call,$e)),K=Xe(K,R),K=[Xe(K,he.generateExpression(q.right,a.Assignment,$e)),")"]}),K.push(this.maybeBlock(q.body,Z)),K},Qe.prototype.generatePropertyKey=function(R,q){var Z=[];return q&&Z.push("["),Z.push(this.generateExpression(R,a.Assignment,$e)),q&&Z.push("]"),Z},Qe.prototype.generateAssignment=function(R,q,Z,K,he){return a.Assignment<K&&(he|=ke),At([this.generateExpression(R,a.Call,he),N+Z+N,this.generateExpression(q,a.Assignment,he)],a.Assignment,K)},Qe.prototype.semicolon=function(R){return!V&&R&Ne?"":";"},Qe.Statement={BlockStatement:function(R,q){var Z,K,he=["{",B],Ae=this;return tt(function(){R.body.length===0&&_e&&(Z=R.range,Z[1]-Z[0]>2&&(K=de.substring(Z[0]+1,Z[1]-1),K[0]===`
`&&(he=["{"]),he.push(K)));var Ee,Te,je,it;for(it=et,q&Be&&(it|=Ge),Ee=0,Te=R.body.length;Ee<Te;++Ee)_e&&(Ee===0&&(R.body[0].leadingComments&&(Z=R.body[0].leadingComments[0].extendedRange,K=de.substring(Z[0],Z[1]),K[0]===`
`&&(he=["{"])),R.body[0].leadingComments||jt(R.range[0],R.body[0].range[0],he)),Ee>0&&!R.body[Ee-1].trailingComments&&!R.body[Ee].leadingComments&&jt(R.body[Ee-1].range[1],R.body[Ee].range[0],he)),Ee===Te-1&&(it|=Ne),R.body[Ee].leadingComments&&_e?je=Ae.generateStatement(R.body[Ee],it):je=Pt(Ae.generateStatement(R.body[Ee],it)),he.push(je),yt(nt(je).toString())||_e&&Ee<Te-1&&R.body[Ee+1].leadingComments||he.push(B),_e&&Ee===Te-1&&(R.body[Ee].trailingComments||jt(R.body[Ee].range[1],R.range[1],he))}),he.push(Pt("}")),he},BreakStatement:function(R,q){return R.label?"break "+R.label.name+this.semicolon(q):"break"+this.semicolon(q)},ContinueStatement:function(R,q){return R.label?"continue "+R.label.name+this.semicolon(q):"continue"+this.semicolon(q)},ClassBody:function(R,q){var Z=["{",B],K=this;return tt(function(he){var Ae,Ee;for(Ae=0,Ee=R.body.length;Ae<Ee;++Ae)Z.push(he),Z.push(K.generateExpression(R.body[Ae],a.Sequence,$e)),Ae+1<Ee&&Z.push(B)}),yt(nt(Z).toString())||Z.push(B),Z.push(p),Z.push("}"),Z},ClassDeclaration:function(R,q){var Z,K;return Z=["class"],R.id&&(Z=Xe(Z,this.generateExpression(R.id,a.Sequence,$e))),R.superClass&&(K=Xe("extends",this.generateExpression(R.superClass,a.Unary,$e)),Z=Xe(Z,K)),Z.push(N),Z.push(this.generateStatement(R.body,Le)),Z},DirectiveStatement:function(R,q){return re.raw&&R.raw?R.raw+this.semicolon(q):Nt(R.directive)+this.semicolon(q)},DoWhileStatement:function(R,q){var Z=Xe("do",this.maybeBlock(R.body,et));return Z=this.maybeBlockSuffix(R.body,Z),Xe(Z,["while"+N+"(",this.generateExpression(R.test,a.Sequence,$e),")"+this.semicolon(q)])},CatchClause:function(R,q){var Z,K=this;return tt(function(){var he;R.param?(Z=["catch"+N+"(",K.generateExpression(R.param,a.Sequence,$e),")"],R.guard&&(he=K.generateExpression(R.guard,a.Sequence,$e),Z.splice(2,0," if ",he))):Z=["catch"]}),Z.push(this.maybeBlock(R.body,et)),Z},DebuggerStatement:function(R,q){return"debugger"+this.semicolon(q)},EmptyStatement:function(R,q){return";"},ExportDefaultDeclaration:function(R,q){var Z=["export"],K;return K=q&Ne?Le:et,Z=Xe(Z,"default"),Oe(R.declaration)?Z=Xe(Z,this.generateStatement(R.declaration,K)):Z=Xe(Z,this.generateExpression(R.declaration,a.Assignment,$e)+this.semicolon(q)),Z},ExportNamedDeclaration:function(R,q){var Z=["export"],K,he=this;return K=q&Ne?Le:et,R.declaration?Xe(Z,this.generateStatement(R.declaration,K)):(R.specifiers&&(R.specifiers.length===0?Z=Xe(Z,"{"+N+"}"):R.specifiers[0].type===e.ExportBatchSpecifier?Z=Xe(Z,this.generateExpression(R.specifiers[0],a.Sequence,$e)):(Z=Xe(Z,"{"),tt(function(Ae){var Ee,Te;for(Z.push(B),Ee=0,Te=R.specifiers.length;Ee<Te;++Ee)Z.push(Ae),Z.push(he.generateExpression(R.specifiers[Ee],a.Sequence,$e)),Ee+1<Te&&Z.push(","+B)}),yt(nt(Z).toString())||Z.push(B),Z.push(p+"}")),R.source?Z=Xe(Z,["from"+N,this.generateExpression(R.source,a.Sequence,$e),this.semicolon(q)]):Z.push(this.semicolon(q))),Z)},ExportAllDeclaration:function(R,q){return["export"+N,"*"+N,"from"+N,this.generateExpression(R.source,a.Sequence,$e),this.semicolon(q)]},ExpressionStatement:function(R,q){var Z,K;function he(Te){var je;return Te.slice(0,5)!=="class"?!1:(je=Te.charCodeAt(5),je===123||d.code.isWhiteSpace(je)||d.code.isLineTerminator(je))}function Ae(Te){var je;return Te.slice(0,8)!=="function"?!1:(je=Te.charCodeAt(8),je===40||d.code.isWhiteSpace(je)||je===42||d.code.isLineTerminator(je))}function Ee(Te){var je,it,mt;if(Te.slice(0,5)!=="async"||!d.code.isWhiteSpace(Te.charCodeAt(5)))return!1;for(it=6,mt=Te.length;it<mt&&d.code.isWhiteSpace(Te.charCodeAt(it));++it);return it===mt||Te.slice(it,it+8)!=="function"?!1:(je=Te.charCodeAt(it+8),je===40||d.code.isWhiteSpace(je)||je===42||d.code.isLineTerminator(je))}return Z=[this.generateExpression(R.expression,a.Sequence,$e)],K=nt(Z).toString(),K.charCodeAt(0)===123||he(K)||Ae(K)||Ee(K)||pe&&q&Ge&&R.expression.type===e.Literal&&typeof R.expression.value=="string"?Z=["(",Z,")"+this.semicolon(q)]:Z.push(this.semicolon(q)),Z},ImportDeclaration:function(R,q){var Z,K,he=this;return R.specifiers.length===0?["import",N,this.generateExpression(R.source,a.Sequence,$e),this.semicolon(q)]:(Z=["import"],K=0,R.specifiers[K].type===e.ImportDefaultSpecifier&&(Z=Xe(Z,[this.generateExpression(R.specifiers[K],a.Sequence,$e)]),++K),R.specifiers[K]&&(K!==0&&Z.push(","),R.specifiers[K].type===e.ImportNamespaceSpecifier?Z=Xe(Z,[N,this.generateExpression(R.specifiers[K],a.Sequence,$e)]):(Z.push(N+"{"),R.specifiers.length-K===1?(Z.push(N),Z.push(this.generateExpression(R.specifiers[K],a.Sequence,$e)),Z.push(N+"}"+N)):(tt(function(Ae){var Ee,Te;for(Z.push(B),Ee=K,Te=R.specifiers.length;Ee<Te;++Ee)Z.push(Ae),Z.push(he.generateExpression(R.specifiers[Ee],a.Sequence,$e)),Ee+1<Te&&Z.push(","+B)}),yt(nt(Z).toString())||Z.push(B),Z.push(p+"}"+N)))),Z=Xe(Z,["from"+N,this.generateExpression(R.source,a.Sequence,$e),this.semicolon(q)]),Z)},VariableDeclarator:function(R,q){var Z=q&ke?$e:Ze;return R.init?[this.generateExpression(R.id,a.Assignment,Z),N,"=",N,this.generateExpression(R.init,a.Assignment,Z)]:this.generatePattern(R.id,a.Assignment,Z)},VariableDeclaration:function(R,q){var Z,K,he,Ae,Ee,Te=this;Z=[R.kind],Ee=q&ke?et:ot;function je(){for(Ae=R.declarations[0],re.comment&&Ae.leadingComments?(Z.push(`
`),Z.push(Pt(Te.generateStatement(Ae,Ee)))):(Z.push(kt()),Z.push(Te.generateStatement(Ae,Ee))),K=1,he=R.declarations.length;K<he;++K)Ae=R.declarations[K],re.comment&&Ae.leadingComments?(Z.push(","+B),Z.push(Pt(Te.generateStatement(Ae,Ee)))):(Z.push(","+N),Z.push(Te.generateStatement(Ae,Ee)))}return R.declarations.length>1?tt(je):je(),Z.push(this.semicolon(q)),Z},ThrowStatement:function(R,q){return[Xe("throw",this.generateExpression(R.argument,a.Sequence,$e)),this.semicolon(q)]},TryStatement:function(R,q){var Z,K,he,Ae;if(Z=["try",this.maybeBlock(R.block,et)],Z=this.maybeBlockSuffix(R.block,Z),R.handlers)for(K=0,he=R.handlers.length;K<he;++K)Z=Xe(Z,this.generateStatement(R.handlers[K],et)),(R.finalizer||K+1!==he)&&(Z=this.maybeBlockSuffix(R.handlers[K].body,Z));else{for(Ae=R.guardedHandlers||[],K=0,he=Ae.length;K<he;++K)Z=Xe(Z,this.generateStatement(Ae[K],et)),(R.finalizer||K+1!==he)&&(Z=this.maybeBlockSuffix(Ae[K].body,Z));if(R.handler)if(Array.isArray(R.handler))for(K=0,he=R.handler.length;K<he;++K)Z=Xe(Z,this.generateStatement(R.handler[K],et)),(R.finalizer||K+1!==he)&&(Z=this.maybeBlockSuffix(R.handler[K].body,Z));else Z=Xe(Z,this.generateStatement(R.handler,et)),R.finalizer&&(Z=this.maybeBlockSuffix(R.handler.body,Z))}return R.finalizer&&(Z=Xe(Z,["finally",this.maybeBlock(R.finalizer,et)])),Z},SwitchStatement:function(R,q){var Z,K,he,Ae,Ee,Te=this;if(tt(function(){Z=["switch"+N+"(",Te.generateExpression(R.discriminant,a.Sequence,$e),")"+N+"{"+B]}),R.cases)for(Ee=et,he=0,Ae=R.cases.length;he<Ae;++he)he===Ae-1&&(Ee|=Ne),K=Pt(this.generateStatement(R.cases[he],Ee)),Z.push(K),yt(nt(K).toString())||Z.push(B);return Z.push(Pt("}")),Z},SwitchCase:function(R,q){var Z,K,he,Ae,Ee,Te=this;return tt(function(){for(R.test?Z=[Xe("case",Te.generateExpression(R.test,a.Sequence,$e)),":"]:Z=["default:"],he=0,Ae=R.consequent.length,Ae&&R.consequent[0].type===e.BlockStatement&&(K=Te.maybeBlock(R.consequent[0],et),Z.push(K),he=1),he!==Ae&&!yt(nt(Z).toString())&&Z.push(B),Ee=et;he<Ae;++he)he===Ae-1&&q&Ne&&(Ee|=Ne),K=Pt(Te.generateStatement(R.consequent[he],Ee)),Z.push(K),he+1!==Ae&&!yt(nt(K).toString())&&Z.push(B)}),Z},IfStatement:function(R,q){var Z,K,he,Ae=this;return tt(function(){Z=["if"+N+"(",Ae.generateExpression(R.test,a.Sequence,$e),")"]}),he=q&Ne,K=et,he&&(K|=Ne),R.alternate?(Z.push(this.maybeBlock(R.consequent,et)),Z=this.maybeBlockSuffix(R.consequent,Z),R.alternate.type===e.IfStatement?Z=Xe(Z,["else ",this.generateStatement(R.alternate,K)]):Z=Xe(Z,Xe("else",this.maybeBlock(R.alternate,K)))):Z.push(this.maybeBlock(R.consequent,K)),Z},ForStatement:function(R,q){var Z,K=this;return tt(function(){Z=["for"+N+"("],R.init?R.init.type===e.VariableDeclaration?Z.push(K.generateStatement(R.init,ot)):(Z.push(K.generateExpression(R.init,a.Sequence,Ze)),Z.push(";")):Z.push(";"),R.test&&(Z.push(N),Z.push(K.generateExpression(R.test,a.Sequence,$e))),Z.push(";"),R.update&&(Z.push(N),Z.push(K.generateExpression(R.update,a.Sequence,$e))),Z.push(")")}),Z.push(this.maybeBlock(R.body,q&Ne?Le:et)),Z},ForInStatement:function(R,q){return this.generateIterationForStatement("in",R,q&Ne?Le:et)},ForOfStatement:function(R,q){return this.generateIterationForStatement("of",R,q&Ne?Le:et)},LabeledStatement:function(R,q){return[R.label.name+":",this.maybeBlock(R.body,q&Ne?Le:et)]},Program:function(R,q){var Z,K,he,Ae,Ee;for(Ae=R.body.length,Z=[se&&Ae>0?`
`:""],Ee=St,he=0;he<Ae;++he)!se&&he===Ae-1&&(Ee|=Ne),_e&&(he===0&&(R.body[0].leadingComments||jt(R.range[0],R.body[he].range[0],Z)),he>0&&!R.body[he-1].trailingComments&&!R.body[he].leadingComments&&jt(R.body[he-1].range[1],R.body[he].range[0],Z)),K=Pt(this.generateStatement(R.body[he],Ee)),Z.push(K),he+1<Ae&&!yt(nt(K).toString())&&(_e&&R.body[he+1].leadingComments||Z.push(B)),_e&&he===Ae-1&&(R.body[he].trailingComments||jt(R.body[he].range[1],R.range[1],Z));return Z},FunctionDeclaration:function(R,q){return[Bt(R,!0),"function",Gt(R)||kt(),R.id?st(R.id):"",this.generateFunctionBody(R)]},ReturnStatement:function(R,q){return R.argument?[Xe("return",this.generateExpression(R.argument,a.Sequence,$e)),this.semicolon(q)]:["return"+this.semicolon(q)]},WhileStatement:function(R,q){var Z,K=this;return tt(function(){Z=["while"+N+"(",K.generateExpression(R.test,a.Sequence,$e),")"]}),Z.push(this.maybeBlock(R.body,q&Ne?Le:et)),Z},WithStatement:function(R,q){var Z,K=this;return tt(function(){Z=["with"+N+"(",K.generateExpression(R.object,a.Sequence,$e),")"]}),Z.push(this.maybeBlock(R.body,q&Ne?Le:et)),Z}},wt(Qe.prototype,Qe.Statement),Qe.Expression={SequenceExpression:function(R,q,Z){var K,he,Ae;for(a.Sequence<q&&(Z|=ke),K=[],he=0,Ae=R.expressions.length;he<Ae;++he)K.push(this.generateExpression(R.expressions[he],a.Assignment,Z)),he+1<Ae&&K.push(","+N);return At(K,a.Sequence,q)},AssignmentExpression:function(R,q,Z){return this.generateAssignment(R.left,R.right,R.operator,q,Z)},ArrowFunctionExpression:function(R,q,Z){return At(this.generateFunctionBody(R),a.ArrowFunction,q)},ConditionalExpression:function(R,q,Z){return a.Conditional<q&&(Z|=ke),At([this.generateExpression(R.test,a.Coalesce,Z),N+"?"+N,this.generateExpression(R.consequent,a.Assignment,Z),N+":"+N,this.generateExpression(R.alternate,a.Assignment,Z)],a.Conditional,q)},LogicalExpression:function(R,q,Z){return R.operator==="??"&&(Z|=Ve),this.BinaryExpression(R,q,Z)},BinaryExpression:function(R,q,Z){var K,he,Ae,Ee,Te,je;return Ee=l[R.operator],he=R.operator==="**"?a.Postfix:Ee,Ae=R.operator==="**"?Ee:Ee+1,Ee<q&&(Z|=ke),Te=this.generateExpression(R.left,he,Z),je=Te.toString(),je.charCodeAt(je.length-1)===47&&d.code.isIdentifierPartES5(R.operator.charCodeAt(0))?K=[Te,kt(),R.operator]:K=Xe(Te,R.operator),Te=this.generateExpression(R.right,Ae,Z),R.operator==="/"&&Te.toString().charAt(0)==="/"||R.operator.slice(-1)==="<"&&Te.toString().slice(0,3)==="!--"?(K.push(kt()),K.push(Te)):K=Xe(K,Te),R.operator==="in"&&!(Z&ke)?["(",K,")"]:(R.operator==="||"||R.operator==="&&")&&Z&Ve?["(",K,")"]:At(K,Ee,q)},CallExpression:function(R,q,Z){var K,he,Ae;for(K=[this.generateExpression(R.callee,a.Call,Je)],R.optional&&K.push("?."),K.push("("),he=0,Ae=R.arguments.length;he<Ae;++he)K.push(this.generateExpression(R.arguments[he],a.Assignment,$e)),he+1<Ae&&K.push(","+N);return K.push(")"),Z&Ie?At(K,a.Call,q):["(",K,")"]},ChainExpression:function(R,q,Z){a.OptionalChaining<q&&(Z|=Ie);var K=this.generateExpression(R.expression,a.OptionalChaining,Z);return At(K,a.OptionalChaining,q)},NewExpression:function(R,q,Z){var K,he,Ae,Ee,Te;if(he=R.arguments.length,Te=Z&Fe&&!L&&he===0?Et:ht,K=Xe("new",this.generateExpression(R.callee,a.New,Te)),!(Z&Fe)||L||he>0){for(K.push("("),Ae=0,Ee=he;Ae<Ee;++Ae)K.push(this.generateExpression(R.arguments[Ae],a.Assignment,$e)),Ae+1<Ee&&K.push(","+N);K.push(")")}return At(K,a.New,q)},MemberExpression:function(R,q,Z){var K,he;return K=[this.generateExpression(R.object,a.Call,Z&Ie?Je:ht)],R.computed?(R.optional&&K.push("?."),K.push("["),K.push(this.generateExpression(R.property,a.Sequence,Z&Ie?$e:Et)),K.push("]")):(!R.optional&&R.object.type===e.Literal&&typeof R.object.value=="number"&&(he=nt(K).toString(),he.indexOf(".")<0&&!/[eExX]/.test(he)&&d.code.isDecimalDigit(he.charCodeAt(he.length-1))&&!(he.length>=2&&he.charCodeAt(0)===48)&&K.push(" ")),K.push(R.optional?"?.":"."),K.push(st(R.property))),At(K,a.Member,q)},MetaProperty:function(R,q,Z){var K;return K=[],K.push(typeof R.meta=="string"?R.meta:st(R.meta)),K.push("."),K.push(typeof R.property=="string"?R.property:st(R.property)),At(K,a.Member,q)},UnaryExpression:function(R,q,Z){var K,he,Ae,Ee,Te;return he=this.generateExpression(R.argument,a.Unary,$e),N===""?K=Xe(R.operator,he):(K=[R.operator],R.operator.length>2?K=Xe(K,he):(Ee=nt(K).toString(),Te=Ee.charCodeAt(Ee.length-1),Ae=he.toString().charCodeAt(0),((Te===43||Te===45)&&Te===Ae||d.code.isIdentifierPartES5(Te)&&d.code.isIdentifierPartES5(Ae))&&K.push(kt()),K.push(he))),At(K,a.Unary,q)},YieldExpression:function(R,q,Z){var K;return R.delegate?K="yield*":K="yield",R.argument&&(K=Xe(K,this.generateExpression(R.argument,a.Yield,$e))),At(K,a.Yield,q)},AwaitExpression:function(R,q,Z){var K=Xe(R.all?"await*":"await",this.generateExpression(R.argument,a.Await,$e));return At(K,a.Await,q)},UpdateExpression:function(R,q,Z){return R.prefix?At([R.operator,this.generateExpression(R.argument,a.Unary,$e)],a.Unary,q):At([this.generateExpression(R.argument,a.Postfix,$e),R.operator],a.Postfix,q)},FunctionExpression:function(R,q,Z){var K=[Bt(R,!0),"function"];return R.id?(K.push(Gt(R)||kt()),K.push(st(R.id))):K.push(Gt(R)||N),K.push(this.generateFunctionBody(R)),K},ArrayPattern:function(R,q,Z){return this.ArrayExpression(R,q,Z,!0)},ArrayExpression:function(R,q,Z,K){var he,Ae,Ee=this;return R.elements.length?(Ae=K?!1:R.elements.length>1,he=["[",Ae?B:""],tt(function(Te){var je,it;for(je=0,it=R.elements.length;je<it;++je)R.elements[je]?(he.push(Ae?Te:""),he.push(Ee.generateExpression(R.elements[je],a.Assignment,$e))):(Ae&&he.push(Te),je+1===it&&he.push(",")),je+1<it&&he.push(","+(Ae?B:N))}),Ae&&!yt(nt(he).toString())&&he.push(B),he.push(Ae?p:""),he.push("]"),he):"[]"},RestElement:function(R,q,Z){return"..."+this.generatePattern(R.argument)},ClassExpression:function(R,q,Z){var K,he;return K=["class"],R.id&&(K=Xe(K,this.generateExpression(R.id,a.Sequence,$e))),R.superClass&&(he=Xe("extends",this.generateExpression(R.superClass,a.Unary,$e)),K=Xe(K,he)),K.push(N),K.push(this.generateStatement(R.body,Le)),K},MethodDefinition:function(R,q,Z){var K,he;return R.static?K=["static"+N]:K=[],R.kind==="get"||R.kind==="set"?he=[Xe(R.kind,this.generatePropertyKey(R.key,R.computed)),this.generateFunctionBody(R.value)]:he=[Dt(R),this.generatePropertyKey(R.key,R.computed),this.generateFunctionBody(R.value)],Xe(K,he)},Property:function(R,q,Z){return R.kind==="get"||R.kind==="set"?[R.kind,kt(),this.generatePropertyKey(R.key,R.computed),this.generateFunctionBody(R.value)]:R.shorthand?R.value.type==="AssignmentPattern"?this.AssignmentPattern(R.value,a.Sequence,$e):this.generatePropertyKey(R.key,R.computed):R.method?[Dt(R),this.generatePropertyKey(R.key,R.computed),this.generateFunctionBody(R.value)]:[this.generatePropertyKey(R.key,R.computed),":"+N,this.generateExpression(R.value,a.Assignment,$e)]},ObjectExpression:function(R,q,Z){var K,he,Ae,Ee=this;return R.properties.length?(K=R.properties.length>1,tt(function(){Ae=Ee.generateExpression(R.properties[0],a.Sequence,$e)}),!K&&!qt(nt(Ae).toString())?["{",N,Ae,N,"}"]:(tt(function(Te){var je,it;if(he=["{",B,Te,Ae],K)for(he.push(","+B),je=1,it=R.properties.length;je<it;++je)he.push(Te),he.push(Ee.generateExpression(R.properties[je],a.Sequence,$e)),je+1<it&&he.push(","+B)}),yt(nt(he).toString())||he.push(B),he.push(p),he.push("}"),he)):"{}"},AssignmentPattern:function(R,q,Z){return this.generateAssignment(R.left,R.right,"=",q,Z)},ObjectPattern:function(R,q,Z){var K,he,Ae,Ee,Te,je=this;if(!R.properties.length)return"{}";if(Ee=!1,R.properties.length===1)Te=R.properties[0],Te.type===e.Property&&Te.value.type!==e.Identifier&&(Ee=!0);else for(he=0,Ae=R.properties.length;he<Ae;++he)if(Te=R.properties[he],Te.type===e.Property&&!Te.shorthand){Ee=!0;break}return K=["{",Ee?B:""],tt(function(it){var mt,rn;for(mt=0,rn=R.properties.length;mt<rn;++mt)K.push(Ee?it:""),K.push(je.generateExpression(R.properties[mt],a.Sequence,$e)),mt+1<rn&&K.push(","+(Ee?B:N))}),Ee&&!yt(nt(K).toString())&&K.push(B),K.push(Ee?p:""),K.push("}"),K},ThisExpression:function(R,q,Z){return"this"},Super:function(R,q,Z){return"super"},Identifier:function(R,q,Z){return st(R)},ImportDefaultSpecifier:function(R,q,Z){return st(R.id||R.local)},ImportNamespaceSpecifier:function(R,q,Z){var K=["*"],he=R.id||R.local;return he&&K.push(N+"as"+kt()+st(he)),K},ImportSpecifier:function(R,q,Z){var K=R.imported,he=[K.name],Ae=R.local;return Ae&&Ae.name!==K.name&&he.push(kt()+"as"+kt()+st(Ae)),he},ExportSpecifier:function(R,q,Z){var K=R.local,he=[K.name],Ae=R.exported;return Ae&&Ae.name!==K.name&&he.push(kt()+"as"+kt()+st(Ae)),he},Literal:function(R,q,Z){var K;if(R.hasOwnProperty("raw")&&z&&re.raw)try{if(K=z(R.raw).body[0].expression,K.type===e.Literal&&K.value===R.value)return R.raw}catch{}return R.regex?"/"+R.regex.pattern+"/"+R.regex.flags:typeof R.value=="bigint"?R.value.toString()+"n":R.bigint?R.bigint+"n":R.value===null?"null":typeof R.value=="string"?zt(R.value):typeof R.value=="number"?Mt(R.value):typeof R.value=="boolean"?R.value?"true":"false":Kt(R.value)},GeneratorExpression:function(R,q,Z){return this.ComprehensionExpression(R,q,Z)},ComprehensionExpression:function(R,q,Z){var K,he,Ae,Ee,Te=this;return K=R.type===e.GeneratorExpression?["("]:["["],re.moz.comprehensionExpressionStartsWithAssignment&&(Ee=this.generateExpression(R.body,a.Assignment,$e),K.push(Ee)),R.blocks&&tt(function(){for(he=0,Ae=R.blocks.length;he<Ae;++he)Ee=Te.generateExpression(R.blocks[he],a.Sequence,$e),he>0||re.moz.comprehensionExpressionStartsWithAssignment?K=Xe(K,Ee):K.push(Ee)}),R.filter&&(K=Xe(K,"if"+N),Ee=this.generateExpression(R.filter,a.Sequence,$e),K=Xe(K,["(",Ee,")"])),re.moz.comprehensionExpressionStartsWithAssignment||(Ee=this.generateExpression(R.body,a.Assignment,$e),K=Xe(K,Ee)),K.push(R.type===e.GeneratorExpression?")":"]"),K},ComprehensionBlock:function(R,q,Z){var K;return R.left.type===e.VariableDeclaration?K=[R.left.kind,kt(),this.generateStatement(R.left.declarations[0],ot)]:K=this.generateExpression(R.left,a.Call,$e),K=Xe(K,R.of?"of":"in"),K=Xe(K,this.generateExpression(R.right,a.Sequence,$e)),["for"+N+"(",K,")"]},SpreadElement:function(R,q,Z){return["...",this.generateExpression(R.argument,a.Assignment,$e)]},TaggedTemplateExpression:function(R,q,Z){var K=Je;Z&Ie||(K=ht);var he=[this.generateExpression(R.tag,a.Call,K),this.generateExpression(R.quasi,a.Primary,xt)];return At(he,a.TaggedTemplate,q)},TemplateElement:function(R,q,Z){return R.value.raw},TemplateLiteral:function(R,q,Z){var K,he,Ae;for(K=["`"],he=0,Ae=R.quasis.length;he<Ae;++he)K.push(this.generateExpression(R.quasis[he],a.Primary,$e)),he+1<Ae&&(K.push("${"+N),K.push(this.generateExpression(R.expressions[he],a.Sequence,$e)),K.push(N+"}"));return K.push("`"),K},ModuleSpecifier:function(R,q,Z){return this.Literal(R,q,Z)},ImportExpression:function(R,q,Z){return At(["import(",this.generateExpression(R.source,a.Assignment,$e),")"],a.Call,q)}},wt(Qe.prototype,Qe.Expression),Qe.prototype.generateExpression=function(R,q,Z){var K,he;return he=R.type||e.Property,re.verbatim&&R.hasOwnProperty(re.verbatim)?Rt(R,q):(K=this[he](R,q,Z),re.comment&&(K=nn(R,K)),nt(K,R))},Qe.prototype.generateStatement=function(R,q){var Z,K;return Z=this[R.type](R,q),re.comment&&(Z=nn(R,Z)),K=nt(Z).toString(),R.type===e.Program&&!se&&B===""&&K.charAt(K.length-1)===`
`&&(Z=oe?nt(Z).replaceRight(/\s+$/,""):K.replace(/\s+$/,"")),nt(Z,R)};function pn(R){var q;if(q=new Qe,Oe(R))return q.generateStatement(R,et);if(xe(R))return q.generateExpression(R,a.Sequence,$e);throw new Error("Unknown node type: "+R.type)}function xn(R,q){var Z=Lt(),K,he;return q!=null?(typeof q.indent=="string"&&(Z.format.indent.style=q.indent),typeof q.base=="number"&&(Z.format.indent.base=q.base),q=Wt(Z,q),g=q.format.indent.style,typeof q.base=="string"?p=q.base:p=pt(g,q.format.indent.base)):(q=Z,g=q.format.indent.style,p=pt(g,q.format.indent.base)),b=q.format.json,O=q.format.renumber,A=b?!1:q.format.hexadecimal,k=b?"double":q.format.quotes,M=q.format.escapeless,B=q.format.newline,N=q.format.space,q.format.compact&&(B=N=g=p=""),L=q.format.parentheses,V=q.format.semicolons,se=q.format.safeConcatenation,pe=q.directive,z=b?null:q.parse,oe=q.sourceMap,de=q.sourceCode,_e=q.format.preserveBlankLines&&de!==null,re=q,oe&&(o.browser?u=commonjsGlobal.sourceMap.SourceNode:u=requireSourceMap().SourceNode),K=pn(R),oe?(he=K.toStringWithSourceMap({file:q.file,sourceRoot:q.sourceMapRoot}),q.sourceContent&&he.map.setSourceContent(q.sourceMap,q.sourceContent),q.sourceMapWithCode?he:he.map.toString()):(he={code:K.toString(),map:null},q.sourceMapWithCode?he:he.code)}Ce={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},be=Lt().format,o.version=require$$3.version,o.generate=xn,o.attachComments=f.attachComments,o.Precedence=Wt({},a),o.browser=!1,o.FORMAT_MINIFY=Ce,o.FORMAT_DEFAULTS=be})()})(escodegen$1);const escodegen=getDefaultExportFromCjs(escodegen$1);class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:e=>this.replacement=e}}replace(e,a,l,u){e&&a&&(l!=null?e[a][l]=u:e[a]=u)}remove(e,a,l){e&&a&&(l!=null?e[a].splice(l,1):delete e[a])}}class SyncWalker extends WalkerBase{constructor(e,a){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:l=>this.replacement=l},this.enter=e,this.leave=a}visit(e,a,l,u){if(e){if(this.enter){const d=this.should_skip,p=this.should_remove,g=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,e,a,l,u),this.replacement&&(e=this.replacement,this.replace(a,l,u,e)),this.should_remove&&this.remove(a,l,u);const b=this.should_skip,O=this.should_remove;if(this.should_skip=d,this.should_remove=p,this.replacement=g,b)return e;if(O)return null}let f;for(f in e){const d=e[f];if(d&&typeof d=="object")if(Array.isArray(d)){const p=d;for(let g=0;g<p.length;g+=1){const b=p[g];isNode(b)&&(this.visit(b,e,f,g)||g--)}}else isNode(d)&&this.visit(d,e,f,null)}if(this.leave){const d=this.replacement,p=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,e,a,l,u),this.replacement&&(e=this.replacement,this.replace(a,l,u,e)),this.should_remove&&this.remove(a,l,u);const g=this.should_remove;if(this.replacement=d,this.should_remove=p,g)return null}}return e}}function isNode(o){return o!==null&&typeof o=="object"&&"type"in o&&typeof o.type=="string"}function walk(o,{enter:e,leave:a}){return new SyncWalker(e,a).visit(o,null)}let widgetMethods=[];function registerWidgetType(o){widgetMethods.push(o)}function transpiler(o,e={}){const{wrapAsync:a=!1,addReturn:l=!0,emitMiniLocations:u=!0,emitWidgets:f=!0}=e;let d=parse$3(o,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),p=[];const g=(k,M)=>{const B=getLeafLocations(`"${k}"`,M.start,o);p=p.concat(B)};let b=[];walk(d,{enter(k,M){if(isTidalTeplateLiteral(k)){const B=k.quasi.quasis[0].value.raw,N=k.quasi.start+1;if(u){const L=collectHaskellMiniLocations(B,N);p=p.concat(L)}return this.skip(),this.replace(tidalWithLocation(B,N))}if(isBackTickString(k,M)){const{quasis:B}=k,{raw:N}=B[0].value;return this.skip(),u&&g(N,k),this.replace(miniWithLocation(N,k))}if(isStringWithDoubleQuotes(k)){const{value:B}=k;return this.skip(),u&&g(B,k),this.replace(miniWithLocation(B,k))}if(isSliderFunction(k))return f&&b.push({from:k.arguments[0].start,to:k.arguments[0].end,value:k.arguments[0].raw,min:k.arguments[1]?.value??0,max:k.arguments[2]?.value??1,step:k.arguments[3]?.value,type:"slider"}),this.replace(sliderWithLocation(k));if(isWidgetMethod(k)){const B=k.callee.property.name,N=b.filter(V=>V.type===B).length,L={to:k.end,index:N,type:B};return f&&b.push(L),this.replace(widgetWithLocation(k,L))}if(isBareSamplesCall(k,M))return this.replace(withAwait(k));if(isLabelStatement(k))return this.replace(labelToP(k))},leave(k,M,B,N){}});const{body:O}=d;if(!O?.[O.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(l){const{expression:k}=O[O.length-1];O[O.length-1]={type:"ReturnStatement",argument:k}}let A=escodegen.generate(d);return a&&(A=`(async ()=>{${A}})()`),u?{output:A,miniLocations:p,widgets:b}:{output:A}}function isStringWithDoubleQuotes(o,e,a){return o.type!=="Literal"?!1:o.raw[0]==='"'}function isBackTickString(o,e){return o.type==="TemplateLiteral"&&e.type!=="TaggedTemplateExpression"}function miniWithLocation(o,e){const{start:a}=e;return{type:"CallExpression",callee:{type:"Identifier",name:"m"},arguments:[{type:"Literal",value:o},{type:"Literal",value:a}],optional:!1}}function isSliderFunction(o){return o.type==="CallExpression"&&o.callee.name==="slider"}function isWidgetMethod(o){return o.type==="CallExpression"&&widgetMethods.includes(o.callee.property?.name)}function sliderWithLocation(o){const e="slider_"+o.arguments[0].start;return o.arguments.unshift({type:"Literal",value:e,raw:e}),o.callee.name="sliderWithID",o}function getWidgetID(o){return`widget_${o.type}_${o.index}`}function widgetWithLocation(o,e){const a=getWidgetID(e);return o.arguments.unshift({type:"Literal",value:a,raw:a}),o}function isBareSamplesCall(o,e){return o.type==="CallExpression"&&o.callee.name==="samples"&&e.type!=="AwaitExpression"}function withAwait(o){return{type:"AwaitExpression",argument:o}}function isLabelStatement(o){return o.type==="LabeledStatement"}function labelToP(o){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:o.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:o.label.name,raw:`'${o.label.name}'`}]}}}function isTidalTeplateLiteral(o){return o.type==="TaggedTemplateExpression"&&o.tag.name==="tidal"}function collectHaskellMiniLocations(o,e){return o.split("").reduce((a,l,u)=>(l!=='"'||(!a.length||a[a.length-1].length>1?a.push([u+1]):a[a.length-1].push(u)),a),[]).map(([a,l])=>{const u=o.slice(a,l);return getLeafLocations(`"${u}"`,e+a-1)}).flat()}function tidalWithLocation(o,e){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:o},{type:"Literal",value:e}],optional:!1}}if(typeof DelayNode<"u"){class o extends DelayNode{constructor(a,l,u,f){super(a),l=Math.abs(l),this.delayTime.value=u;const d=a.createGain();d.gain.value=Math.min(Math.abs(f),.995),this.feedback=d.gain;const p=a.createGain();return p.gain.value=l,this.delayGain=p,this.connect(d),this.connect(p),d.connect(this),this.connect=g=>p.connect(g),this}start(a){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,a+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(e,a,l){return new o(this,e,a,l)}}var reverbGen={};reverbGen.generateReverb=function(o,e){for(var a=o.audioContext||new AudioContext,l=a.sampleRate,u=o.numChannels||2,f=o.decayTime*1.5,d=Math.round(o.decayTime*l),p=Math.round(f*l),g=Math.round((o.fadeInTime||0)*l),b=Math.pow(1/1e3,1/d),O=a.createBuffer(u,p,l),A=0;A<u;A++){for(var k=O.getChannelData(A),M=0;M<p;M++)k[M]=randomSample()*Math.pow(b,M);for(var M=0;M<g;M++)k[M]*=M/g}applyGradualLowpass(O,o.lpFreqStart||0,o.lpFreqEnd||0,o.decayTime,e)},reverbGen.generateGraph=function(o,e,a,l,u){var f=document.createElement("canvas");f.width=e,f.height=a;var d=f.getContext("2d");d.fillStyle="#000",d.fillRect(0,0,f.width,f.height),d.fillStyle="#fff";for(var p=e/o.length,g=a/(u-l),b=0;b<o.length;b++)d.fillRect(b*p,a-(o[b]-l)*g,1,1);return f};var applyGradualLowpass=function(o,e,a,l,u){if(e==0){u(o);return}var f=getAllChannelData(o),d=new OfflineAudioContext(o.numberOfChannels,f[0].length,o.sampleRate),p=d.createBufferSource();p.buffer=o;var g=d.createBiquadFilter();e=Math.min(e,o.sampleRate/2),a=Math.min(a,o.sampleRate/2),g.type="lowpass",g.Q.value=1e-4,g.frequency.setValueAtTime(e,0),g.frequency.linearRampToValueAtTime(a,l),p.connect(g),g.connect(d.destination),p.start(),d.oncomplete=function(b){u(b.renderedBuffer)},d.startRendering(),window.filterNode=g},getAllChannelData=function(o){for(var e=[],a=0;a<o.numberOfChannels;a++)e[a]=o.getChannelData(a);return e},randomSample=function(){return Math.random()*2-1};typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(o,e){const a=e.sampleRate*o,l=this.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let u=0;u<e.numberOfChannels;u++){let f=e.getChannelData(u),d=l.getChannelData(u);for(let p=0;p<a;p++)d[p]=f[p]||0}return l},AudioContext.prototype.createReverb=function(o,e,a,l,u){const f=this.createConvolver();return f.generate=(d=2,p=.1,g=15e3,b=1e3,O)=>{f.duration=d,f.fade=p,f.lp=g,f.dim=b,f.ir=O,O?f.buffer=this.adjustLength(d,O):reverbGen.generateReverb({audioContext:this,numChannels:2,decayTime:d,fadeInTime:p,lpFreqStart:g,lpFreqEnd:b},A=>{f.buffer=A})},f.generate(o,e,a,l,u),f});var vowelFormant={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class o extends GainNode{constructor(a,l){if(super(a),!vowelFormant[l])throw new Error("vowel: unknown vowel "+l);const{gains:u,qs:f,freqs:d}=vowelFormant[l],p=a.createGain();for(let g=0;g<5;g++){const b=a.createGain();b.gain.value=u[g];const O=a.createBiquadFilter();O.type="bandpass",O.Q.value=f[g],O.frequency.value=d[g],this.connect(O),O.connect(b),b.connect(p)}return p.gain.value=8,this.connect=g=>p.connect(g),this}}AudioContext.prototype.createVowelFilter=function(e){return new o(this,e)}}let log=o=>console.log(o);const logger$1=(...o)=>log(...o),setLogger=o=>{log=o},tokenizeNote$1=o=>{if(typeof o!="string")return[];const[e,a="",l]=o.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/)?.slice(1)||[];return e?[e,a,l?Number(l):void 0]:[]},chromas$1={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$1={"#":1,b:-1,s:1,f:-1},noteToMidi=(o,e=3)=>{const[a,l,u=e]=tokenizeNote$1(o);if(!a)throw new Error('not a note: "'+o+'"');const f=chromas$1[a.toLowerCase()],d=l?.split("").reduce((p,g)=>p+accs$1[g],0)||0;return(Number(u)+1)*12+f+d},midiToFreq$1=o=>Math.pow(2,(o-69)/12)*440,clamp=(o,e,a)=>Math.min(Math.max(o,e),a),freqToMidi$1=o=>12*Math.log(o/440)/Math.LN2+69,valueToMidi=(o,e)=>{if(typeof o!="object")throw new Error("valueToMidi: expected object value");let{freq:a,note:l}=o;if(typeof a=="number")return freqToMidi$1(a);if(typeof l=="string")return noteToMidi(l);if(typeof l=="number")return l;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e};function nanFallback(o,e=0,a){return isNaN(Number(o))?(!a&&logger$1(`"${o}" is not a number, falling back to ${e}`,"warning"),e):o}const _mod=(o,e)=>(o%e+e)%e,getSoundIndex=(o,e)=>_mod(Math.round(nanFallback(o,0)),e),workletsUrl="data:application/javascript;base64,Ly8gY29hcnNlLCBjcnVzaCwgYW5kIHNoYXBlIHByb2Nlc3NvcnMgYWRhcHRlZCBmcm9tIGRrdHIwJ3Mgd2ViZGlydDogaHR0cHM6Ly9naXRodWIuY29tL2RrdHIwL1dlYkRpcnQvYmxvYi81Y2UzZDY5ODM2MmM1NGQ2ZTFiNjhhY2M0N2ViMjk1NWFjNjJjNzkzL2Rpc3QvQXVkaW9Xb3JrbGV0cy5qcwovLyBMSUNFTlNFIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIHYzLjAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ka3RyMC9XZWJEaXJ0L2Jsb2IvbWFpbi9MSUNFTlNFCi8vIFRPRklYOiBUSElTIEZJTEUgRE9FUyBOT1QgU1VQUE9SVCBJTVBPUlRTIE9OIERFUE9MWU1FTlQKY29uc3QgY2xhbXAgPSAobnVtLCBtaW4sIG1heCkgPT4gTWF0aC5taW4oTWF0aC5tYXgobnVtLCBtaW4pLCBtYXgpOwpjb25zdCBfbW9kID0gKG4sIG0pID0+ICgobiAlIG0pICsgbSkgJSBtOwoKY29uc3QgYmxvY2tTaXplID0gMTI4OwovLyBhZGp1c3Qgd2F2ZXNoYXBlIHRvIHJlbW92ZSBmcmVxdWVuY2llcyBhYm92ZSBueXF1aXN0IHRvIHByZXZlbnQgYWxpYXNpbmcKLy8gcmVmZXJlbmNlZCBmcm9tIGh0dHBzOi8vd3d3Lmt2cmF1ZGlvLmNvbS9mb3J1bS92aWV3dG9waWMucGhwP3Q9Mzc1NTE3CmZ1bmN0aW9uIHBvbHlCbGVwKHBoYXNlLCBkdCkgewogIC8vIDAgPD0gcGhhc2UgPCAxCiAgaWYgKHBoYXNlIDwgZHQpIHsKICAgIHBoYXNlIC89IGR0OwogICAgLy8gMiAqIChwaGFzZSAtIHBoYXNlXjIvMiAtIDAuNSkKICAgIHJldHVybiBwaGFzZSArIHBoYXNlIC0gcGhhc2UgKiBwaGFzZSAtIDE7CiAgfQoKICAvLyAtMSA8IHBoYXNlIDwgMAogIGVsc2UgaWYgKHBoYXNlID4gMSAtIGR0KSB7CiAgICBwaGFzZSA9IChwaGFzZSAtIDEpIC8gZHQ7CiAgICAvLyAyICogKHBoYXNlXjIvMiArIHBoYXNlICsgMC41KQogICAgcmV0dXJuIHBoYXNlICogcGhhc2UgKyBwaGFzZSArIHBoYXNlICsgMTsKICB9CgogIC8vIDAgb3RoZXJ3aXNlCiAgZWxzZSB7CiAgICByZXR1cm4gMDsKICB9Cn0KCmNvbnN0IHdhdmVzaGFwZXMgPSB7CiAgdHJpKHBoYXNlLCBza2V3ID0gMC41KSB7CiAgICBjb25zdCB4ID0gMSAtIHNrZXc7CiAgICBpZiAocGhhc2UgPj0gc2tldykgewogICAgICByZXR1cm4gMSAvIHggLSBwaGFzZSAvIHg7CiAgICB9CiAgICByZXR1cm4gcGhhc2UgLyBza2V3OwogIH0sCiAgc2luZShwaGFzZSkgewogICAgcmV0dXJuIE1hdGguc2luKE1hdGguUEkgKiAyICogcGhhc2UpICogMC41ICsgMC41OwogIH0sCiAgcmFtcChwaGFzZSkgewogICAgcmV0dXJuIHBoYXNlOwogIH0sCiAgc2F3KHBoYXNlKSB7CiAgICByZXR1cm4gMSAtIHBoYXNlOwogIH0sCgogIHNxdWFyZShwaGFzZSwgc2tldyA9IDAuNSkgewogICAgaWYgKHBoYXNlID49IHNrZXcpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICByZXR1cm4gMTsKICB9LAogIGN1c3RvbShwaGFzZSwgdmFsdWVzID0gWzAsIDFdKSB7CiAgICBjb25zdCBudW1QYXJ0cyA9IHZhbHVlcy5sZW5ndGggLSAxOwogICAgY29uc3QgY3VyclBhcnQgPSBNYXRoLmZsb29yKHBoYXNlICogbnVtUGFydHMpOwoKICAgIGNvbnN0IHBhcnRMZW5ndGggPSAxIC8gbnVtUGFydHM7CiAgICBjb25zdCBzdGFydFZhbCA9IGNsYW1wKHZhbHVlc1tjdXJyUGFydF0sIDAsIDEpOwogICAgY29uc3QgZW5kVmFsID0gY2xhbXAodmFsdWVzW2N1cnJQYXJ0ICsgMV0sIDAsIDEpOwogICAgY29uc3QgeTIgPSBlbmRWYWw7CiAgICBjb25zdCB5MSA9IHN0YXJ0VmFsOwogICAgY29uc3QgeDEgPSAwOwogICAgY29uc3QgeDIgPSBwYXJ0TGVuZ3RoOwogICAgY29uc3Qgc2xvcGUgPSAoeTIgLSB5MSkgLyAoeDIgLSB4MSk7CiAgICByZXR1cm4gc2xvcGUgKiAocGhhc2UgLSBwYXJ0TGVuZ3RoICogY3VyclBhcnQpICsgc3RhcnRWYWw7CiAgfSwKICBzYXdibGVwKHBoYXNlLCBkdCkgewogICAgY29uc3QgdiA9IDIgKiBwaGFzZSAtIDE7CiAgICByZXR1cm4gdiAtIHBvbHlCbGVwKHBoYXNlLCBkdCk7CiAgfSwKfTsKCmNvbnN0IHdhdmVTaGFwZU5hbWVzID0gT2JqZWN0LmtleXMod2F2ZXNoYXBlcyk7CmNsYXNzIExGT1Byb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgc3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpIHsKICAgIHJldHVybiBbCiAgICAgIHsgbmFtZTogJ3RpbWUnLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgeyBuYW1lOiAnZW5kJywgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgIHsgbmFtZTogJ2ZyZXF1ZW5jeScsIGRlZmF1bHRWYWx1ZTogMC41IH0sCiAgICAgIHsgbmFtZTogJ3NrZXcnLCBkZWZhdWx0VmFsdWU6IDAuNSB9LAogICAgICB7IG5hbWU6ICdkZXB0aCcsIGRlZmF1bHRWYWx1ZTogMSB9LAogICAgICB7IG5hbWU6ICdwaGFzZW9mZnNldCcsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICB7IG5hbWU6ICdzaGFwZScsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICB7IG5hbWU6ICdkY29mZnNldCcsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgXTsKICB9CgogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMucGhhc2U7CiAgfQoKICBpbmNyZW1lbnRQaGFzZShkdCkgewogICAgdGhpcy5waGFzZSArPSBkdDsKICAgIGlmICh0aGlzLnBoYXNlID4gMS4wKSB7CiAgICAgIHRoaXMucGhhc2UgPSB0aGlzLnBoYXNlIC0gMTsKICAgIH0KICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICAgIGlmIChjdXJyZW50VGltZSA+PSBwYXJhbWV0ZXJzLmVuZFswXSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgY29uc3Qgb3V0cHV0ID0gb3V0cHV0c1swXTsKICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHBhcmFtZXRlcnNbJ2ZyZXF1ZW5jeSddWzBdOwoKICAgIGNvbnN0IHRpbWUgPSBwYXJhbWV0ZXJzWyd0aW1lJ11bMF07CiAgICBjb25zdCBkZXB0aCA9IHBhcmFtZXRlcnNbJ2RlcHRoJ11bMF07CiAgICBjb25zdCBza2V3ID0gcGFyYW1ldGVyc1snc2tldyddWzBdOwogICAgY29uc3QgcGhhc2VvZmZzZXQgPSBwYXJhbWV0ZXJzWydwaGFzZW9mZnNldCddWzBdOwoKICAgIGNvbnN0IGRjb2Zmc2V0ID0gcGFyYW1ldGVyc1snZGNvZmZzZXQnXVswXTsKICAgIGNvbnN0IHNoYXBlID0gd2F2ZVNoYXBlTmFtZXNbcGFyYW1ldGVyc1snc2hhcGUnXVswXV07CgogICAgY29uc3QgYmxvY2tTaXplID0gb3V0cHV0WzBdLmxlbmd0aCA/PyAwOwoKICAgIGlmICh0aGlzLnBoYXNlID09IG51bGwpIHsKICAgICAgdGhpcy5waGFzZSA9IF9tb2QodGltZSAqIGZyZXF1ZW5jeSArIHBoYXNlb2Zmc2V0LCAxKTsKICAgIH0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogICAgY29uc3QgZHQgPSBmcmVxdWVuY3kgLyBzYW1wbGVSYXRlOwogICAgZm9yIChsZXQgbiA9IDA7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IG1vZHZhbCA9ICh3YXZlc2hhcGVzW3NoYXBlXSh0aGlzLnBoYXNlLCBza2V3KSArIGRjb2Zmc2V0KSAqIGRlcHRoOwogICAgICAgIG91dHB1dFtpXVtuXSA9IG1vZHZhbDsKICAgICAgfQogICAgICB0aGlzLmluY3JlbWVudFBoYXNlKGR0KTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KcmVnaXN0ZXJQcm9jZXNzb3IoJ2xmby1wcm9jZXNzb3InLCBMRk9Qcm9jZXNzb3IpOwoKY2xhc3MgQ29hcnNlUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFt7IG5hbWU6ICdjb2Fyc2UnLCBkZWZhdWx0VmFsdWU6IDEgfV07CiAgfQoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CgogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKHRoaXMuc3RhcnRlZCAmJiAhaGFzSW5wdXQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdGhpcy5zdGFydGVkID0gaGFzSW5wdXQ7CgogICAgbGV0IGNvYXJzZSA9IHBhcmFtZXRlcnMuY29hcnNlWzBdID8/IDA7CiAgICBjb2Fyc2UgPSBNYXRoLm1heCgxLCBjb2Fyc2UpOwogICAgZm9yIChsZXQgbiA9IDA7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgb3V0cHV0W2ldW25dID0gbiAlIGNvYXJzZSA9PT0gMCA/IGlucHV0W2ldW25dIDogb3V0cHV0W2ldW24gLSAxXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQp9CnJlZ2lzdGVyUHJvY2Vzc29yKCdjb2Fyc2UtcHJvY2Vzc29yJywgQ29hcnNlUHJvY2Vzc29yKTsKCmNsYXNzIENydXNoUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFt7IG5hbWU6ICdjcnVzaCcsIGRlZmF1bHRWYWx1ZTogMCB9XTsKICB9CgogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlOwogIH0KCiAgcHJvY2VzcyhpbnB1dHMsIG91dHB1dHMsIHBhcmFtZXRlcnMpIHsKICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgY29uc3Qgb3V0cHV0ID0gb3V0cHV0c1swXTsKCiAgICBjb25zdCBoYXNJbnB1dCA9ICEoaW5wdXRbMF0gPT09IHVuZGVmaW5lZCk7CiAgICBpZiAodGhpcy5zdGFydGVkICYmICFoYXNJbnB1dCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLnN0YXJ0ZWQgPSBoYXNJbnB1dDsKCiAgICBsZXQgY3J1c2ggPSBwYXJhbWV0ZXJzLmNydXNoWzBdID8/IDg7CiAgICBjcnVzaCA9IE1hdGgubWF4KDEsIGNydXNoKTsKCiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGJsb2NrU2l6ZTsgbisrKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB4ID0gTWF0aC5wb3coMiwgY3J1c2ggLSAxKTsKICAgICAgICBvdXRwdXRbaV1bbl0gPSBNYXRoLnJvdW5kKGlucHV0W2ldW25dICogeCkgLyB4OwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KcmVnaXN0ZXJQcm9jZXNzb3IoJ2NydXNoLXByb2Nlc3NvcicsIENydXNoUHJvY2Vzc29yKTsKCmNsYXNzIFNoYXBlUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFsKICAgICAgeyBuYW1lOiAnc2hhcGUnLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgeyBuYW1lOiAncG9zdGdhaW4nLCBkZWZhdWx0VmFsdWU6IDEgfSwKICAgIF07CiAgfQoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CgogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKHRoaXMuc3RhcnRlZCAmJiAhaGFzSW5wdXQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdGhpcy5zdGFydGVkID0gaGFzSW5wdXQ7CgogICAgbGV0IHNoYXBlID0gcGFyYW1ldGVycy5zaGFwZVswXTsKICAgIHNoYXBlID0gc2hhcGUgPCAxID8gc2hhcGUgOiAxLjAgLSA0ZS0xMDsKICAgIHNoYXBlID0gKDIuMCAqIHNoYXBlKSAvICgxLjAgLSBzaGFwZSk7CiAgICBjb25zdCBwb3N0Z2FpbiA9IE1hdGgubWF4KDAuMDAxLCBNYXRoLm1pbigxLCBwYXJhbWV0ZXJzLnBvc3RnYWluWzBdKSk7CgogICAgZm9yIChsZXQgbiA9IDA7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgb3V0cHV0W2ldW25dID0gKCgoMSArIHNoYXBlKSAqIGlucHV0W2ldW25dKSAvICgxICsgc2hhcGUgKiBNYXRoLmFicyhpbnB1dFtpXVtuXSkpKSAqIHBvc3RnYWluOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KcmVnaXN0ZXJQcm9jZXNzb3IoJ3NoYXBlLXByb2Nlc3NvcicsIFNoYXBlUHJvY2Vzc29yKTsKCmZ1bmN0aW9uIGZhc3RfdGFuaCh4KSB7CiAgY29uc3QgeDIgPSB4ICogeDsKICByZXR1cm4gKHggKiAoMjcuMCArIHgyKSkgLyAoMjcuMCArIDkuMCAqIHgyKTsKfQpjb25zdCBfUEkgPSAzLjE0MTU5MjY1MzU5OwovL2FkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vVGhlQm91dGVpbGxhY0JlYXIvd2ViYXVkaW93b3JrbGV0LXdhc20/dGFiPU1JVC0xLW92LWZpbGUKY2xhc3MgTGFkZGVyUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFsKICAgICAgeyBuYW1lOiAnZnJlcXVlbmN5JywgZGVmYXVsdFZhbHVlOiA1MDAgfSwKICAgICAgeyBuYW1lOiAncScsIGRlZmF1bHRWYWx1ZTogMSB9LAogICAgICB7IG5hbWU6ICdkcml2ZScsIGRlZmF1bHRWYWx1ZTogMC42OSB9LAogICAgXTsKICB9CgogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlOwogICAgdGhpcy5wMCA9IFswLCAwXTsKICAgIHRoaXMucDEgPSBbMCwgMF07CiAgICB0aGlzLnAyID0gWzAsIDBdOwogICAgdGhpcy5wMyA9IFswLCAwXTsKICAgIHRoaXMucDMyID0gWzAsIDBdOwogICAgdGhpcy5wMzMgPSBbMCwgMF07CiAgICB0aGlzLnAzNCA9IFswLCAwXTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CgogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKHRoaXMuc3RhcnRlZCAmJiAhaGFzSW5wdXQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHRoaXMuc3RhcnRlZCA9IGhhc0lucHV0OwoKICAgIGNvbnN0IHJlc29uYW5jZSA9IHBhcmFtZXRlcnMucVswXTsKICAgIGNvbnN0IGRyaXZlID0gY2xhbXAoTWF0aC5leHAocGFyYW1ldGVycy5kcml2ZVswXSksIDAuMSwgMjAwMCk7CgogICAgbGV0IGN1dG9mZiA9IHBhcmFtZXRlcnMuZnJlcXVlbmN5WzBdOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgICBjdXRvZmYgPSAoY3V0b2ZmICogMiAqIF9QSSkgLyBzYW1wbGVSYXRlOwogICAgY3V0b2ZmID0gY3V0b2ZmID4gMSA/IDEgOiBjdXRvZmY7CgogICAgY29uc3QgayA9IE1hdGgubWluKDgsIHJlc29uYW5jZSAqIDAuNCk7CiAgICAvLyAgICAgICAgICAgICAgIGRyaXZlIG1ha2V1cCAgKiByZXNvbmFuY2Ugdm9sdW1lIGxvc3MgbWFrZXVwCiAgICBsZXQgbWFrZXVwZ2FpbiA9ICgxIC8gZHJpdmUpICogTWF0aC5taW4oMS43NSwgMSArIGspOwoKICAgIGZvciAobGV0IG4gPSAwOyBuIDwgYmxvY2tTaXplOyBuKyspIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IG91dCA9IHRoaXMucDNbaV0gKiAwLjM2MDg5MSArIHRoaXMucDMyW2ldICogMC40MTcyOSArIHRoaXMucDMzW2ldICogMC4xNzc4OTYgKyB0aGlzLnAzNFtpXSAqIDAuMDQzOTcyNTsKCiAgICAgICAgdGhpcy5wMzRbaV0gPSB0aGlzLnAzM1tpXTsKICAgICAgICB0aGlzLnAzM1tpXSA9IHRoaXMucDMyW2ldOwogICAgICAgIHRoaXMucDMyW2ldID0gdGhpcy5wM1tpXTsKCiAgICAgICAgdGhpcy5wMFtpXSArPSAoZmFzdF90YW5oKGlucHV0W2ldW25dICogZHJpdmUgLSBrICogb3V0KSAtIGZhc3RfdGFuaCh0aGlzLnAwW2ldKSkgKiBjdXRvZmY7CiAgICAgICAgdGhpcy5wMVtpXSArPSAoZmFzdF90YW5oKHRoaXMucDBbaV0pIC0gZmFzdF90YW5oKHRoaXMucDFbaV0pKSAqIGN1dG9mZjsKICAgICAgICB0aGlzLnAyW2ldICs9IChmYXN0X3RhbmgodGhpcy5wMVtpXSkgLSBmYXN0X3RhbmgodGhpcy5wMltpXSkpICogY3V0b2ZmOwogICAgICAgIHRoaXMucDNbaV0gKz0gKGZhc3RfdGFuaCh0aGlzLnAyW2ldKSAtIGZhc3RfdGFuaCh0aGlzLnAzW2ldKSkgKiBjdXRvZmY7CgogICAgICAgIG91dHB1dFtpXVtuXSA9IG91dCAqIG1ha2V1cGdhaW47CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KfQpyZWdpc3RlclByb2Nlc3NvcignbGFkZGVyLXByb2Nlc3NvcicsIExhZGRlclByb2Nlc3Nvcik7CgpjbGFzcyBEaXN0b3J0UHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFsKICAgICAgeyBuYW1lOiAnZGlzdG9ydCcsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICB7IG5hbWU6ICdwb3N0Z2FpbicsIGRlZmF1bHRWYWx1ZTogMSB9LAogICAgXTsKICB9CgogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlOwogIH0KCiAgcHJvY2VzcyhpbnB1dHMsIG91dHB1dHMsIHBhcmFtZXRlcnMpIHsKICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgY29uc3Qgb3V0cHV0ID0gb3V0cHV0c1swXTsKCiAgICBjb25zdCBoYXNJbnB1dCA9ICEoaW5wdXRbMF0gPT09IHVuZGVmaW5lZCk7CiAgICBpZiAodGhpcy5zdGFydGVkICYmICFoYXNJbnB1dCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB0aGlzLnN0YXJ0ZWQgPSBoYXNJbnB1dDsKCiAgICBjb25zdCBzaGFwZSA9IE1hdGguZXhwbTEocGFyYW1ldGVycy5kaXN0b3J0WzBdKTsKICAgIGNvbnN0IHBvc3RnYWluID0gTWF0aC5tYXgoMC4wMDEsIE1hdGgubWluKDEsIHBhcmFtZXRlcnMucG9zdGdhaW5bMF0pKTsKCiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGJsb2NrU2l6ZTsgbisrKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHsKICAgICAgICBvdXRwdXRbaV1bbl0gPSAoKCgxICsgc2hhcGUpICogaW5wdXRbaV1bbl0pIC8gKDEgKyBzaGFwZSAqIE1hdGguYWJzKGlucHV0W2ldW25dKSkpICogcG9zdGdhaW47CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KfQpyZWdpc3RlclByb2Nlc3NvcignZGlzdG9ydC1wcm9jZXNzb3InLCBEaXN0b3J0UHJvY2Vzc29yKTsKCi8vIFNVUEVSU0FXCmZ1bmN0aW9uIGxlcnAoYSwgYiwgbikgewogIHJldHVybiBuICogKGIgLSBhKSArIGE7Cn0KCmZ1bmN0aW9uIGdldFVuaXNvbkRldHVuZSh1bmlzb24sIGRldHVuZSwgdm9pY2VJbmRleCkgewogIGlmICh1bmlzb24gPCAyKSB7CiAgICByZXR1cm4gMDsKICB9CiAgcmV0dXJuIGxlcnAoLWRldHVuZSAqIDAuNSwgZGV0dW5lICogMC41LCB2b2ljZUluZGV4IC8gKHVuaXNvbiAtIDEpKTsKfQpjbGFzcyBTdXBlclNhd09zY2lsbGF0b3JQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMucGhhc2UgPSBbXTsKICB9CiAgc3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpIHsKICAgIHJldHVybiBbCiAgICAgIHsKICAgICAgICBuYW1lOiAnYmVnaW4nLAogICAgICAgIGRlZmF1bHRWYWx1ZTogMCwKICAgICAgICBtYXg6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwKICAgICAgICBtaW46IDAsCiAgICAgIH0sCgogICAgICB7CiAgICAgICAgbmFtZTogJ2VuZCcsCiAgICAgICAgZGVmYXVsdFZhbHVlOiAwLAogICAgICAgIG1heDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLAogICAgICAgIG1pbjogMCwKICAgICAgfSwKCiAgICAgIHsKICAgICAgICBuYW1lOiAnZnJlcXVlbmN5JywKICAgICAgICBkZWZhdWx0VmFsdWU6IDQ0MCwKICAgICAgICBtaW46IE51bWJlci5FUFNJTE9OLAogICAgICB9LAoKICAgICAgewogICAgICAgIG5hbWU6ICdwYW5zcHJlYWQnLAogICAgICAgIGRlZmF1bHRWYWx1ZTogMC40LAogICAgICAgIG1pbjogMCwKICAgICAgICBtYXg6IDEsCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBuYW1lOiAnZnJlcXNwcmVhZCcsCiAgICAgICAgZGVmYXVsdFZhbHVlOiAwLjIsCiAgICAgICAgbWluOiAwLAogICAgICB9LAogICAgICB7CiAgICAgICAgbmFtZTogJ2RldHVuZScsCiAgICAgICAgZGVmYXVsdFZhbHVlOiAwLAogICAgICAgIG1pbjogMCwKICAgICAgfSwKCiAgICAgIHsKICAgICAgICBuYW1lOiAndm9pY2VzJywKICAgICAgICBkZWZhdWx0VmFsdWU6IDUsCiAgICAgICAgbWluOiAxLAogICAgICB9LAogICAgXTsKICB9CiAgcHJvY2VzcyhpbnB1dCwgb3V0cHV0cywgcGFyYW1zKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICAgIGlmIChjdXJyZW50VGltZSA8PSBwYXJhbXMuYmVnaW5bMF0pIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICAgIGlmIChjdXJyZW50VGltZSA+PSBwYXJhbXMuZW5kWzBdKSB7CiAgICAgIC8vIHRoaXMucG9ydC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdvbmVuZGVkJyB9KTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgbGV0IGZyZXF1ZW5jeSA9IHBhcmFtcy5mcmVxdWVuY3lbMF07CiAgICAvL2FwcGx5IGRldHVuZSBpbiBjZW50cwogICAgZnJlcXVlbmN5ID0gZnJlcXVlbmN5ICogTWF0aC5wb3coMiwgcGFyYW1zLmRldHVuZVswXSAvIDEyMDApOwoKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CiAgICBjb25zdCB2b2ljZXMgPSBwYXJhbXMudm9pY2VzWzBdOwogICAgY29uc3QgZnJlcXNwcmVhZCA9IHBhcmFtcy5mcmVxc3ByZWFkWzBdOwogICAgY29uc3QgcGFuc3ByZWFkID0gcGFyYW1zLnBhbnNwcmVhZFswXSAqIDAuNSArIDAuNTsKICAgIGNvbnN0IGdhaW4xID0gTWF0aC5zcXJ0KDEgLSBwYW5zcHJlYWQpOwogICAgY29uc3QgZ2FpbjIgPSBNYXRoLnNxcnQocGFuc3ByZWFkKTsKCiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHZvaWNlczsgbisrKSB7CiAgICAgIGNvbnN0IGlzT2RkID0gKG4gJiAxKSA9PSAxOwoKICAgICAgLy9hcHBsaWVzIHVuaXNvbiAic3ByZWFkIiBkZXR1bmUgaW4gc2VtaXRvbmVzCiAgICAgIGNvbnN0IGZyZXEgPSBmcmVxdWVuY3kgKiBNYXRoLnBvdygyLCBnZXRVbmlzb25EZXR1bmUodm9pY2VzLCBmcmVxc3ByZWFkLCBuKSAvIDEyKTsKICAgICAgbGV0IGdhaW5MID0gZ2FpbjE7CiAgICAgIGxldCBnYWluUiA9IGdhaW4yOwogICAgICAvLyBpbnZlcnQgcmlnaHQgYW5kIGxlZnQgZ2FpbgogICAgICBpZiAoaXNPZGQpIHsKICAgICAgICBnYWluTCA9IGdhaW4yOwogICAgICAgIGdhaW5SID0gZ2FpbjE7CiAgICAgIH0KICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgICAgIGNvbnN0IGR0ID0gZnJlcSAvIHNhbXBsZVJhdGU7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dFswXS5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMucGhhc2Vbbl0gPSB0aGlzLnBoYXNlW25dID8/IE1hdGgucmFuZG9tKCk7CiAgICAgICAgY29uc3QgdiA9IHdhdmVzaGFwZXMuc2F3YmxlcCh0aGlzLnBoYXNlW25dLCBkdCk7CgogICAgICAgIG91dHB1dFswXVtpXSA9IG91dHB1dFswXVtpXSArIHYgKiBnYWluTDsKICAgICAgICBvdXRwdXRbMV1baV0gPSBvdXRwdXRbMV1baV0gKyB2ICogZ2FpblI7CgogICAgICAgIHRoaXMucGhhc2Vbbl0gKz0gZHQ7CgogICAgICAgIGlmICh0aGlzLnBoYXNlW25dID4gMS4wKSB7CiAgICAgICAgICB0aGlzLnBoYXNlW25dID0gdGhpcy5waGFzZVtuXSAtIDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCnJlZ2lzdGVyUHJvY2Vzc29yKCdzdXBlcnNhdy1vc2NpbGxhdG9yJywgU3VwZXJTYXdPc2NpbGxhdG9yUHJvY2Vzc29yKTsK";function gainNode(o){const e=getAudioContext().createGain();return e.gain.value=o,e}const getSlope=(o,e,a,l)=>l-a===0?0:(e-o)/(l-a);function getWorklet(o,e,a,l){const u=new AudioWorkletNode(o,e,l);return Object.entries(a).forEach(([f,d])=>{u.parameters.get(f).value=d}),u}const getParamADSR=(o,e,a,l,u,f,d,p,g,b="exponential")=>{e=nanFallback(e),a=nanFallback(a),l=nanFallback(l),u=nanFallback(u);const O=b==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";b==="exponential"&&(f=f===0?.001:f,d=d===0?.001:d);const A=d-f,k=d,M=f+l*A,B=g-p,N=L=>{let V;if(e>L){let se=getSlope(f,k,0,e);V=L*se+(f>k?f:0)}else V=(L-e)*getSlope(k,M,0,a)+k;return b==="exponential"&&(V=V||.001),V};o.setValueAtTime(f,p),e>B?o[O](N(B),g):e+a>B?(o[O](N(e),p+e),o[O](N(B),g)):(o[O](N(e),p+e),o[O](N(e+a),p+e+a),o.setValueAtTime(M,g)),o[O](f,g+u)};function getCompressor(o,e,a,l,u,f){const d={threshold:e??-3,ratio:a??10,knee:l??10,attack:u??.005,release:f??.05};return new DynamicsCompressorNode(o,d)}const getADSRValues=(o,e="linear",a)=>{const[d,p,g,b]=o;if(d==null&&p==null&&g==null&&b==null)return a??[.001,.001,1,.01];const O=g??(d!=null&&p==null||d==null&&p==null?1:.001);return[Math.max(d??0,.001),Math.max(p??0,.001),Math.min(O,1),Math.max(b??0,.01)]};function createFilter(o,e,a,l,u,f,d,p,g,b,O,A,k,M){const B="exponential",[N,L,V,se]=getADSRValues([u,f,d,p],B,[.005,.14,0,.1]);let pe,re;if(k==="ladder"?(pe=getWorklet(o,"ladder-processor",{frequency:a,q:l,drive:M}),re=pe.parameters.get("frequency")):(pe=o.createBiquadFilter(),pe.type=e,pe.Q.value=l,pe.frequency.value=a,re=pe.frequency),(u??f??d??p??g)!==void 0){g=nanFallback(g,1,!0),A=nanFallback(A,0,!0);const oe=Math.abs(g),de=oe*A;let _e=clamp(2**-de*a,0,2e4),Ce=clamp(2**(oe-de)*a,0,2e4);return g<0&&([_e,Ce]=[Ce,_e]),getParamADSR(re,N,L,V,se,_e,Ce,b,O,B),pe}return pe}let wetfade=o=>o<.5?1:1-(o-.5)/.5;function drywet(o,e,a=0){const l=getAudioContext();if(!a)return o;let u=l.createGain(),f=l.createGain();o.connect(u),e.connect(f),u.gain.value=wetfade(a),f.gain.value=wetfade(1-a);let d=l.createGain();return u.connect(d),f.connect(d),d}let curves=["linear","exponential"];function getPitchEnvelope(o,e,a,l){if(!(e.pattack??e.pdecay??e.psustain??e.prelease??e.penv))return;const f=nanFallback(e.penv,1,!0),d=curves[e.pcurve??0];let[p,g,b,O]=getADSRValues([e.pattack,e.pdecay,e.psustain,e.prelease],d,[.2,.001,1,.001]),A=e.panchor??b;const k=f*100,M=0-k*A,B=k-k*A;getParamADSR(o,p,g,b,O,M,B,a,l,d)}function getVibratoOscillator(o,e,a){const{vibmod:l=.5,vib:u}=e;let f;if(u>0){f=getAudioContext().createOscillator(),f.frequency.value=u;const d=getAudioContext().createGain();return d.gain.value=l*100,f.connect(d),d.connect(o),f.start(a),f}}function webAudioTimeout(o,e,a,l){const u=o.createConstantSource();u.start(a),u.stop(l),u.onended=()=>{e()}}const mod$1=(o,e=1,a="sine")=>{const l=getAudioContext(),u=l.createOscillator();u.type=a,u.frequency.value=o,u.start();const f=new GainNode(l,{gain:e});return u.connect(f),{node:f,stop:d=>u.stop(d)}},fm=(o,e,a,l="sine")=>{const f=o.value*e,d=f*a;return mod$1(f,d,l)};function applyFM(o,e,a){const{fmh:l=1,fmi:u,fmenv:f="exp",fmattack:d,fmdecay:p,fmsustain:g,fmrelease:b,fmvelocity:O,fmwave:A="sine",duration:k}=e;let M,B=()=>{};if(u){const L=getAudioContext().createGain(),V=fm(o,l,u,A);if(M=V.node,B=V.stop,![d,p,g,b,O].find(se=>se!==void 0))M.connect(o);else{const[se,pe,re,z]=getADSRValues([d,p,g,b]),oe=a+k;getParamADSR(L.gain,se,pe,re,z,0,1,a,oe,f==="exp"?"exponential":"linear"),M.connect(L),L.connect(o)}}return{stop:B}}let listenerQueue=[],atom=(o,e)=>{let a=[],l={get(){return l.lc||l.listen(()=>{})(),l.value},l:e||0,lc:0,listen(u,f){return l.lc=a.push(u,f||l.l)/2,()=>{let d=a.indexOf(u);~d&&(a.splice(d,2),--l.lc||l.off())}},notify(u){let f=!listenerQueue.length;for(let d=0;d<a.length;d+=2)listenerQueue.push(a[d],a[d+1],l.value,u);if(f){for(let d=0;d<listenerQueue.length;d+=4){let p;for(let g=d+1;!p&&(g+=4)<listenerQueue.length;)listenerQueue[g]<listenerQueue[d+1]&&(p=listenerQueue.push(listenerQueue[d],listenerQueue[d+1],listenerQueue[d+2],listenerQueue[d+3]));p||listenerQueue[d](listenerQueue[d+2],listenerQueue[d+3])}listenerQueue.length=0}},off(){},set(u){l.value!==u&&(l.value=u,l.notify())},subscribe(u,f){let d=l.listen(u,f);return u(l.value),d},value:o};return l};const MOUNT=5,UNMOUNT=6,REVERT_MUTATION=10;let on$1=(o,e,a,l)=>(o.events=o.events||{},o.events[a+REVERT_MUTATION]||(o.events[a+REVERT_MUTATION]=l(u=>{o.events[a].reduceRight((f,d)=>(d(f),f),{shared:{},...u})})),o.events[a]=o.events[a]||[],o.events[a].push(e),()=>{let u=o.events[a],f=u.indexOf(e);u.splice(f,1),u.length||(delete o.events[a],o.events[a+REVERT_MUTATION](),delete o.events[a+REVERT_MUTATION])}),STORE_UNMOUNT_DELAY=1e3,onMount=(o,e)=>on$1(o,l=>{let u=e(l);u&&o.events[UNMOUNT].push(u)},MOUNT,l=>{let u=o.listen;o.listen=(...d)=>(!o.lc&&!o.active&&(o.active=!0,l()),u(...d));let f=o.off;return o.events[UNMOUNT]=[],o.off=()=>{f(),setTimeout(()=>{if(o.active&&!o.lc){o.active=!1;for(let d of o.events[UNMOUNT])d();o.events[UNMOUNT]=[]}},STORE_UNMOUNT_DELAY)},()=>{o.listen=u,o.off=f}}),map=(o={})=>{let e=atom(o);return e.setKey=function(a,l){typeof l>"u"?a in e.value&&(e.value={...e.value},delete e.value[a],e.notify(a)):e.value[a]!==l&&(e.value={...e.value,[a]:l},e.notify(a))},e};const bufferCache$1={},loadCache$1={},getCachedBuffer=o=>bufferCache$1[o];function humanFileSize(o,e){var a=e?1e3:1024;if(o<a)return o+" B";var l=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],u=-1;do o/=a,++u;while(o>=a);return o.toFixed(1)+" "+l[u]}const getSampleBufferSource=async(o,e,a,l,u,f,d)=>{let p=0;u!==void 0&&a!==void 0&&logger$1("[sampler] hap has note and freq. ignoring note","warning");let g=valueToMidi({freq:u,note:a},36);p=g-36;const b=getAudioContext();let O,A=0;if(Array.isArray(f))A=getSoundIndex(e,f.length),O=f[A];else{const N=V=>noteToMidi(V)-g,L=Object.keys(f).filter(V=>!V.startsWith("_")).reduce((V,se,pe)=>!V||Math.abs(N(se))<Math.abs(N(V))?se:V,null);p=-N(L),A=getSoundIndex(e,f[L].length),O=f[L][A]}d&&(O=await d(O));let k=await loadBuffer(O,b,o,A);l<0&&(k=reverseBuffer(k));const M=b.createBufferSource();M.buffer=k;const B=1*Math.pow(2,p/12);return M.playbackRate.value=B,M},loadBuffer=(o,e,a,l=0)=>{const u=a?`sound "${a}:${l}"`:"sample";if(o=o.replace("#","%23"),!loadCache$1[o]){logger$1(`[sampler] load ${u}..`,"load-sample",{url:o});const f=Date.now();loadCache$1[o]=fetch(o).then(d=>d.arrayBuffer()).then(async d=>{const p=Date.now()-f,g=humanFileSize(d.byteLength);logger$1(`[sampler] load ${u}... done! loaded ${g} in ${p}ms`,"loaded-sample",{url:o});const b=await e.decodeAudioData(d);return bufferCache$1[o]=b,b})}return loadCache$1[o]};function reverseBuffer(o){const e=getAudioContext(),a=e.createBuffer(o.numberOfChannels,o.length,e.sampleRate);for(let l=0;l<o.numberOfChannels;l++)a.copyToChannel(o.getChannelData(l).slice().reverse(),l,l);return a}const getLoadedBuffer=o=>bufferCache$1[o];function resolveSpecialPaths(o){if(o.startsWith("bubo:")){const[e,a]=o.split(":");o=`github:Bubobubobubobubo/dough-${a}`}return o}function githubPath(o,e=""){if(!o.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[a,l]=o.split("github:");return l=l.endsWith("/")?l.slice(0,-1):l,l.split("/").length===2&&(l+="/main"),`https://raw.githubusercontent.com/${l}/${e}`}const processSampleMap=(o,e,a=o._base||"")=>Object.entries(o).forEach(([l,u])=>{if(typeof u=="string"&&(u=[u]),typeof u!="object")throw new Error("wrong sample map format for "+l);a=u._base||a,a=resolveSpecialPaths(a),a.startsWith("github:")&&(a=githubPath(a,""));const f=d=>a+d;Array.isArray(u)?u=u.map(f):u=Object.fromEntries(Object.entries(u).map(([d,p])=>[d,(typeof p=="string"?[p]:p).map(f)])),e(l,u)});let resourcePrefixHandlers={};function registerSamplesPrefix(o,e){resourcePrefixHandlers[o]=e}function getSamplesPrefixHandler(o){const e=Object.entries(resourcePrefixHandlers).find(([a])=>o.startsWith(a));if(e)return e[1]}const samples=async(o,e=o._base||"",a={})=>{if(typeof o=="string"){const f=getSamplesPrefixHandler(o);if(f)return f(o);if(o=resolveSpecialPaths(o),o.startsWith("github:")&&(o=githubPath(o,"strudel.json")),o.startsWith("local:")&&(o="http://localhost:5432"),o.startsWith("shabda:")){let[p,g]=o.split("shabda:");o=`https://shabda.ndre.gr/${g}.json?strudel=1`}if(o.startsWith("shabda/speech")){let[p,g]=o.split("shabda/speech");g=g.startsWith("/")?g.substring(1):g;let[b,O]=g.split(":"),A="f",k="en-GB";b&&([k,A]=b.split("/")),o=`https://shabda.ndre.gr/speech/${O}.json?gender=${A}&language=${k}&strudel=1'`}if(typeof fetch!="function")return;const d=o.split("/").slice(0,-1).join("/");return typeof fetch>"u"?void 0:fetch(o).then(p=>p.json()).then(p=>samples(p,e||p._base||d,a)).catch(p=>{throw console.error(p),new Error(`error loading "${o}"`)})}const{prebake:l,tag:u}=a;processSampleMap(o,(f,d)=>registerSound(f,(p,g,b)=>onTriggerSample(p,g,b,d),{type:"sample",samples:d,baseUrl:e,prebake:l,tag:u}),e)},cutGroups=[];async function onTriggerSample(o,e,a,l,u){let{s:f,freq:d,unit:p,nudge:g=0,cut:b,loop:O,clip:A=void 0,n:k=0,note:M,speed:B=1,loopBegin:N=0,begin:L=0,loopEnd:V=1,end:se=1,duration:pe}=e;if(B===0)return;O=f.startsWith("wt_")?1:e.loop;const re=getAudioContext();let[z,oe,de,_e]=getADSRValues([e.attack,e.decay,e.sustain,e.release]);const Ce=o+g,be=await getSampleBufferSource(f,k,M,B,d,l,u);let xe=getVibratoOscillator(be.detune,e,o);if(re.currentTime>o){logger$1(`[sampler] still loading sound "${f}:${k}"`,"highlight");return}if(!be){logger$1(`[sampler] could not load "${f}:${k}"`,"error");return}be.playbackRate.value=Math.abs(B)*be.playbackRate.value,p==="c"&&(be.playbackRate.value=be.playbackRate.value*be.buffer.duration*1);const Oe=L*be.buffer.duration;O&&(be.loop=!0,be.loopStart=N*be.buffer.duration-Oe,be.loopEnd=V*be.buffer.duration-Oe),be.start(Ce,Oe);const ke=re.createGain(),Ie=be.connect(ke);if(A==null&&O==null&&e.release==null){const Ze=be.buffer.duration/be.playbackRate.value;pe=(se-L)*Ze}let Fe=o+pe;getParamADSR(Ie.gain,z,oe,de,_e,0,1,o,Fe,"linear"),getPitchEnvelope(be.detune,e,o,Fe);const Be=re.createGain();Ie.connect(Be),be.onended=function(){be.disconnect(),xe?.stop(),Ie.disconnect(),Be.disconnect(),a()};let Ge=Fe+_e+.01;be.stop(Ge);const Ve={node:Be,bufferSource:be,stop:(Ze,Je)=>{}};if(b!==void 0){const Ze=cutGroups[b];Ze&&(Ze.node.gain.setValueAtTime(1,Ce),Ze.node.gain.linearRampToValueAtTime(0,Ce+.01)),cutGroups[b]=Ve}return Ve}const soundMap=map();function registerSound(o,e,a={}){soundMap.setKey(o,{onTrigger:e,data:a})}function getSound(o){return soundMap.get()[o]}const defaultDefaultValues={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,delay:0,delayfeedback:.5,delaytime:.25,orbit:1,i:1,velocity:1,fft:8};let defaultControls=new Map(Object.entries(defaultDefaultValues));function setDefaultValue(o,e){defaultControls.set(o,e)}function getDefaultValue(o){return defaultControls.get(o)}function setDefaultValues(o){Object.keys(o).forEach(e=>{setDefaultValue(e,o[e])})}function resetDefaultValues(){defaultControls=new Map(Object.entries(defaultDefaultValues))}function setVersionDefaults(o){resetDefaultValues(),o==="1.0"&&setDefaultValue("fanchor",.5)}const resetLoadedSounds=()=>soundMap.set({});let audioContext;const setDefaultAudioContext=()=>(audioContext=new AudioContext,audioContext),getAudioContext=()=>audioContext||setDefaultAudioContext();let workletsLoading;function loadWorklets(){return workletsLoading||(workletsLoading=getAudioContext().audioWorklet.addModule(workletsUrl)),workletsLoading}async function initAudio(o={}){const{disableWorklets:e=!1}=o;if(!(typeof window>"u")){if(await getAudioContext().resume(),e){logger$1("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await loadWorklets(),logger$1("[superdough] AudioWorklets loaded")}catch(a){console.warn("could not load AudioWorklet effects",a)}logger$1("[superdough] ready")}}let audioReady;async function initAudioOnFirstClick(o){return audioReady||(audioReady=new Promise(e=>{document.addEventListener("click",async function a(){document.removeEventListener("click",a),await initAudio(o),e()})})),audioReady}let delays={},channelMerger,destinationGain;function initializeAudioOutput(){const o=getAudioContext(),e=o.destination.maxChannelCount;o.destination.channelCount=e,channelMerger=new ChannelMergerNode(o,{numberOfInputs:o.destination.channelCount}),destinationGain=new GainNode(o),channelMerger.connect(destinationGain),destinationGain.connect(o.destination)}const connectToDestination=(o,e=[0,1])=>{const a=getAudioContext();channelMerger==null&&initializeAudioOutput();const l=new StereoPannerNode(a);o.connect(l);const u=new ChannelSplitterNode(a,{numberOfOutputs:l.channelCount});l.connect(u),e.forEach((f,d)=>{u.connect(channelMerger,d%l.channelCount,clamp(f,0,a.destination.channelCount-1))})},panic=()=>{destinationGain!=null&&(destinationGain.gain.linearRampToValueAtTime(0,getAudioContext().currentTime+.01),destinationGain=null)};function getDelay(o,e,a,l){if(a=clamp(a,0,.98),!delays[o]){const f=getAudioContext().createFeedbackDelay(1,e,a);f.start?.(l),connectToDestination(f,[0,1]),delays[o]=f}return delays[o].delayTime.value!==e&&delays[o].delayTime.setValueAtTime(e,l),delays[o].feedback.value!==a&&delays[o].feedback.setValueAtTime(a,l),delays[o]}function getPhaser(o,e,a=1,l=.5,u=1e3,f=2e3){const d=getAudioContext(),p=d.createGain();p.gain.value=f*2,getWorklet(d,"lfo-processor",{frequency:a,depth:1,skew:0,phaseoffset:0,time:o,end:e,shape:1,dcoffset:-.5}).connect(p);const b=2;let O=0;const A=[];for(let k=0;k<b;k++){const M=d.createBiquadFilter();M.type="notch",M.gain.value=1,M.frequency.value=u+O,M.Q.value=2-Math.min(Math.max(l*2,0),1.9),p.connect(M.detune),O+=282,k>0&&A[k-1].connect(M),A.push(M)}return A[A.length-1]}function getFilterType(o){o=o??0;const e=["12db","ladder","24db"];return typeof o=="number"?e[Math.floor(_mod(o,e.length))]:o}let reverbs={},hasChanged=(o,e)=>o!==void 0&&o!==e;function getReverb(o,e,a,l,u,f){if(!reverbs[o]){const p=getAudioContext().createReverb(e,a,l,u,f);connectToDestination(p,[0,1]),reverbs[o]=p}return(hasChanged(e,reverbs[o].duration)||hasChanged(a,reverbs[o].fade)||hasChanged(l,reverbs[o].lp)||hasChanged(u,reverbs[o].dim)||reverbs[o].ir!==f)&&reverbs[o].generate(e,a,l,u,f),reverbs[o]}let analysers={},analysersData={};function getAnalyserById(o,e=1024){if(!analysers[o]){const a=getAudioContext().createAnalyser();a.fftSize=e,analysers[o]=a,analysersData[o]=new Float32Array(analysers[o].frequencyBinCount)}return analysers[o].fftSize!==e&&(analysers[o].fftSize=e,analysersData[o]=new Float32Array(analysers[o].frequencyBinCount)),analysers[o]}function getAnalyzerData(o="time",e=1){const a={time:()=>analysers[e]?.getFloatTimeDomainData(analysersData[e]),frequency:()=>analysers[e]?.getFloatFrequencyData(analysersData[e])}[o];if(!a)throw new Error(`getAnalyzerData: ${o} not supported. use one of ${Object.keys(a).join(", ")}`);return a(),analysersData[e]}function effectSend(o,e,a){const l=gainNode(a);return o.connect(l),l.connect(e),l}function resetGlobalEffects(){delays={},reverbs={},analysers={},analysersData={}}const superdough=async(o,e,a)=>{const l=getAudioContext();if(typeof o!="object")throw new Error(`expected hap.value to be an object, but got "${o}". Hint: append .note() or .s() to the end`,"error");if(o.duration=a,e=typeof e=="string"&&e.startsWith("=")?Number(e.slice(1)):l.currentTime+e,e<l.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${e.toFixed(2)}, now: ${l.currentTime.toFixed(2)})`);return}let{s:u=getDefaultValue("s"),bank:f,source:d,gain:p=getDefaultValue("gain"),postgain:g=getDefaultValue("postgain"),density:b=getDefaultValue("density"),fanchor:O=getDefaultValue("fanchor"),drive:A=.69,cutoff:k,lpenv:M,lpattack:B,lpdecay:N,lpsustain:L,lprelease:V,resonance:se=getDefaultValue("resonance"),hpenv:pe,hcutoff:re,hpattack:z,hpdecay:oe,hpsustain:de,hprelease:_e,hresonance:Ce=getDefaultValue("hresonance"),bpenv:be,bandf:xe,bpattack:Oe,bpdecay:ke,bpsustain:Ie,bprelease:Fe,bandq:Be=getDefaultValue("bandq"),channels:Ge=getDefaultValue("channels"),phaser:Ne,phaserdepth:Ve=getDefaultValue("phaserdepth"),phasersweep:Ze,phasercenter:Je,coarse:$e,crush:ht,shape:xt,shapevol:Et=getDefaultValue("shapevol"),distort:et,distortvol:Le=getDefaultValue("distortvol"),pan:ot,vowel:St,delay:vt=getDefaultValue("delay"),delayfeedback:Lt=getDefaultValue("delayfeedback"),delaytime:pt=getDefaultValue("delaytime"),orbit:qt=getDefaultValue("orbit"),room:yt,roomfade:wt,roomlp:Wt,roomdim:Mt,roomsize:tn,ir:Kt,i:Ht=getDefaultValue("i"),velocity:Ut=getDefaultValue("velocity"),analyze:Nt,fft:zt=getDefaultValue("fft"),compressor:Zt,compressorRatio:nt,compressorKnee:kt,compressorAttack:Xe,compressorRelease:Pt}=o;p=nanFallback(p,1),Ge=(Array.isArray(Ge)?Ge:[Ge]).map(Qe=>Qe-1),p*=Ut;let tt=[];const un=()=>{tt.forEach(Qe=>Qe?.disconnect())};f&&u&&(u=`${f}_${u}`);let Ct;if(d)Ct=d(e,o,a);else if(getSound(u)){const{onTrigger:Qe}=getSound(u),st=await Qe(e,o,un);st&&(Ct=st.node,st.stop(e+a))}else throw new Error(`sound ${u} not found! Is it loaded?`);if(!Ct)return;if(l.currentTime>e){logger$1("[webaudio] skip hap: still loading",l.currentTime-e);return}const ut=[];ut.push(Ct),ut.push(gainNode(p));const nn=getFilterType(o.ftype);if(k!==void 0){let Qe=()=>createFilter(l,"lowpass",k,se,B,N,L,V,M,e,e+a,O,nn,A);ut.push(Qe()),nn==="24db"&&ut.push(Qe())}if(re!==void 0){let Qe=()=>createFilter(l,"highpass",re,Ce,z,oe,de,_e,pe,e,e+a,O);ut.push(Qe()),nn==="24db"&&ut.push(Qe())}if(xe!==void 0){let Qe=()=>createFilter(l,"bandpass",xe,Be,Oe,ke,Ie,Fe,be,e,e+a,O);ut.push(Qe()),nn==="24db"&&ut.push(Qe())}if(St!==void 0){const Qe=l.createVowelFilter(St);ut.push(Qe)}if($e!==void 0&&ut.push(getWorklet(l,"coarse-processor",{coarse:$e})),ht!==void 0&&ut.push(getWorklet(l,"crush-processor",{crush:ht})),xt!==void 0&&ut.push(getWorklet(l,"shape-processor",{shape:xt,postgain:Et})),et!==void 0&&ut.push(getWorklet(l,"distort-processor",{distort:et,postgain:Le})),Zt!==void 0&&ut.push(getCompressor(l,Zt,nt,kt,Xe,Pt)),ot!==void 0){const Qe=l.createStereoPanner();Qe.pan.value=2*ot-1,ut.push(Qe)}if(Ne!==void 0&&Ve>0){const Qe=getPhaser(e,e+a,Ne,Ve,Je,Ze);ut.push(Qe)}const jt=new GainNode(l,{gain:g});ut.push(jt),connectToDestination(jt,Ge);let At;if(vt>0&&pt>0&&Lt>0){const Qe=getDelay(qt,pt,Lt,e);At=effectSend(jt,Qe,vt)}let ct;if(yt>0){let Qe;if(Kt!==void 0){let Bt,Gt=getSound(Kt);Array.isArray(Gt)?Bt=Gt.data.samples[Ht%Gt.data.samples.length]:typeof Gt=="object"&&(Bt=Object.values(Gt.data.samples).flat()[Ht%Object.values(Gt.data.samples).length]),Qe=await loadBuffer(Bt,l,Kt,0)}const st=getReverb(qt,tn,wt,Wt,Mt,Qe);ct=effectSend(jt,st,yt)}let Rt;if(Nt){const Qe=getAnalyserById(Nt,2**(zt+5));Rt=effectSend(jt,Qe,1)}ut.slice(1).reduce((Qe,st)=>Qe.connect(st),ut[0]),tt=ut.concat([At,ct,Rt])},superdoughTrigger=(o,e,a,l)=>superdough(e,o-a,e.duration/l);let noiseCache={};function getNoiseBuffer(o,e){const a=getAudioContext();if(noiseCache[o])return noiseCache[o];const l=2*a.sampleRate,u=a.createBuffer(1,l,a.sampleRate),f=u.getChannelData(0);let d=0,p,g,b,O,A,k,M;p=g=b=O=A=k=M=0;for(let B=0;B<l;B++)if(o==="white")f[B]=Math.random()*2-1;else if(o==="brown"){let N=Math.random()*2-1;f[B]=(d+.02*N)/1.02,d=f[B]}else if(o==="pink"){let N=Math.random()*2-1;p=.99886*p+N*.0555179,g=.99332*g+N*.0750759,b=.969*b+N*.153852,O=.8665*O+N*.3104856,A=.55*A+N*.5329522,k=-.7616*k-N*.016898,f[B]=p+g+b+O+A+k+M+N*.5362,f[B]*=.11,M=N*.115926}else if(o==="crackle"){const N=e*.01;Math.random()<N?f[B]=Math.random()*2-1:f[B]=0}return o!=="crackle"&&(noiseCache[o]=u),u}function getNoiseOscillator(o="white",e,a=.02){const u=getAudioContext().createBufferSource();return u.buffer=getNoiseBuffer(o,a),u.loop=!0,u.start(e),{node:u,stop:f=>u.stop(f)}}function getNoiseMix(o,e,a){const l=getNoiseOscillator("pink",a);return{node:drywet(o,l.node,e),stop:f=>l?.stop(f)}}const getFrequencyFromValue=o=>{let{note:e,freq:a}=o;return e=e||36,typeof e=="string"&&(e=noteToMidi(e)),!a&&typeof e=="number"&&(a=midiToFreq$1(e)),Number(a)},waveforms=["triangle","square","sawtooth","sine"],noises=["pink","white","brown","crackle"];function registerSynthSounds(){[...waveforms].forEach(o=>{registerSound(o,(e,a,l)=>{const[u,f,d,p]=getADSRValues([a.attack,a.decay,a.sustain,a.release],"linear",[.001,.05,.6,.01]);let g=getOscillator(o,e,a),{node:b,stop:O,triggerRelease:A}=g;const k=gainNode(.3),{duration:M}=a;b.onended=()=>{b.disconnect(),k.disconnect(),l()};const B=gainNode(1);let N=b.connect(k).connect(B);const L=e+M;getParamADSR(N.gain,u,f,d,p,0,1,e,L,"linear");const V=L+p+.01;return A?.(V),O(V),{node:N,stop:se=>{}}},{type:"synth",prebake:!0})}),registerSound("supersaw",(o,e,a)=>{const l=getAudioContext();let{duration:u,n:f,unison:d=5,spread:p=.6,detune:g}=e;g=g??f??.18;const b=getFrequencyFromValue(e),[O,A,k,M]=getADSRValues([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),B=o+u,N=B+M+.01,L=clamp(d,1,100);let V=L>1?clamp(p,0,1):0,se=getWorklet(l,"supersaw-oscillator",{frequency:b,begin:o,end:N,freqspread:g,voices:L,panspread:V},{outputChannelCount:[2]});const pe=1/Math.sqrt(L);getPitchEnvelope(se.parameters.get("detune"),e,o,B);const re=getVibratoOscillator(se.parameters.get("detune"),e,o),z=applyFM(se.parameters.get("frequency"),e,o);let oe=gainNode(1);return oe=se.connect(oe),webAudioTimeout(l,()=>{se.disconnect(),oe.disconnect(),a(),z?.stop(),re?.stop()},o,N),getParamADSR(oe.gain,O,A,k,M,0,.3*pe,o,B,"linear"),{node:oe,stop:de=>{}}},{prebake:!0,type:"synth"}),[...noises].forEach(o=>{registerSound(o,(e,a,l)=>{const[u,f,d,p]=getADSRValues([a.attack,a.decay,a.sustain,a.release],"linear",[.001,.05,.6,.01]);let g,{density:b}=a;g=getNoiseOscillator(o,e,b);let{node:O,stop:A,triggerRelease:k}=g;const M=gainNode(.3),{duration:B}=a;O.onended=()=>{O.disconnect(),M.disconnect(),l()};const N=gainNode(1);let L=O.connect(M).connect(N);const V=e+B;getParamADSR(L.gain,u,f,d,p,0,1,e,V,"linear");const se=V+p+.01;return k?.(se),A(se),{node:L,stop:pe=>{}}},{type:"synth",prebake:!0})})}function waveformN(o,e){const a=new Float32Array(o+1),l=new Float32Array(o+1),u=getAudioContext(),f=u.createOscillator(),d={sawtooth:b=>[0,-1/b],square:b=>[0,b%2===0?0:1/b],triangle:b=>[b%2===0?0:1/(b*b),0]};if(!d[e])throw new Error(`unknown wave type ${e}`);a[0]=0,l[0]=0;let p=1;for(;p<=o;){const[b,O]=d[e](p);a[p]=b,l[p]=O,p++}const g=u.createPeriodicWave(a,l);return f.setPeriodicWave(g),f}function getOscillator(o,e,a){let{n:l,duration:u,noise:f=0}=a,d;!l||o==="sine"?(d=getAudioContext().createOscillator(),d.type=o||"triangle"):d=waveformN(l,o),d.frequency.value=getFrequencyFromValue(a),d.start(e);let p=getVibratoOscillator(d.detune,a,e);getPitchEnvelope(d.detune,a,e,e+u);const g=applyFM(d.frequency,a,e);let b;return f&&(b=getNoiseMix(d,f,e)),{node:b?.node||d,stop:O=>{g.stop(O),p?.stop(O),b?.stop(O),d.stop(O)},triggerRelease:O=>{}}}function buildSamples(o=1,e=.05,a=220,l=0,u=0,f=.1,d=0,p=1,g=0,b=0,O=0,A=0,k=0,M=0,B=0,N=0,L=0,V=1,se=0,pe=0){let re=Math.PI*2,z=getAudioContext().sampleRate,oe=Ve=>Ve>0?1:-1,de=g*=500*re/z/z,_e=a*=(1+e*2*Math.random()-e)*re/z,Ce=[],be=0,xe=0,Oe=0,ke=1,Ie=0,Fe=0,Be=0,Ge,Ne;for(l=l*z+9,se*=z,u*=z,f*=z,L*=z,b*=500*re/z**3,B*=re/z,O*=re/z,A*=z,k=k*z|0,Ne=l+se+u+f+L|0;Oe<Ne;Ce[Oe++]=Be)++Fe%(N*100|0)||(Be=d?d>1?d>2?d>3?Math.sin((be%re)**3):Math.max(Math.min(Math.tan(be),1),-1):1-(2*be/re%2+2)%2:1-4*Math.abs(Math.round(be/re)-be/re):Math.sin(be),Be=(k?1-pe+pe*Math.sin(re*Oe/k):1)*oe(Be)*Math.abs(Be)**p*o*1*(Oe<l?Oe/l:Oe<l+se?1-(Oe-l)/se*(1-V):Oe<l+se+u?V:Oe<Ne-L?(Ne-Oe-L)/f*V:0),Be=L?Be/2+(L>Oe?0:(Oe<Ne-L?1:(Ne-Oe)/L)*Ce[Oe-L|0]/2):Be),Ge=(a+=g+=b)*Math.cos(B*xe++),be+=Ge-Ge*M*(1-(Math.sin(Oe)+1)*1e9%2),ke&&++ke>A&&(a+=O,_e+=O,ke=0),k&&!(++Ie%k)&&(a=_e,g=de,ke||=1);return Ce}const getZZFX=(o,e)=>{let{s:a,note:l=36,freq:u,zrand:f=0,attack:d=0,decay:p=0,sustain:g=.8,release:b=.1,curve:O=1,slide:A=0,deltaSlide:k=0,pitchJump:M=0,pitchJumpTime:B=0,lfo:N=0,znoise:L=0,zmod:V=0,zcrush:se=0,zdelay:pe=0,tremolo:re=0,duration:z=.2,zzfx:oe}=o;const de=Math.max(z-d-p,0);typeof l=="string"&&(l=noteToMidi(l)),!u&&typeof l=="number"&&(u=midiToFreq$1(l)),a=a.replace("z_","");const _e=["sine","triangle","sawtooth","tan","noise"].indexOf(a)||0;O=a==="square"?0:O;const be=buildSamples(...oe||[.25,f,u,d,de,b,_e,O,A,k,M,B,N,L,V,se,pe,g,p,re]),xe=getAudioContext(),Oe=xe.createBuffer(1,be.length,xe.sampleRate);Oe.getChannelData(0).set(be);const ke=getAudioContext().createBufferSource();return ke.buffer=Oe,ke.start(e),{node:ke}};function registerZZFXSounds(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(o=>{registerSound(o,(e,a,l)=>{const{node:u}=getZZFX({s:o,...a},e);return u.onended=()=>{u.disconnect(),l()},{node:u,stop:()=>{}}},{type:"synth",prebake:!0})})}let worklet;async function dspWorklet(o,e){const a=`dsp-worklet-${Date.now()}`,l=`${e}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${a}', MyProcessor);
`,f=`data:text/javascript;base64,${btoa(l)}`;await o.audioWorklet.addModule(f);const d=new AudioWorkletNode(o,a);return{node:d,stop:()=>d.port.postMessage("stop")}}const stop=()=>{worklet&&(worklet?.stop(),worklet?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",o=>{o.data==="strudel-stop"?stop():o.data?.dough&&worklet?.node.port.postMessage(o.data)});const dough=async o=>{const e=getAudioContext();stop(),worklet=await dspWorklet(e,o),worklet.node.connect(e.destination)};function doughTrigger(o,e,a,l,u){window.postMessage({time:u,dough:e.value,currentTime:a,duration:e.duration,cps:l})}const{Pattern,logger,repl}=core;setLogger(logger);const hap2value=o=>(o.ensureObjectValue(),o.value),webaudioOutputTrigger=(o,e,a,l)=>superdough(hap2value(e),o-a,e.duration/l),webaudioOutput=(o,e,a,l,u)=>superdough(hap2value(o),u?`=${u}`:e,a);Pattern.prototype.webaudio=function(){return this.onTrigger(webaudioOutputTrigger)};function webaudioRepl(o={}){return o={getTime:()=>getAudioContext().currentTime,defaultOutput:webaudioOutput,...o},repl(o)}Pattern.prototype.dough=function(){return this.onTrigger(doughTrigger,1)};function drawTimeScope(o,{align:e=!0,color:a="white",thickness:l=3,scale:u=.25,pos:f=.75,trigger:d=0,ctx:p=getDrawContext(),id:g=1}={}){p.lineWidth=l,p.strokeStyle=a;let b=p.canvas;if(!o){p.beginPath();let N=f*b.height;p.moveTo(0,N),p.lineTo(b.width,N),p.stroke();return}const O=getAnalyzerData("time",g);p.beginPath();const A=o.frequencyBinCount;let k=e?Array.from(O).findIndex((N,L,V)=>L&&V[L-1]>-d&&N<=-d):0;k=Math.max(k,0);const M=b.width*1/A;let B=0;for(let N=k;N<A;N++){const L=O[N]+1,V=(f-u*(L-1))*b.height;N===0?p.moveTo(B,V):p.lineTo(B,V),B+=M}p.stroke()}function drawFrequencyScope(o,{color:e="white",scale:a=.25,pos:l=.75,lean:u=.5,min:f=-150,max:d=0,ctx:p=getDrawContext(),id:g=1}={}){if(!o){p.beginPath();let B=l*O.height;p.moveTo(0,B),p.lineTo(O.width,B),p.stroke();return}const b=getAnalyzerData("frequency",g),O=p.canvas;p.fillStyle=e;const A=o.frequencyBinCount,k=O.width*1/A;let M=0;for(let B=0;B<A;B++){const L=clamp$1((b[B]-f)/(d-f),0,1)*a,V=L*O.height,se=(l-L*u)*O.height;p.fillRect(M,se,Math.max(k,1),V),M+=k}}function clearScreen(o=0,e="0,0,0",a=getDrawContext()){o?(a.fillStyle=`rgba(${e},${1-o})`,a.fillRect(0,0,a.canvas.width,a.canvas.height)):a.clearRect(0,0,a.canvas.width,a.canvas.height)}Pattern$1.prototype.fscope=function(o={}){let e=o.id??1;return this.analyze(e).draw(()=>{clearScreen(o.smear,"0,0,0",o.ctx),analysers[e]&&drawFrequencyScope(analysers[e],o)},{id:e})},Pattern$1.prototype.tscope=function(o={}){let e=o.id??1;return this.analyze(e).draw(a=>{o.color=a[0]?.value?.color||getTheme().foreground,o.color,clearScreen(o.smear,"0,0,0",o.ctx),drawTimeScope(analysers[e],o)},{id:e})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;const index$8=Object.freeze(Object.defineProperty({__proto__:null,get analysers(){return analysers},get analysersData(){return analysersData},applyFM,connectToDestination,createFilter,dough,doughTrigger,drawFrequencyScope,drawTimeScope,drywet,dspWorklet,gainNode,getADSRValues,getAnalyserById,getAnalyzerData,getAudioContext,getCachedBuffer,getCompressor,getDefaultValue,getLoadedBuffer,getOscillator,getParamADSR,getPitchEnvelope,getSampleBufferSource,getSound,getVibratoOscillator,getWorklet,getZZFX,initAudio,initAudioOnFirstClick,initializeAudioOutput,loadBuffer,logger:logger$1,onTriggerSample,panic,processSampleMap,registerSamplesPrefix,registerSound,registerSynthSounds,registerZZFXSounds,resetDefaultValues,resetGlobalEffects,resetLoadedSounds,reverseBuffer,samples,setDefaultAudioContext,setDefaultValue,setDefaultValues,setLogger,setVersionDefaults,soundMap,superdough,superdoughTrigger,waveformN,webAudioTimeout,webaudioOutput,webaudioOutputTrigger,webaudioRepl},Symbol.toStringTag,{value:"Module"}));class Text{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,a,l){[e,a]=clip(this,e,a);let u=[];return this.decompose(0,e,u,2),l.length&&l.decompose(0,l.length,u,3),this.decompose(a,this.length,u,1),TextNode.from(u,this.length-(a-e)+l.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,a=this.length){[e,a]=clip(this,e,a);let l=[];return this.decompose(e,a,l,0),TextNode.from(l,a-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let a=this.scanIdentical(e,1),l=this.length-this.scanIdentical(e,-1),u=new RawTextCursor(this),f=new RawTextCursor(e);for(let d=a,p=a;;){if(u.next(d),f.next(d),d=0,u.lineBreak!=f.lineBreak||u.done!=f.done||u.value!=f.value)return!1;if(p+=u.value.length,u.done||p>=l)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,a=this.length){return new PartialTextCursor(this,e,a)}iterLines(e,a){let l;if(e==null)l=this.iter();else{a==null&&(a=this.lines+1);let u=this.line(e).from;l=this.iterRange(u,Math.max(u,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new LineCursor(l)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,a=textLength(e)){super(),this.text=e,this.length=a}get lines(){return this.text.length}get children(){return null}lineInner(e,a,l,u){for(let f=0;;f++){let d=this.text[f],p=u+d.length;if((a?l:p)>=e)return new Line(u,p,l,d);u=p+1,l++}}decompose(e,a,l,u){let f=e<=0&&a>=this.length?this:new TextLeaf(sliceText(this.text,e,a),Math.min(a,this.length)-Math.max(0,e));if(u&1){let d=l.pop(),p=appendText(f.text,d.text.slice(),0,f.length);if(p.length<=32)l.push(new TextLeaf(p,d.length+f.length));else{let g=p.length>>1;l.push(new TextLeaf(p.slice(0,g)),new TextLeaf(p.slice(g)))}}else l.push(f)}replace(e,a,l){if(!(l instanceof TextLeaf))return super.replace(e,a,l);[e,a]=clip(this,e,a);let u=appendText(this.text,appendText(l.text,sliceText(this.text,0,e)),a),f=this.length+l.length-(a-e);return u.length<=32?new TextLeaf(u,f):TextNode.from(TextLeaf.split(u,[]),f)}sliceString(e,a=this.length,l=`
`){[e,a]=clip(this,e,a);let u="";for(let f=0,d=0;f<=a&&d<this.text.length;d++){let p=this.text[d],g=f+p.length;f>e&&d&&(u+=l),e<g&&a>f&&(u+=p.slice(Math.max(0,e-f),a-f)),f=g+1}return u}flatten(e){for(let a of this.text)e.push(a)}scanIdentical(){return 0}static split(e,a){let l=[],u=-1;for(let f of e)l.push(f),u+=f.length+1,l.length==32&&(a.push(new TextLeaf(l,u)),l=[],u=-1);return u>-1&&a.push(new TextLeaf(l,u)),a}}class TextNode extends Text{constructor(e,a){super(),this.children=e,this.length=a,this.lines=0;for(let l of e)this.lines+=l.lines}lineInner(e,a,l,u){for(let f=0;;f++){let d=this.children[f],p=u+d.length,g=l+d.lines-1;if((a?g:p)>=e)return d.lineInner(e,a,l,u);u=p+1,l=g+1}}decompose(e,a,l,u){for(let f=0,d=0;d<=a&&f<this.children.length;f++){let p=this.children[f],g=d+p.length;if(e<=g&&a>=d){let b=u&((d<=e?1:0)|(g>=a?2:0));d>=e&&g<=a&&!b?l.push(p):p.decompose(e-d,a-d,l,b)}d=g+1}}replace(e,a,l){if([e,a]=clip(this,e,a),l.lines<this.lines)for(let u=0,f=0;u<this.children.length;u++){let d=this.children[u],p=f+d.length;if(e>=f&&a<=p){let g=d.replace(e-f,a-f,l),b=this.lines-d.lines+g.lines;if(g.lines<b>>4&&g.lines>b>>6){let O=this.children.slice();return O[u]=g,new TextNode(O,this.length-(a-e)+l.length)}return super.replace(f,p,g)}f=p+1}return super.replace(e,a,l)}sliceString(e,a=this.length,l=`
`){[e,a]=clip(this,e,a);let u="";for(let f=0,d=0;f<this.children.length&&d<=a;f++){let p=this.children[f],g=d+p.length;d>e&&f&&(u+=l),e<g&&a>d&&(u+=p.sliceString(e-d,a-d,l)),d=g+1}return u}flatten(e){for(let a of this.children)a.flatten(e)}scanIdentical(e,a){if(!(e instanceof TextNode))return 0;let l=0,[u,f,d,p]=a>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;u+=a,f+=a){if(u==d||f==p)return l;let g=this.children[u],b=e.children[f];if(g!=b)return l+g.scanIdentical(b,a);l+=g.length+1}}static from(e,a=e.reduce((l,u)=>l+u.length+1,-1)){let l=0;for(let M of e)l+=M.lines;if(l<32){let M=[];for(let B of e)B.flatten(M);return new TextLeaf(M,a)}let u=Math.max(32,l>>5),f=u<<1,d=u>>1,p=[],g=0,b=-1,O=[];function A(M){let B;if(M.lines>f&&M instanceof TextNode)for(let N of M.children)A(N);else M.lines>d&&(g>d||!g)?(k(),p.push(M)):M instanceof TextLeaf&&g&&(B=O[O.length-1])instanceof TextLeaf&&M.lines+B.lines<=32?(g+=M.lines,b+=M.length+1,O[O.length-1]=new TextLeaf(B.text.concat(M.text),B.length+1+M.length)):(g+M.lines>u&&k(),g+=M.lines,b+=M.length+1,O.push(M))}function k(){g!=0&&(p.push(O.length==1?O[0]:TextNode.from(O,b)),b=-1,g=O.length=0)}for(let M of e)A(M);return k(),p.length==1?p[0]:new TextNode(p,a)}}Text.empty=new TextLeaf([""],0);function textLength(o){let e=-1;for(let a of o)e+=a.length+1;return e}function appendText(o,e,a=0,l=1e9){for(let u=0,f=0,d=!0;f<o.length&&u<=l;f++){let p=o[f],g=u+p.length;g>=a&&(g>l&&(p=p.slice(0,l-u)),u<a&&(p=p.slice(a-u)),d?(e[e.length-1]+=p,d=!1):e.push(p)),u=g+1}return e}function sliceText(o,e,a){return appendText(o,[""],e,a)}class RawTextCursor{constructor(e,a=1){this.dir=a,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[a>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,a){for(this.done=this.lineBreak=!1;;){let l=this.nodes.length-1,u=this.nodes[l],f=this.offsets[l],d=f>>1,p=u instanceof TextLeaf?u.text.length:u.children.length;if(d==(a>0?p:0)){if(l==0)return this.done=!0,this.value="",this;a>0&&this.offsets[l-1]++,this.nodes.pop(),this.offsets.pop()}else if((f&1)==(a>0?0:1)){if(this.offsets[l]+=a,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(u instanceof TextLeaf){let g=u.text[d+(a<0?-1:0)];if(this.offsets[l]+=a,g.length>Math.max(0,e))return this.value=e==0?g:a>0?g.slice(e):g.slice(0,g.length-e),this;e-=g.length}else{let g=u.children[d+(a<0?-1:0)];e>g.length?(e-=g.length,this.offsets[l]+=a):(a<0&&this.offsets[l]--,this.nodes.push(g),this.offsets.push(a>0?1:(g instanceof TextLeaf?g.text.length:g.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,a,l){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,a>l?-1:1),this.pos=a>l?e.length:0,this.from=Math.min(a,l),this.to=Math.max(a,l)}nextInner(e,a){if(a<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,a<0?this.pos-this.to:this.from-this.pos);let l=a<0?this.pos-this.from:this.to-this.pos;e>l&&(e=l),l-=e;let{value:u}=this.cursor.next(e);return this.pos+=(u.length+e)*a,this.value=u.length<=l?u:a<0?u.slice(u.length-l):u.slice(0,l),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:a,lineBreak:l,value:u}=this.inner.next(e);return a&&this.afterBreak?(this.value="",this.afterBreak=!1):a?(this.done=!0,this.value=""):l?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=u,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,a,l,u){this.from=e,this.to=a,this.number=l,this.text=u}get length(){return this.to-this.from}}function clip(o,e,a){return e=Math.max(0,Math.min(o.length,e)),[e,Math.max(e,Math.min(o.length,a))]}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(o=>o?parseInt(o,36):1);for(let o=1;o<extend.length;o++)extend[o]+=extend[o-1];function isExtendingChar(o){for(let e=1;e<extend.length;e+=2)if(extend[e]>o)return extend[e-1]<=o;return!1}function isRegionalIndicator(o){return o>=127462&&o<=127487}const ZWJ=8205;function findClusterBreak(o,e,a=!0,l=!0){return(a?nextClusterBreak:prevClusterBreak)(o,e,l)}function nextClusterBreak(o,e,a){if(e==o.length)return e;e&&surrogateLow(o.charCodeAt(e))&&surrogateHigh(o.charCodeAt(e-1))&&e--;let l=codePointAt(o,e);for(e+=codePointSize(l);e<o.length;){let u=codePointAt(o,e);if(l==ZWJ||u==ZWJ||a&&isExtendingChar(u))e+=codePointSize(u),l=u;else if(isRegionalIndicator(u)){let f=0,d=e-2;for(;d>=0&&isRegionalIndicator(codePointAt(o,d));)f++,d-=2;if(f%2==0)break;e+=2}else break}return e}function prevClusterBreak(o,e,a){for(;e>0;){let l=nextClusterBreak(o,e-2,a);if(l<e)return l;e--}return 0}function surrogateLow(o){return o>=56320&&o<57344}function surrogateHigh(o){return o>=55296&&o<56320}function codePointAt(o,e){let a=o.charCodeAt(e);if(!surrogateHigh(a)||e+1==o.length)return a;let l=o.charCodeAt(e+1);return surrogateLow(l)?(a-55296<<10)+(l-56320)+65536:a}function fromCodePoint(o){return o<=65535?String.fromCharCode(o):(o-=65536,String.fromCharCode((o>>10)+55296,(o&1023)+56320))}function codePointSize(o){return o<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(o){return o[o.Simple=0]="Simple",o[o.TrackDel=1]="TrackDel",o[o.TrackBefore=2]="TrackBefore",o[o.TrackAfter=3]="TrackAfter",o}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let a=0;a<this.sections.length;a+=2)e+=this.sections[a];return e}get newLength(){let e=0;for(let a=0;a<this.sections.length;a+=2){let l=this.sections[a+1];e+=l<0?this.sections[a]:l}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let a=0,l=0,u=0;a<this.sections.length;){let f=this.sections[a++],d=this.sections[a++];d<0?(e(l,u,f),u+=f):u+=d,l+=f}}iterChangedRanges(e,a=!1){iterChanges(this,e,a)}get invertedDesc(){let e=[];for(let a=0;a<this.sections.length;){let l=this.sections[a++],u=this.sections[a++];u<0?e.push(l,u):e.push(u,l)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,a=!1){return e.empty?this:mapSet(this,e,a)}mapPos(e,a=-1,l=MapMode.Simple){let u=0,f=0;for(let d=0;d<this.sections.length;){let p=this.sections[d++],g=this.sections[d++],b=u+p;if(g<0){if(b>e)return f+(e-u);f+=p}else{if(l!=MapMode.Simple&&b>=e&&(l==MapMode.TrackDel&&u<e&&b>e||l==MapMode.TrackBefore&&u<e||l==MapMode.TrackAfter&&b>e))return null;if(b>e||b==e&&a<0&&!p)return e==u||a<0?f:f+g;f+=g}u=b}if(e>u)throw new RangeError(`Position ${e} is out of range for changeset of length ${u}`);return f}touchesRange(e,a=e){for(let l=0,u=0;l<this.sections.length&&u<=a;){let f=this.sections[l++],d=this.sections[l++],p=u+f;if(d>=0&&u<=a&&p>=e)return u<e&&p>a?"cover":!0;u=p}return!1}toString(){let e="";for(let a=0;a<this.sections.length;){let l=this.sections[a++],u=this.sections[a++];e+=(e?" ":"")+l+(u>=0?":"+u:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(a=>typeof a!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,a){super(e),this.inserted=a}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(a,l,u,f,d)=>e=e.replace(u,u+(l-a),d),!1),e}mapDesc(e,a=!1){return mapSet(this,e,a,!0)}invert(e){let a=this.sections.slice(),l=[];for(let u=0,f=0;u<a.length;u+=2){let d=a[u],p=a[u+1];if(p>=0){a[u]=p,a[u+1]=d;let g=u>>1;for(;l.length<g;)l.push(Text.empty);l.push(d?e.slice(f,f+d):Text.empty)}f+=d}return new ChangeSet(a,l)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,a=!1){return e.empty?this:mapSet(this,e,a,!0)}iterChanges(e,a=!1){iterChanges(this,e,a)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let a=[],l=[],u=[],f=new SectionIter(this);e:for(let d=0,p=0;;){let g=d==e.length?1e9:e[d++];for(;p<g||p==g&&f.len==0;){if(f.done)break e;let O=Math.min(f.len,g-p);addSection(u,O,-1);let A=f.ins==-1?-1:f.off==0?f.ins:0;addSection(a,O,A),A>0&&addInsert(l,a,f.text),f.forward(O),p+=O}let b=e[d++];for(;p<b;){if(f.done)break e;let O=Math.min(f.len,b-p);addSection(a,O,-1),addSection(u,O,f.ins==-1?-1:f.off==0?f.ins:0),f.forward(O),p+=O}}return{changes:new ChangeSet(a,l),filtered:ChangeDesc.create(u)}}toJSON(){let e=[];for(let a=0;a<this.sections.length;a+=2){let l=this.sections[a],u=this.sections[a+1];u<0?e.push(l):u==0?e.push([l]):e.push([l].concat(this.inserted[a>>1].toJSON()))}return e}static of(e,a,l){let u=[],f=[],d=0,p=null;function g(O=!1){if(!O&&!u.length)return;d<a&&addSection(u,a-d,-1);let A=new ChangeSet(u,f);p=p?p.compose(A.map(p)):A,u=[],f=[],d=0}function b(O){if(Array.isArray(O))for(let A of O)b(A);else if(O instanceof ChangeSet){if(O.length!=a)throw new RangeError(`Mismatched change set length (got ${O.length}, expected ${a})`);g(),p=p?p.compose(O.map(p)):O}else{let{from:A,to:k=A,insert:M}=O;if(A>k||A<0||k>a)throw new RangeError(`Invalid change range ${A} to ${k} (in doc of length ${a})`);let B=M?typeof M=="string"?Text.of(M.split(l||DefaultSplit)):M:Text.empty,N=B.length;if(A==k&&N==0)return;A<d&&g(),A>d&&addSection(u,A-d,-1),addSection(u,k-A,N),addInsert(f,u,B),d=k}}return b(e),g(!p),p}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let a=[],l=[];for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="number")a.push(f,-1);else{if(!Array.isArray(f)||typeof f[0]!="number"||f.some((d,p)=>p&&typeof d!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(f.length==1)a.push(f[0],0);else{for(;l.length<u;)l.push(Text.empty);l[u]=Text.of(f.slice(1)),a.push(f[0],l[u].length)}}}return new ChangeSet(a,l)}static createSet(e,a){return new ChangeSet(e,a)}}function addSection(o,e,a,l=!1){if(e==0&&a<=0)return;let u=o.length-2;u>=0&&a<=0&&a==o[u+1]?o[u]+=e:e==0&&o[u]==0?o[u+1]+=a:l?(o[u]+=e,o[u+1]+=a):o.push(e,a)}function addInsert(o,e,a){if(a.length==0)return;let l=e.length-2>>1;if(l<o.length)o[o.length-1]=o[o.length-1].append(a);else{for(;o.length<l;)o.push(Text.empty);o.push(a)}}function iterChanges(o,e,a){let l=o.inserted;for(let u=0,f=0,d=0;d<o.sections.length;){let p=o.sections[d++],g=o.sections[d++];if(g<0)u+=p,f+=p;else{let b=u,O=f,A=Text.empty;for(;b+=p,O+=g,g&&l&&(A=A.append(l[d-2>>1])),!(a||d==o.sections.length||o.sections[d+1]<0);)p=o.sections[d++],g=o.sections[d++];e(u,b,f,O,A),u=b,f=O}}}function mapSet(o,e,a,l=!1){let u=[],f=l?[]:null,d=new SectionIter(o),p=new SectionIter(e);for(let g=-1;;)if(d.ins==-1&&p.ins==-1){let b=Math.min(d.len,p.len);addSection(u,b,-1),d.forward(b),p.forward(b)}else if(p.ins>=0&&(d.ins<0||g==d.i||d.off==0&&(p.len<d.len||p.len==d.len&&!a))){let b=p.len;for(addSection(u,p.ins,-1);b;){let O=Math.min(d.len,b);d.ins>=0&&g<d.i&&d.len<=O&&(addSection(u,0,d.ins),f&&addInsert(f,u,d.text),g=d.i),d.forward(O),b-=O}p.next()}else if(d.ins>=0){let b=0,O=d.len;for(;O;)if(p.ins==-1){let A=Math.min(O,p.len);b+=A,O-=A,p.forward(A)}else if(p.ins==0&&p.len<O)O-=p.len,p.next();else break;addSection(u,b,g<d.i?d.ins:0),f&&g<d.i&&addInsert(f,u,d.text),g=d.i,d.forward(d.len-O)}else{if(d.done&&p.done)return f?ChangeSet.createSet(u,f):ChangeDesc.create(u);throw new Error("Mismatched change set lengths")}}function composeSets(o,e,a=!1){let l=[],u=a?[]:null,f=new SectionIter(o),d=new SectionIter(e);for(let p=!1;;){if(f.done&&d.done)return u?ChangeSet.createSet(l,u):ChangeDesc.create(l);if(f.ins==0)addSection(l,f.len,0,p),f.next();else if(d.len==0&&!d.done)addSection(l,0,d.ins,p),u&&addInsert(u,l,d.text),d.next();else{if(f.done||d.done)throw new Error("Mismatched change set lengths");{let g=Math.min(f.len2,d.len),b=l.length;if(f.ins==-1){let O=d.ins==-1?-1:d.off?0:d.ins;addSection(l,g,O,p),u&&O&&addInsert(u,l,d.text)}else d.ins==-1?(addSection(l,f.off?0:f.len,g,p),u&&addInsert(u,l,f.textBit(g))):(addSection(l,f.off?0:f.len,d.off?0:d.ins,p),u&&!d.off&&addInsert(u,l,d.text));p=(f.ins>g||d.ins>=0&&d.len>g)&&(p||l.length>b),f.forward2(g),d.forward(g)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,a=this.i-2>>1;return a>=e.length?Text.empty:e[a]}textBit(e){let{inserted:a}=this.set,l=this.i-2>>1;return l>=a.length&&!e?Text.empty:a[l].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,a,l){this.from=e,this.to=a,this.flags=l}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,a=-1){let l,u;return this.empty?l=u=e.mapPos(this.from,a):(l=e.mapPos(this.from,1),u=e.mapPos(this.to,-1)),l==this.from&&u==this.to?this:new SelectionRange(l,u,this.flags)}extend(e,a=e){if(e<=this.anchor&&a>=this.anchor)return EditorSelection.range(e,a);let l=Math.abs(e-this.anchor)>Math.abs(a-this.anchor)?e:a;return EditorSelection.range(this.anchor,l)}eq(e,a=!1){return this.anchor==e.anchor&&this.head==e.head&&(!a||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,a,l){return new SelectionRange(e,a,l)}}class EditorSelection{constructor(e,a){this.ranges=e,this.mainIndex=a}map(e,a=-1){return e.empty?this:EditorSelection.create(this.ranges.map(l=>l.map(e,a)),this.mainIndex)}eq(e,a=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let l=0;l<this.ranges.length;l++)if(!this.ranges[l].eq(e.ranges[l],a))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,a=!0){return EditorSelection.create([e].concat(this.ranges),a?0:this.mainIndex+1)}replaceRange(e,a=this.mainIndex){let l=this.ranges.slice();return l[a]=e,EditorSelection.create(l,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(a=>SelectionRange.fromJSON(a)),e.main)}static single(e,a=e){return new EditorSelection([EditorSelection.range(e,a)],0)}static create(e,a=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let l=0,u=0;u<e.length;u++){let f=e[u];if(f.empty?f.from<=l:f.from<l)return EditorSelection.normalized(e.slice(),a);l=f.to}return new EditorSelection(e,a)}static cursor(e,a=0,l,u){return SelectionRange.create(e,e,(a==0?0:a<0?8:16)|(l==null?7:Math.min(6,l))|(u??16777215)<<6)}static range(e,a,l,u){let f=(l??16777215)<<6|(u==null?7:Math.min(6,u));return a<e?SelectionRange.create(a,e,48|f):SelectionRange.create(e,a,(a>e?8:0)|f)}static normalized(e,a=0){let l=e[a];e.sort((u,f)=>u.from-f.from),a=e.indexOf(l);for(let u=1;u<e.length;u++){let f=e[u],d=e[u-1];if(f.empty?f.from<=d.to:f.from<d.to){let p=d.from,g=Math.max(f.to,d.to);u<=a&&a--,e.splice(--u,2,f.anchor>f.head?EditorSelection.range(g,p):EditorSelection.range(p,g))}}return new EditorSelection(e,a)}}function checkSelection(o,e){for(let a of o.ranges)if(a.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,a,l,u,f){this.combine=e,this.compareInput=a,this.compare=l,this.isStatic=u,this.id=nextID++,this.default=e([]),this.extensions=typeof f=="function"?f(this):f}get reader(){return this}static define(e={}){return new Facet(e.combine||(a=>a),e.compareInput||((a,l)=>a===l),e.compare||(e.combine?(a,l)=>a===l:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,a)}computeN(e,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,a)}from(e,a){return a||(a=l=>l),this.compute([e],l=>a(l.field(e)))}}function sameArray$1(o,e){return o==e||o.length==e.length&&o.every((a,l)=>a===e[l])}class FacetProvider{constructor(e,a,l,u){this.dependencies=e,this.facet=a,this.type=l,this.value=u,this.id=nextID++}dynamicSlot(e){var a;let l=this.value,u=this.facet.compareInput,f=this.id,d=e[f]>>1,p=this.type==2,g=!1,b=!1,O=[];for(let A of this.dependencies)A=="doc"?g=!0:A=="selection"?b=!0:((a=e[A.id])!==null&&a!==void 0?a:1)&1||O.push(e[A.id]);return{create(A){return A.values[d]=l(A),1},update(A,k){if(g&&k.docChanged||b&&(k.docChanged||k.selection)||ensureAll(A,O)){let M=l(A);if(p?!compareArray(M,A.values[d],u):!u(M,A.values[d]))return A.values[d]=M,1}return 0},reconfigure:(A,k)=>{let M,B=k.config.address[f];if(B!=null){let N=getAddr(k,B);if(this.dependencies.every(L=>L instanceof Facet?k.facet(L)===A.facet(L):L instanceof StateField?k.field(L,!1)==A.field(L,!1):!0)||(p?compareArray(M=l(A),N,u):u(M=l(A),N)))return A.values[d]=N,0}else M=l(A);return A.values[d]=M,1}}}}function compareArray(o,e,a){if(o.length!=e.length)return!1;for(let l=0;l<o.length;l++)if(!a(o[l],e[l]))return!1;return!0}function ensureAll(o,e){let a=!1;for(let l of e)ensureAddr(o,l)&1&&(a=!0);return a}function dynamicFacetSlot(o,e,a){let l=a.map(g=>o[g.id]),u=a.map(g=>g.type),f=l.filter(g=>!(g&1)),d=o[e.id]>>1;function p(g){let b=[];for(let O=0;O<l.length;O++){let A=getAddr(g,l[O]);if(u[O]==2)for(let k of A)b.push(k);else b.push(A)}return e.combine(b)}return{create(g){for(let b of l)ensureAddr(g,b);return g.values[d]=p(g),1},update(g,b){if(!ensureAll(g,f))return 0;let O=p(g);return e.compare(O,g.values[d])?0:(g.values[d]=O,1)},reconfigure(g,b){let O=ensureAll(g,l),A=b.config.facets[e.id],k=b.facet(e);if(A&&!O&&sameArray$1(a,A))return g.values[d]=k,0;let M=p(g);return e.compare(M,k)?(g.values[d]=k,0):(g.values[d]=M,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,a,l,u,f){this.id=e,this.createF=a,this.updateF=l,this.compareF=u,this.spec=f,this.provides=void 0}static define(e){let a=new StateField(nextID++,e.create,e.update,e.compare||((l,u)=>l===u),e);return e.provide&&(a.provides=e.provide(a)),a}create(e){let a=e.facet(initField).find(l=>l.field==this);return(a?.create||this.createF)(e)}slot(e){let a=e[this.id]>>1;return{create:l=>(l.values[a]=this.create(l),1),update:(l,u)=>{let f=l.values[a],d=this.updateF(f,u);return this.compareF(f,d)?0:(l.values[a]=d,1)},reconfigure:(l,u)=>u.config.address[this.id]!=null?(l.values[a]=u.field(this),0):(l.values[a]=this.create(l),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(o){return e=>new PrecExtension(e,o)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,a){this.inner=e,this.prec=a}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,a){this.compartment=e,this.inner=a}}class Configuration{constructor(e,a,l,u,f,d){for(this.base=e,this.compartments=a,this.dynamicSlots=l,this.address=u,this.staticValues=f,this.facets=d,this.statusTemplate=[];this.statusTemplate.length<l.length;)this.statusTemplate.push(0)}staticFacet(e){let a=this.address[e.id];return a==null?e.default:this.staticValues[a>>1]}static resolve(e,a,l){let u=[],f=Object.create(null),d=new Map;for(let k of flatten(e,a,d))k instanceof StateField?u.push(k):(f[k.facet.id]||(f[k.facet.id]=[])).push(k);let p=Object.create(null),g=[],b=[];for(let k of u)p[k.id]=b.length<<1,b.push(M=>k.slot(M));let O=l?.config.facets;for(let k in f){let M=f[k],B=M[0].facet,N=O&&O[k]||[];if(M.every(L=>L.type==0))if(p[B.id]=g.length<<1|1,sameArray$1(N,M))g.push(l.facet(B));else{let L=B.combine(M.map(V=>V.value));g.push(l&&B.compare(L,l.facet(B))?l.facet(B):L)}else{for(let L of M)L.type==0?(p[L.id]=g.length<<1|1,g.push(L.value)):(p[L.id]=b.length<<1,b.push(V=>L.dynamicSlot(V)));p[B.id]=b.length<<1,b.push(L=>dynamicFacetSlot(L,B,M))}}let A=b.map(k=>k(p));return new Configuration(e,d,A,p,g,f)}}function flatten(o,e,a){let l=[[],[],[],[],[]],u=new Map;function f(d,p){let g=u.get(d);if(g!=null){if(g<=p)return;let b=l[g].indexOf(d);b>-1&&l[g].splice(b,1),d instanceof CompartmentInstance&&a.delete(d.compartment)}if(u.set(d,p),Array.isArray(d))for(let b of d)f(b,p);else if(d instanceof CompartmentInstance){if(a.has(d.compartment))throw new RangeError("Duplicate use of compartment in extensions");let b=e.get(d.compartment)||d.inner;a.set(d.compartment,b),f(b,p)}else if(d instanceof PrecExtension)f(d.inner,d.prec);else if(d instanceof StateField)l[p].push(d),d.provides&&f(d.provides,p);else if(d instanceof FacetProvider)l[p].push(d),d.facet.extensions&&f(d.facet.extensions,Prec_.default);else{let b=d.extension;if(!b)throw new Error(`Unrecognized extension value in extension set (${d}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);f(b,p)}}return f(o,Prec_.default),l.reduce((d,p)=>d.concat(p))}function ensureAddr(o,e){if(e&1)return 2;let a=e>>1,l=o.status[a];if(l==4)throw new Error("Cyclic dependency between fields and/or facets");if(l&2)return l;o.status[a]=4;let u=o.computeSlot(o,o.config.dynamicSlots[a]);return o.status[a]=2|u}function getAddr(o,e){return e&1?o.config.staticValues[e>>1]:o.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:o=>o.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:o=>o.length?o[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:o=>o.length?o[0]:!1});class Annotation{constructor(e,a){this.type=e,this.value=a}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,a){this.type=e,this.value=a}map(e){let a=this.type.map(this.value,e);return a===void 0?void 0:a==this.value?this:new StateEffect(this.type,a)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(a=>a))}static mapEffects(e,a){if(!e.length)return e;let l=[];for(let u of e){let f=u.map(a);f&&l.push(f)}return l}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,a,l,u,f,d){this.startState=e,this.changes=a,this.selection=l,this.effects=u,this.annotations=f,this.scrollIntoView=d,this._doc=null,this._state=null,l&&checkSelection(l,a.newLength),f.some(p=>p.type==Transaction.time)||(this.annotations=f.concat(Transaction.time.of(Date.now())))}static create(e,a,l,u,f,d){return new Transaction(e,a,l,u,f,d)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let a of this.annotations)if(a.type==e)return a.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let a=this.annotation(Transaction.userEvent);return!!(a&&(a==e||a.length>e.length&&a.slice(0,e.length)==e&&a[e.length]=="."))}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();function joinRanges(o,e){let a=[];for(let l=0,u=0;;){let f,d;if(l<o.length&&(u==e.length||e[u]>=o[l]))f=o[l++],d=o[l++];else if(u<e.length)f=e[u++],d=e[u++];else return a;!a.length||a[a.length-1]<f?a.push(f,d):a[a.length-1]<d&&(a[a.length-1]=d)}}function mergeTransaction(o,e,a){var l;let u,f,d;return a?(u=e.changes,f=ChangeSet.empty(e.changes.length),d=o.changes.compose(e.changes)):(u=e.changes.map(o.changes),f=o.changes.mapDesc(e.changes,!0),d=o.changes.compose(u)),{changes:d,selection:e.selection?e.selection.map(f):(l=o.selection)===null||l===void 0?void 0:l.map(u),effects:StateEffect.mapEffects(o.effects,u).concat(StateEffect.mapEffects(e.effects,f)),annotations:o.annotations.length?o.annotations.concat(e.annotations):e.annotations,scrollIntoView:o.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(o,e,a){let l=e.selection,u=asArray$1(e.annotations);return e.userEvent&&(u=u.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],a,o.facet(lineSeparator)),selection:l&&(l instanceof EditorSelection?l:EditorSelection.single(l.anchor,l.head)),effects:asArray$1(e.effects),annotations:u,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(o,e,a){let l=resolveTransactionInner(o,e.length?e[0]:{},o.doc.length);e.length&&e[0].filter===!1&&(a=!1);for(let f=1;f<e.length;f++){e[f].filter===!1&&(a=!1);let d=!!e[f].sequential;l=mergeTransaction(l,resolveTransactionInner(o,e[f],d?l.changes.newLength:o.doc.length),d)}let u=Transaction.create(o,l.changes,l.selection,l.effects,l.annotations,l.scrollIntoView);return extendTransaction(a?filterTransaction(u):u)}function filterTransaction(o){let e=o.startState,a=!0;for(let u of e.facet(changeFilter)){let f=u(o);if(f===!1){a=!1;break}Array.isArray(f)&&(a=a===!0?f:joinRanges(a,f))}if(a!==!0){let u,f;if(a===!1)f=o.changes.invertedDesc,u=ChangeSet.empty(e.doc.length);else{let d=o.changes.filter(a);u=d.changes,f=d.filtered.mapDesc(d.changes).invertedDesc}o=Transaction.create(e,u,o.selection&&o.selection.map(f),StateEffect.mapEffects(o.effects,f),o.annotations,o.scrollIntoView)}let l=e.facet(transactionFilter);for(let u=l.length-1;u>=0;u--){let f=l[u](o);f instanceof Transaction?o=f:Array.isArray(f)&&f.length==1&&f[0]instanceof Transaction?o=f[0]:o=resolveTransaction(e,asArray$1(f),!1)}return o}function extendTransaction(o){let e=o.startState,a=e.facet(transactionExtender),l=o;for(let u=a.length-1;u>=0;u--){let f=a[u](o);f&&Object.keys(f).length&&(l=mergeTransaction(l,resolveTransactionInner(e,f,o.changes.newLength),!0))}return l==o?o:Transaction.create(e,o.changes,o.selection,l.effects,l.annotations,l.scrollIntoView)}const none$2=[];function asArray$1(o){return o==null?none$2:Array.isArray(o)?o:[o]}var CharCategory=function(o){return o[o.Word=0]="Word",o[o.Space=1]="Space",o[o.Other=2]="Other",o}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar$1;try{wordChar$1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(o){}function hasWordChar(o){if(wordChar$1)return wordChar$1.test(o);for(let e=0;e<o.length;e++){let a=o[e];if(/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||nonASCIISingleCaseWordChar.test(a)))return!0}return!1}function makeCategorizer(o){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let a=0;a<o.length;a++)if(e.indexOf(o[a])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,a,l,u,f,d){this.config=e,this.doc=a,this.selection=l,this.values=u,this.status=e.statusTemplate.slice(),this.computeSlot=f,d&&(d._state=this);for(let p=0;p<this.config.dynamicSlots.length;p++)ensureAddr(this,p<<1);this.computeSlot=null}field(e,a=!0){let l=this.config.address[e.id];if(l==null){if(a)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,l),getAddr(this,l)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let a=this.config,{base:l,compartments:u}=a;for(let p of e.effects)p.is(Compartment.reconfigure)?(a&&(u=new Map,a.compartments.forEach((g,b)=>u.set(b,g)),a=null),u.set(p.value.compartment,p.value.extension)):p.is(StateEffect.reconfigure)?(a=null,l=p.value):p.is(StateEffect.appendConfig)&&(a=null,l=asArray$1(l).concat(p.value));let f;a?f=e.startState.values.slice():(a=Configuration.resolve(l,u,this),f=new EditorState(a,this.doc,this.selection,a.dynamicSlots.map(()=>null),(g,b)=>b.reconfigure(g,this),null).values);let d=e.startState.facet(allowMultipleSelections)?e.newSelection:e.newSelection.asSingle();new EditorState(a,e.newDoc,d,f,(p,g)=>g.update(p,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:e},range:EditorSelection.cursor(a.from+e.length)}))}changeByRange(e){let a=this.selection,l=e(a.ranges[0]),u=this.changes(l.changes),f=[l.range],d=asArray$1(l.effects);for(let p=1;p<a.ranges.length;p++){let g=e(a.ranges[p]),b=this.changes(g.changes),O=b.map(u);for(let k=0;k<p;k++)f[k]=f[k].map(O);let A=u.mapDesc(b,!0);f.push(g.range.map(A)),u=u.compose(O),d=StateEffect.mapEffects(d,O).concat(StateEffect.mapEffects(asArray$1(g.effects),A))}return{changes:u,selection:EditorSelection.create(f,a.mainIndex),effects:d}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,a=this.doc.length){return this.doc.sliceString(e,a,this.lineBreak)}facet(e){let a=this.config.address[e.id];return a==null?e.default:(ensureAddr(this,a),getAddr(this,a))}toJSON(e){let a={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let l in e){let u=e[l];u instanceof StateField&&this.config.address[u.id]!=null&&(a[l]=u.spec.toJSON(this.field(e[l]),this))}return a}static fromJSON(e,a={},l){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let u=[];if(l){for(let f in l)if(Object.prototype.hasOwnProperty.call(e,f)){let d=l[f],p=e[f];u.push(d.init(g=>d.spec.fromJSON(p,g)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:a.extensions?u.concat([a.extensions]):u})}static create(e={}){let a=Configuration.resolve(e.extensions||[],new Map),l=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(a.staticFacet(EditorState.lineSeparator)||DefaultSplit)),u=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(u,l.length),a.staticFacet(allowMultipleSelections)||(u=u.asSingle()),new EditorState(a,l,u,a.dynamicSlots.map(()=>null),(f,d)=>d.create(f),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...a){for(let l of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(l,e)){e=l[e];break}return a.length&&(e=e.replace(/\$(\$|\d*)/g,(l,u)=>{if(u=="$")return"$";let f=+(u||1);return!f||f>a.length?l:a[f-1]})),e}languageDataAt(e,a,l=-1){let u=[];for(let f of this.facet(languageData))for(let d of f(this,a,l))Object.prototype.hasOwnProperty.call(d,e)&&u.push(d[e]);return u}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:a,from:l,length:u}=this.doc.lineAt(e),f=this.charCategorizer(e),d=e-l,p=e-l;for(;d>0;){let g=findClusterBreak(a,d,!1);if(f(a.slice(g,d))!=CharCategory.Word)break;d=g}for(;p<u;){let g=findClusterBreak(a,p);if(f(a.slice(p,g))!=CharCategory.Word)break;p=g}return d==p?null:EditorSelection.range(d+l,p+l)}}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:o=>o.length?o[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(o,e){let a=Object.keys(o),l=Object.keys(e);return a.length==l.length&&a.every(u=>o[u]==e[u])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();function combineConfig(o,e,a={}){let l={};for(let u of o)for(let f of Object.keys(u)){let d=u[f],p=l[f];if(p===void 0)l[f]=d;else if(!(p===d||d===void 0))if(Object.hasOwnProperty.call(a,f))l[f]=a[f](p,d);else throw new Error("Config merge conflict for field "+f)}for(let u in e)l[u]===void 0&&(l[u]=e[u]);return l}class RangeValue{eq(e){return this==e}range(e,a=e){return Range$1.create(e,a,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Qr{constructor(e,a,l){this.from=e,this.to=a,this.value=l}static create(e,a,l){return new Qr(e,a,l)}};function cmpRange(o,e){return o.from-e.from||o.value.startSide-e.value.startSide}class Chunk{constructor(e,a,l,u){this.from=e,this.to=a,this.value=l,this.maxPoint=u}get length(){return this.to[this.to.length-1]}findIndex(e,a,l,u=0){let f=l?this.to:this.from;for(let d=u,p=f.length;;){if(d==p)return d;let g=d+p>>1,b=f[g]-e||(l?this.value[g].endSide:this.value[g].startSide)-a;if(g==d)return b>=0?d:p;b>=0?p=g:d=g+1}}between(e,a,l,u){for(let f=this.findIndex(a,-1e9,!0),d=this.findIndex(l,1e9,!1,f);f<d;f++)if(u(this.from[f]+e,this.to[f]+e,this.value[f])===!1)return!1}map(e,a){let l=[],u=[],f=[],d=-1,p=-1;for(let g=0;g<this.value.length;g++){let b=this.value[g],O=this.from[g]+e,A=this.to[g]+e,k,M;if(O==A){let B=a.mapPos(O,b.startSide,b.mapMode);if(B==null||(k=M=B,b.startSide!=b.endSide&&(M=a.mapPos(O,b.endSide),M<k)))continue}else if(k=a.mapPos(O,b.startSide),M=a.mapPos(A,b.endSide),k>M||k==M&&b.startSide>0&&b.endSide<=0)continue;(M-k||b.endSide-b.startSide)<0||(d<0&&(d=k),b.point&&(p=Math.max(p,M-k)),l.push(b),u.push(k-d),f.push(M-d))}return{mapped:l.length?new Chunk(u,f,l,p):null,pos:d}}}class RangeSet{constructor(e,a,l,u){this.chunkPos=e,this.chunk=a,this.nextLayer=l,this.maxPoint=u}static create(e,a,l,u){return new RangeSet(e,a,l,u)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let a of this.chunk)e+=a.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:a=[],sort:l=!1,filterFrom:u=0,filterTo:f=this.length}=e,d=e.filter;if(a.length==0&&!d)return this;if(l&&(a=a.slice().sort(cmpRange)),this.isEmpty)return a.length?RangeSet.of(a):this;let p=new LayerCursor(this,null,-1).goto(0),g=0,b=[],O=new RangeSetBuilder;for(;p.value||g<a.length;)if(g<a.length&&(p.from-a[g].from||p.startSide-a[g].value.startSide)>=0){let A=a[g++];O.addInner(A.from,A.to,A.value)||b.push(A)}else p.rangeIndex==1&&p.chunkIndex<this.chunk.length&&(g==a.length||this.chunkEnd(p.chunkIndex)<a[g].from)&&(!d||u>this.chunkEnd(p.chunkIndex)||f<this.chunkPos[p.chunkIndex])&&O.addChunk(this.chunkPos[p.chunkIndex],this.chunk[p.chunkIndex])?p.nextChunk():((!d||u>p.to||f<p.from||d(p.from,p.to,p.value))&&(O.addInner(p.from,p.to,p.value)||b.push(Range$1.create(p.from,p.to,p.value))),p.next());return O.finishInner(this.nextLayer.isEmpty&&!b.length?RangeSet.empty:this.nextLayer.update({add:b,filter:d,filterFrom:u,filterTo:f}))}map(e){if(e.empty||this.isEmpty)return this;let a=[],l=[],u=-1;for(let d=0;d<this.chunk.length;d++){let p=this.chunkPos[d],g=this.chunk[d],b=e.touchesRange(p,p+g.length);if(b===!1)u=Math.max(u,g.maxPoint),a.push(g),l.push(e.mapPos(p));else if(b===!0){let{mapped:O,pos:A}=g.map(p,e);O&&(u=Math.max(u,O.maxPoint),a.push(O),l.push(A))}}let f=this.nextLayer.map(e);return a.length==0?f:new RangeSet(l,a,f||RangeSet.empty,u)}between(e,a,l){if(!this.isEmpty){for(let u=0;u<this.chunk.length;u++){let f=this.chunkPos[u],d=this.chunk[u];if(a>=f&&e<=f+d.length&&d.between(f,e-f,a-f,l)===!1)return}this.nextLayer.between(e,a,l)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,a=0){return HeapCursor.from(e).goto(a)}static compare(e,a,l,u,f=-1){let d=e.filter(A=>A.maxPoint>0||!A.isEmpty&&A.maxPoint>=f),p=a.filter(A=>A.maxPoint>0||!A.isEmpty&&A.maxPoint>=f),g=findSharedChunks(d,p,l),b=new SpanCursor(d,g,f),O=new SpanCursor(p,g,f);l.iterGaps((A,k,M)=>compare(b,A,O,k,M,u)),l.empty&&l.length==0&&compare(b,0,O,0,0,u)}static eq(e,a,l=0,u){u==null&&(u=999999999);let f=e.filter(O=>!O.isEmpty&&a.indexOf(O)<0),d=a.filter(O=>!O.isEmpty&&e.indexOf(O)<0);if(f.length!=d.length)return!1;if(!f.length)return!0;let p=findSharedChunks(f,d),g=new SpanCursor(f,p,0).goto(l),b=new SpanCursor(d,p,0).goto(l);for(;;){if(g.to!=b.to||!sameValues(g.active,b.active)||g.point&&(!b.point||!g.point.eq(b.point)))return!1;if(g.to>u)return!0;g.next(),b.next()}}static spans(e,a,l,u,f=-1){let d=new SpanCursor(e,null,f).goto(a),p=a,g=d.openStart;for(;;){let b=Math.min(d.to,l);if(d.point){let O=d.activeForPoint(d.to),A=d.pointFrom<a?O.length+1:Math.min(O.length,g);u.point(p,b,d.point,O,A,d.pointRank),g=Math.min(d.openEnd(b),O.length)}else b>p&&(u.span(p,b,d.active,g),g=d.openEnd(b));if(d.to>l)return g+(d.point&&d.to>l?1:0);p=d.to,d.next()}}static of(e,a=!1){let l=new RangeSetBuilder;for(let u of e instanceof Range$1?[e]:a?lazySort(e):e)l.add(u.from,u.to,u.value);return l.finish()}static join(e){if(!e.length)return RangeSet.empty;let a=e[e.length-1];for(let l=e.length-2;l>=0;l--)for(let u=e[l];u!=RangeSet.empty;u=u.nextLayer)a=new RangeSet(u.chunkPos,u.chunk,a,Math.max(u.maxPoint,a.maxPoint));return a}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(o){if(o.length>1)for(let e=o[0],a=1;a<o.length;a++){let l=o[a];if(cmpRange(e,l)>0)return o.slice().sort(cmpRange);e=l}return o}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,a,l){this.addInner(e,a,l)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,a,l)}addInner(e,a,l){let u=e-this.lastTo||l.startSide-this.last.endSide;if(u<=0&&(e-this.lastFrom||l.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return u<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(a-this.chunkStart),this.last=l,this.lastFrom=e,this.lastTo=a,this.value.push(l),l.point&&(this.maxPoint=Math.max(this.maxPoint,a-e)),!0)}addChunk(e,a){if((e-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint),this.chunks.push(a),this.chunkPos.push(e);let l=a.value.length-1;return this.last=a.value[l],this.lastFrom=a.from[l]+e,this.lastTo=a.to[l]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let a=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,a}}function findSharedChunks(o,e,a){let l=new Map;for(let f of o)for(let d=0;d<f.chunk.length;d++)f.chunk[d].maxPoint<=0&&l.set(f.chunk[d],f.chunkPos[d]);let u=new Set;for(let f of e)for(let d=0;d<f.chunk.length;d++){let p=l.get(f.chunk[d]);p!=null&&(a?a.mapPos(p):p)==f.chunkPos[d]&&!a?.touchesRange(p,p+f.chunk[d].length)&&u.add(f.chunk[d])}return u}class LayerCursor{constructor(e,a,l,u=0){this.layer=e,this.skip=a,this.minPoint=l,this.rank=u}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,a=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,a,!1),this}gotoInner(e,a,l){for(;this.chunkIndex<this.layer.chunk.length;){let u=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(u)||this.layer.chunkEnd(this.chunkIndex)<e||u.maxPoint<this.minPoint))break;this.chunkIndex++,l=!1}if(this.chunkIndex<this.layer.chunk.length){let u=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],a,!0);(!l||this.rangeIndex<u)&&this.setRangeIndex(u)}this.next()}forward(e,a){(this.to-e||this.endSide-a)<0&&this.gotoInner(e,a,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex],l=e+a.from[this.rangeIndex];if(this.from=l,this.to=e+a.to[this.rangeIndex],this.value=a.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,a=null,l=-1){let u=[];for(let f=0;f<e.length;f++)for(let d=e[f];!d.isEmpty;d=d.nextLayer)d.maxPoint>=l&&u.push(new LayerCursor(d,a,l,f));return u.length==1?u[0]:new HeapCursor(u)}get startSide(){return this.value?this.value.startSide:0}goto(e,a=-1e9){for(let l of this.heap)l.goto(e,a);for(let l=this.heap.length>>1;l>=0;l--)heapBubble(this.heap,l);return this.next(),this}forward(e,a){for(let l of this.heap)l.forward(e,a);for(let l=this.heap.length>>1;l>=0;l--)heapBubble(this.heap,l);(this.to-e||this.value.endSide-a)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(o,e){for(let a=o[e];;){let l=(e<<1)+1;if(l>=o.length)break;let u=o[l];if(l+1<o.length&&u.compare(o[l+1])>=0&&(u=o[l+1],l++),a.compare(u)<0)break;o[l]=a,o[e]=u,e=l}}class SpanCursor{constructor(e,a,l){this.minPoint=l,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,a,l)}goto(e,a=-1e9){return this.cursor.goto(e,a),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=a,this.openStart=-1,this.next(),this}forward(e,a){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-a)<0;)this.removeActive(this.minActive);this.cursor.forward(e,a)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let a=0,{value:l,to:u,rank:f}=this.cursor;for(;a<this.activeRank.length&&(f-this.activeRank[a]||u-this.activeTo[a])>0;)a++;insert(this.active,a,l),insert(this.activeTo,a,u),insert(this.activeRank,a,f),e&&insert(e,a,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,a=this.point;this.point=null;let l=this.openStart<0?[]:null;for(;;){let u=this.minActive;if(u>-1&&(this.activeTo[u]-this.cursor.from||this.active[u].endSide-this.cursor.startSide)<0){if(this.activeTo[u]>e){this.to=this.activeTo[u],this.endSide=this.active[u].endSide;break}this.removeActive(u),l&&remove(l,u)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let f=this.cursor.value;if(!f.point)this.addActive(l),this.cursor.next();else if(a&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=f,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=f.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(l){this.openStart=0;for(let u=l.length-1;u>=0&&l[u]<e;u--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let a=[];for(let l=this.active.length-1;l>=0&&!(this.activeRank[l]<this.pointRank);l--)(this.activeTo[l]>e||this.activeTo[l]==e&&this.active[l].endSide>=this.point.endSide)&&a.push(this.active[l]);return a.reverse()}openEnd(e){let a=0;for(let l=this.activeTo.length-1;l>=0&&this.activeTo[l]>e;l--)a++;return a}}function compare(o,e,a,l,u,f){o.goto(e),a.goto(l);let d=l+u,p=l,g=l-e;for(;;){let b=o.to+g-a.to||o.endSide-a.endSide,O=b<0?o.to+g:a.to,A=Math.min(O,d);if(o.point||a.point?o.point&&a.point&&(o.point==a.point||o.point.eq(a.point))&&sameValues(o.activeForPoint(o.to),a.activeForPoint(a.to))||f.comparePoint(p,A,o.point,a.point):A>p&&!sameValues(o.active,a.active)&&f.compareRange(p,A,o.active,a.active),O>d)break;p=O,b<=0&&o.next(),b>=0&&a.next()}}function sameValues(o,e){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(o[a]!=e[a]&&!o[a].eq(e[a]))return!1;return!0}function remove(o,e){for(let a=e,l=o.length-1;a<l;a++)o[a]=o[a+1];o.pop()}function insert(o,e,a){for(let l=o.length-1;l>=e;l--)o[l+1]=o[l];o[e]=a}function findMinIndex(o,e){let a=-1,l=1e9;for(let u=0;u<e.length;u++)(e[u]-l||o[u].endSide-o[a].endSide)<0&&(a=u,l=e[u]);return a}function countColumn(o,e,a=o.length){let l=0;for(let u=0;u<a;)o.charCodeAt(u)==9?(l+=e-l%e,u++):(l++,u=findClusterBreak(o,u));return l}function findColumn(o,e,a,l){for(let u=0,f=0;;){if(f>=e)return u;if(u==o.length)break;f+=o.charCodeAt(u)==9?a-f%a:1,u=findClusterBreak(o,u)}return l===!0?-1:o.length}const C$2="ͼ",COUNT$1=typeof Symbol>"u"?"__"+C$2:Symbol.for(C$2),SET$1=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};let StyleModule$1=class{constructor(e,a){this.rules=[];let{finish:l}=a||{};function u(d){return/^@/.test(d)?[d]:d.split(/,\s*/)}function f(d,p,g,b){let O=[],A=/^@(\w+)\b/.exec(d[0]),k=A&&A[1]=="keyframes";if(A&&p==null)return g.push(d[0]+";");for(let M in p){let B=p[M];if(/&/.test(M))f(M.split(/,\s*/).map(N=>d.map(L=>N.replace(/&/,L))).reduce((N,L)=>N.concat(L)),B,g);else if(B&&typeof B=="object"){if(!A)throw new RangeError("The value of a property ("+M+") should be a primitive value.");f(u(M),B,O,k)}else B!=null&&O.push(M.replace(/_.*/,"").replace(/[A-Z]/g,N=>"-"+N.toLowerCase())+": "+B+";")}(O.length||k)&&g.push((l&&!A&&!b?d.map(l):d).join(", ")+" {"+O.join(" ")+"}")}for(let d in e)f(u(d),e[d],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top$1[COUNT$1]||1;return top$1[COUNT$1]=e+1,C$2+e.toString(36)}static mount(e,a,l){let u=e[SET$1],f=l&&l.nonce;u?f&&u.setNonce(f):u=new StyleSet$1(e,f),u.mount(Array.isArray(a)?a:[a])}},adoptedSet$1=new Map,StyleSet$1=class{constructor(e,a){let l=e.ownerDocument||e,u=l.defaultView;if(!e.head&&e.adoptedStyleSheets&&u.CSSStyleSheet){let f=adoptedSet$1.get(l);if(f)return e.adoptedStyleSheets=[f.sheet,...e.adoptedStyleSheets],e[SET$1]=f;this.sheet=new u.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],adoptedSet$1.set(l,this)}else{this.styleTag=l.createElement("style"),a&&this.styleTag.setAttribute("nonce",a);let f=e.head||e;f.insertBefore(this.styleTag,f.firstChild)}this.modules=[],e[SET$1]=this}mount(e){let a=this.sheet,l=0,u=0;for(let f=0;f<e.length;f++){let d=e[f],p=this.modules.indexOf(d);if(p<u&&p>-1&&(this.modules.splice(p,1),u--,p=-1),p==-1){if(this.modules.splice(u++,0,d),a)for(let g=0;g<d.rules.length;g++)a.insertRule(d.rules[g],l++)}else{for(;u<p;)l+=this.modules[u++].rules.length;l+=d.rules.length,u++}}if(!a){let f="";for(let d=0;d<this.modules.length;d++)f+=this.modules[d].getRules()+`
`;this.styleTag.textContent=f}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57,i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(o){var e=brokenModifierNames&&(o.ctrlKey||o.altKey||o.metaKey)||ie$1&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",a=!e&&o.key||(o.shiftKey?shift:base)[o.keyCode]||o.key||"Unidentified";return a=="Esc"&&(a="Escape"),a=="Del"&&(a="Delete"),a=="Left"&&(a="ArrowLeft"),a=="Up"&&(a="ArrowUp"),a=="Right"&&(a="ArrowRight"),a=="Down"&&(a="ArrowDown"),a}function getSelection(o){let e;return o.nodeType==11?e=o.getSelection?o:o.ownerDocument:e=o,e.getSelection()}function contains(o,e){return e?o==e||o.contains(e.nodeType!=1?e.parentNode:e):!1}function deepActiveElement(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hasSelection(o,e){if(!e.anchorNode)return!1;try{return contains(o,e.anchorNode)}catch{return!1}}function clientRectsFor(o){return o.nodeType==3?textRange(o,0,o.nodeValue.length).getClientRects():o.nodeType==1?o.getClientRects():[]}function isEquivalentPosition(o,e,a,l){return a?scanFor(o,e,a,l,-1)||scanFor(o,e,a,l,1):!1}function domIndex(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e}function scanFor(o,e,a,l,u){for(;;){if(o==a&&e==l)return!0;if(e==(u<0?0:maxOffset(o))){if(o.nodeName=="DIV")return!1;let f=o.parentNode;if(!f||f.nodeType!=1)return!1;e=domIndex(o)+(u<0?0:1),o=f}else if(o.nodeType==1){if(o=o.childNodes[e+(u<0?-1:0)],o.nodeType==1&&o.contentEditable=="false")return!1;e=u<0?maxOffset(o):0}else return!1}}function maxOffset(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function flattenRect(o,e){let a=e?o.left:o.right;return{left:a,right:a,top:o.top,bottom:o.bottom}}function windowRect(o){return{left:0,right:o.innerWidth,top:0,bottom:o.innerHeight}}function getScale(o,e){let a=e.width/o.offsetWidth,l=e.height/o.offsetHeight;return(a>.995&&a<1.005||!isFinite(a)||Math.abs(e.width-o.offsetWidth)<1)&&(a=1),(l>.995&&l<1.005||!isFinite(l)||Math.abs(e.height-o.offsetHeight)<1)&&(l=1),{scaleX:a,scaleY:l}}function scrollRectIntoView(o,e,a,l,u,f,d,p){let g=o.ownerDocument,b=g.defaultView||window;for(let O=o,A=!1;O&&!A;)if(O.nodeType==1){let k,M=O==g.body,B=1,N=1;if(M)k=windowRect(b);else{if(/^(fixed|sticky)$/.test(getComputedStyle(O).position)&&(A=!0),O.scrollHeight<=O.clientHeight&&O.scrollWidth<=O.clientWidth){O=O.assignedSlot||O.parentNode;continue}let se=O.getBoundingClientRect();({scaleX:B,scaleY:N}=getScale(O,se)),k={left:se.left,right:se.left+O.clientWidth*B,top:se.top,bottom:se.top+O.clientHeight*N}}let L=0,V=0;if(u=="nearest")e.top<k.top?(V=-(k.top-e.top+d),a>0&&e.bottom>k.bottom+V&&(V=e.bottom-k.bottom+V+d)):e.bottom>k.bottom&&(V=e.bottom-k.bottom+d,a<0&&e.top-V<k.top&&(V=-(k.top+V-e.top+d)));else{let se=e.bottom-e.top,pe=k.bottom-k.top;V=(u=="center"&&se<=pe?e.top+se/2-pe/2:u=="start"||u=="center"&&a<0?e.top-d:e.bottom-pe+d)-k.top}if(l=="nearest"?e.left<k.left?(L=-(k.left-e.left+f),a>0&&e.right>k.right+L&&(L=e.right-k.right+L+f)):e.right>k.right&&(L=e.right-k.right+f,a<0&&e.left<k.left+L&&(L=-(k.left+L-e.left+f))):L=(l=="center"?e.left+(e.right-e.left)/2-(k.right-k.left)/2:l=="start"==p?e.left-f:e.right-(k.right-k.left)+f)-k.left,L||V)if(M)b.scrollBy(L,V);else{let se=0,pe=0;if(V){let re=O.scrollTop;O.scrollTop+=V/N,pe=(O.scrollTop-re)*N}if(L){let re=O.scrollLeft;O.scrollLeft+=L/B,se=(O.scrollLeft-re)*B}e={left:e.left-se,top:e.top-pe,right:e.right-se,bottom:e.bottom-pe},se&&Math.abs(se-L)<1&&(l="nearest"),pe&&Math.abs(pe-V)<1&&(u="nearest")}if(M)break;O=O.assignedSlot||O.parentNode}else if(O.nodeType==11)O=O.host;else break}function scrollableParent(o){let e=o.ownerDocument;for(let a=o.parentNode;a&&a!=e.body;)if(a.nodeType==1){if(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth)return a;a=a.assignedSlot||a.parentNode}else if(a.nodeType==11)a=a.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:a,focusNode:l}=e;this.set(a,Math.min(e.anchorOffset,a?maxOffset(a):0),l,Math.min(e.focusOffset,l?maxOffset(l):0))}set(e,a,l,u){this.anchorNode=e,this.anchorOffset=a,this.focusNode=l,this.focusOffset=u}}let preventScrollSupported=null;function focusPreventScroll(o){if(o.setActive)return o.setActive();if(preventScrollSupported)return o.focus(preventScrollSupported);let e=[];for(let a=o;a&&(e.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(o.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let a=0;a<e.length;){let l=e[a++],u=e[a++],f=e[a++];l.scrollTop!=u&&(l.scrollTop=u),l.scrollLeft!=f&&(l.scrollLeft=f)}}}let scratchRange;function textRange(o,e,a=e){let l=scratchRange||(scratchRange=document.createRange());return l.setEnd(o,a),l.setStart(o,e),l}function dispatchKey(o,e,a){let l={key:e,code:e,keyCode:a,which:a,cancelable:!0},u=new KeyboardEvent("keydown",l);u.synthetic=!0,o.dispatchEvent(u);let f=new KeyboardEvent("keyup",l);return f.synthetic=!0,o.dispatchEvent(f),u.defaultPrevented||f.defaultPrevented}function getRoot(o){for(;o;){if(o&&(o.nodeType==9||o.nodeType==11&&o.host))return o;o=o.assignedSlot||o.parentNode}return null}function clearAttributes(o){for(;o.attributes.length;)o.removeAttributeNode(o.attributes[0])}function atElementStart(o,e){let a=e.focusNode,l=e.focusOffset;if(!a||e.anchorNode!=a||e.anchorOffset!=l)return!1;for(l=Math.min(l,maxOffset(a));;)if(l){if(a.nodeType!=1)return!1;let u=a.childNodes[l-1];u.contentEditable=="false"?l--:(a=u,l=maxOffset(a))}else{if(a==o)return!0;l=domIndex(a),a=a.parentNode}}function isScrolledToBottom(o){return o.scrollTop>Math.max(1,o.scrollHeight-o.clientHeight-4)}class DOMPos{constructor(e,a,l=!0){this.node=e,this.offset=a,this.precise=l}static before(e,a){return new DOMPos(e.parentNode,domIndex(e),a)}static after(e,a){return new DOMPos(e.parentNode,domIndex(e)+1,a)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let a=this.posAtStart;for(let l of this.children){if(l==e)return a;a+=l.length+l.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,a){if(this.flags&2){let l=this.dom,u=null,f;for(let d of this.children){if(d.flags&7){if(!d.dom&&(f=u?u.nextSibling:l.firstChild)){let p=ContentView.get(f);(!p||!p.parent&&p.canReuseDOM(d))&&d.reuseDOM(f)}d.sync(e,a),d.flags&=-8}if(f=u?u.nextSibling:l.firstChild,a&&!a.written&&a.node==l&&f!=d.dom&&(a.written=!0),d.dom.parentNode==l)for(;f&&f!=d.dom;)f=rm$1(f);else l.insertBefore(d.dom,f);u=d.dom}for(f=u?u.nextSibling:l.firstChild,f&&a&&a.node==l&&(a.written=!0);f;)f=rm$1(f)}else if(this.flags&1)for(let l of this.children)l.flags&7&&(l.sync(e,a),l.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,a){let l;if(e==this.dom)l=this.dom.childNodes[a];else{let u=maxOffset(e)==0?0:a==0?-1:1;for(;;){let f=e.parentNode;if(f==this.dom)break;u==0&&f.firstChild!=f.lastChild&&(e==f.firstChild?u=-1:u=1),e=f}u<0?l=e:l=e.nextSibling}if(l==this.dom.firstChild)return 0;for(;l&&!ContentView.get(l);)l=l.nextSibling;if(!l)return this.length;for(let u=0,f=0;;u++){let d=this.children[u];if(d.dom==l)return f;f+=d.length+d.breakAfter}}domBoundsAround(e,a,l=0){let u=-1,f=-1,d=-1,p=-1;for(let g=0,b=l,O=l;g<this.children.length;g++){let A=this.children[g],k=b+A.length;if(b<e&&k>a)return A.domBoundsAround(e,a,b);if(k>=e&&u==-1&&(u=g,f=b),b>a&&A.dom.parentNode==this.dom){d=g,p=O;break}O=k,b=k+A.breakAfter}return{from:f,to:p<0?l+this.length:p,startDOM:(u?this.children[u-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:d<this.children.length&&d>=0?this.children[d].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let a=this.parent;a;a=a.parent){if(e&&(a.flags|=2),a.flags&1)return;a.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let a=e.parent;if(!a)return e;e=a}}replaceChildren(e,a,l=noChildren){this.markDirty();for(let u=e;u<a;u++){let f=this.children[u];f.parent==this&&l.indexOf(f)<0&&f.destroy()}this.children.splice(e,a-e,...l);for(let u=0;u<l.length;u++)l[u].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,a=1){return this.childCursor().findPos(e,a)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,a,l,u,f,d){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ChildCursor{constructor(e,a,l){this.children=e,this.pos=a,this.i=l,this.off=0}findPos(e,a=1){for(;;){if(e>this.pos||e==this.pos&&(a>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let l=this.children[--this.i];this.pos-=l.length+l.breakAfter}}}function replaceRange(o,e,a,l,u,f,d,p,g){let{children:b}=o,O=b.length?b[e]:null,A=f.length?f[f.length-1]:null,k=A?A.breakAfter:d;if(!(e==l&&O&&!d&&!k&&f.length<2&&O.merge(a,u,f.length?A:null,a==0,p,g))){if(l<b.length){let M=b[l];M&&(u<M.length||M.breakAfter&&A?.breakAfter)?(e==l&&(M=M.split(u),u=0),!k&&A&&M.merge(0,u,A,!0,0,g)?f[f.length-1]=M:((u||M.children.length&&!M.children[0].length)&&M.merge(0,u,null,!1,0,g),f.push(M))):M?.breakAfter&&(A?A.breakAfter=1:d=1),l++}for(O&&(O.breakAfter=d,a>0&&(!d&&f.length&&O.merge(a,O.length,f[0],!1,p,0)?O.breakAfter=f.shift().breakAfter:(a<O.length||O.children.length&&O.children[O.children.length-1].length==0)&&O.merge(a,O.length,null,!1,p,0),e++));e<l&&f.length;)if(b[l-1].become(f[f.length-1]))l--,f.pop(),g=f.length?0:p;else if(b[e].become(f[0]))e++,f.shift(),p=f.length?0:g;else break;!f.length&&e&&l<b.length&&!b[e-1].breakAfter&&b[l].merge(0,0,b[e-1],!1,p,g)&&e--,(e<l||f.length)&&o.replaceChildren(e,l,f)}}function mergeChildrenInto(o,e,a,l,u,f){let d=o.childCursor(),{i:p,off:g}=d.findPos(a,1),{i:b,off:O}=d.findPos(e,-1),A=e-a;for(let k of l)A+=k.length;o.length+=A,replaceRange(o,b,O,p,g,l,0,u,f)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,a){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(a&&a.node==this.dom&&(a.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,a,l){return this.flags&8||l&&(!(l instanceof TextView)||this.length-(a-e)+l.length>MaxJoinLen||l.flags&8)?!1:(this.text=this.text.slice(0,e)+(l?l.text:"")+this.text.slice(a),this.markDirty(),!0)}split(e){let a=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),a.flags|=this.flags&8,a}localPosFromDOM(e,a){return e==this.dom?a:a?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,a,l){return{from:l,to:l+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,a){return textCoords(this.dom,e,a)}}class MarkView extends ContentView{constructor(e,a=[],l=0){super(),this.mark=e,this.children=a,this.length=l;for(let u of a)u.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let a in this.mark.attrs)e.setAttribute(a,this.mark.attrs[a]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,a){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,a)}merge(e,a,l,u,f,d){return l&&(!(l instanceof MarkView&&l.mark.eq(this.mark))||e&&f<=0||a<this.length&&d<=0)?!1:(mergeChildrenInto(this,e,a,l?l.children.slice():[],f-1,d-1),this.markDirty(),!0)}split(e){let a=[],l=0,u=-1,f=0;for(let p of this.children){let g=l+p.length;g>e&&a.push(l<e?p.split(e-l):p),u<0&&l>=e&&(u=f),l=g,f++}let d=this.length-e;return this.length=e,u>-1&&(this.children.length=u,this.markDirty()),new MarkView(this.mark,a,d)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,a){return coordsInChildren(this,e,a)}}function textCoords(o,e,a){let l=o.nodeValue.length;e>l&&(e=l);let u=e,f=e,d=0;e==0&&a<0||e==l&&a>=0?browser.chrome||browser.gecko||(e?(u--,d=1):f<l&&(f++,d=-1)):a<0?u--:f<l&&f++;let p=textRange(o,u,f).getClientRects();if(!p.length)return null;let g=p[(d?d<0:a>=0)?0:p.length-1];return browser.safari&&!d&&g.width==0&&(g=Array.prototype.find.call(p,b=>b.width)||g),d?flattenRect(g,d<0):g||null}class WidgetView extends ContentView{static create(e,a,l){return new WidgetView(e,a,l)}constructor(e,a,l){super(),this.widget=e,this.length=a,this.side=l,this.prevWidget=null}split(e){let a=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,a}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,a,l,u,f,d){return l&&(!(l instanceof WidgetView)||!this.widget.compare(l.widget)||e>0&&f<=0||a<this.length&&d<=0)?!1:(this.length=e+(l?l.length:0)+(this.length-a),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:a}=e,l=a&&a.state.doc,u=this.posAtStart;return l?l.slice(u,u+this.length):Text.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,a){let l=this.widget.coordsAt(this.dom,e,a);if(l)return l;let u=this.dom.getClientRects(),f=null;if(!u.length)return null;let d=this.side?this.side<0:e>0;for(let p=d?u.length-1:0;f=u[p],!(e>0?p==0:p==u.length-1||f.top<f.bottom);p+=d?-1:1);return flattenRect(f,!d)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(o,e){let a=o.dom,{children:l}=o,u=0;for(let f=0;u<l.length;u++){let d=l[u],p=f+d.length;if(!(p==f&&d.getSide()<=0)){if(e>f&&e<p&&d.dom.parentNode==a)return d.domAtPos(e-f);if(e<=f)break;f=p}}for(let f=u;f>0;f--){let d=l[f-1];if(d.dom.parentNode==a)return d.domAtPos(d.length)}for(let f=u;f<l.length;f++){let d=l[f];if(d.dom.parentNode==a)return d.domAtPos(0)}return new DOMPos(a,0)}function joinInlineInto(o,e,a){let l,{children:u}=o;a>0&&e instanceof MarkView&&u.length&&(l=u[u.length-1])instanceof MarkView&&l.mark.eq(e.mark)?joinInlineInto(l,e.children[0],a-1):(u.push(e),e.setParent(o)),o.length+=e.length}function coordsInChildren(o,e,a){let l=null,u=-1,f=null,d=-1;function p(b,O){for(let A=0,k=0;A<b.children.length&&k<=O;A++){let M=b.children[A],B=k+M.length;B>=O&&(M.children.length?p(M,O-k):(!f||f.isHidden&&a>0)&&(B>O||k==B&&M.getSide()>0)?(f=M,d=O-k):(k<O||k==B&&M.getSide()<0&&!M.isHidden)&&(l=M,u=O-k)),k=B}}p(o,e);let g=(a<0?l:f)||l||f;return g?g.coordsAt(Math.max(0,g==l?u:d),a):fallbackRect(o)}function fallbackRect(o){let e=o.dom.lastChild;if(!e)return o.dom.getBoundingClientRect();let a=clientRectsFor(e);return a[a.length-1]||null}function combineAttrs(o,e){for(let a in o)a=="class"&&e.class?e.class+=" "+o.class:a=="style"&&e.style?e.style+=";"+o.style:e[a]=o[a];return e}const noAttrs=Object.create(null);function attrsEq(o,e,a){if(o==e)return!0;o||(o=noAttrs),e||(e=noAttrs);let l=Object.keys(o),u=Object.keys(e);if(l.length-(a&&l.indexOf(a)>-1?1:0)!=u.length-(a&&u.indexOf(a)>-1?1:0))return!1;for(let f of l)if(f!=a&&(u.indexOf(f)==-1||o[f]!==e[f]))return!1;return!0}function updateAttrs(o,e,a){let l=!1;if(e)for(let u in e)a&&u in a||(l=!0,u=="style"?o.style.cssText="":o.removeAttribute(u));if(a)for(let u in a)e&&e[u]==a[u]||(l=!0,u=="style"?o.style.cssText=a[u]:o.setAttribute(u,a[u]));return l}function getAttrs(o){let e=Object.create(null);for(let a=0;a<o.attributes.length;a++){let l=o.attributes[a];e[l.name]=l.value}return e}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,a,l,u,f,d){if(l){if(!(l instanceof LineView))return!1;this.dom||l.transferDOM(this)}return u&&this.setDeco(l?l.attrs:null),mergeChildrenInto(this,e,a,l?l.children.slice():[],f,d),!0}split(e){let a=new LineView;if(a.breakAfter=this.breakAfter,this.length==0)return a;let{i:l,off:u}=this.childPos(e);u&&(a.append(this.children[l].split(u),0),this.children[l].merge(u,this.children[l].length,null,!1,0,0),l++);for(let f=l;f<this.children.length;f++)a.append(this.children[f],0);for(;l>0&&this.children[l-1].length==0;)this.children[--l].destroy();return this.children.length=l,this.markDirty(),this.length=e,a}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,a){joinInlineInto(this,e,a)}addLineDeco(e){let a=e.spec.attributes,l=e.spec.class;a&&(this.attrs=combineAttrs(a,this.attrs||{})),l&&(this.attrs=combineAttrs({class:l},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,a){var l;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,a);let u=this.dom.lastChild;for(;u&&ContentView.get(u)instanceof MarkView;)u=u.lastChild;if(!u||!this.length||u.nodeName!="BR"&&((l=ContentView.get(u))===null||l===void 0?void 0:l.isEditable)==!1&&(!browser.ios||!this.children.some(f=>f instanceof TextView))){let f=document.createElement("BR");f.cmIgnore=!0,this.dom.appendChild(f)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,a;for(let l of this.children){if(!(l instanceof TextView)||/[^ -~]/.test(l.text))return null;let u=clientRectsFor(l.dom);if(u.length!=1)return null;e+=u[0].width,a=u[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:a}:null}coordsAt(e,a){let l=coordsInChildren(this,e,a);if(!this.children.length&&l&&this.parent){let{heightOracle:u}=this.parent.view.viewState,f=l.bottom-l.top;if(Math.abs(f-u.lineHeight)<2&&u.textHeight<f){let d=(f-u.textHeight)/2;return{top:l.top+d,bottom:l.bottom-d,left:l.left,right:l.left}}}return l}become(e){return!1}covers(){return!0}static find(e,a){for(let l=0,u=0;l<e.children.length;l++){let f=e.children[l],d=u+f.length;if(d>=a){if(f instanceof LineView)return f;if(d>a)break}u=d+f.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,a,l){super(),this.widget=e,this.length=a,this.deco=l,this.breakAfter=0,this.prevWidget=null}merge(e,a,l,u,f,d){return l&&(!(l instanceof BlockWidgetView)||!this.widget.compare(l.widget)||e>0&&f<=0||a<this.length&&d<=0)?!1:(this.length=e+(l?l.length:0)+(this.length-a),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let a=this.length-e;this.length=e;let l=new BlockWidgetView(this.widget,a,this.deco);return l.breakAfter=this.breakAfter,l}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,a){return this.widget.coordsAt(this.dom,e,a)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:a,endSide:l}=this.deco;return a==l?!1:e<0?a<0:l>0}}class WidgetType{eq(e){return!1}updateDOM(e,a){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,a,l){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var BlockType=function(o){return o[o.Text=0]="Text",o[o.WidgetBefore=1]="WidgetBefore",o[o.WidgetAfter=2]="WidgetAfter",o[o.WidgetRange=3]="WidgetRange",o}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,a,l,u){super(),this.startSide=e,this.endSide=a,this.widget=l,this.spec=u}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let a=Math.max(-1e4,Math.min(1e4,e.side||0)),l=!!e.block;return a+=l&&!e.inlineOrder?a>0?3e8:-4e8:a>0?1e8:-1e8,new PointDecoration(e,a,a,l,e.widget||null,!1)}static replace(e){let a=!!e.block,l,u;if(e.isBlockGap)l=-5e8,u=4e8;else{let{start:f,end:d}=getInclusive(e,a);l=(f?a?-3e8:-1:5e8)-1,u=(d?a?2e8:1:-6e8)+1}return new PointDecoration(e,l,u,a,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,a=!1){return RangeSet.of(e,a)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:a,end:l}=getInclusive(e);super(a?-1:5e8,l?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var a,l;return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&(this.class||((a=this.attrs)===null||a===void 0?void 0:a.class))==(e.class||((l=e.attrs)===null||l===void 0?void 0:l.class))&&attrsEq(this.attrs,e.attrs,"class")}range(e,a=e){if(e>=a)throw new RangeError("Mark decorations may not be empty");return super.range(e,a)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,a=e){if(a!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,a)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,a,l,u,f,d){super(a,l,f,e),this.block=u,this.isReplace=d,this.mapMode=u?a<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,a=e){if(this.isReplace&&(e>a||e==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,a)}}PointDecoration.prototype.point=!0;function getInclusive(o,e=!1){let{inclusiveStart:a,inclusiveEnd:l}=o;return a==null&&(a=o.inclusive),l==null&&(l=o.inclusive),{start:a??e,end:l??e}}function widgetsEq(o,e){return o==e||!!(o&&e&&o.compare(e))}function addRange(o,e,a,l=0){let u=a.length-1;u>=0&&a[u]+l>=o?a[u]=Math.max(a[u],e):a.push(o,e)}class ContentBuilder{constructor(e,a,l,u){this.doc=e,this.pos=a,this.end=l,this.disallowBlockEffectsFor=u,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=a}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof BlockWidgetView&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(e,a,l){for(;e>0;){if(this.textOff==this.text.length){let{value:f,lineBreak:d,done:p}=this.cursor.next(this.skip);if(this.skip=0,p)throw new Error("Ran out of text content when drawing inline views");if(d){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=f,this.textOff=0}let u=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(a.slice(a.length-l)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+u)),a),l),this.atCursorPos=!0,this.textOff+=u,e-=u,l=0}}span(e,a,l,u){this.buildText(a-e,l,u),this.pos=a,this.openStart<0&&(this.openStart=u)}point(e,a,l,u,f,d){if(this.disallowBlockEffectsFor[d]&&l instanceof PointDecoration){if(l.block)throw new RangeError("Block decorations may not be specified via plugins");if(a>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let p=a-e;if(l instanceof PointDecoration)if(l.block)l.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(l.widget||new NullWidget("div"),p,l));else{let g=WidgetView.create(l.widget||new NullWidget("span"),p,p?0:l.startSide),b=this.atCursorPos&&!g.isEditable&&f<=u.length&&(e<a||l.startSide>0),O=!g.isEditable&&(e<a||f>u.length||l.startSide<=0),A=this.getLine();this.pendingBuffer==2&&!b&&!g.isEditable&&(this.pendingBuffer=0),this.flushBuffer(u),b&&(A.append(wrapMarks(new WidgetBufferView(1),u),f),f=u.length+Math.max(0,f-u.length)),A.append(wrapMarks(g,u),f),this.atCursorPos=O,this.pendingBuffer=O?e<a||f>u.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=u.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(l);p&&(this.textOff+p<=this.text.length?this.textOff+=p:(this.skip+=p-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a),this.openStart<0&&(this.openStart=f)}static build(e,a,l,u,f){let d=new ContentBuilder(e,a,l,f);return d.openEnd=RangeSet.spans(u,a,l,d),d.openStart<0&&(d.openStart=d.openEnd),d.finish(d.openEnd),d}}function wrapMarks(o,e){for(let a of e)o=new MarkView(a,[o],o.length);return o}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Direction=function(o){return o[o.LTR=0]="LTR",o[o.RTL=1]="RTL",o}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(o){let e=[];for(let a=0;a<o.length;a++)e.push(1<<+o[a]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let o of["()","[]","{}"]){let e=o.charCodeAt(0),a=o.charCodeAt(1);Brackets[e]=a,Brackets[a]=-e}function charType(o){return o<=247?LowTypes[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?ArabicTypes[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8204?256:64336<=o&&o<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(e,a,l){this.from=e,this.to=a,this.level=l}side(e,a){return this.dir==a==e?this.to:this.from}forward(e,a){return e==(this.dir==a)}static find(e,a,l,u){let f=-1;for(let d=0;d<e.length;d++){let p=e[d];if(p.from<=a&&p.to>=a){if(p.level==l)return d;(f<0||(u!=0?u<0?p.from<a:p.to>a:e[f].level>p.level))&&(f=d)}}if(f<0)throw new RangeError("Index out of range");return f}}function isolatesEq(o,e){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++){let l=o[a],u=e[a];if(l.from!=u.from||l.to!=u.to||l.direction!=u.direction||!isolatesEq(l.inner,u.inner))return!1}return!0}const types=[];function computeCharTypes(o,e,a,l,u){for(let f=0;f<=l.length;f++){let d=f?l[f-1].to:e,p=f<l.length?l[f].from:a,g=f?256:u;for(let b=d,O=g,A=g;b<p;b++){let k=charType(o.charCodeAt(b));k==512?k=O:k==8&&A==4&&(k=16),types[b]=k==4?2:k,k&7&&(A=k),O=k}for(let b=d,O=g,A=g;b<p;b++){let k=types[b];if(k==128)b<p-1&&O==types[b+1]&&O&24?k=types[b]=O:types[b]=256;else if(k==64){let M=b+1;for(;M<p&&types[M]==64;)M++;let B=b&&O==8||M<a&&types[M]==8?A==1?1:8:256;for(let N=b;N<M;N++)types[N]=B;b=M-1}else k==8&&A==1&&(types[b]=1);O=k,k&7&&(A=k)}}}function processBracketPairs(o,e,a,l,u){let f=u==1?2:1;for(let d=0,p=0,g=0;d<=l.length;d++){let b=d?l[d-1].to:e,O=d<l.length?l[d].from:a;for(let A=b,k,M,B;A<O;A++)if(M=Brackets[k=o.charCodeAt(A)])if(M<0){for(let N=p-3;N>=0;N-=3)if(BracketStack[N+1]==-M){let L=BracketStack[N+2],V=L&2?u:L&4?L&1?f:u:0;V&&(types[A]=types[BracketStack[N]]=V),p=N;break}}else{if(BracketStack.length==189)break;BracketStack[p++]=A,BracketStack[p++]=k,BracketStack[p++]=g}else if((B=types[A])==2||B==1){let N=B==u;g=N?0:1;for(let L=p-3;L>=0;L-=3){let V=BracketStack[L+2];if(V&2)break;if(N)BracketStack[L+2]|=2;else{if(V&4)break;BracketStack[L+2]|=4}}}}}function processNeutrals(o,e,a,l){for(let u=0,f=l;u<=a.length;u++){let d=u?a[u-1].to:o,p=u<a.length?a[u].from:e;for(let g=d;g<p;){let b=types[g];if(b==256){let O=g+1;for(;;)if(O==p){if(u==a.length)break;O=a[u++].to,p=u<a.length?a[u].from:e}else if(types[O]==256)O++;else break;let A=f==1,k=(O<e?types[O]:l)==1,M=A==k?A?1:2:l;for(let B=O,N=u,L=N?a[N-1].to:o;B>g;)B==L&&(B=a[--N].from,L=N?a[N-1].to:o),types[--B]=M;g=O}else f=b,g++}}}function emitSpans(o,e,a,l,u,f,d){let p=l%2?2:1;if(l%2==u%2)for(let g=e,b=0;g<a;){let O=!0,A=!1;if(b==f.length||g<f[b].from){let N=types[g];N!=p&&(O=!1,A=N==16)}let k=!O&&p==1?[]:null,M=O?l:l+1,B=g;e:for(;;)if(b<f.length&&B==f[b].from){if(A)break e;let N=f[b];if(!O)for(let L=N.to,V=b+1;;){if(L==a)break e;if(V<f.length&&f[V].from==L)L=f[V++].to;else{if(types[L]==p)break e;break}}if(b++,k)k.push(N);else{N.from>g&&d.push(new BidiSpan(g,N.from,M));let L=N.direction==LTR!=!(M%2);computeSectionOrder(o,L?l+1:l,u,N.inner,N.from,N.to,d),g=N.to}B=N.to}else{if(B==a||(O?types[B]!=p:types[B]==p))break;B++}k?emitSpans(o,g,B,l+1,u,k,d):g<B&&d.push(new BidiSpan(g,B,M)),g=B}else for(let g=a,b=f.length;g>e;){let O=!0,A=!1;if(!b||g>f[b-1].to){let N=types[g-1];N!=p&&(O=!1,A=N==16)}let k=!O&&p==1?[]:null,M=O?l:l+1,B=g;e:for(;;)if(b&&B==f[b-1].to){if(A)break e;let N=f[--b];if(!O)for(let L=N.from,V=b;;){if(L==e)break e;if(V&&f[V-1].to==L)L=f[--V].from;else{if(types[L-1]==p)break e;break}}if(k)k.push(N);else{N.to<g&&d.push(new BidiSpan(N.to,g,M));let L=N.direction==LTR!=!(M%2);computeSectionOrder(o,L?l+1:l,u,N.inner,N.from,N.to,d),g=N.from}B=N.from}else{if(B==e||(O?types[B-1]!=p:types[B-1]==p))break;B--}k?emitSpans(o,B,g,l+1,u,k,d):B<g&&d.push(new BidiSpan(B,g,M)),g=B}}function computeSectionOrder(o,e,a,l,u,f,d){let p=e%2?2:1;computeCharTypes(o,u,f,l,p),processBracketPairs(o,u,f,l,p),processNeutrals(u,f,l,p),emitSpans(o,u,f,e,a,l,d)}function computeOrder(o,e,a){if(!o)return[new BidiSpan(0,0,e==RTL?1:0)];if(e==LTR&&!a.length&&!BidiRE.test(o))return trivialOrder(o.length);if(a.length)for(;o.length>types.length;)types[types.length]=256;let l=[],u=e==LTR?0:1;return computeSectionOrder(o,u,u,a,0,o.length,l),l}function trivialOrder(o){return[new BidiSpan(0,o,0)]}let movedOver="";function moveVisually(o,e,a,l,u){var f;let d=l.head-o.from,p=BidiSpan.find(e,d,(f=l.bidiLevel)!==null&&f!==void 0?f:-1,l.assoc),g=e[p],b=g.side(u,a);if(d==b){let k=p+=u?1:-1;if(k<0||k>=e.length)return null;g=e[p=k],d=g.side(!u,a),b=g.side(u,a)}let O=findClusterBreak(o.text,d,g.forward(u,a));(O<g.from||O>g.to)&&(O=b),movedOver=o.text.slice(Math.min(d,O),Math.max(d,O));let A=p==(u?e.length-1:0)?null:e[p+(u?1:-1)];return A&&O==b&&A.level+(u?0:1)<g.level?EditorSelection.cursor(A.side(!u,a)+o.from,A.forward(u,a)?1:-1,A.level):EditorSelection.cursor(O+o.from,g.forward(u,a)?-1:1,g.level)}function autoDirection(o,e,a){for(let l=e;l<a;l++){let u=charType(o.charCodeAt(l));if(u==1)return LTR;if(u==2||u==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:o=>o.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:o=>o.some(e=>e)});class ScrollTarget{constructor(e,a="nearest",l="nearest",u=5,f=5,d=!1){this.range=e,this.y=a,this.x=l,this.yMargin=u,this.xMargin=f,this.isSnapshot=d}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ScrollTarget(EditorSelection.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(o,e)=>o.map(e)});function logException(o,e,a){let l=o.facet(exceptionSink);l.length?l[0](e):window.onerror?window.onerror(String(e),a,void 0,void 0,e):a?console.error(a+":",e):console.error(e)}const editable=Facet.define({combine:o=>o.length?o[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,a,l,u,f){this.id=e,this.create=a,this.domEventHandlers=l,this.domEventObservers=u,this.extension=f(this)}static define(e,a){const{eventHandlers:l,eventObservers:u,provide:f,decorations:d}=a||{};return new ViewPlugin(nextPluginID++,e,l,u,p=>{let g=[viewPlugin.of(p)];return d&&g.push(decorations.of(b=>{let O=b.plugin(p);return O?d(O):Decoration.none})),f&&g.push(f(p)),g})}static fromClass(e,a){return ViewPlugin.define(l=>new e(l),a)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(l){if(logException(a.state,l,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(a){logException(e.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var a;if(!((a=this.value)===null||a===void 0)&&a.destroy)try{this.value.destroy()}catch(l){logException(e.state,l,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(o,e){let a=o.state.facet(bidiIsolatedRanges);if(!a.length)return a;let l=a.map(f=>f instanceof Function?f(o):f),u=[];return RangeSet.spans(l,e.from,e.to,{point(){},span(f,d,p,g){let b=f-e.from,O=d-e.from,A=u;for(let k=p.length-1;k>=0;k--,g--){let M=p[k].spec.bidiIsolate,B;if(M==null&&(M=autoDirection(e.text,b,O)),g>0&&A.length&&(B=A[A.length-1]).to==b&&B.direction==M)B.to=O,A=B.inner;else{let N={from:b,to:O,direction:M,inner:[]};A.push(N),A=N.inner}}}}),u}const scrollMargins=Facet.define();function getScrollMargins(o){let e=0,a=0,l=0,u=0;for(let f of o.state.facet(scrollMargins)){let d=f(o);d&&(d.left!=null&&(e=Math.max(e,d.left)),d.right!=null&&(a=Math.max(a,d.right)),d.top!=null&&(l=Math.max(l,d.top)),d.bottom!=null&&(u=Math.max(u,d.bottom)))}return{left:e,right:a,top:l,bottom:u}}const styleModule=Facet.define();class ChangedRange{constructor(e,a,l,u){this.fromA=e,this.toA=a,this.fromB=l,this.toB=u}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let a=e.length,l=this;for(;a>0;a--){let u=e[a-1];if(!(u.fromA>l.toA)){if(u.toA<l.fromA)break;l=l.join(u),e.splice(a-1,1)}}return e.splice(a,0,l),e}static extendWithRanges(e,a){if(a.length==0)return e;let l=[];for(let u=0,f=0,d=0,p=0;;u++){let g=u==e.length?null:e[u],b=d-p,O=g?g.fromB:1e9;for(;f<a.length&&a[f]<O;){let A=a[f],k=a[f+1],M=Math.max(p,A),B=Math.min(O,k);if(M<=B&&new ChangedRange(M+b,B+b,M,B).addToSet(l),k>O)break;f+=2}if(!g)return l;new ChangedRange(g.fromA,g.toA,g.fromB,g.toB).addToSet(l),d=g.toA,p=g.toB}}}class ViewUpdate{constructor(e,a,l){this.view=e,this.state=a,this.transactions=l,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let f of l)this.changes=this.changes.compose(f.changes);let u=[];this.changes.iterChangedRanges((f,d,p,g)=>u.push(new ChangedRange(f,d,p,g))),this.changedRanges=u}static create(e,a,l){return new ViewUpdate(e,a,l)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0,null)}update(e){var a;let l=e.changedRanges;this.minWidth>0&&l.length&&(l.every(({fromA:b,toA:O})=>O<this.minWidthFrom||b>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let u=-1;this.view.inputState.composing>=0&&(!((a=this.domChanged)===null||a===void 0)&&a.newSel?u=this.domChanged.newSel.head:!touchesComposition(e.changes,this.hasComposition)&&!e.selectionSet&&(u=e.state.selection.main.head));let f=u>-1?findCompositionRange(this.view,e.changes,u):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:b,to:O}=this.hasComposition;l=new ChangedRange(b,O,e.changes.mapPos(b,-1),e.changes.mapPos(O,1)).addToSet(l.slice())}this.hasComposition=f?{from:f.range.fromB,to:f.range.toB}:null,(browser.ie||browser.chrome)&&!f&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let d=this.decorations,p=this.updateDeco(),g=findChangedDeco(d,p,e.changes);return l=ChangedRange.extendWithRanges(l,g),!(this.flags&7)&&l.length==0?!1:(this.updateInner(l,e.startState.doc.length,f),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,a,l){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,a,l);let{observer:u}=this.view;u.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let d=browser.chrome||browser.ios?{node:u.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,d),this.flags&=-8,d&&(d.written||u.selectionRange.focusNode!=d.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(d=>d.flags&=-9);let f=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let d of this.children)d instanceof BlockWidgetView&&d.widget instanceof BlockGapWidget&&f.push(d.dom);u.updateGaps(f)}updateChildren(e,a,l){let u=l?l.range.addToSet(e.slice()):e,f=this.childCursor(a);for(let d=u.length-1;;d--){let p=d>=0?u[d]:null;if(!p)break;let{fromA:g,toA:b,fromB:O,toB:A}=p,k,M,B,N;if(l&&l.range.fromB<A&&l.range.toB>O){let re=ContentBuilder.build(this.view.state.doc,O,l.range.fromB,this.decorations,this.dynamicDecorationMap),z=ContentBuilder.build(this.view.state.doc,l.range.toB,A,this.decorations,this.dynamicDecorationMap);M=re.breakAtStart,B=re.openStart,N=z.openEnd;let oe=this.compositionView(l);z.breakAtStart?oe.breakAfter=1:z.content.length&&oe.merge(oe.length,oe.length,z.content[0],!1,z.openStart,0)&&(oe.breakAfter=z.content[0].breakAfter,z.content.shift()),re.content.length&&oe.merge(0,0,re.content[re.content.length-1],!0,0,re.openEnd)&&re.content.pop(),k=re.content.concat(oe).concat(z.content)}else({content:k,breakAtStart:M,openStart:B,openEnd:N}=ContentBuilder.build(this.view.state.doc,O,A,this.decorations,this.dynamicDecorationMap));let{i:L,off:V}=f.findPos(b,1),{i:se,off:pe}=f.findPos(g,-1);replaceRange(this,se,pe,L,V,k,M,B,N)}l&&this.fixCompositionDOM(l)}compositionView(e){let a=new TextView(e.text.nodeValue);a.flags|=8;for(let{deco:u}of e.marks)a=new MarkView(u,[a],a.length);let l=new LineView;return l.append(a,0),l}fixCompositionDOM(e){let a=(f,d)=>{d.flags|=8|(d.children.some(g=>g.flags&7)?1:0),this.markedForComposition.add(d);let p=ContentView.get(f);p&&p!=d&&(p.dom=null),d.setDOM(f)},l=this.childPos(e.range.fromB,1),u=this.children[l.i];a(e.line,u);for(let f=e.marks.length-1;f>=-1;f--)l=u.childPos(l.off,1),u=u.children[l.i],a(f>=0?e.marks[f].node:e.text,u)}updateSelection(e=!1,a=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let l=this.view.root.activeElement,u=l==this.dom,f=!u&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(l&&this.dom.contains(l));if(!(u||a||f))return;let d=this.forceSelection;this.forceSelection=!1;let p=this.view.state.selection.main,g=this.moveToLine(this.domAtPos(p.anchor)),b=p.empty?g:this.moveToLine(this.domAtPos(p.head));if(browser.gecko&&p.empty&&!this.hasComposition&&betweenUneditable(g)){let A=document.createTextNode("");this.view.observer.ignore(()=>g.node.insertBefore(A,g.node.childNodes[g.offset]||null)),g=b=new DOMPos(A,0),d=!0}let O=this.view.observer.selectionRange;(d||!O.focusNode||(!isEquivalentPosition(g.node,g.offset,O.anchorNode,O.anchorOffset)||!isEquivalentPosition(b.node,b.offset,O.focusNode,O.focusOffset))&&!this.suppressWidgetCursorChange(O,p))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(O.focusNode)&&inUneditable(O.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let A=getSelection(this.view.root);if(A)if(p.empty){if(browser.gecko){let k=nextToUneditable(g.node,g.offset);if(k&&k!=3){let M=nearbyTextNode(g.node,g.offset,k==1?1:-1);M&&(g=new DOMPos(M.node,M.offset))}}A.collapse(g.node,g.offset),p.bidiLevel!=null&&A.caretBidiLevel!==void 0&&(A.caretBidiLevel=p.bidiLevel)}else if(A.extend){A.collapse(g.node,g.offset);try{A.extend(b.node,b.offset)}catch{}}else{let k=document.createRange();p.anchor>p.head&&([g,b]=[b,g]),k.setEnd(b.node,b.offset),k.setStart(g.node,g.offset),A.removeAllRanges(),A.addRange(k)}f&&this.view.root.activeElement==this.dom&&(this.dom.blur(),l&&l.focus())}),this.view.observer.setSelectionRange(g,b)),this.impreciseAnchor=g.precise?null:new DOMPos(O.anchorNode,O.anchorOffset),this.impreciseHead=b.precise?null:new DOMPos(O.focusNode,O.focusOffset)}suppressWidgetCursorChange(e,a){return this.hasComposition&&a.empty&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==a.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,a=e.state.selection.main,l=getSelection(e.root),{anchorNode:u,anchorOffset:f}=e.observer.selectionRange;if(!l||!a.empty||!a.assoc||!l.modify)return;let d=LineView.find(this,a.head);if(!d)return;let p=d.posAtStart;if(a.head==p||a.head==p+d.length)return;let g=this.coordsAt(a.head,-1),b=this.coordsAt(a.head,1);if(!g||!b||g.bottom>b.top)return;let O=this.domAtPos(a.head+a.assoc);l.collapse(O.node,O.offset),l.modify("move",a.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let A=e.observer.selectionRange;e.docView.posFromDOM(A.anchorNode,A.anchorOffset)!=a.from&&l.collapse(u,f)}moveToLine(e){let a=this.dom,l;if(e.node!=a)return e;for(let u=e.offset;!l&&u<a.childNodes.length;u++){let f=ContentView.get(a.childNodes[u]);f instanceof LineView&&(l=f.domAtPos(0))}for(let u=e.offset-1;!l&&u>=0;u--){let f=ContentView.get(a.childNodes[u]);f instanceof LineView&&(l=f.domAtPos(f.length))}return l?new DOMPos(l.node,l.offset,!0):e}nearest(e){for(let a=e;a;){let l=ContentView.get(a);if(l&&l.rootView==this)return l;a=a.parentNode}return null}posFromDOM(e,a){let l=this.nearest(e);if(!l)throw new RangeError("Trying to find position for a DOM position outside of the document");return l.localPosFromDOM(e,a)+l.posAtStart}domAtPos(e){let{i:a,off:l}=this.childCursor().findPos(e,-1);for(;a<this.children.length-1;){let u=this.children[a];if(l<u.length||u instanceof LineView)break;a++,l=0}return this.children[a].domAtPos(l)}coordsAt(e,a){let l=null,u=0;for(let f=this.length,d=this.children.length-1;d>=0;d--){let p=this.children[d],g=f-p.breakAfter,b=g-p.length;if(g<e)break;b<=e&&(b<e||p.covers(-1))&&(g>e||p.covers(1))&&(!l||p instanceof LineView&&!(l instanceof LineView&&a>=0))&&(l=p,u=b),f=b}return l?l.coordsAt(e-u,a):null}coordsForChar(e){let{i:a,off:l}=this.childPos(e,1),u=this.children[a];if(!(u instanceof LineView))return null;for(;u.children.length;){let{i:p,off:g}=u.childPos(l,1);for(;;p++){if(p==u.children.length)return null;if((u=u.children[p]).length)break}l=g}if(!(u instanceof TextView))return null;let f=findClusterBreak(u.text,l);if(f==l)return null;let d=textRange(u.dom,l,f).getClientRects();for(let p=0;p<d.length;p++){let g=d[p];if(p==d.length-1||g.top<g.bottom&&g.left<g.right)return g}return null}measureVisibleLineHeights(e){let a=[],{from:l,to:u}=e,f=this.view.contentDOM.clientWidth,d=f>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,p=-1,g=this.view.textDirection==Direction.LTR;for(let b=0,O=0;O<this.children.length;O++){let A=this.children[O],k=b+A.length;if(k>u)break;if(b>=l){let M=A.dom.getBoundingClientRect();if(a.push(M.height),d){let B=A.dom.lastChild,N=B?clientRectsFor(B):[];if(N.length){let L=N[N.length-1],V=g?L.right-M.left:M.right-L.left;V>p&&(p=V,this.minWidth=f,this.minWidthFrom=b,this.minWidthTo=k)}}}b=k+A.breakAfter}return a}textDirectionAt(e){let{i:a}=this.childPos(e,1);return getComputedStyle(this.children[a].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let f of this.children)if(f instanceof LineView){let d=f.measureTextSize();if(d)return d}let e=document.createElement("div"),a,l,u;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let f=clientRectsFor(e.firstChild)[0];a=e.getBoundingClientRect().height,l=f?f.width/27:7,u=f?f.height:a,e.remove()}),{lineHeight:a,charWidth:l,textHeight:u}}childCursor(e=this.length){let a=this.children.length;return a&&(e-=this.children[--a].length),new ChildCursor(this.children,e,a)}computeBlockGapDeco(){let e=[],a=this.view.viewState;for(let l=0,u=0;;u++){let f=u==a.viewports.length?null:a.viewports[u],d=f?f.from-1:this.length;if(d>l){let p=(a.lineBlockAt(d).bottom-a.lineBlockAt(l).top)/this.view.scaleY;e.push(Decoration.replace({widget:new BlockGapWidget(p),block:!0,inclusive:!0,isBlockGap:!0}).range(l,d))}if(!f)break;l=f.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map((u,f)=>(this.dynamicDecorationMap[f]=typeof u=="function")?u(this.view):u),a=!1,l=this.view.state.facet(outerDecorations).map((u,f)=>{let d=typeof u=="function";return d&&(a=!0),d?u(this.view):u});l.length&&(this.dynamicDecorationMap[e.length]=a,e.push(RangeSet.join(l)));for(let u=e.length;u<e.length+3;u++)this.dynamicDecorationMap[u]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let b=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=b.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:a}=e,l=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1),u;if(!l)return;!a.empty&&(u=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(l={left:Math.min(l.left,u.left),top:Math.min(l.top,u.top),right:Math.max(l.right,u.right),bottom:Math.max(l.bottom,u.bottom)});let f=getScrollMargins(this.view),d={left:l.left-f.left,top:l.top-f.top,right:l.right+f.right,bottom:l.bottom+f.bottom},{offsetWidth:p,offsetHeight:g}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,d,a.head<a.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,p),-p),Math.max(Math.min(e.yMargin,g),-g),this.view.textDirection==Direction.LTR)}}function betweenUneditable(o){return o.node.nodeType==1&&o.node.firstChild&&(o.offset==0||o.node.childNodes[o.offset-1].contentEditable=="false")&&(o.offset==o.node.childNodes.length||o.node.childNodes[o.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function findCompositionNode(o,e){let a=o.observer.selectionRange,l=a.focusNode&&nearbyTextNode(a.focusNode,a.focusOffset,0);if(!l)return null;let u=e-l.offset;return{from:u,to:u+l.node.nodeValue.length,node:l.node}}function findCompositionRange(o,e,a){let l=findCompositionNode(o,a);if(!l)return null;let{node:u,from:f,to:d}=l,p=u.nodeValue;if(/[\n\r]/.test(p)||o.state.doc.sliceString(l.from,l.to)!=p)return null;let g=e.invertedDesc,b=new ChangedRange(g.mapPos(f),g.mapPos(d),f,d),O=[];for(let A=u.parentNode;;A=A.parentNode){let k=ContentView.get(A);if(k instanceof MarkView)O.push({node:A,deco:k.mark});else{if(k instanceof LineView||A.nodeName=="DIV"&&A.parentNode==o.contentDOM)return{range:b,text:u,marks:O,line:A};if(A!=o.contentDOM)O.push({node:A,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(A),tagName:A.tagName.toLowerCase()})});else return null}}}function nearbyTextNode(o,e,a){if(a<=0)for(let l=o,u=e;;){if(l.nodeType==3)return{node:l,offset:u};if(l.nodeType==1&&u>0)l=l.childNodes[u-1],u=maxOffset(l);else break}if(a>=0)for(let l=o,u=e;;){if(l.nodeType==3)return{node:l,offset:u};if(l.nodeType==1&&u<l.childNodes.length&&a>=0)l=l.childNodes[u],u=0;else break}return null}function nextToUneditable(o,e){return o.nodeType!=1?0:(e&&o.childNodes[e-1].contentEditable=="false"?1:0)|(e<o.childNodes.length&&o.childNodes[e].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(e,a){addRange(e,a,this.changes)}comparePoint(e,a){addRange(e,a,this.changes)}};function findChangedDeco(o,e,a){let l=new DecorationComparator$1;return RangeSet.compare(o,e,a,l),l.changes}function inUneditable(o,e){for(let a=o;a&&a!=e;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return!0;return!1}function touchesComposition(o,e){let a=!1;return e&&o.iterChangedRanges((l,u)=>{l<e.to&&u>e.from&&(a=!0)}),a}function groupAt(o,e,a=1){let l=o.charCategorizer(e),u=o.doc.lineAt(e),f=e-u.from;if(u.length==0)return EditorSelection.cursor(e);f==0?a=1:f==u.length&&(a=-1);let d=f,p=f;a<0?d=findClusterBreak(u.text,f,!1):p=findClusterBreak(u.text,f);let g=l(u.text.slice(d,p));for(;d>0;){let b=findClusterBreak(u.text,d,!1);if(l(u.text.slice(b,d))!=g)break;d=b}for(;p<u.length;){let b=findClusterBreak(u.text,p);if(l(u.text.slice(p,b))!=g)break;p=b}return EditorSelection.range(d+u.from,p+u.from)}function getdx(o,e){return e.left>o?e.left-o:Math.max(0,o-e.right)}function getdy(o,e){return e.top>o?e.top-o:Math.max(0,o-e.bottom)}function yOverlap(o,e){return o.top<e.bottom-1&&o.bottom>e.top+1}function upTop(o,e){return e<o.top?{top:e,left:o.left,right:o.right,bottom:o.bottom}:o}function upBot(o,e){return e>o.bottom?{top:o.top,left:o.left,right:o.right,bottom:e}:o}function domPosAtCoords(o,e,a){let l,u,f,d,p=!1,g,b,O,A;for(let B=o.firstChild;B;B=B.nextSibling){let N=clientRectsFor(B);for(let L=0;L<N.length;L++){let V=N[L];u&&yOverlap(u,V)&&(V=upTop(upBot(V,u.bottom),u.top));let se=getdx(e,V),pe=getdy(a,V);if(se==0&&pe==0)return B.nodeType==3?domPosInText(B,e,a):domPosAtCoords(B,e,a);if(!l||d>pe||d==pe&&f>se){l=B,u=V,f=se,d=pe;let re=pe?a<V.top?-1:1:se?e<V.left?-1:1:0;p=!re||(re>0?L<N.length-1:L>0)}se==0?a>V.bottom&&(!O||O.bottom<V.bottom)?(g=B,O=V):a<V.top&&(!A||A.top>V.top)&&(b=B,A=V):O&&yOverlap(O,V)?O=upBot(O,V.bottom):A&&yOverlap(A,V)&&(A=upTop(A,V.top))}}if(O&&O.bottom>=a?(l=g,u=O):A&&A.top<=a&&(l=b,u=A),!l)return{node:o,offset:0};let k=Math.max(u.left,Math.min(u.right,e));if(l.nodeType==3)return domPosInText(l,k,a);if(p&&l.contentEditable!="false")return domPosAtCoords(l,k,a);let M=Array.prototype.indexOf.call(o.childNodes,l)+(e>=(u.left+u.right)/2?1:0);return{node:o,offset:M}}function domPosInText(o,e,a){let l=o.nodeValue.length,u=-1,f=1e9,d=0;for(let p=0;p<l;p++){let g=textRange(o,p,p+1).getClientRects();for(let b=0;b<g.length;b++){let O=g[b];if(O.top==O.bottom)continue;d||(d=e-O.left);let A=(O.top>a?O.top-a:a-O.bottom)-1;if(O.left-1<=e&&O.right+1>=e&&A<f){let k=e>=(O.left+O.right)/2,M=k;if((browser.chrome||browser.gecko)&&textRange(o,p).getBoundingClientRect().left==O.right&&(M=!k),A<=0)return{node:o,offset:p+(M?1:0)};u=p+(M?1:0),f=A}}}return{node:o,offset:u>-1?u:d>0?o.nodeValue.length:0}}function posAtCoords(o,e,a,l=-1){var u,f;let d=o.contentDOM.getBoundingClientRect(),p=d.top+o.viewState.paddingTop,g,{docHeight:b}=o.viewState,{x:O,y:A}=e,k=A-p;if(k<0)return 0;if(k>b)return o.state.doc.length;for(let re=o.viewState.heightOracle.textHeight/2,z=!1;g=o.elementAtHeight(k),g.type!=BlockType.Text;)for(;k=l>0?g.bottom+re:g.top-re,!(k>=0&&k<=b);){if(z)return a?null:0;z=!0,l=-l}A=p+k;let M=g.from;if(M<o.viewport.from)return o.viewport.from==0?0:a?null:posAtCoordsImprecise(o,d,g,O,A);if(M>o.viewport.to)return o.viewport.to==o.state.doc.length?o.state.doc.length:a?null:posAtCoordsImprecise(o,d,g,O,A);let B=o.dom.ownerDocument,N=o.root.elementFromPoint?o.root:B,L=N.elementFromPoint(O,A);L&&!o.contentDOM.contains(L)&&(L=null),L||(O=Math.max(d.left+1,Math.min(d.right-1,O)),L=N.elementFromPoint(O,A),L&&!o.contentDOM.contains(L)&&(L=null));let V,se=-1;if(L&&((u=o.docView.nearest(L))===null||u===void 0?void 0:u.isEditable)!=!1){if(B.caretPositionFromPoint){let re=B.caretPositionFromPoint(O,A);re&&({offsetNode:V,offset:se}=re)}else if(B.caretRangeFromPoint){let re=B.caretRangeFromPoint(O,A);re&&({startContainer:V,startOffset:se}=re,(!o.contentDOM.contains(V)||browser.safari&&isSuspiciousSafariCaretResult(V,se,O)||browser.chrome&&isSuspiciousChromeCaretResult(V,se,O))&&(V=void 0))}}if(!V||!o.docView.dom.contains(V)){let re=LineView.find(o.docView,M);if(!re)return k>g.top+g.height/2?g.to:g.from;({node:V,offset:se}=domPosAtCoords(re.dom,O,A))}let pe=o.docView.nearest(V);if(!pe)return null;if(pe.isWidget&&((f=pe.dom)===null||f===void 0?void 0:f.nodeType)==1){let re=pe.dom.getBoundingClientRect();return e.y<re.top||e.y<=re.bottom&&e.x<=(re.left+re.right)/2?pe.posAtStart:pe.posAtEnd}else return pe.localPosFromDOM(V,se)+pe.posAtStart}function posAtCoordsImprecise(o,e,a,l,u){let f=Math.round((l-e.left)*o.defaultCharacterWidth);if(o.lineWrapping&&a.height>o.defaultLineHeight*1.5){let p=o.viewState.heightOracle.textHeight,g=Math.floor((u-a.top-(o.defaultLineHeight-p)*.5)/p);f+=g*o.viewState.heightOracle.lineLength}let d=o.state.sliceDoc(a.from,a.to);return a.from+findColumn(d,f,o.state.tabSize)}function isSuspiciousSafariCaretResult(o,e,a){let l;if(o.nodeType!=3||e!=(l=o.nodeValue.length))return!1;for(let u=o.nextSibling;u;u=u.nextSibling)if(u.nodeType!=1||u.nodeName!="BR")return!1;return textRange(o,l-1,l).getBoundingClientRect().left>a}function isSuspiciousChromeCaretResult(o,e,a){if(e!=0)return!1;for(let u=o;;){let f=u.parentNode;if(!f||f.nodeType!=1||f.firstChild!=u)return!1;if(f.classList.contains("cm-line"))break;u=f}let l=o.nodeType==1?o.getBoundingClientRect():textRange(o,0,Math.max(o.nodeValue.length,1)).getBoundingClientRect();return a-l.left>5}function blockAt(o,e){let a=o.lineBlockAt(e);if(Array.isArray(a.type)){for(let l of a.type)if(l.to>e||l.to==e&&(l.to==a.to||l.type==BlockType.Text))return l}return a}function moveToLineBoundary(o,e,a,l){let u=blockAt(o,e.head),f=!l||u.type!=BlockType.Text||!(o.lineWrapping||u.widgetLineBreaks)?null:o.coordsAtPos(e.assoc<0&&e.head>u.from?e.head-1:e.head);if(f){let d=o.dom.getBoundingClientRect(),p=o.textDirectionAt(u.from),g=o.posAtCoords({x:a==(p==Direction.LTR)?d.right-1:d.left+1,y:(f.top+f.bottom)/2});if(g!=null)return EditorSelection.cursor(g,a?-1:1)}return EditorSelection.cursor(a?u.to:u.from,a?-1:1)}function moveByChar(o,e,a,l){let u=o.state.doc.lineAt(e.head),f=o.bidiSpans(u),d=o.textDirectionAt(u.from);for(let p=e,g=null;;){let b=moveVisually(u,f,d,p,a),O=movedOver;if(!b){if(u.number==(a?o.state.doc.lines:1))return p;O=`
`,u=o.state.doc.line(u.number+(a?1:-1)),f=o.bidiSpans(u),b=o.visualLineSide(u,!a)}if(g){if(!g(O))return p}else{if(!l)return b;g=l(O)}p=b}}function byGroup(o,e,a){let l=o.state.charCategorizer(e),u=l(a);return f=>{let d=l(f);return u==CharCategory.Space&&(u=d),u==d}}function moveVertically(o,e,a,l){let u=e.head,f=a?1:-1;if(u==(a?o.state.doc.length:0))return EditorSelection.cursor(u,e.assoc);let d=e.goalColumn,p,g=o.contentDOM.getBoundingClientRect(),b=o.coordsAtPos(u,e.assoc||-1),O=o.documentTop;if(b)d==null&&(d=b.left-g.left),p=f<0?b.top:b.bottom;else{let M=o.viewState.lineBlockAt(u);d==null&&(d=Math.min(g.right-g.left,o.defaultCharacterWidth*(u-M.from))),p=(f<0?M.top:M.bottom)+O}let A=g.left+d,k=l??o.viewState.heightOracle.textHeight>>1;for(let M=0;;M+=10){let B=p+(k+M)*f,N=posAtCoords(o,{x:A,y:B},!1,f);if(B<g.top||B>g.bottom||(f<0?N<u:N>u)){let L=o.docView.coordsForChar(N),V=!L||B<L.top?-1:1;return EditorSelection.cursor(N,V,void 0,d)}}}function skipAtomicRanges(o,e,a){for(;;){let l=0;for(let u of o)u.between(e-1,e+1,(f,d,p)=>{if(e>f&&e<d){let g=l||a||(e-f<d-e?-1:1);e=g<0?f:d,l=g}});if(!l)return e}}function skipAtoms(o,e,a){let l=skipAtomicRanges(o.state.facet(atomicRanges).map(u=>u(o)),a.from,e.head>a.from?-1:1);return l==a.from?a:EditorSelection.cursor(l,l<a.from?1:-1)}class InputState{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(e.contentDOM.ownerDocument)}handleEvent(e){!eventBelongsToEditor(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,a){let l=this.handlers[e];if(l){for(let u of l.observers)u(this.view,a);for(let u of l.handlers){if(a.defaultPrevented)break;if(u(this.view,a)){a.preventDefault();break}}}}ensureHandlers(e){let a=computeHandlers(e),l=this.handlers,u=this.view.contentDOM;for(let f in a)if(f!="scroll"){let d=!a[f].handlers.length,p=l[f];p&&d!=!p.handlers.length&&(u.removeEventListener(f,this.handleEvent),p=null),p||u.addEventListener(f,this.handleEvent,{passive:d})}for(let f in l)f!="scroll"&&!a[f]&&u.removeEventListener(f,this.handleEvent);this.handlers=a}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&modifierCodes.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),browser.android&&browser.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let a;return browser.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((a=PendingKeys.find(l=>l.keyCode==e.keyCode))&&!e.ctrlKey||EmacsyPendingKeys.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=a||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(o,e){return(a,l)=>{try{return e.call(o,l,a)}catch(u){logException(a.state,u)}}}function computeHandlers(o){let e=Object.create(null);function a(l){return e[l]||(e[l]={observers:[],handlers:[]})}for(let l of o){let u=l.spec;if(u&&u.domEventHandlers)for(let f in u.domEventHandlers){let d=u.domEventHandlers[f];d&&a(f).handlers.push(bindHandler(l.value,d))}if(u&&u.domEventObservers)for(let f in u.domEventObservers){let d=u.domEventObservers[f];d&&a(f).observers.push(bindHandler(l.value,d))}}for(let l in handlers)a(l).handlers.push(handlers[l]);for(let l in observers)a(l).observers.push(observers[l]);return e}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(o){return Math.max(0,o)*.7+8}function dist$2(o,e){return Math.max(Math.abs(o.clientX-e.clientX),Math.abs(o.clientY-e.clientY))}class MouseSelection{constructor(e,a,l,u){this.view=e,this.startEvent=a,this.style=l,this.mustSelect=u,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=a,this.scrollParent=scrollableParent(e.contentDOM),this.atoms=e.state.facet(atomicRanges).map(d=>d(e));let f=e.contentDOM.ownerDocument;f.addEventListener("mousemove",this.move=this.move.bind(this)),f.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,a),this.dragging=isInPrimarySelection(e,a)&&getClickType(a)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var a;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist$2(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let l=0,u=0,f=((a=this.scrollParent)===null||a===void 0?void 0:a.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},d=getScrollMargins(this.view);e.clientX-d.left<=f.left+dragScrollMargin?l=-dragScrollSpeed(f.left-e.clientX):e.clientX+d.right>=f.right-dragScrollMargin&&(l=dragScrollSpeed(e.clientX-f.right)),e.clientY-d.top<=f.top+dragScrollMargin?u=-dragScrollSpeed(f.top-e.clientY):e.clientY+d.bottom>=f.bottom-dragScrollMargin&&(u=dragScrollSpeed(e.clientY-f.bottom)),this.setScrollSpeed(l,u)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,a){this.scrollSpeed={x:e,y:a},e||a?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let a=null;for(let l=0;l<e.ranges.length;l++){let u=e.ranges[l],f=null;if(u.empty){let d=skipAtomicRanges(this.atoms,u.from,0);d!=u.from&&(f=EditorSelection.cursor(d,-1))}else{let d=skipAtomicRanges(this.atoms,u.from,-1),p=skipAtomicRanges(this.atoms,u.to,1);(d!=u.from||p!=u.to)&&(f=EditorSelection.range(u.from==u.anchor?d:p,u.from==u.head?d:p))}f&&(a||(a=e.ranges.slice()),a[l]=f)}return a?EditorSelection.create(a,e.mainIndex):e}select(e){let{view:a}=this,l=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!l.eq(a.state.selection,this.dragging===!1))&&this.view.dispatch({selection:l,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(o,e){let a=o.state.facet(clickAddsSelectionRange);return a.length?a[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(o,e){let a=o.state.facet(dragMovesSelection$1);return a.length?a[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(o,e){let{main:a}=o.state.selection;if(a.empty)return!1;let l=getSelection(o.root);if(!l||l.rangeCount==0)return!0;let u=l.getRangeAt(0).getClientRects();for(let f=0;f<u.length;f++){let d=u[f];if(d.left<=e.clientX&&d.right>=e.clientX&&d.top<=e.clientY&&d.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let a=e.target,l;a!=o.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(l=ContentView.get(a))&&l.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(o){let e=o.dom.parentNode;if(!e)return;let a=e.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{o.focus(),a.remove(),doPaste(o,a.value)},50)}function doPaste(o,e){let{state:a}=o,l,u=1,f=a.toText(e),d=f.lines==a.selection.ranges.length;if(lastLinewiseCopy!=null&&a.selection.ranges.every(g=>g.empty)&&lastLinewiseCopy==f.toString()){let g=-1;l=a.changeByRange(b=>{let O=a.doc.lineAt(b.from);if(O.from==g)return{range:b};g=O.from;let A=a.toText((d?f.line(u++).text:e)+a.lineBreak);return{changes:{from:O.from,insert:A},range:EditorSelection.cursor(b.from+A.length)}})}else d?l=a.changeByRange(g=>{let b=f.line(u++);return{changes:{from:g.from,to:g.to,insert:b.text},range:EditorSelection.cursor(g.from+b.length)}}):l=a.replaceSelection(f);o.dispatch(l,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=o=>{o.inputState.lastScrollTop=o.scrollDOM.scrollTop,o.inputState.lastScrollLeft=o.scrollDOM.scrollLeft},handlers.keydown=(o,e)=>(o.inputState.setSelectionOrigin("select"),e.keyCode==27&&(o.inputState.lastEscPress=Date.now()),!1),observers.touchstart=(o,e)=>{o.inputState.lastTouchTime=Date.now(),o.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=o=>{o.inputState.setSelectionOrigin("select.pointer")},handlers.mousedown=(o,e)=>{if(o.observer.flush(),o.inputState.lastTouchTime>Date.now()-2e3)return!1;let a=null;for(let l of o.state.facet(mouseSelectionStyle))if(a=l(o,e),a)break;if(!a&&e.button==0&&(a=basicMouseSelection(o,e)),a){let l=!o.hasFocus;o.inputState.startMouseSelection(new MouseSelection(o,e,a,l)),l&&o.observer.ignore(()=>focusPreventScroll(o.contentDOM));let u=o.inputState.mouseSelection;if(u)return u.start(e),u.dragging===!1}return!1};function rangeForClick(o,e,a,l){if(l==1)return EditorSelection.cursor(e,a);if(l==2)return groupAt(o.state,e,a);{let u=LineView.find(o.docView,e),f=o.state.doc.lineAt(u?u.posAtEnd:e),d=u?u.posAtStart:f.from,p=u?u.posAtEnd:f.to;return p<o.state.doc.length&&p==f.to&&p++,EditorSelection.range(d,p)}}let insideY=(o,e)=>o>=e.top&&o<=e.bottom,inside=(o,e,a)=>insideY(e,a)&&o>=a.left&&o<=a.right;function findPositionSide(o,e,a,l){let u=LineView.find(o.docView,e);if(!u)return 1;let f=e-u.posAtStart;if(f==0)return 1;if(f==u.length)return-1;let d=u.coordsAt(f,-1);if(d&&inside(a,l,d))return-1;let p=u.coordsAt(f,1);return p&&inside(a,l,p)?1:d&&insideY(l,d)?-1:1}function queryPos(o,e){let a=o.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:a,bias:findPositionSide(o,a,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(o){if(!BadMouseDetail)return o.detail;let e=lastMouseDown,a=lastMouseDownTime;return lastMouseDown=o,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||a>Date.now()-400&&Math.abs(e.clientX-o.clientX)<2&&Math.abs(e.clientY-o.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(o,e){let a=queryPos(o,e),l=getClickType(e),u=o.state.selection;return{update(f){f.docChanged&&(a.pos=f.changes.mapPos(a.pos),u=u.map(f.changes))},get(f,d,p){let g=queryPos(o,f),b,O=rangeForClick(o,g.pos,g.bias,l);if(a.pos!=g.pos&&!d){let A=rangeForClick(o,a.pos,a.bias,l),k=Math.min(A.from,O.from),M=Math.max(A.to,O.to);O=k<O.from?EditorSelection.range(k,M):EditorSelection.range(M,k)}return d?u.replaceRange(u.main.extend(O.from,O.to)):p&&l==1&&u.ranges.length>1&&(b=removeRangeAround(u,g.pos))?b:p?u.addRange(O):EditorSelection.create([O])}}}function removeRangeAround(o,e){for(let a=0;a<o.ranges.length;a++){let{from:l,to:u}=o.ranges[a];if(l<=e&&u>=e)return EditorSelection.create(o.ranges.slice(0,a).concat(o.ranges.slice(a+1)),o.mainIndex==a?0:o.mainIndex-(o.mainIndex>a?1:0))}return null}handlers.dragstart=(o,e)=>{let{selection:{main:a}}=o.state;if(e.target.draggable){let u=o.docView.nearest(e.target);if(u&&u.isWidget){let f=u.posAtStart,d=f+u.length;(f>=a.to||d<=a.from)&&(a=EditorSelection.range(f,d))}}let{inputState:l}=o;return l.mouseSelection&&(l.mouseSelection.dragging=!0),l.draggedContent=a,e.dataTransfer&&(e.dataTransfer.setData("Text",o.state.sliceDoc(a.from,a.to)),e.dataTransfer.effectAllowed="copyMove"),!1},handlers.dragend=o=>(o.inputState.draggedContent=null,!1);function dropText(o,e,a,l){if(!a)return;let u=o.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:f}=o.inputState,d=l&&f&&dragMovesSelection(o,e)?{from:f.from,to:f.to}:null,p={from:u,insert:a},g=o.state.changes(d?[d,p]:p);o.focus(),o.dispatch({changes:g,selection:{anchor:g.mapPos(u,-1),head:g.mapPos(u,1)},userEvent:d?"move.drop":"input.drop"}),o.inputState.draggedContent=null}handlers.drop=(o,e)=>{if(!e.dataTransfer)return!1;if(o.state.readOnly)return!0;let a=e.dataTransfer.files;if(a&&a.length){let l=Array(a.length),u=0,f=()=>{++u==a.length&&dropText(o,e,l.filter(d=>d!=null).join(o.state.lineBreak),!1)};for(let d=0;d<a.length;d++){let p=new FileReader;p.onerror=f,p.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(p.result)||(l[d]=p.result),f()},p.readAsText(a[d])}return!0}else{let l=e.dataTransfer.getData("Text");if(l)return dropText(o,e,l,!0),!0}return!1},handlers.paste=(o,e)=>{if(o.state.readOnly)return!0;o.observer.flush();let a=brokenClipboardAPI?null:e.clipboardData;return a?(doPaste(o,a.getData("text/plain")||a.getData("text/uri-text")),!0):(capturePaste(o),!1)};function captureCopy(o,e){let a=o.dom.parentNode;if(!a)return;let l=a.appendChild(document.createElement("textarea"));l.style.cssText="position: fixed; left: -10000px; top: 10px",l.value=e,l.focus(),l.selectionEnd=e.length,l.selectionStart=0,setTimeout(()=>{l.remove(),o.focus()},50)}function copiedRange(o){let e=[],a=[],l=!1;for(let u of o.selection.ranges)u.empty||(e.push(o.sliceDoc(u.from,u.to)),a.push(u));if(!e.length){let u=-1;for(let{from:f}of o.selection.ranges){let d=o.doc.lineAt(f);d.number>u&&(e.push(d.text),a.push({from:d.from,to:Math.min(o.doc.length,d.to+1)})),u=d.number}l=!0}return{text:e.join(o.lineBreak),ranges:a,linewise:l}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(o,e)=>{let{text:a,ranges:l,linewise:u}=copiedRange(o.state);if(!a&&!u)return!1;lastLinewiseCopy=u?a:null,e.type=="cut"&&!o.state.readOnly&&o.dispatch({changes:l,scrollIntoView:!0,userEvent:"delete.cut"});let f=brokenClipboardAPI?null:e.clipboardData;return f?(f.clearData(),f.setData("text/plain",a),!0):(captureCopy(o,a),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(o,e){let a=[];for(let l of o.facet(focusChangeEffect)){let u=l(o,e);u&&a.push(u)}return a?o.update({effects:a,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(o){setTimeout(()=>{let e=o.hasFocus;if(e!=o.inputState.notifiedFocused){let a=focusChangeTransaction(o.state,e);a?o.dispatch(a):o.update([])}},10)}observers.focus=o=>{o.inputState.lastFocusTime=Date.now(),!o.scrollDOM.scrollTop&&(o.inputState.lastScrollTop||o.inputState.lastScrollLeft)&&(o.scrollDOM.scrollTop=o.inputState.lastScrollTop,o.scrollDOM.scrollLeft=o.inputState.lastScrollLeft),updateForFocusChange(o)},observers.blur=o=>{o.observer.clearSelectionRange(),updateForFocusChange(o)},observers.compositionstart=observers.compositionupdate=o=>{o.inputState.compositionFirstChange==null&&(o.inputState.compositionFirstChange=!0),o.inputState.composing<0&&(o.inputState.composing=0)},observers.compositionend=o=>{o.inputState.composing=-1,o.inputState.compositionEndedAt=Date.now(),o.inputState.compositionPendingKey=!0,o.inputState.compositionPendingChange=o.observer.pendingRecords().length>0,o.inputState.compositionFirstChange=null,browser.chrome&&browser.android?o.observer.flushSoon():o.inputState.compositionPendingChange?Promise.resolve().then(()=>o.observer.flush()):setTimeout(()=>{o.inputState.composing<0&&o.docView.hasComposition&&o.update([])},50)},observers.contextmenu=o=>{o.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(o,e)=>{var a;let l;if(browser.chrome&&browser.android&&(l=PendingKeys.find(u=>u.inputType==e.inputType))&&(o.observer.delayAndroidKey(l.key,l.keyCode),l.key=="Backspace"||l.key=="Delete")){let u=((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0;setTimeout(()=>{var f;(((f=window.visualViewport)===null||f===void 0?void 0:f.height)||0)>u+10&&o.hasFocus&&(o.contentDOM.blur(),o.focus())},100)}return!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(o){appliedFirefoxHack.has(o)||(appliedFirefoxHack.add(o),o.addEventListener("copy",()=>{}),o.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,a){let l=this.doc.lineAt(a).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(l+=Math.max(0,Math.ceil((a-e-l*this.lineLength*.5)/this.lineLength))),this.lineHeight*l}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let a=!1;for(let l=0;l<e.length;l++){let u=e[l];u<0?l++:this.heightSamples[Math.floor(u*10)]||(a=!0,this.heightSamples[Math.floor(u*10)]=!0)}return a}refresh(e,a,l,u,f,d){let p=wrappingWhiteSpace.indexOf(e)>-1,g=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=p;if(this.lineWrapping=p,this.lineHeight=a,this.charWidth=l,this.textHeight=u,this.lineLength=f,g){this.heightSamples={};for(let b=0;b<d.length;b++){let O=d[b];O<0?b++:this.heightSamples[Math.floor(O*10)]=!0}}return g}}class MeasuredHeights{constructor(e,a){this.from=e,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,a,l,u,f){this.from=e,this.length=a,this.top=l,this.height=u,this._content=f}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let a=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,a)}}var QueryType$1=function(o){return o[o.ByPos=0]="ByPos",o[o.ByHeight=1]="ByHeight",o[o.ByPosNoHeight=2]="ByPosNoHeight",o}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,a,l=2){this.length=e,this.height=a,this.flags=l}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,a){this.height!=a&&(Math.abs(this.height-a)>Epsilon&&(e.heightChanged=!0),this.height=a)}replace(e,a,l){return HeightMap.of(l)}decomposeLeft(e,a){a.push(this)}decomposeRight(e,a){a.push(this)}applyChanges(e,a,l,u){let f=this,d=l.doc;for(let p=u.length-1;p>=0;p--){let{fromA:g,toA:b,fromB:O,toB:A}=u[p],k=f.lineAt(g,QueryType$1.ByPosNoHeight,l.setDoc(a),0,0),M=k.to>=b?k:f.lineAt(b,QueryType$1.ByPosNoHeight,l,0,0);for(A+=M.to-b,b=M.to;p>0&&k.from<=u[p-1].toA;)g=u[p-1].fromA,O=u[p-1].fromB,p--,g<k.from&&(k=f.lineAt(g,QueryType$1.ByPosNoHeight,l,0,0));O+=k.from-g,g=k.from;let B=NodeBuilder.build(l.setDoc(d),e,O,A);f=f.replace(g,b,B)}return f.updateHeight(l,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let a=0,l=e.length,u=0,f=0;for(;;)if(a==l)if(u>f*2){let p=e[a-1];p.break?e.splice(--a,1,p.left,null,p.right):e.splice(--a,1,p.left,p.right),l+=1+p.break,u-=p.size}else if(f>u*2){let p=e[l];p.break?e.splice(l,1,p.left,null,p.right):e.splice(l,1,p.left,p.right),l+=2+p.break,f-=p.size}else break;else if(u<f){let p=e[a++];p&&(u+=p.size)}else{let p=e[--l];p&&(f+=p.size)}let d=0;return e[a-1]==null?(d=1,a--):e[a]==null&&(d=1,l++),new HeightMapBranch(HeightMap.of(e.slice(0,a)),d,HeightMap.of(e.slice(l)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,a,l){super(e,a),this.deco=l}blockAt(e,a,l,u){return new BlockInfo(u,this.length,l,this.height,this.deco||0)}lineAt(e,a,l,u,f){return this.blockAt(0,l,u,f)}forEachLine(e,a,l,u,f,d){e<=f+this.length&&a>=f&&d(this.blockAt(0,l,u,f))}updateHeight(e,a=0,l=!1,u){return u&&u.from<=a&&u.more&&this.setHeight(e,u.heights[u.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,a){super(e,a,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,a,l,u){return new BlockInfo(u,this.length,l,this.height,this.breaks)}replace(e,a,l){let u=l[0];return l.length==1&&(u instanceof HeightMapText||u instanceof HeightMapGap&&u.flags&4)&&Math.abs(this.length-u.length)<10?(u instanceof HeightMapGap?u=new HeightMapText(u.length,this.height):u.height=this.height,this.outdated||(u.outdated=!1),u):HeightMap.of(l)}updateHeight(e,a=0,l=!1,u){return u&&u.from<=a&&u.more?this.setHeight(e,u.heights[u.index++]):(l||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,a){let l=e.doc.lineAt(a).number,u=e.doc.lineAt(a+this.length).number,f=u-l+1,d,p=0;if(e.lineWrapping){let g=Math.min(this.height,e.lineHeight*f);d=g/f,this.length>f+1&&(p=(this.height-g)/(this.length-f-1))}else d=this.height/f;return{firstLine:l,lastLine:u,perLine:d,perChar:p}}blockAt(e,a,l,u){let{firstLine:f,lastLine:d,perLine:p,perChar:g}=this.heightMetrics(a,u);if(a.lineWrapping){let b=u+Math.round(Math.max(0,Math.min(1,(e-l)/this.height))*this.length),O=a.doc.lineAt(b),A=p+O.length*g,k=Math.max(l,e-A/2);return new BlockInfo(O.from,O.length,k,A,0)}else{let b=Math.max(0,Math.min(d-f,Math.floor((e-l)/p))),{from:O,length:A}=a.doc.line(f+b);return new BlockInfo(O,A,l+p*b,p,0)}}lineAt(e,a,l,u,f){if(a==QueryType$1.ByHeight)return this.blockAt(e,l,u,f);if(a==QueryType$1.ByPosNoHeight){let{from:M,to:B}=l.doc.lineAt(e);return new BlockInfo(M,B-M,0,0,0)}let{firstLine:d,perLine:p,perChar:g}=this.heightMetrics(l,f),b=l.doc.lineAt(e),O=p+b.length*g,A=b.number-d,k=u+p*A+g*(b.from-f-A);return new BlockInfo(b.from,b.length,Math.max(u,Math.min(k,u+this.height-O)),O,0)}forEachLine(e,a,l,u,f,d){e=Math.max(e,f),a=Math.min(a,f+this.length);let{firstLine:p,perLine:g,perChar:b}=this.heightMetrics(l,f);for(let O=e,A=u;O<=a;){let k=l.doc.lineAt(O);if(O==e){let B=k.number-p;A+=g*B+b*(e-f-B)}let M=g+b*k.length;d(new BlockInfo(k.from,k.length,A,M,0)),A+=M,O=k.to+1}}replace(e,a,l){let u=this.length-a;if(u>0){let f=l[l.length-1];f instanceof HeightMapGap?l[l.length-1]=new HeightMapGap(f.length+u):l.push(null,new HeightMapGap(u-1))}if(e>0){let f=l[0];f instanceof HeightMapGap?l[0]=new HeightMapGap(e+f.length):l.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(l)}decomposeLeft(e,a){a.push(new HeightMapGap(e-1),null)}decomposeRight(e,a){a.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,a=0,l=!1,u){let f=a+this.length;if(u&&u.from<=a+this.length&&u.more){let d=[],p=Math.max(a,u.from),g=-1;for(u.from>a&&d.push(new HeightMapGap(u.from-a-1).updateHeight(e,a));p<=f&&u.more;){let O=e.doc.lineAt(p).length;d.length&&d.push(null);let A=u.heights[u.index++];g==-1?g=A:Math.abs(A-g)>=Epsilon&&(g=-2);let k=new HeightMapText(O,A);k.outdated=!1,d.push(k),p+=O+1}p<=f&&d.push(null,new HeightMapGap(f-p).updateHeight(e,p));let b=HeightMap.of(d);return(g<0||Math.abs(b.height-this.height)>=Epsilon||Math.abs(g-this.heightMetrics(e,a).perLine)>=Epsilon)&&(e.heightChanged=!0),b}else(l||this.outdated)&&(this.setHeight(e,e.heightForGap(a,a+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,a,l){super(e.length+a+l.length,e.height+l.height,a|(e.outdated||l.outdated?2:0)),this.left=e,this.right=l,this.size=e.size+l.size}get break(){return this.flags&1}blockAt(e,a,l,u){let f=l+this.left.height;return e<f?this.left.blockAt(e,a,l,u):this.right.blockAt(e,a,f,u+this.left.length+this.break)}lineAt(e,a,l,u,f){let d=u+this.left.height,p=f+this.left.length+this.break,g=a==QueryType$1.ByHeight?e<d:e<p,b=g?this.left.lineAt(e,a,l,u,f):this.right.lineAt(e,a,l,d,p);if(this.break||(g?b.to<p:b.from>p))return b;let O=a==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return g?b.join(this.right.lineAt(p,O,l,d,p)):this.left.lineAt(p,O,l,u,f).join(b)}forEachLine(e,a,l,u,f,d){let p=u+this.left.height,g=f+this.left.length+this.break;if(this.break)e<g&&this.left.forEachLine(e,a,l,u,f,d),a>=g&&this.right.forEachLine(e,a,l,p,g,d);else{let b=this.lineAt(g,QueryType$1.ByPos,l,u,f);e<b.from&&this.left.forEachLine(e,b.from-1,l,u,f,d),b.to>=e&&b.from<=a&&d(b),a>b.to&&this.right.forEachLine(b.to+1,a,l,p,g,d)}}replace(e,a,l){let u=this.left.length+this.break;if(a<u)return this.balanced(this.left.replace(e,a,l),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-u,a-u,l));let f=[];e>0&&this.decomposeLeft(e,f);let d=f.length;for(let p of l)f.push(p);if(e>0&&mergeGaps(f,d-1),a<this.length){let p=f.length;this.decomposeRight(a,f),mergeGaps(f,p)}return HeightMap.of(f)}decomposeLeft(e,a){let l=this.left.length;if(e<=l)return this.left.decomposeLeft(e,a);a.push(this.left),this.break&&(l++,e>=l&&a.push(null)),e>l&&this.right.decomposeLeft(e-l,a)}decomposeRight(e,a){let l=this.left.length,u=l+this.break;if(e>=u)return this.right.decomposeRight(e-u,a);e<l&&this.left.decomposeRight(e,a),this.break&&e<u&&a.push(null),a.push(this.right)}balanced(e,a){return e.size>2*a.size||a.size>2*e.size?HeightMap.of(this.break?[e,null,a]:[e,a]):(this.left=e,this.right=a,this.height=e.height+a.height,this.outdated=e.outdated||a.outdated,this.size=e.size+a.size,this.length=e.length+this.break+a.length,this)}updateHeight(e,a=0,l=!1,u){let{left:f,right:d}=this,p=a+f.length+this.break,g=null;return u&&u.from<=a+f.length&&u.more?g=f=f.updateHeight(e,a,l,u):f.updateHeight(e,a,l),u&&u.from<=p+d.length&&u.more?g=d=d.updateHeight(e,p,l,u):d.updateHeight(e,p,l),g?this.balanced(f,d):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(o,e){let a,l;o[e]==null&&(a=o[e-1])instanceof HeightMapGap&&(l=o[e+1])instanceof HeightMapGap&&o.splice(e-1,3,new HeightMapGap(a.length+1+l.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,a){this.pos=e,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,a){if(this.lineStart>-1){let l=Math.min(a,this.lineEnd),u=this.nodes[this.nodes.length-1];u instanceof HeightMapText?u.length+=l-this.pos:(l>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(l-this.pos,-1)),this.writtenTo=l,a>l&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(e,a,l){if(e<a||l.heightRelevant){let u=l.widget?l.widget.estimatedHeight:0,f=l.widget?l.widget.lineBreaks:0;u<0&&(u=this.oracle.lineHeight);let d=a-e;l.block?this.addBlock(new HeightMapBlock(d,u,l)):(d||f||u>=relevantWidgetHeight)&&this.addLineDeco(u,f,d)}else a>e&&this.span(e,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=a,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,a){let l=new HeightMapGap(a-e);return this.oracle.doc.lineAt(e).to==a&&(l.flags|=4),l}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let a=new HeightMapText(0,-1);return this.nodes.push(a),a}addBlock(e){this.enterLine();let a=e.deco;a&&a.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,a&&a.endSide>0&&(this.covering=e)}addLineDeco(e,a,l){let u=this.ensureLine();u.length+=l,u.collapsed+=l,u.widgetHeight=Math.max(u.widgetHeight,e),u.breaks+=a,this.writtenTo=this.pos=this.pos+l}finish(e){let a=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(a instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||a==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let l=e;for(let u of this.nodes)u instanceof HeightMapText&&u.updateHeight(this.oracle,l),l+=u?u.length:1;return this.nodes}static build(e,a,l,u){let f=new NodeBuilder(l,e);return RangeSet.spans(a,l,u,f,0),f.finish(l)}}function heightRelevantDecoChanges(o,e,a){let l=new DecorationComparator;return RangeSet.compare(o,e,a,l,0),l.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,a,l,u){(e<a||l&&l.heightRelevant||u&&u.heightRelevant)&&addRange(e,a,this.changes,5)}}function visiblePixelRange(o,e){let a=o.getBoundingClientRect(),l=o.ownerDocument,u=l.defaultView||window,f=Math.max(0,a.left),d=Math.min(u.innerWidth,a.right),p=Math.max(0,a.top),g=Math.min(u.innerHeight,a.bottom);for(let b=o.parentNode;b&&b!=l.body;)if(b.nodeType==1){let O=b,A=window.getComputedStyle(O);if((O.scrollHeight>O.clientHeight||O.scrollWidth>O.clientWidth)&&A.overflow!="visible"){let k=O.getBoundingClientRect();f=Math.max(f,k.left),d=Math.min(d,k.right),p=Math.max(p,k.top),g=b==o.parentNode?k.bottom:Math.min(g,k.bottom)}b=A.position=="absolute"||A.position=="fixed"?O.offsetParent:O.parentNode}else if(b.nodeType==11)b=b.host;else break;return{left:f-a.left,right:Math.max(f,d)-a.left,top:p-(a.top+e),bottom:Math.max(p,g)-(a.top+e)}}function fullPixelRange(o,e){let a=o.getBoundingClientRect();return{left:0,right:a.right-a.left,top:e,bottom:a.bottom-(a.top+e)}}class LineGap{constructor(e,a,l){this.from=e,this.to=a,this.size=l}static same(e,a){if(e.length!=a.length)return!1;for(let l=0;l<e.length;l++){let u=e[l],f=a[l];if(u.from!=f.from||u.to!=f.to||u.size!=f.size)return!1}return!0}draw(e,a){return Decoration.replace({widget:new LineGapWidget(this.size*(a?e.scaleY:e.scaleX),a)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,a){super(),this.size=e,this.vertical=a}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let a=e.facet(contentAttributes).some(l=>typeof l!="function"&&l.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(a),this.stateDeco=e.facet(decorations).filter(l=>typeof l!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(l=>l.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:a}=this.state.selection;for(let l=0;l<=1;l++){let u=l?a.head:a.anchor;if(!e.some(({from:f,to:d})=>u>=f&&u<=d)){let{from:f,to:d}=this.lineBlockAt(u);e.push(new Viewport(f,d))}}this.viewports=e.sort((l,u)=>l.from-u.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:scaleBlock(e,this.scaler))})}update(e,a=null){this.state=e.state;let l=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(O=>typeof O!="function");let u=e.changedRanges,f=ChangedRange.extendWithRanges(u,heightRelevantDecoChanges(l,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),d=this.heightMap.height,p=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),f),this.heightMap.height!=d&&(e.flags|=2),p?(this.scrollAnchorPos=e.changes.mapPos(p.from,-1),this.scrollAnchorHeight=p.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let g=f.length?this.mapViewport(this.viewport,e.changes):this.viewport;(a&&(a.range.head<g.from||a.range.head>g.to)||!this.viewportIsAppropriate(g))&&(g=this.getViewport(0,a));let b=!e.changes.empty||e.flags&2||g.from!=this.viewport.from||g.to!=this.viewport.to;this.viewport=g,this.updateForViewport(),b&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let a=e.contentDOM,l=window.getComputedStyle(a),u=this.heightOracle,f=l.whiteSpace;this.defaultTextDirection=l.direction=="rtl"?Direction.RTL:Direction.LTR;let d=this.heightOracle.mustRefreshForWrapping(f),p=a.getBoundingClientRect(),g=d||this.mustMeasureContent||this.contentDOMHeight!=p.height;this.contentDOMHeight=p.height,this.mustMeasureContent=!1;let b=0,O=0;if(p.width&&p.height){let{scaleX:re,scaleY:z}=getScale(a,p);(this.scaleX!=re||this.scaleY!=z)&&(this.scaleX=re,this.scaleY=z,b|=8,d=g=!0)}let A=(parseInt(l.paddingTop)||0)*this.scaleY,k=(parseInt(l.paddingBottom)||0)*this.scaleY;(this.paddingTop!=A||this.paddingBottom!=k)&&(this.paddingTop=A,this.paddingBottom=k,b|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(u.lineWrapping&&(g=!0),this.editorWidth=e.scrollDOM.clientWidth,b|=8);let M=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=M&&(this.scrollAnchorHeight=-1,this.scrollTop=M),this.scrolledToBottom=isScrolledToBottom(e.scrollDOM);let B=(this.printing?fullPixelRange:visiblePixelRange)(a,this.paddingTop),N=B.top-this.pixelViewport.top,L=B.bottom-this.pixelViewport.bottom;this.pixelViewport=B;let V=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(V!=this.inView&&(this.inView=V,V&&(g=!0)),!this.inView&&!this.scrollTarget)return 0;let se=p.width;if((this.contentDOMWidth!=se||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=p.width,this.editorHeight=e.scrollDOM.clientHeight,b|=8),g){let re=e.docView.measureVisibleLineHeights(this.viewport);if(u.mustRefreshForHeights(re)&&(d=!0),d||u.lineWrapping&&Math.abs(se-this.contentDOMWidth)>u.charWidth){let{lineHeight:z,charWidth:oe,textHeight:de}=e.docView.measureTextSize();d=z>0&&u.refresh(f,z,oe,de,se/oe,re),d&&(e.docView.minWidth=0,b|=8)}N>0&&L>0?O=Math.max(N,L):N<0&&L<0&&(O=Math.min(N,L)),u.heightChanged=!1;for(let z of this.viewports){let oe=z.from==this.viewport.from?re:e.docView.measureVisibleLineHeights(z);this.heightMap=(d?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(u,0,d,new MeasuredHeights(z.from,oe))}u.heightChanged&&(b|=2)}let pe=!this.viewportIsAppropriate(this.viewport,O)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return pe&&(this.viewport=this.getViewport(O,this.scrollTarget)),this.updateForViewport(),(b&2||pe)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(d?[]:this.lineGaps,e)),b|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),b}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,a){let l=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),u=this.heightMap,f=this.heightOracle,{visibleTop:d,visibleBottom:p}=this,g=new Viewport(u.lineAt(d-l*1e3,QueryType$1.ByHeight,f,0,0).from,u.lineAt(p+(1-l)*1e3,QueryType$1.ByHeight,f,0,0).to);if(a){let{head:b}=a.range;if(b<g.from||b>g.to){let O=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),A=u.lineAt(b,QueryType$1.ByPos,f,0,0),k;a.y=="center"?k=(A.top+A.bottom)/2-O/2:a.y=="start"||a.y=="nearest"&&b<g.from?k=A.top:k=A.bottom-O,g=new Viewport(u.lineAt(k-500,QueryType$1.ByHeight,f,0,0).from,u.lineAt(k+O+500,QueryType$1.ByHeight,f,0,0).to)}}return g}mapViewport(e,a){let l=a.mapPos(e.from,-1),u=a.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(l,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(u,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:a},l=0){if(!this.inView)return!0;let{top:u}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:f}=this.heightMap.lineAt(a,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:d,visibleBottom:p}=this;return(e==0||u<=d-Math.max(10,Math.min(-l,250)))&&(a==this.state.doc.length||f>=p+Math.max(10,Math.min(l,250)))&&u>d-2e3&&f<p+2e3}mapLineGaps(e,a){if(!e.length||a.empty)return e;let l=[];for(let u of e)a.touchesRange(u.from,u.to)||l.push(new LineGap(a.mapPos(u.from),a.mapPos(u.to),u.size));return l}ensureLineGaps(e,a){let l=this.heightOracle.lineWrapping,u=l?1e4:2e3,f=u>>1,d=u<<1;if(this.defaultTextDirection!=Direction.LTR&&!l)return[];let p=[],g=(b,O,A,k)=>{if(O-b<f)return;let M=this.state.selection.main,B=[M.from];M.empty||B.push(M.to);for(let L of B)if(L>b&&L<O){g(b,L-10,A,k),g(L+10,O,A,k);return}let N=find(e,L=>L.from>=A.from&&L.to<=A.to&&Math.abs(L.from-b)<f&&Math.abs(L.to-O)<f&&!B.some(V=>L.from<V&&L.to>V));if(!N){if(O<A.to&&a&&l&&a.visibleRanges.some(L=>L.from<=O&&L.to>=O)){let L=a.moveToLineBoundary(EditorSelection.cursor(O),!1,!0).head;L>b&&(O=L)}N=new LineGap(b,O,this.gapSize(A,b,O,k))}p.push(N)};for(let b of this.viewportLines){if(b.length<d)continue;let O=lineStructure(b.from,b.to,this.stateDeco);if(O.total<d)continue;let A=this.scrollTarget?this.scrollTarget.range.head:null,k,M;if(l){let B=u/this.heightOracle.lineLength*this.heightOracle.lineHeight,N,L;if(A!=null){let V=findFraction(O,A),se=((this.visibleBottom-this.visibleTop)/2+B)/b.height;N=V-se,L=V+se}else N=(this.visibleTop-b.top-B)/b.height,L=(this.visibleBottom-b.top+B)/b.height;k=findPosition(O,N),M=findPosition(O,L)}else{let B=O.total*this.heightOracle.charWidth,N=u*this.heightOracle.charWidth,L,V;if(A!=null){let se=findFraction(O,A),pe=((this.pixelViewport.right-this.pixelViewport.left)/2+N)/B;L=se-pe,V=se+pe}else L=(this.pixelViewport.left-N)/B,V=(this.pixelViewport.right+N)/B;k=findPosition(O,L),M=findPosition(O,V)}k>b.from&&g(b.from,k,b,O),M<b.to&&g(M,b.to,b,O)}return p}gapSize(e,a,l,u){let f=findFraction(u,l)-findFraction(u,a);return this.heightOracle.lineWrapping?e.height*f:u.total*this.heightOracle.charWidth*f}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(a=>a.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let a=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(u,f){a.push({from:u,to:f})},point(){}},20);let l=a.length!=this.visibleRanges.length||this.visibleRanges.some((u,f)=>u.from!=a[f].from||u.to!=a[f].to);return this.visibleRanges=a,l?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(a=>a.from<=e&&a.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let a=this.lineBlockAtHeight(e+8);return a.from>=this.viewport.from||this.viewportLines[0].top-e>200?a:this.viewportLines[0]}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,a){this.from=e,this.to=a}}function lineStructure(o,e,a){let l=[],u=o,f=0;return RangeSet.spans(a,o,e,{span(){},point(d,p){d>u&&(l.push({from:u,to:d}),f+=d-u),u=p}},20),u<e&&(l.push({from:u,to:e}),f+=e-u),{total:f,ranges:l}}function findPosition({total:o,ranges:e},a){if(a<=0)return e[0].from;if(a>=1)return e[e.length-1].to;let l=Math.floor(o*a);for(let u=0;;u++){let{from:f,to:d}=e[u],p=d-f;if(l<=p)return f+l;l-=p}}function findFraction(o,e){let a=0;for(let{from:l,to:u}of o.ranges){if(e<=u){a+=e-l;break}a+=u-l}return a/o.total}function find(o,e){for(let a of o)if(e(a))return a}const IdScaler={toDOM(o){return o},fromDOM(o){return o},scale:1};class BigScaler{constructor(e,a,l){let u=0,f=0,d=0;this.viewports=l.map(({from:p,to:g})=>{let b=a.lineAt(p,QueryType$1.ByPos,e,0,0).top,O=a.lineAt(g,QueryType$1.ByPos,e,0,0).bottom;return u+=O-b,{from:p,to:g,top:b,bottom:O,domTop:0,domBottom:0}}),this.scale=(7e6-u)/(a.height-u);for(let p of this.viewports)p.domTop=d+(p.top-f)*this.scale,d=p.domBottom=p.domTop+(p.bottom-p.top),f=p.bottom}toDOM(e){for(let a=0,l=0,u=0;;a++){let f=a<this.viewports.length?this.viewports[a]:null;if(!f||e<f.top)return u+(e-l)*this.scale;if(e<=f.bottom)return f.domTop+(e-f.top);l=f.bottom,u=f.domBottom}}fromDOM(e){for(let a=0,l=0,u=0;;a++){let f=a<this.viewports.length?this.viewports[a]:null;if(!f||e<f.domTop)return l+(e-u)/this.scale;if(e<=f.domBottom)return f.top+(e-f.domTop);l=f.bottom,u=f.domBottom}}}function scaleBlock(o,e){if(e.scale==1)return o;let a=e.toDOM(o.top),l=e.toDOM(o.bottom);return new BlockInfo(o.from,o.length,a,l-a,Array.isArray(o._content)?o._content.map(u=>scaleBlock(u,e)):o._content)}const theme$1=Facet.define({combine:o=>o.join(" ")}),darkTheme=Facet.define({combine:o=>o.indexOf(!0)>-1}),baseThemeID=StyleModule$1.newName(),baseLightID=StyleModule$1.newName(),baseDarkID=StyleModule$1.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(o,e,a){return new StyleModule$1(e,{finish(l){return/&/.test(l)?l.replace(/&\w*/,u=>{if(u=="&")return o;if(!a||!a[u])throw new RangeError(`Unsupported selector: ${u}`);return a[u]}):o+" "+l}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),LineBreakPlaceholder="￿";class DOMReader{constructor(e,a){this.points=e,this.text="",this.lineSeparator=a.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,a){if(!e)return this;let l=e.parentNode;for(let u=e;;){this.findPointBefore(l,u);let f=this.text.length;this.readNode(u);let d=u.nextSibling;if(d==a)break;let p=ContentView.get(u),g=ContentView.get(d);(p&&g?p.breakAfter:(p?p.breakAfter:isBlockElement(u))||isBlockElement(d)&&(u.nodeName!="BR"||u.cmIgnore)&&this.text.length>f)&&this.lineBreak(),u=d}return this.findPointBefore(l,a),this}readTextNode(e){let a=e.nodeValue;for(let l of this.points)l.node==e&&(l.pos=this.text.length+Math.min(l.offset,a.length));for(let l=0,u=this.lineSeparator?null:/\r\n?|\n/g;;){let f=-1,d=1,p;if(this.lineSeparator?(f=a.indexOf(this.lineSeparator,l),d=this.lineSeparator.length):(p=u.exec(a))&&(f=p.index,d=p[0].length),this.append(a.slice(l,f<0?a.length:f)),f<0)break;if(this.lineBreak(),d>1)for(let g of this.points)g.node==e&&g.pos>this.text.length&&(g.pos-=d-1);l=f+d}}readNode(e){if(e.cmIgnore)return;let a=ContentView.get(e),l=a&&a.overrideDOMText;if(l!=null){this.findPointInside(e,l.length);for(let u=l.iter();!u.next().done;)u.lineBreak?this.lineBreak():this.append(u.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,a){for(let l of this.points)l.node==e&&e.childNodes[l.offset]==a&&(l.pos=this.text.length)}findPointInside(e,a){for(let l of this.points)(e.nodeType==3?l.node==e:e.contains(l.node))&&(l.pos=this.text.length+(isAtEnd(e,l.node,l.offset)?a:0))}}function isAtEnd(o,e,a){for(;;){if(!e||a<maxOffset(e))return!1;if(e==o)return!0;a=domIndex(e)+1,e=e.parentNode}}function isBlockElement(o){return o.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(o.nodeName)}class DOMPoint{constructor(e,a){this.node=e,this.offset=a,this.pos=-1}}class DOMChange{constructor(e,a,l,u){this.typeOver=u,this.bounds=null,this.text="";let{impreciseHead:f,impreciseAnchor:d}=e.docView;if(e.state.readOnly&&a>-1)this.newSel=null;else if(a>-1&&(this.bounds=e.docView.domBoundsAround(a,l,0))){let p=f||d?[]:selectionPoints(e),g=new DOMReader(p,e.state);g.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=g.text,this.newSel=selectionFromPoints(p,this.bounds.from)}else{let p=e.observer.selectionRange,g=f&&f.node==p.focusNode&&f.offset==p.focusOffset||!contains(e.contentDOM,p.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(p.focusNode,p.focusOffset),b=d&&d.node==p.anchorNode&&d.offset==p.anchorOffset||!contains(e.contentDOM,p.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(p.anchorNode,p.anchorOffset),O=e.viewport;if(browser.ios&&e.state.selection.main.empty&&g!=b&&(O.from>0||O.to<e.state.doc.length)){let A=O.from-Math.min(g,b),k=O.to-Math.max(g,b);(A==0||A==1)&&(k==0||k==-1)&&(g=0,b=e.state.doc.length)}this.newSel=EditorSelection.single(b,g)}}}function applyDOMChange(o,e){let a,{newSel:l}=e,u=o.state.selection.main,f=o.inputState.lastKeyTime>Date.now()-100?o.inputState.lastKeyCode:-1;if(e.bounds){let{from:d,to:p}=e.bounds,g=u.from,b=null;(f===8||browser.android&&e.text.length<p-d)&&(g=u.to,b="end");let O=findDiff(o.state.doc.sliceString(d,p,LineBreakPlaceholder),e.text,g-d,b);O&&(browser.chrome&&f==13&&O.toB==O.from+2&&e.text.slice(O.from,O.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&O.toB--,a={from:d+O.from,to:d+O.toA,insert:Text.of(e.text.slice(O.from,O.toB).split(LineBreakPlaceholder))})}else l&&(!o.hasFocus&&o.state.facet(editable)||l.main.eq(u))&&(l=null);if(!a&&!l)return!1;if(!a&&e.typeOver&&!u.empty&&l&&l.main.empty?a={from:u.from,to:u.to,insert:o.state.doc.slice(u.from,u.to)}:a&&a.from>=u.from&&a.to<=u.to&&(a.from!=u.from||a.to!=u.to)&&u.to-u.from-(a.to-a.from)<=4?a={from:u.from,to:u.to,insert:o.state.doc.slice(u.from,a.from).append(a.insert).append(o.state.doc.slice(a.to,u.to))}:(browser.mac||browser.android)&&a&&a.from==a.to&&a.from==u.head-1&&/^\. ?$/.test(a.insert.toString())&&o.contentDOM.getAttribute("autocorrect")=="off"?(l&&a.insert.length==2&&(l=EditorSelection.single(l.main.anchor-1,l.main.head-1)),a={from:u.from,to:u.to,insert:Text.of([" "])}):browser.chrome&&a&&a.from==a.to&&a.from==u.head&&a.insert.toString()==`
 `&&o.lineWrapping&&(l&&(l=EditorSelection.single(l.main.anchor-1,l.main.head-1)),a={from:u.from,to:u.to,insert:Text.of([" "])}),a){if(browser.ios&&o.inputState.flushIOSKey()||browser.android&&(a.from==u.from&&a.to==u.to&&a.insert.length==1&&a.insert.lines==2&&dispatchKey(o.contentDOM,"Enter",13)||(a.from==u.from-1&&a.to==u.to&&a.insert.length==0||f==8&&a.insert.length<a.to-a.from&&a.to>u.head)&&dispatchKey(o.contentDOM,"Backspace",8)||a.from==u.from&&a.to==u.to+1&&a.insert.length==0&&dispatchKey(o.contentDOM,"Delete",46)))return!0;let d=a.insert.toString();o.inputState.composing>=0&&o.inputState.composing++;let p,g=()=>p||(p=applyDefaultInsert(o,a,l));return o.state.facet(inputHandler$1).some(b=>b(o,a.from,a.to,d,g))||o.dispatch(g()),!0}else if(l&&!l.main.eq(u)){let d=!1,p="select";return o.inputState.lastSelectionTime>Date.now()-50&&(o.inputState.lastSelectionOrigin=="select"&&(d=!0),p=o.inputState.lastSelectionOrigin),o.dispatch({selection:l,scrollIntoView:d,userEvent:p}),!0}else return!1}function applyDefaultInsert(o,e,a){let l,u=o.state,f=u.selection.main;if(e.from>=f.from&&e.to<=f.to&&e.to-e.from>=(f.to-f.from)/3&&(!a||a.main.empty&&a.main.from==e.from+e.insert.length)&&o.inputState.composing<0){let p=f.from<e.from?u.sliceDoc(f.from,e.from):"",g=f.to>e.to?u.sliceDoc(e.to,f.to):"";l=u.replaceSelection(o.state.toText(p+e.insert.sliceString(0,void 0,o.state.lineBreak)+g))}else{let p=u.changes(e),g=a&&a.main.to<=p.newLength?a.main:void 0;if(u.selection.ranges.length>1&&o.inputState.composing>=0&&e.to<=f.to&&e.to>=f.to-10){let b=o.state.sliceDoc(e.from,e.to),O,A=a&&findCompositionNode(o,a.main.head);if(A){let B=e.insert.length-(e.to-e.from);O={from:A.from,to:A.to-B}}else O=o.state.doc.lineAt(f.head);let k=f.to-e.to,M=f.to-f.from;l=u.changeByRange(B=>{if(B.from==f.from&&B.to==f.to)return{changes:p,range:g||B.map(p)};let N=B.to-k,L=N-b.length;if(B.to-B.from!=M||o.state.sliceDoc(L,N)!=b||B.to>=O.from&&B.from<=O.to)return{range:B};let V=u.changes({from:L,to:N,insert:e.insert}),se=B.to-f.to;return{changes:V,range:g?EditorSelection.range(Math.max(0,g.anchor+se),Math.max(0,g.head+se)):B.map(V)}})}else l={changes:p,selection:g&&u.selection.replaceRange(g)}}let d="input.type";return(o.composing||o.inputState.compositionPendingChange&&o.inputState.compositionEndedAt>Date.now()-50)&&(o.inputState.compositionPendingChange=!1,d+=".compose",o.inputState.compositionFirstChange&&(d+=".start",o.inputState.compositionFirstChange=!1)),u.update(l,{userEvent:d,scrollIntoView:!0})}function findDiff(o,e,a,l){let u=Math.min(o.length,e.length),f=0;for(;f<u&&o.charCodeAt(f)==e.charCodeAt(f);)f++;if(f==u&&o.length==e.length)return null;let d=o.length,p=e.length;for(;d>0&&p>0&&o.charCodeAt(d-1)==e.charCodeAt(p-1);)d--,p--;if(l=="end"){let g=Math.max(0,f-Math.min(d,p));a-=d+g-f}if(d<f&&o.length<e.length){let g=a<=f&&a>=d?f-a:0;f-=g,p=f+(p-d),d=f}else if(p<f){let g=a<=f&&a>=p?f-a:0;f-=g,d=f+(d-p),p=f}return{from:f,toA:d,toB:p}}function selectionPoints(o){let e=[];if(o.root.activeElement!=o.contentDOM)return e;let{anchorNode:a,anchorOffset:l,focusNode:u,focusOffset:f}=o.observer.selectionRange;return a&&(e.push(new DOMPoint(a,l)),(u!=a||f!=l)&&e.push(new DOMPoint(u,f))),e}function selectionFromPoints(o,e){if(o.length==0)return null;let a=o[0].pos,l=o.length==2?o[1].pos:a;return a>-1&&l>-1?EditorSelection.single(a+e,l+e):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(a=>{for(let l of a)this.queue.push(l);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&a.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var a;((a=this.view.docView)===null||a===void 0?void 0:a.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(a=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),a.length>0&&a[a.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(a=>{a.length>0&&a[a.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((a,l)=>a!=e[l]))){this.gapIntersection.disconnect();for(let a of e)this.gapIntersection.observe(a);this.gaps=e}}onSelectionChange(e){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:l}=this,u=this.selectionRange;if(l.state.facet(editable)?l.root.activeElement!=this.dom:!hasSelection(l.dom,u))return;let f=u.anchorNode&&l.docView.nearest(u.anchorNode);if(f&&f.ignoreEvent(e)){a||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!l.state.selection.main.empty&&u.focusNode&&isEquivalentPosition(u.focusNode,u.focusOffset,u.anchorNode,u.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,a=browser.safari&&e.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(e.root);if(!a||this.selectionRange.eq(a))return!1;let l=hasSelection(this.dom,a);return l&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,a)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(a),l&&(this.selectionChanged=!0),!0)}setSelectionRange(e,a){this.selectionRange.set(e.node,e.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,a=null;for(let l=this.dom;l;)if(l.nodeType==1)!a&&e<this.scrollTargets.length&&this.scrollTargets[e]==l?e++:a||(a=this.scrollTargets.slice(0,e)),a&&a.push(l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;if(e<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,e)),a){for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);for(let l of this.scrollTargets=a)l.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,a){var l;if(!this.delayedAndroidKey){let u=()=>{let f=this.delayedAndroidKey;f&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=f.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&f.force&&dispatchKey(this.dom,f.key,f.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(u)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:a,force:this.lastChange<Date.now()-50||!!(!((l=this.delayedAndroidKey)===null||l===void 0)&&l.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let a=-1,l=-1,u=!1;for(let f of e){let d=this.readMutation(f);d&&(d.typeOver&&(u=!0),a==-1?{from:a,to:l}=d:(a=Math.min(d.from,a),l=Math.max(d.to,l)))}return{from:a,to:l,typeOver:u}}readChange(){let{from:e,to:a,typeOver:l}=this.processRecords(),u=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(e<0&&!u)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let f=new DOMChange(this.view,e,a,l);return this.view.docView.domChanged={newSel:f.newSel?f.newSel.main:null},f}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let a=this.readChange();if(!a)return this.view.requestMeasure(),!1;let l=this.view.state,u=applyDOMChange(this.view,a);return this.view.state==l&&this.view.update([]),u}readMutation(e){let a=this.view.docView.nearest(e.target);if(!a||a.ignoreMutation(e))return null;if(a.markDirty(e.type=="attributes"),e.type=="attributes"&&(a.flags|=4),e.type=="childList"){let l=findChild(a,e.previousSibling||e.target.previousSibling,-1),u=findChild(a,e.nextSibling||e.target.nextSibling,1);return{from:l?a.posAfter(l):a.posAtStart,to:u?a.posBefore(u):a.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:a.posAtStart,to:a.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,a,l;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(a=this.gapIntersection)===null||a===void 0||a.disconnect(),(l=this.resizeScroll)===null||l===void 0||l.disconnect();for(let u of this.scrollTargets)u.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(o,e,a){for(;e;){let l=ContentView.get(e);if(l&&l.parent==o)return l;let u=e.parentNode;e=u!=o.dom?u:a>0?e.nextSibling:e.previousSibling}return null}function safariSelectionRangeHack(o){let e=null;function a(g){g.preventDefault(),g.stopImmediatePropagation(),e=g.getTargetRanges()[0]}if(o.contentDOM.addEventListener("beforeinput",a,!0),o.dom.ownerDocument.execCommand("indent"),o.contentDOM.removeEventListener("beforeinput",a,!0),!e)return null;let l=e.startContainer,u=e.startOffset,f=e.endContainer,d=e.endOffset,p=o.docView.domAtPos(o.state.selection.main.anchor);return isEquivalentPosition(p.node,p.offset,f,d)&&([l,u,f,d]=[f,d,l,u]),{anchorNode:l,anchorOffset:u,focusNode:f,focusOffset:d}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:a}=e;this.dispatchTransactions=e.dispatchTransactions||a&&(l=>l.forEach(u=>a(u,this)))||(l=>this.update(l)),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),e.scrollTo&&e.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(l=>new PluginInstance(l));for(let l of this.plugins)l.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let a=e.length==1&&e[0]instanceof Transaction?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(a,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let a=!1,l=!1,u,f=this.state;for(let k of e){if(k.startState!=f)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");f=k.state}if(this.destroyed){this.viewState.state=f;return}let d=this.hasFocus,p=0,g=null;e.some(k=>k.annotation(isFocusChange))?(this.inputState.notifiedFocused=d,p=1):d!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=d,g=focusChangeTransaction(f,d),g||(p=1));let b=this.observer.delayedAndroidKey,O=null;if(b?(this.observer.clearDelayedAndroidKey(),O=this.observer.readChange(),(O&&!this.state.doc.eq(f.doc)||!this.state.selection.eq(f.selection))&&(O=null)):this.observer.clear(),f.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(f);u=ViewUpdate.create(this,f,e),u.flags|=p;let A=this.viewState.scrollTarget;try{this.updateState=2;for(let k of e){if(A&&(A=A.map(k.changes)),k.scrollIntoView){let{main:M}=k.state.selection;A=new ScrollTarget(M.empty?M:EditorSelection.cursor(M.head,M.head>M.anchor?-1:1))}for(let M of k.effects)M.is(scrollIntoView$1)&&(A=M.value.clip(this.state))}this.viewState.update(u,A),this.bidiCache=CachedOrder.update(this.bidiCache,u.changes),u.empty||(this.updatePlugins(u),this.inputState.update(u)),a=this.docView.update(u),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),l=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(a,e.some(k=>k.isUserEvent("select.pointer")))}finally{this.updateState=0}if(u.startState.facet(theme$1)!=u.state.facet(theme$1)&&(this.viewState.mustMeasureContent=!0),(a||l||A||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!u.empty)for(let k of this.state.facet(updateListener))try{k(u)}catch(M){logException(this.state,M,"update listener")}(g||O)&&Promise.resolve().then(()=>{g&&this.state==g.startState&&this.dispatch(g),O&&!applyDOMChange(this,O)&&b.force&&dispatchKey(this.contentDOM,b.key,b.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let a=this.hasFocus;try{for(let l of this.plugins)l.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(l=>new PluginInstance(l)),this.pluginMap.clear();for(let l of this.plugins)l.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}a&&this.focus(),this.requestMeasure()}updatePlugins(e){let a=e.startState.facet(viewPlugin),l=e.state.facet(viewPlugin);if(a!=l){let u=[];for(let f of l){let d=a.indexOf(f);if(d<0)u.push(new PluginInstance(f));else{let p=this.plugins[d];p.mustUpdate=e,u.push(p)}}for(let f of this.plugins)f.mustUpdate!=e&&f.destroy(this);this.plugins=u,this.pluginMap.clear()}else for(let u of this.plugins)u.mustUpdate=e;for(let u=0;u<this.plugins.length;u++)this.plugins[u].update(this);a!=l&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let a=null,l=this.scrollDOM,u=l.scrollTop*this.scaleY,{scrollAnchorPos:f,scrollAnchorHeight:d}=this.viewState;Math.abs(u-this.viewState.scrollTop)>1&&(d=-1),this.viewState.scrollAnchorHeight=-1;try{for(let p=0;;p++){if(d<0)if(isScrolledToBottom(l))f=-1,d=this.viewState.heightMap.height;else{let M=this.viewState.scrollAnchorAt(u);f=M.from,d=M.top}this.updateState=1;let g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(p>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let b=[];g&4||([this.measureRequests,b]=[b,this.measureRequests]);let O=b.map(M=>{try{return M.read(this)}catch(B){return logException(this.state,B),BadMeasure}}),A=ViewUpdate.create(this,this.state,[]),k=!1;A.flags|=g,a?a.flags|=g:a=A,this.updateState=2,A.empty||(this.updatePlugins(A),this.inputState.update(A),this.updateAttrs(),k=this.docView.update(A));for(let M=0;M<b.length;M++)if(O[M]!=BadMeasure)try{let B=b[M];B.write&&B.write(O[M],this)}catch(B){logException(this.state,B)}if(k&&this.docView.updateSelection(!0),!A.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,d=-1;continue}else{let B=(f<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(f).top)-d;if(B>1||B<-1){u=u+B,l.scrollTop=u/this.scaleY,d=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(a&&!a.empty)for(let p of this.state.facet(updateListener))p(a)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme$1)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),a={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(a["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,a);let l=this.observer.ignore(()=>{let u=updateAttrs(this.contentDOM,this.contentAttrs,a),f=updateAttrs(this.dom,this.editorAttrs,e);return u||f});return this.editorAttrs=e,this.contentAttrs=a,l}showAnnouncements(e){let a=!0;for(let l of e)for(let u of l.effects)if(u.is(EditorView.announce)){a&&(this.announceDOM.textContent=""),a=!1;let f=this.announceDOM.appendChild(document.createElement("div"));f.textContent=u.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let e=this.state.facet(EditorView.cspNonce);StyleModule$1.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let a=0;a<this.measureRequests.length;a++)if(this.measureRequests[a].key===e.key){this.measureRequests[a]=e;return}}this.measureRequests.push(e)}}plugin(e){let a=this.pluginMap.get(e);return(a===void 0||a&&a.spec!=e)&&this.pluginMap.set(e,a=this.plugins.find(l=>l.spec==e)||null),a&&a.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,a,l){return skipAtoms(this,e,moveByChar(this,e,a,l))}moveByGroup(e,a){return skipAtoms(this,e,moveByChar(this,e,a,l=>byGroup(this,e.head,l)))}visualLineSide(e,a){let l=this.bidiSpans(e),u=this.textDirectionAt(e.from),f=l[a?l.length-1:0];return EditorSelection.cursor(f.side(a,u)+e.from,f.forward(!a,u)?1:-1)}moveToLineBoundary(e,a,l=!0){return moveToLineBoundary(this,e,a,l)}moveVertically(e,a,l){return skipAtoms(this,e,moveVertically(this,e,a,l))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,a=0){return this.docView.posFromDOM(e,a)}posAtCoords(e,a=!0){return this.readMeasured(),posAtCoords(this,e,a)}coordsAtPos(e,a=1){this.readMeasured();let l=this.docView.coordsAt(e,a);if(!l||l.left==l.right)return l;let u=this.state.doc.lineAt(e),f=this.bidiSpans(u),d=f[BidiSpan.find(f,e-u.from,-1,a)];return flattenRect(l,d.dir==Direction.LTR==a>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let a=this.textDirectionAt(e.from),l;for(let f of this.bidiCache)if(f.from==e.from&&f.dir==a&&(f.fresh||isolatesEq(f.isolates,l=getIsolatedRanges(this,e))))return f.order;l||(l=getIsolatedRanges(this,e));let u=computeOrder(e.text,a,l);return this.bidiCache.push(new CachedOrder(e.from,e.to,a,l,!0,u)),u}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,a={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,a.y,a.x,a.yMargin,a.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:a}=this.scrollDOM,l=this.viewState.scrollAnchorAt(e);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(l.from),"start","start",l.top-e,a,!0))}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ViewPlugin.define(()=>({}),{eventObservers:e})}static theme(e,a){let l=StyleModule$1.newName(),u=[theme$1.of(l),styleModule.of(buildTheme(`.${l}`,e))];return a&&a.dark&&u.push(darkTheme.of(!0)),u}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var a;let l=e.querySelector(".cm-content"),u=l&&ContentView.get(l)||ContentView.get(e);return((a=u?.rootView)===null||a===void 0?void 0:a.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler$1,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:o=>o.length?o[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,a,l,u,f,d){this.from=e,this.to=a,this.dir=l,this.isolates=u,this.fresh=f,this.order=d}static update(e,a){if(a.empty&&!e.some(f=>f.fresh))return e;let l=[],u=e.length?e[e.length-1].dir:Direction.LTR;for(let f=Math.max(0,e.length-10);f<e.length;f++){let d=e[f];d.dir==u&&!a.touchesRange(d.from,d.to)&&l.push(new CachedOrder(a.mapPos(d.from,1),a.mapPos(d.to,-1),d.dir,d.isolates,!1,d.order))}return l}}function attrsFromFacet(o,e,a){for(let l=o.state.facet(e),u=l.length-1;u>=0;u--){let f=l[u],d=typeof f=="function"?f(o):f;d&&combineAttrs(d,a)}return a}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(o,e){const a=o.split(/-(?!$)/);let l=a[a.length-1];l=="Space"&&(l=" ");let u,f,d,p;for(let g=0;g<a.length-1;++g){const b=a[g];if(/^(cmd|meta|m)$/i.test(b))p=!0;else if(/^a(lt)?$/i.test(b))u=!0;else if(/^(c|ctrl|control)$/i.test(b))f=!0;else if(/^s(hift)?$/i.test(b))d=!0;else if(/^mod$/i.test(b))e=="mac"?p=!0:f=!0;else throw new Error("Unrecognized modifier name: "+b)}return u&&(l="Alt-"+l),f&&(l="Ctrl-"+l),p&&(l="Meta-"+l),d&&(l="Shift-"+l),l}function modifiers(o,e,a){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),a!==!1&&e.shiftKey&&(o="Shift-"+o),o}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(o,e){return runHandlers(getKeymap(e.state),o,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(o){let e=o.facet(keymap),a=Keymaps.get(e);return a||Keymaps.set(e,a=buildKeymap(e.reduce((l,u)=>l.concat(u),[]))),a}function runScopeHandlers(o,e,a){return runHandlers(getKeymap(o.state),e,o,a)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(o,e=currentPlatform){let a=Object.create(null),l=Object.create(null),u=(d,p)=>{let g=l[d];if(g==null)l[d]=p;else if(g!=p)throw new Error("Key binding "+d+" is used both as a regular binding and as a multi-stroke prefix")},f=(d,p,g,b,O)=>{var A,k;let M=a[d]||(a[d]=Object.create(null)),B=p.split(/ (?!$)/).map(V=>normalizeKeyName(V,e));for(let V=1;V<B.length;V++){let se=B.slice(0,V).join(" ");u(se,!0),M[se]||(M[se]={preventDefault:!0,stopPropagation:!1,run:[pe=>{let re=storedPrefix={view:pe,prefix:se,scope:d};return setTimeout(()=>{storedPrefix==re&&(storedPrefix=null)},PrefixTimeout),!0}]})}let N=B.join(" ");u(N,!1);let L=M[N]||(M[N]={preventDefault:!1,stopPropagation:!1,run:((k=(A=M._any)===null||A===void 0?void 0:A.run)===null||k===void 0?void 0:k.slice())||[]});g&&L.run.push(g),b&&(L.preventDefault=!0),O&&(L.stopPropagation=!0)};for(let d of o){let p=d.scope?d.scope.split(" "):["editor"];if(d.any)for(let b of p){let O=a[b]||(a[b]=Object.create(null));O._any||(O._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let A in O)O[A].run.push(d.any)}let g=d[e]||d.key;if(g)for(let b of p)f(b,g,d.run,d.preventDefault,d.stopPropagation),d.shift&&f(b,"Shift-"+g,d.shift,d.preventDefault,d.stopPropagation)}return a}function runHandlers(o,e,a,l){let u=keyName(e),f=codePointAt(u,0),d=codePointSize(f)==u.length&&u!=" ",p="",g=!1,b=!1,O=!1;storedPrefix&&storedPrefix.view==a&&storedPrefix.scope==l&&(p=storedPrefix.prefix+" ",modifierCodes.indexOf(e.keyCode)<0&&(b=!0,storedPrefix=null));let A=new Set,k=L=>{if(L){for(let V of L.run)if(!A.has(V)&&(A.add(V),V(a,e)))return L.stopPropagation&&(O=!0),!0;L.preventDefault&&(L.stopPropagation&&(O=!0),b=!0)}return!1},M=o[l],B,N;return M&&(k(M[p+modifiers(u,e,!d)])?g=!0:d&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(B=base[e.keyCode])&&B!=u?(k(M[p+modifiers(B,e,!0)])||e.shiftKey&&(N=shift[e.keyCode])!=u&&N!=B&&k(M[p+modifiers(N,e,!1)]))&&(g=!0):d&&e.shiftKey&&k(M[p+modifiers(u,e,!0)])&&(g=!0),!g&&k(M._any)&&(g=!0)),b&&(g=!0),g&&O&&e.stopPropagation(),g}class RectangleMarker{constructor(e,a,l,u,f){this.className=e,this.left=a,this.top=l,this.width=u,this.height=f}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,a){return a.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,a,l){if(l.empty){let u=e.coordsAtPos(l.head,l.assoc||1);if(!u)return[];let f=getBase$2(e);return[new RectangleMarker(a,u.left-f.left,u.top-f.top,null,u.bottom-u.top)]}else return rectanglesForRange(e,a,l)}}function getBase$2(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==Direction.LTR?e.left:e.right-o.scrollDOM.clientWidth*o.scaleX)-o.scrollDOM.scrollLeft*o.scaleX,top:e.top-o.scrollDOM.scrollTop*o.scaleY}}function wrappedLine(o,e,a){let l=EditorSelection.cursor(e);return{from:Math.max(a.from,o.moveToLineBoundary(l,!1,!0).from),to:Math.min(a.to,o.moveToLineBoundary(l,!0,!0).from),type:BlockType.Text}}function rectanglesForRange(o,e,a){if(a.to<=o.viewport.from||a.from>=o.viewport.to)return[];let l=Math.max(a.from,o.viewport.from),u=Math.min(a.to,o.viewport.to),f=o.textDirection==Direction.LTR,d=o.contentDOM,p=d.getBoundingClientRect(),g=getBase$2(o),b=d.querySelector(".cm-line"),O=b&&window.getComputedStyle(b),A=p.left+(O?parseInt(O.paddingLeft)+Math.min(0,parseInt(O.textIndent)):0),k=p.right-(O?parseInt(O.paddingRight):0),M=blockAt(o,l),B=blockAt(o,u),N=M.type==BlockType.Text?M:null,L=B.type==BlockType.Text?B:null;if(N&&(o.lineWrapping||M.widgetLineBreaks)&&(N=wrappedLine(o,l,N)),L&&(o.lineWrapping||B.widgetLineBreaks)&&(L=wrappedLine(o,u,L)),N&&L&&N.from==L.from)return se(pe(a.from,a.to,N));{let z=N?pe(a.from,null,N):re(M,!1),oe=L?pe(null,a.to,L):re(B,!0),de=[];return(N||M).to<(L||B).from-(N&&L?1:0)||M.widgetLineBreaks>1&&z.bottom+o.defaultLineHeight/2<oe.top?de.push(V(A,z.bottom,k,oe.top)):z.bottom<oe.top&&o.elementAtHeight((z.bottom+oe.top)/2).type==BlockType.Text&&(z.bottom=oe.top=(z.bottom+oe.top)/2),se(z).concat(de).concat(se(oe))}function V(z,oe,de,_e){return new RectangleMarker(e,z-g.left,oe-g.top-.01,de-z,_e-oe+.01)}function se({top:z,bottom:oe,horizontal:de}){let _e=[];for(let Ce=0;Ce<de.length;Ce+=2)_e.push(V(de[Ce],z,de[Ce+1],oe));return _e}function pe(z,oe,de){let _e=1e9,Ce=-1e9,be=[];function xe(Ie,Fe,Be,Ge,Ne){let Ve=o.coordsAtPos(Ie,Ie==de.to?-2:2),Ze=o.coordsAtPos(Be,Be==de.from?2:-2);!Ve||!Ze||(_e=Math.min(Ve.top,Ze.top,_e),Ce=Math.max(Ve.bottom,Ze.bottom,Ce),Ne==Direction.LTR?be.push(f&&Fe?A:Ve.left,f&&Ge?k:Ze.right):be.push(!f&&Ge?A:Ze.left,!f&&Fe?k:Ve.right))}let Oe=z??de.from,ke=oe??de.to;for(let Ie of o.visibleRanges)if(Ie.to>Oe&&Ie.from<ke)for(let Fe=Math.max(Ie.from,Oe),Be=Math.min(Ie.to,ke);;){let Ge=o.state.doc.lineAt(Fe);for(let Ne of o.bidiSpans(Ge)){let Ve=Ne.from+Ge.from,Ze=Ne.to+Ge.from;if(Ve>=Be)break;Ze>Fe&&xe(Math.max(Ve,Fe),z==null&&Ve<=Oe,Math.min(Ze,Be),oe==null&&Ze>=ke,Ne.dir)}if(Fe=Ge.to+1,Fe>=Be)break}return be.length==0&&xe(Oe,z==null,ke,oe==null,o.textDirection),{top:_e,bottom:Ce,horizontal:be}}function re(z,oe){let de=p.top+(oe?z.top:z.bottom);return{top:de,bottom:de,horizontal:[]}}}function sameMarker(o,e){return o.constructor==e.constructor&&o.eq(e)}class LayerView{constructor(e,a){this.view=e,this.layer=a,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),a.above&&this.dom.classList.add("cm-layer-above"),a.class&&this.dom.classList.add(a.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),a.mount&&a.mount(this.dom,e)}update(e){e.startState.facet(layerOrder)!=e.state.facet(layerOrder)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let a=0,l=e.facet(layerOrder);for(;a<l.length&&l[a]!=this.layer;)a++;this.dom.style.zIndex=String((this.layer.above?150:-1)-a)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:a}=this.view;(e!=this.scaleX||a!=this.scaleY)&&(this.scaleX=e,this.scaleY=a,this.dom.style.transform=`scale(${1/e}, ${1/a})`)}draw(e){if(e.length!=this.drawn.length||e.some((a,l)=>!sameMarker(a,this.drawn[l]))){let a=this.dom.firstChild,l=0;for(let u of e)u.update&&a&&u.constructor&&this.drawn[l].constructor&&u.update(a,this.drawn[l])?(a=a.nextSibling,l++):this.dom.insertBefore(u.draw(),a);for(;a;){let u=a.nextSibling;a.remove(),a=u}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(o){return[ViewPlugin.define(e=>new LayerView(e,o)),layerOrder.of(o)]}const CanHidePrimary=!browser.ios,selectionConfig=Facet.define({combine(o){return combineConfig(o,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,a)=>Math.min(e,a),drawRangeCursor:(e,a)=>e||a})}});function drawSelection(o={}){return[selectionConfig.of(o),cursorLayer,selectionLayer,hideNativeSelection$2,nativeSelectionHidden.of(!0)]}function getDrawSelectionConfig$1(o){return o.facet(selectionConfig)}function configChanged$1(o){return o.startState.facet(selectionConfig)!=o.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(o){let{state:e}=o,a=e.facet(selectionConfig),l=[];for(let u of e.selection.ranges){let f=u==e.selection.main;if(u.empty?!f||CanHidePrimary:a.drawRangeCursor){let d=f?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",p=u.empty?u:EditorSelection.cursor(u.head,u.head>u.anchor?-1:1);for(let g of RectangleMarker.forRange(o,d,p))l.push(g)}}return l},update(o,e){o.transactions.some(l=>l.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let a=configChanged$1(o);return a&&setBlinkRate(o.state,e),o.docChanged||o.selectionSet||a},mount(o,e){setBlinkRate(e.state,o)},class:"cm-cursorLayer"});function setBlinkRate(o,e){e.style.animationDuration=o.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(o){return o.state.selection.ranges.map(e=>e.empty?[]:RectangleMarker.forRange(o,"cm-selectionBackground",e)).reduce((e,a)=>e.concat(a))},update(o,e){return o.docChanged||o.selectionSet||o.viewportChanged||configChanged$1(o)},class:"cm-selectionLayer"}),themeSpec$2={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec$2[".cm-line"].caretColor="transparent !important",themeSpec$2[".cm-content"]={caretColor:"transparent !important"});const hideNativeSelection$2=Prec.highest(EditorView.theme(themeSpec$2));function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(o){this.decorations=this.getDeco(o)}update(o){(o.docChanged||o.selectionSet)&&(this.decorations=this.getDeco(o.view))}getDeco(o){let e=-1,a=[];for(let l of o.state.selection.ranges){let u=o.lineBlockAt(l.head);u.from>e&&(a.push(lineDeco.range(u.from)),e=u.from)}return Decoration.set(a)}},{decorations:o=>o.decorations}),Outside="-10000px";class TooltipViewManager{constructor(e,a,l){this.facet=a,this.createTooltipView=l,this.input=e.state.facet(a),this.tooltips=this.input.filter(u=>u),this.tooltipViews=this.tooltips.map(l)}update(e,a){var l;let u=e.state.facet(this.facet),f=u.filter(g=>g);if(u===this.input){for(let g of this.tooltipViews)g.update&&g.update(e);return!1}let d=[],p=a?[]:null;for(let g=0;g<f.length;g++){let b=f[g],O=-1;if(b){for(let A=0;A<this.tooltips.length;A++){let k=this.tooltips[A];k&&k.create==b.create&&(O=A)}if(O<0)d[g]=this.createTooltipView(b),p&&(p[g]=!!b.above);else{let A=d[g]=this.tooltipViews[O];p&&(p[g]=a[O]),A.update&&A.update(e)}}}for(let g of this.tooltipViews)d.indexOf(g)<0&&(g.dom.remove(),(l=g.destroy)===null||l===void 0||l.call(g));return a&&(p.forEach((g,b)=>a[b]=g),a.length=p.length),this.input=u,this.tooltips=f,this.tooltipViews=d,!0}}function windowSpace(o){let{win:e}=o;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const tooltipConfig=Facet.define({combine:o=>{var e,a,l;return{position:browser.ios?"absolute":((e=o.find(u=>u.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((a=o.find(u=>u.parent))===null||a===void 0?void 0:a.parent)||null,tooltipSpace:((l=o.find(u=>u.tooltipSpace))===null||l===void 0?void 0:l.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=o.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=o.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(o,showTooltip,a=>this.createTooltip(a)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(a=>{Date.now()>this.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),o.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let o of this.manager.tooltipViews)this.intersectionObserver.observe(o.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(o){o.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(o,this.above);e&&this.observeIntersection();let a=e||o.geometryChanged,l=o.state.facet(tooltipConfig);if(l.position!=this.position&&!this.madeAbsolute){this.position=l.position;for(let u of this.manager.tooltipViews)u.dom.style.position=this.position;a=!0}if(l.parent!=this.parent){this.parent&&this.container.remove(),this.parent=l.parent,this.createContainer();for(let u of this.manager.tooltipViews)this.container.appendChild(u.dom);a=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);a&&this.maybeMeasure()}createTooltip(o){let e=o.create(this.view);if(e.dom.classList.add("cm-tooltip"),o.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let a=document.createElement("div");a.className="cm-tooltip-arrow",e.dom.appendChild(a)}return e.dom.style.position=this.position,e.dom.style.top=Outside,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var o,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let a of this.manager.tooltipViews)a.dom.remove(),(o=a.destroy)===null||o===void 0||o.call(a);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let o=this.view.dom.getBoundingClientRect(),e=1,a=1,l=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:u}=this.manager.tooltipViews[0];if(browser.gecko)l=u.offsetParent!=this.container.ownerDocument.body;else if(u.style.top==Outside&&u.style.left=="0px"){let f=u.getBoundingClientRect();l=Math.abs(f.top+1e4)>1||Math.abs(f.left)>1}}if(l||this.position=="absolute")if(this.parent){let u=this.parent.getBoundingClientRect();u.width&&u.height&&(e=u.width/this.parent.offsetWidth,a=u.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:a}=this.view.viewState);return{editor:o,parent:this.parent?this.container.getBoundingClientRect():o,pos:this.manager.tooltips.map((u,f)=>{let d=this.manager.tooltipViews[f];return d.getCoords?d.getCoords(u.pos):this.view.coordsAtPos(u.pos)}),size:this.manager.tooltipViews.map(({dom:u})=>u.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:e,scaleY:a,makeAbsolute:l}}writeMeasure(o){var e;if(o.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let p of this.manager.tooltipViews)p.dom.style.position="absolute"}let{editor:a,space:l,scaleX:u,scaleY:f}=o,d=[];for(let p=0;p<this.manager.tooltips.length;p++){let g=this.manager.tooltips[p],b=this.manager.tooltipViews[p],{dom:O}=b,A=o.pos[p],k=o.size[p];if(!A||A.bottom<=Math.max(a.top,l.top)||A.top>=Math.min(a.bottom,l.bottom)||A.right<Math.max(a.left,l.left)-.1||A.left>Math.min(a.right,l.right)+.1){O.style.top=Outside;continue}let M=g.arrow?b.dom.querySelector(".cm-tooltip-arrow"):null,B=M?7:0,N=k.right-k.left,L=(e=knownHeight.get(b))!==null&&e!==void 0?e:k.bottom-k.top,V=b.offset||noOffset,se=this.view.textDirection==Direction.LTR,pe=k.width>l.right-l.left?se?l.left:l.right-k.width:se?Math.min(A.left-(M?14:0)+V.x,l.right-N):Math.max(l.left,A.left-N+(M?14:0)-V.x),re=this.above[p];!g.strictSide&&(re?A.top-(k.bottom-k.top)-V.y<l.top:A.bottom+(k.bottom-k.top)+V.y>l.bottom)&&re==l.bottom-A.bottom>A.top-l.top&&(re=this.above[p]=!re);let z=(re?A.top-l.top:l.bottom-A.bottom)-B;if(z<L&&b.resize!==!1){if(z<this.view.defaultLineHeight){O.style.top=Outside;continue}knownHeight.set(b,L),O.style.height=(L=z)/f+"px"}else O.style.height&&(O.style.height="");let oe=re?A.top-L-B-V.y:A.bottom+B+V.y,de=pe+N;if(b.overlap!==!0)for(let _e of d)_e.left<de&&_e.right>pe&&_e.top<oe+L&&_e.bottom>oe&&(oe=re?_e.top-L-2-B:_e.bottom+B+2);if(this.position=="absolute"?(O.style.top=(oe-o.parent.top)/f+"px",O.style.left=(pe-o.parent.left)/u+"px"):(O.style.top=oe/f+"px",O.style.left=pe/u+"px"),M){let _e=A.left+(se?V.x:-V.x)-(pe+14-7);M.style.left=_e/u+"px"}b.overlap!==!0&&d.push({left:pe,top:oe,right:de,bottom:oe+L}),O.classList.toggle("cm-tooltip-above",re),O.classList.toggle("cm-tooltip-below",!re),b.positioned&&b.positioned(o.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let o of this.manager.tooltipViews)o.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}}),baseTheme$6=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$6]}),showHoverTooltip=Facet.define();class HoverTooltipHost{static create(e){return new HoverTooltipHost(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,a=>this.createHostedView(a))}createHostedView(e){let a=e.create(this.view);return a.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(a.dom),this.mounted&&a.mount&&a.mount(this.view),a}mount(e){for(let a of this.manager.tooltipViews)a.mount&&a.mount(e);this.mounted=!0}positioned(e){for(let a of this.manager.tooltipViews)a.positioned&&a.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let a of this.manager.tooltipViews)(e=a.destroy)===null||e===void 0||e.call(a)}passProp(e){let a;for(let l of this.manager.tooltipViews){let u=l[e];if(u!==void 0){if(a===void 0)a=u;else if(a!==u)return}}return a}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],o=>{let e=o.facet(showHoverTooltip).filter(a=>a);return e.length===0?null:{pos:Math.min(...e.map(a=>a.pos)),end:Math.max(...e.map(a=>{var l;return(l=a.end)!==null&&l!==void 0?l:a.pos})),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(a=>a.arrow)}});class HoverPlugin{constructor(e,a,l,u,f){this.view=e,this.source=a,this.field=l,this.setHover=u,this.hoverTime=f,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:a}=this,l=e.docView.nearest(a.target);if(!l)return;let u,f=1;if(l instanceof WidgetView)u=l.posAtStart;else{if(u=e.posAtCoords(a),u==null)return;let p=e.coordsAtPos(u);if(!p||a.y<p.top||a.y>p.bottom||a.x<p.left-e.defaultCharacterWidth||a.x>p.right+e.defaultCharacterWidth)return;let g=e.bidiSpans(e.state.doc.lineAt(u)).find(O=>O.from<=u&&O.to>=u),b=g&&g.dir==Direction.RTL?-1:1;f=a.x<p.left?-b:b}let d=this.source(e,u,f);if(d?.then){let p=this.pending={pos:u};d.then(g=>{this.pending==p&&(this.pending=null,g&&e.dispatch({effects:this.setHover.of(g)}))},g=>logException(e.state,g,"hover tooltip"))}else d&&e.dispatch({effects:this.setHover.of(d)})}get tooltip(){let e=this.view.plugin(tooltipPlugin),a=e?e.manager.tooltips.findIndex(l=>l.create==HoverTooltipHost.create):-1;return a>-1?e.manager.tooltipViews[a]:null}mousemove(e){var a;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:l,tooltip:u}=this;if(l&&u&&!isInTooltip(u.dom,e)||this.pending){let{pos:f}=l||this.pending,d=(a=l?.end)!==null&&a!==void 0?a:f;(f==d?this.view.posAtCoords(this.lastMove)!=f:!isOverRange(this.view,f,d,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:a}=this;if(a){let{tooltip:l}=this;l&&l.dom.contains(e.relatedTarget)?this.watchTooltipLeave(l.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let a=l=>{e.removeEventListener("mouseleave",a),this.active&&!this.view.dom.contains(l.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",a)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(o,e){let a=o.getBoundingClientRect();return e.clientX>=a.left-tooltipMargin&&e.clientX<=a.right+tooltipMargin&&e.clientY>=a.top-tooltipMargin&&e.clientY<=a.bottom+tooltipMargin}function isOverRange(o,e,a,l,u,f){let d=o.scrollDOM.getBoundingClientRect(),p=o.documentTop+o.documentPadding.top+o.contentHeight;if(d.left>l||d.right<l||d.top>u||Math.min(d.bottom,p)<u)return!1;let g=o.posAtCoords({x:l,y:u},!1);return g>=e&&g<=a}function hoverTooltip(o,e={}){let a=StateEffect.define(),l=StateField.define({create(){return null},update(u,f){if(u&&(e.hideOnChange&&(f.docChanged||f.selection)||e.hideOn&&e.hideOn(f,u)))return null;if(u&&f.docChanged){let d=f.changes.mapPos(u.pos,-1,MapMode.TrackDel);if(d==null)return null;let p=Object.assign(Object.create(null),u);p.pos=d,u.end!=null&&(p.end=f.changes.mapPos(u.end)),u=p}for(let d of f.effects)d.is(a)&&(u=d.value),d.is(closeHoverTooltipEffect)&&(u=null);return u},provide:u=>showHoverTooltip.from(u)});return[l,ViewPlugin.define(u=>new HoverPlugin(u,o,l,a,e.hoverTime||300)),showHoverTooltipHost]}function getTooltip(o,e){let a=o.plugin(tooltipPlugin);if(!a)return null;let l=a.manager.tooltips.indexOf(e);return l<0?null:a.manager.tooltipViews[l]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(o){let e,a;for(let l of o)e=e||l.topContainer,a=a||l.bottomContainer;return{topContainer:e,bottomContainer:a}}});function getPanel(o,e){let a=o.plugin(panelPlugin),l=a?a.specs.indexOf(e):-1;return l>-1?a.panels[l]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(o){this.input=o.state.facet(showPanel),this.specs=this.input.filter(a=>a),this.panels=this.specs.map(a=>a(o));let e=o.state.facet(panelConfig);this.top=new PanelGroup(o,!0,e.topContainer),this.bottom=new PanelGroup(o,!1,e.bottomContainer),this.top.sync(this.panels.filter(a=>a.top)),this.bottom.sync(this.panels.filter(a=>!a.top));for(let a of this.panels)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}update(o){let e=o.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(o.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(o.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let a=o.state.facet(showPanel);if(a!=this.input){let l=a.filter(g=>g),u=[],f=[],d=[],p=[];for(let g of l){let b=this.specs.indexOf(g),O;b<0?(O=g(o.view),p.push(O)):(O=this.panels[b],O.update&&O.update(o)),u.push(O),(O.top?f:d).push(O)}this.specs=l,this.panels=u,this.top.sync(f),this.bottom.sync(d);for(let g of p)g.dom.classList.add("cm-panel"),g.mount&&g.mount()}else for(let l of this.panels)l.update&&l.update(o)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:o=>EditorView.scrollMargins.of(e=>{let a=e.plugin(o);return a&&{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})});class PanelGroup{constructor(e,a,l){this.view=e,this.top=a,this.container=l,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let a of this.panels)a.destroy&&e.indexOf(a)<0&&a.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let a=this.container||this.view.dom;a.insertBefore(this.dom,this.top?a.firstChild:null)}let e=this.dom.firstChild;for(let a of this.panels)if(a.dom.parentNode==this.dom){for(;e!=a.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(a.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(o){let e=o.nextSibling;return o.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),activeGutters=Facet.define(),unfixGutters=Facet.define({combine:o=>o.some(e=>e)});function gutters(o){let e=[gutterView];return o&&o.fixed===!1&&e.push(unfixGutters.of(!0)),e}const gutterView=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.prevViewport=o.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=o.state.facet(activeGutters).map(e=>new SingleGutterView(o,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!o.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),o.scrollDOM.insertBefore(this.dom,o.contentDOM)}update(o){if(this.updateGutters(o)){let e=this.prevViewport,a=o.view.viewport,l=Math.min(e.to,a.to)-Math.max(e.from,a.from);this.syncGutters(l<(a.to-a.from)*.8)}o.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=o.view.viewport}syncGutters(o){let e=this.dom.nextSibling;o&&this.dom.remove();let a=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),l=[],u=this.gutters.map(f=>new UpdateContext(f,this.view.viewport,-this.view.documentPadding.top));for(let f of this.view.viewportLineBlocks)if(l.length&&(l=[]),Array.isArray(f.type)){let d=!0;for(let p of f.type)if(p.type==BlockType.Text&&d){advanceCursor(a,l,p.from);for(let g of u)g.line(this.view,p,l);d=!1}else if(p.widget)for(let g of u)g.widget(this.view,p)}else if(f.type==BlockType.Text){advanceCursor(a,l,f.from);for(let d of u)d.line(this.view,f,l)}else if(f.widget)for(let d of u)d.widget(this.view,f);for(let f of u)f.finish();o&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(o){let e=o.startState.facet(activeGutters),a=o.state.facet(activeGutters),l=o.docChanged||o.heightChanged||o.viewportChanged||!RangeSet.eq(o.startState.facet(gutterLineClass),o.state.facet(gutterLineClass),o.view.viewport.from,o.view.viewport.to);if(e==a)for(let u of this.gutters)u.update(o)&&(l=!0);else{l=!0;let u=[];for(let f of a){let d=e.indexOf(f);d<0?u.push(new SingleGutterView(this.view,f)):(this.gutters[d].update(o),u.push(this.gutters[d]))}for(let f of this.gutters)f.dom.remove(),u.indexOf(f)<0&&f.destroy();for(let f of u)this.dom.appendChild(f.dom);this.gutters=u}return l}destroy(){for(let o of this.gutters)o.destroy();this.dom.remove()}},{provide:o=>EditorView.scrollMargins.of(e=>{let a=e.plugin(o);return!a||a.gutters.length==0||!a.fixed?null:e.textDirection==Direction.LTR?{left:a.dom.offsetWidth*e.scaleX}:{right:a.dom.offsetWidth*e.scaleX}})});function asArray(o){return Array.isArray(o)?o:[o]}function advanceCursor(o,e,a){for(;o.value&&o.from<=a;)o.from==a&&e.push(o.value),o.next()}class UpdateContext{constructor(e,a,l){this.gutter=e,this.height=l,this.i=0,this.cursor=RangeSet.iter(e.markers,a.from)}addElement(e,a,l){let{gutter:u}=this,f=(a.top-this.height)/e.scaleY,d=a.height/e.scaleY;if(this.i==u.elements.length){let p=new GutterElement(e,d,f,l);u.elements.push(p),u.dom.appendChild(p.dom)}else u.elements[this.i].update(e,d,f,l);this.height=a.bottom,this.i++}line(e,a,l){let u=[];advanceCursor(this.cursor,u,a.from),l.length&&(u=u.concat(l));let f=this.gutter.config.lineMarker(e,a,u);f&&u.unshift(f);let d=this.gutter;u.length==0&&!d.config.renderEmptyElements||this.addElement(e,a,u)}widget(e,a){let l=this.gutter.config.widgetMarker(e,a.widget,a);l&&this.addElement(e,a,[l])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let a=e.elements.pop();e.dom.removeChild(a.dom),a.destroy()}}}class SingleGutterView{constructor(e,a){this.view=e,this.config=a,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let l in a.domEventHandlers)this.dom.addEventListener(l,u=>{let f=u.target,d;if(f!=this.dom&&this.dom.contains(f)){for(;f.parentNode!=this.dom;)f=f.parentNode;let g=f.getBoundingClientRect();d=(g.top+g.bottom)/2}else d=u.clientY;let p=e.lineBlockAtHeight(d-e.documentTop);a.domEventHandlers[l](e,p,u)&&u.preventDefault()});this.markers=asArray(a.markers(e)),a.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[a.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let a=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let u=this.config.updateSpacer(this.spacer.markers[0],e);u!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[u])}let l=e.view.viewport;return!RangeSet.eq(this.markers,a,l.from,l.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,a,l,u){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,a,l,u)}update(e,a,l,u){this.height!=a&&(this.height=a,this.dom.style.height=a+"px"),this.above!=l&&(this.dom.style.marginTop=(this.above=l)?l+"px":""),sameMarkers(this.markers,u)||this.setMarkers(e,u)}setMarkers(e,a){let l="cm-gutterElement",u=this.dom.firstChild;for(let f=0,d=0;;){let p=d,g=f<a.length?a[f++]:null,b=!1;if(g){let O=g.elementClass;O&&(l+=" "+O);for(let A=d;A<this.markers.length;A++)if(this.markers[A].compare(g)){p=A,b=!0;break}}else p=this.markers.length;for(;d<p;){let O=this.markers[d++];if(O.toDOM){O.destroy(u);let A=u.nextSibling;u.remove(),u=A}}if(!g)break;g.toDOM&&(b?u=u.nextSibling:this.dom.insertBefore(g.toDOM(e),u)),b&&d++}this.dom.className=l,this.markers=a}destroy(){this.setMarkers(null,[])}}function sameMarkers(o,e){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!o[a].compare(e[a]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(o){return combineConfig(o,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,a){let l=Object.assign({},e);for(let u in a){let f=l[u],d=a[u];l[u]=f?(p,g,b)=>f(p,g,b)||d(p,g,b):d}return l}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(o,e){return o.state.facet(lineNumberConfig).formatNumber(e,o.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],o=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,a,l){return l.some(u=>u.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(a.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,a){let l=formatNumber(a.view,maxLineNumber(a.view.state.doc.lines));return l==e.number?e:new NumberMarker(l)},domEventHandlers:o.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(o={}){return[lineNumberConfig.of(o),gutters(),lineNumberGutter]}function maxLineNumber(o){let e=9;for(;e<o;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],o=>{let e=[],a=-1;for(let l of o.selection.ranges){let u=o.doc.lineAt(l.head).from;u>a&&(a=u,e.push(activeLineGutterMarker.range(u)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength$1=1024;let nextPropID$1=0;class Range{constructor(e,a){this.from=e,this.to=a}}let NodeProp$1=class{constructor(e={}){this.id=nextPropID$1++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType$1.match(e)),a=>{let l=e(a);return l===void 0?null:[this,l]}}};NodeProp$1.closedBy=new NodeProp$1({deserialize:o=>o.split(" ")}),NodeProp$1.openedBy=new NodeProp$1({deserialize:o=>o.split(" ")}),NodeProp$1.group=new NodeProp$1({deserialize:o=>o.split(" ")}),NodeProp$1.isolate=new NodeProp$1({deserialize:o=>{if(o&&o!="rtl"&&o!="ltr"&&o!="auto")throw new RangeError("Invalid value for isolate: "+o);return o||"auto"}}),NodeProp$1.contextHash=new NodeProp$1({perNode:!0}),NodeProp$1.lookAhead=new NodeProp$1({perNode:!0}),NodeProp$1.mounted=new NodeProp$1({perNode:!0});class MountedTree{constructor(e,a,l){this.tree=e,this.overlay=a,this.parser=l}static get(e){return e&&e.props&&e.props[NodeProp$1.mounted.id]}}const noProps$1=Object.create(null);let NodeType$1=class Ur{constructor(e,a,l,u=0){this.name=e,this.props=a,this.id=l,this.flags=u}static define(e){let a=e.props&&e.props.length?Object.create(null):noProps$1,l=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),u=new Ur(e.name||"",a,e.id,l);if(e.props){for(let f of e.props)if(Array.isArray(f)||(f=f(u)),f){if(f[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[f[0].id]=f[1]}}return u}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let a=this.prop(NodeProp$1.group);return a?a.indexOf(e)>-1:!1}return this.id==e}static match(e){let a=Object.create(null);for(let l in e)for(let u of l.split(" "))a[u]=e[l];return l=>{for(let u=l.prop(NodeProp$1.group),f=-1;f<(u?u.length:0);f++){let d=a[f<0?l.name:u[f]];if(d)return d}}}};NodeType$1.none=new NodeType$1("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let a=0;a<e.length;a++)if(e[a].id!=a)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let a=[];for(let l of this.types){let u=null;for(let f of e){let d=f(l);d&&(u||(u=Object.assign({},l.props)),u[d[0].id]=d[1])}a.push(u?new NodeType$1(l.name,u,l.id,l.flags):l)}return new NodeSet(a)}}const CachedNode$1=new WeakMap,CachedInnerNode$1=new WeakMap;var IterMode$1;(function(o){o[o.ExcludeBuffers=1]="ExcludeBuffers",o[o.IncludeAnonymous=2]="IncludeAnonymous",o[o.IgnoreMounts=4]="IgnoreMounts",o[o.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode$1||(IterMode$1={}));let Tree$1=class Ir{constructor(e,a,l,u,f){if(this.type=e,this.children=a,this.positions=l,this.length=u,this.props=null,f&&f.length){this.props=Object.create(null);for(let[d,p]of f)this.props[typeof d=="number"?d:d.id]=p}}toString(){let e=MountedTree.get(this);if(e&&!e.overlay)return e.tree.toString();let a="";for(let l of this.children){let u=l.toString();u&&(a&&(a+=","),a+=u)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(e=0){return new TreeCursor$1(this.topNode,e)}cursorAt(e,a=0,l=0){let u=CachedNode$1.get(this)||this.topNode,f=new TreeCursor$1(u);return f.moveTo(e,a),CachedNode$1.set(this,f._tree),f}get topNode(){return new TreeNode$1(this,0,0,null)}resolve(e,a=0){let l=resolveNode$1(CachedNode$1.get(this)||this.topNode,e,a,!1);return CachedNode$1.set(this,l),l}resolveInner(e,a=0){let l=resolveNode$1(CachedInnerNode$1.get(this)||this.topNode,e,a,!0);return CachedInnerNode$1.set(this,l),l}resolveStack(e,a=0){return stackIterator(this,e,a)}iterate(e){let{enter:a,leave:l,from:u=0,to:f=this.length}=e,d=e.mode||0,p=(d&IterMode$1.IncludeAnonymous)>0;for(let g=this.cursor(d|IterMode$1.IncludeAnonymous);;){let b=!1;if(g.from<=f&&g.to>=u&&(!p&&g.type.isAnonymous||a(g)!==!1)){if(g.firstChild())continue;b=!0}for(;b&&l&&(p||!g.type.isAnonymous)&&l(g),!g.nextSibling();){if(!g.parent())return;b=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let a in this.props)e.push([+a,this.props[a]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange$1(NodeType$1.none,this.children,this.positions,0,this.children.length,0,this.length,(a,l,u)=>new Ir(this.type,a,l,u,this.propValues),e.makeTree||((a,l,u)=>new Ir(NodeType$1.none,a,l,u)))}static build(e){return buildTree$1(e)}};Tree$1.empty=new Tree$1(NodeType$1.none,[],[],0);let FlatBufferCursor$1=class jr{constructor(e,a){this.buffer=e,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new jr(this.buffer,this.index)}},TreeBuffer$1=class Vr{constructor(e,a,l){this.buffer=e,this.length=a,this.set=l}get type(){return NodeType$1.none}toString(){let e=[];for(let a=0;a<this.buffer.length;)e.push(this.childString(a)),a=this.buffer[a+3];return e.join(",")}childString(e){let a=this.buffer[e],l=this.buffer[e+3],u=this.set.types[a],f=u.name;if(/\W/.test(f)&&!u.isError&&(f=JSON.stringify(f)),e+=4,l==e)return f;let d=[];for(;e<l;)d.push(this.childString(e)),e=this.buffer[e+3];return f+"("+d.join(",")+")"}findChild(e,a,l,u,f){let{buffer:d}=this,p=-1;for(let g=e;g!=a&&!(checkSide$1(f,u,d[g+1],d[g+2])&&(p=g,l>0));g=d[g+3]);return p}slice(e,a,l){let u=this.buffer,f=new Uint16Array(a-e),d=0;for(let p=e,g=0;p<a;){f[g++]=u[p++],f[g++]=u[p++]-l;let b=f[g++]=u[p++]-l;f[g++]=u[p++]-e,d=Math.max(d,b)}return new Vr(f,d,this.set)}};function checkSide$1(o,e,a,l){switch(o){case-2:return a<e;case-1:return l>=e&&a<e;case 0:return a<e&&l>e;case 1:return a<=e&&l>e;case 2:return l>e;case 4:return!0}}function resolveNode$1(o,e,a,l){for(var u;o.from==o.to||(a<1?o.from>=e:o.from>e)||(a>-1?o.to<=e:o.to<e);){let d=!l&&o instanceof TreeNode$1&&o.index<0?null:o.parent;if(!d)return o;o=d}let f=l?0:IterMode$1.IgnoreOverlays;if(l)for(let d=o,p=d.parent;p;d=p,p=d.parent)d instanceof TreeNode$1&&d.index<0&&((u=p.enter(e,a,f))===null||u===void 0?void 0:u.from)!=d.from&&(o=p);for(;;){let d=o.enter(e,a,f);if(!d)return o;o=d}}class BaseNode{cursor(e=0){return new TreeCursor$1(this,e)}getChild(e,a=null,l=null){let u=getChildren$1(this,e,a,l);return u.length?u[0]:null}getChildren(e,a=null,l=null){return getChildren$1(this,e,a,l)}resolve(e,a=0){return resolveNode$1(this,e,a,!1)}resolveInner(e,a=0){return resolveNode$1(this,e,a,!0)}matchContext(e){return matchNodeContext$1(this,e)}enterUnfinishedNodesBefore(e){let a=this.childBefore(e),l=this;for(;a;){let u=a.lastChild;if(!u||u.to!=a.to)break;u.type.isError&&u.from==u.to?(l=a,a=u.prevSibling):a=u}return l}get node(){return this}get next(){return this.parent}}let TreeNode$1=class nr extends BaseNode{constructor(e,a,l,u){super(),this._tree=e,this.from=a,this.index=l,this._parent=u}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,a,l,u,f=0){for(let d=this;;){for(let{children:p,positions:g}=d._tree,b=a>0?p.length:-1;e!=b;e+=a){let O=p[e],A=g[e]+d.from;if(checkSide$1(u,l,A,A+O.length)){if(O instanceof TreeBuffer$1){if(f&IterMode$1.ExcludeBuffers)continue;let k=O.findChild(0,O.buffer.length,a,l-A,u);if(k>-1)return new BufferNode$1(new BufferContext$1(d,O,e,A),null,k)}else if(f&IterMode$1.IncludeAnonymous||!O.type.isAnonymous||hasChild$1(O)){let k;if(!(f&IterMode$1.IgnoreMounts)&&(k=MountedTree.get(O))&&!k.overlay)return new nr(k.tree,A,e,d);let M=new nr(O,A,e,d);return f&IterMode$1.IncludeAnonymous||!M.type.isAnonymous?M:M.nextChild(a<0?O.children.length-1:0,a,l,u)}}}if(f&IterMode$1.IncludeAnonymous||!d.type.isAnonymous||(d.index>=0?e=d.index+a:e=a<0?-1:d._parent._tree.children.length,d=d._parent,!d))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,a,l=0){let u;if(!(l&IterMode$1.IgnoreOverlays)&&(u=MountedTree.get(this._tree))&&u.overlay){let f=e-this.from;for(let{from:d,to:p}of u.overlay)if((a>0?d<=f:d<f)&&(a<0?p>=f:p>f))return new nr(u.tree,u.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,a,l)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function getChildren$1(o,e,a,l){let u=o.cursor(),f=[];if(!u.firstChild())return f;if(a!=null){for(;!u.type.is(a);)if(!u.nextSibling())return f}for(;;){if(l!=null&&u.type.is(l))return f;if(u.type.is(e)&&f.push(u.node),!u.nextSibling())return l==null?f:[]}}function matchNodeContext$1(o,e,a=e.length-1){for(let l=o.parent;a>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(e[a]&&e[a]!=l.name)return!1;a--}}return!0}let BufferContext$1=class{constructor(e,a,l,u){this.parent=e,this.buffer=a,this.index=l,this.start=u}},BufferNode$1=class Dn extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,a,l){super(),this.context=e,this._parent=a,this.index=l,this.type=e.buffer.set.types[e.buffer.buffer[l]]}child(e,a,l){let{buffer:u}=this.context,f=u.findChild(this.index+4,u.buffer[this.index+3],e,a-this.context.start,l);return f<0?null:new Dn(this.context,this,f)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,a,l=0){if(l&IterMode$1.ExcludeBuffers)return null;let{buffer:u}=this.context,f=u.findChild(this.index+4,u.buffer[this.index+3],a>0?1:-1,e-this.context.start,a);return f<0?null:new Dn(this.context,this,f)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,a=e.buffer[this.index+3];return a<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Dn(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new Dn(this.context,this._parent,e.findChild(a,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],a=[],{buffer:l}=this.context,u=this.index+4,f=l.buffer[this.index+3];if(f>u){let d=l.buffer[this.index+1];e.push(l.slice(u,f,d)),a.push(0)}return new Tree$1(this.type,e,a,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function iterStack(o){if(!o.length)return null;let e=0,a=o[0];for(let f=1;f<o.length;f++){let d=o[f];(d.from>a.from||d.to<a.to)&&(a=d,e=f)}let l=a instanceof TreeNode$1&&a.index<0?null:a.parent,u=o.slice();return l?u[e]=l:u.splice(e,1),new StackIterator(u,a)}class StackIterator{constructor(e,a){this.heads=e,this.node=a}get next(){return iterStack(this.heads)}}function stackIterator(o,e,a){let l=o.resolveInner(e,a),u=null;for(let f=l instanceof TreeNode$1?l:l.context.parent;f;f=f.parent)if(f.index<0){let d=f.parent;(u||(u=[l])).push(d.resolve(e,a)),f=d}else{let d=MountedTree.get(f.tree);if(d&&d.overlay&&d.overlay[0].from<=e&&d.overlay[d.overlay.length-1].to>=e){let p=new TreeNode$1(d.tree,d.overlay[0].from+f.from,-1,f);(u||(u=[l])).push(resolveNode$1(p,e,a,!1))}}return u?iterStack(u):l}let TreeCursor$1=class{get name(){return this.type.name}constructor(e,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode$1)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let l=e._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,a){this.index=e;let{start:l,buffer:u}=this.buffer;return this.type=a||u.set.types[u.buffer[e]],this.from=l+u.buffer[e+1],this.to=l+u.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode$1?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,a,l){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,a,l,this.mode));let{buffer:u}=this.buffer,f=u.findChild(this.index+4,u.buffer[this.index+3],e,a-this.buffer.start,l);return f<0?!1:(this.stack.push(this.index),this.yieldBuf(f))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,a,l=this.mode){return this.buffer?l&IterMode$1.ExcludeBuffers?!1:this.enterChild(1,e,a):this.yield(this._tree.enter(e,a,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode$1.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode$1.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:a}=this.buffer,l=this.stack.length-1;if(e<0){let u=l<0?0:this.stack[l]+4;if(this.index!=u)return this.yieldBuf(a.findChild(u,this.index,-1,0,4))}else{let u=a.buffer[this.index+3];if(u<(l<0?a.buffer.length:a.buffer[this.stack[l]+3]))return this.yieldBuf(u)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let a,l,{buffer:u}=this;if(u){if(e>0){if(this.index<u.buffer.buffer.length)return!1}else for(let f=0;f<this.index;f++)if(u.buffer.buffer[f+3]<this.index)return!1;({index:a,parent:l}=u)}else({index:a,_parent:l}=this._tree);for(;l;{index:a,_parent:l}=l)if(a>-1)for(let f=a+e,d=e<0?-1:l._tree.children.length;f!=d;f+=e){let p=l._tree.children[f];if(this.mode&IterMode$1.IncludeAnonymous||p instanceof TreeBuffer$1||!p.type.isAnonymous||hasChild$1(p))return!1}return!0}move(e,a){if(a&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,a=0){for(;(this.from==this.to||(a<1?this.from>=e:this.from>e)||(a>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,a););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,a=null,l=0;if(e&&e.context==this.buffer)e:for(let u=this.index,f=this.stack.length;f>=0;){for(let d=e;d;d=d._parent)if(d.index==u){if(u==this.index)return d;a=d,l=f+1;break e}u=this.stack[--f]}for(let u=l;u<this.stack.length;u++)a=new BufferNode$1(this.buffer,a,this.stack[u]);return this.bufferNode=new BufferNode$1(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,a){for(let l=0;;){let u=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(u=!0)}for(;u&&a&&a(this),u=this.type.isAnonymous,!this.nextSibling();){if(!l)return;this.parent(),l--,u=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext$1(this.node,e);let{buffer:a}=this.buffer,{types:l}=a.set;for(let u=e.length-1,f=this.stack.length-1;u>=0;f--){if(f<0)return matchNodeContext$1(this.node,e,u);let d=l[a.buffer[this.stack[f]]];if(!d.isAnonymous){if(e[u]&&e[u]!=d.name)return!1;u--}}return!0}};function hasChild$1(o){return o.children.some(e=>e instanceof TreeBuffer$1||!e.type.isAnonymous||hasChild$1(e))}function buildTree$1(o){var e;let{buffer:a,nodeSet:l,maxBufferLength:u=DefaultBufferLength$1,reused:f=[],minRepeatType:d=l.types.length}=o,p=Array.isArray(a)?new FlatBufferCursor$1(a,a.length):a,g=l.types,b=0,O=0;function A(z,oe,de,_e,Ce,be){let{id:xe,start:Oe,end:ke,size:Ie}=p,Fe=O;for(;Ie<0;)if(p.next(),Ie==-1){let Ze=f[xe];de.push(Ze),_e.push(Oe-z);return}else if(Ie==-3){b=xe;return}else if(Ie==-4){O=xe;return}else throw new RangeError(`Unrecognized record size: ${Ie}`);let Be=g[xe],Ge,Ne,Ve=Oe-z;if(ke-Oe<=u&&(Ne=L(p.pos-oe,Ce))){let Ze=new Uint16Array(Ne.size-Ne.skip),Je=p.pos-Ne.size,$e=Ze.length;for(;p.pos>Je;)$e=V(Ne.start,Ze,$e);Ge=new TreeBuffer$1(Ze,ke-Ne.start,l),Ve=Ne.start-z}else{let Ze=p.pos-Ie;p.next();let Je=[],$e=[],ht=xe>=d?xe:-1,xt=0,Et=ke;for(;p.pos>Ze;)ht>=0&&p.id==ht&&p.size>=0?(p.end<=Et-u&&(B(Je,$e,Oe,xt,p.end,Et,ht,Fe),xt=Je.length,Et=p.end),p.next()):be>2500?k(Oe,Ze,Je,$e):A(Oe,Ze,Je,$e,ht,be+1);if(ht>=0&&xt>0&&xt<Je.length&&B(Je,$e,Oe,xt,Oe,Et,ht,Fe),Je.reverse(),$e.reverse(),ht>-1&&xt>0){let et=M(Be);Ge=balanceRange$1(Be,Je,$e,0,Je.length,0,ke-Oe,et,et)}else Ge=N(Be,Je,$e,ke-Oe,Fe-ke)}de.push(Ge),_e.push(Ve)}function k(z,oe,de,_e){let Ce=[],be=0,xe=-1;for(;p.pos>oe;){let{id:Oe,start:ke,end:Ie,size:Fe}=p;if(Fe>4)p.next();else{if(xe>-1&&ke<xe)break;xe<0&&(xe=Ie-u),Ce.push(Oe,ke,Ie),be++,p.next()}}if(be){let Oe=new Uint16Array(be*4),ke=Ce[Ce.length-2];for(let Ie=Ce.length-3,Fe=0;Ie>=0;Ie-=3)Oe[Fe++]=Ce[Ie],Oe[Fe++]=Ce[Ie+1]-ke,Oe[Fe++]=Ce[Ie+2]-ke,Oe[Fe++]=Fe;de.push(new TreeBuffer$1(Oe,Ce[2]-ke,l)),_e.push(ke-z)}}function M(z){return(oe,de,_e)=>{let Ce=0,be=oe.length-1,xe,Oe;if(be>=0&&(xe=oe[be])instanceof Tree$1){if(!be&&xe.type==z&&xe.length==_e)return xe;(Oe=xe.prop(NodeProp$1.lookAhead))&&(Ce=de[be]+xe.length+Oe)}return N(z,oe,de,_e,Ce)}}function B(z,oe,de,_e,Ce,be,xe,Oe){let ke=[],Ie=[];for(;z.length>_e;)ke.push(z.pop()),Ie.push(oe.pop()+de-Ce);z.push(N(l.types[xe],ke,Ie,be-Ce,Oe-be)),oe.push(Ce-de)}function N(z,oe,de,_e,Ce=0,be){if(b){let xe=[NodeProp$1.contextHash,b];be=be?[xe].concat(be):[xe]}if(Ce>25){let xe=[NodeProp$1.lookAhead,Ce];be=be?[xe].concat(be):[xe]}return new Tree$1(z,oe,de,_e,be)}function L(z,oe){let de=p.fork(),_e=0,Ce=0,be=0,xe=de.end-u,Oe={size:0,start:0,skip:0};e:for(let ke=de.pos-z;de.pos>ke;){let Ie=de.size;if(de.id==oe&&Ie>=0){Oe.size=_e,Oe.start=Ce,Oe.skip=be,be+=4,_e+=4,de.next();continue}let Fe=de.pos-Ie;if(Ie<0||Fe<ke||de.start<xe)break;let Be=de.id>=d?4:0,Ge=de.start;for(de.next();de.pos>Fe;){if(de.size<0)if(de.size==-3)Be+=4;else break e;else de.id>=d&&(Be+=4);de.next()}Ce=Ge,_e+=Ie,be+=Be}return(oe<0||_e==z)&&(Oe.size=_e,Oe.start=Ce,Oe.skip=be),Oe.size>4?Oe:void 0}function V(z,oe,de){let{id:_e,start:Ce,end:be,size:xe}=p;if(p.next(),xe>=0&&_e<d){let Oe=de;if(xe>4){let ke=p.pos-(xe-4);for(;p.pos>ke;)de=V(z,oe,de)}oe[--de]=Oe,oe[--de]=be-z,oe[--de]=Ce-z,oe[--de]=_e}else xe==-3?b=_e:xe==-4&&(O=_e);return de}let se=[],pe=[];for(;p.pos>0;)A(o.start||0,o.bufferStart||0,se,pe,-1,0);let re=(e=o.length)!==null&&e!==void 0?e:se.length?pe[0]+se[0].length:0;return new Tree$1(g[o.topID],se.reverse(),pe.reverse(),re)}const nodeSizeCache$1=new WeakMap;function nodeSize$1(o,e){if(!o.isAnonymous||e instanceof TreeBuffer$1||e.type!=o)return 1;let a=nodeSizeCache$1.get(e);if(a==null){a=1;for(let l of e.children){if(l.type!=o||!(l instanceof Tree$1)){a=1;break}a+=nodeSize$1(o,l)}nodeSizeCache$1.set(e,a)}return a}function balanceRange$1(o,e,a,l,u,f,d,p,g){let b=0;for(let B=l;B<u;B++)b+=nodeSize$1(o,e[B]);let O=Math.ceil(b*1.5/8),A=[],k=[];function M(B,N,L,V,se){for(let pe=L;pe<V;){let re=pe,z=N[pe],oe=nodeSize$1(o,B[pe]);for(pe++;pe<V;pe++){let de=nodeSize$1(o,B[pe]);if(oe+de>=O)break;oe+=de}if(pe==re+1){if(oe>O){let de=B[re];M(de.children,de.positions,0,de.children.length,N[re]+se);continue}A.push(B[re])}else{let de=N[pe-1]+B[pe-1].length-z;A.push(balanceRange$1(o,B,N,re,pe,z,de,null,g))}k.push(z+se-f)}}return M(e,a,l,u,0),(p||g)(A,k,d)}class TreeFragment{constructor(e,a,l,u,f=!1,d=!1){this.from=e,this.to=a,this.tree=l,this.offset=u,this.open=(f?1:0)|(d?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,a=[],l=!1){let u=[new TreeFragment(0,e.length,e,0,!1,l)];for(let f of a)f.to>e.length&&u.push(f);return u}static applyChanges(e,a,l=128){if(!a.length)return e;let u=[],f=1,d=e.length?e[0]:null;for(let p=0,g=0,b=0;;p++){let O=p<a.length?a[p]:null,A=O?O.fromA:1e9;if(A-g>=l)for(;d&&d.from<A;){let k=d;if(g>=k.from||A<=k.to||b){let M=Math.max(k.from,g)-b,B=Math.min(k.to,A)-b;k=M>=B?null:new TreeFragment(M,B,k.tree,k.offset+b,p>0,!!O)}if(k&&u.push(k),d.to>A)break;d=f<e.length?e[f++]:null}if(!O)break;g=O.toA,b=O.toA-O.toB}return u}}class Parser{startParse(e,a,l){return typeof e=="string"&&(e=new StringInput(e)),l=l?l.length?l.map(u=>new Range(u.from,u.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,a||[],l)}parse(e,a,l){let u=this.startParse(e,a,l);for(;;){let f=u.advance();if(f)return f}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,a){return this.string.slice(e,a)}}new NodeProp$1({perNode:!0});let nextTagID=0;class Tag{constructor(e,a,l){this.set=e,this.base=a,this.modified=l,this.id=nextTagID++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let a=new Tag([],null,[]);if(a.set.push(a),e)for(let l of e.set)a.set.push(l);return a}static defineModifier(){let e=new Modifier;return a=>a.modified.indexOf(e)>-1?a:Modifier.get(a.base||a,a.modified.concat(e).sort((l,u)=>l.id-u.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,a){if(!a.length)return e;let l=a[0].instances.find(p=>p.base==e&&sameArray(a,p.modified));if(l)return l;let u=[],f=new Tag(u,e,a);for(let p of a)p.instances.push(f);let d=powerSet(a);for(let p of e.set)if(!p.modified.length)for(let g of d)u.push(Modifier.get(p,g));return f}}function sameArray(o,e){return o.length==e.length&&o.every((a,l)=>a==e[l])}function powerSet(o){let e=[[]];for(let a=0;a<o.length;a++)for(let l=0,u=e.length;l<u;l++)e.push(e[l].concat(o[a]));return e.sort((a,l)=>l.length-a.length)}function styleTags(o){let e=Object.create(null);for(let a in o){let l=o[a];Array.isArray(l)||(l=[l]);for(let u of a.split(" "))if(u){let f=[],d=2,p=u;for(let A=0;;){if(p=="..."&&A>0&&A+3==u.length){d=1;break}let k=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(p);if(!k)throw new RangeError("Invalid path: "+u);if(f.push(k[0]=="*"?"":k[0][0]=='"'?JSON.parse(k[0]):k[0]),A+=k[0].length,A==u.length)break;let M=u[A++];if(A==u.length&&M=="!"){d=0;break}if(M!="/")throw new RangeError("Invalid path: "+u);p=u.slice(A)}let g=f.length-1,b=f[g];if(!b)throw new RangeError("Invalid path: "+u);let O=new Rule(l,d,g>0?f.slice(0,g):null);e[b]=O.sort(e[b])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp$1;class Rule{constructor(e,a,l,u){this.tags=e,this.mode=a,this.context=l,this.next=u}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(o,e){let a=Object.create(null);for(let f of o)if(!Array.isArray(f.tag))a[f.tag.id]=f.class;else for(let d of f.tag)a[d.id]=f.class;let{scope:l,all:u=null}=e||{};return{style:f=>{let d=u;for(let p of f)for(let g of p.set){let b=a[g.id];if(b){d=d?d+" "+b:b;break}}return d},scope:l}}function highlightTags(o,e){let a=null;for(let l of o){let u=l.style(e);u&&(a=a?a+" "+u:u)}return a}function highlightTree(o,e,a,l=0,u=o.length){let f=new HighlightBuilder(l,Array.isArray(e)?e:[e],a);f.highlightRange(o.cursor(),l,u,"",f.highlighters),f.flush(u)}class HighlightBuilder{constructor(e,a,l){this.at=e,this.highlighters=a,this.span=l,this.class=""}startSpan(e,a){a!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=a)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,a,l,u,f){let{type:d,from:p,to:g}=e;if(p>=l||g<=a)return;d.isTop&&(f=this.highlighters.filter(M=>!M.scope||M.scope(d)));let b=u,O=getStyleTags(e)||Rule.empty,A=highlightTags(f,O.tags);if(A&&(b&&(b+=" "),b+=A,O.mode==1&&(u+=(u?" ":"")+A)),this.startSpan(Math.max(a,p),b),O.opaque)return;let k=e.tree&&e.tree.prop(NodeProp$1.mounted);if(k&&k.overlay){let M=e.node.enter(k.overlay[0].from+p,1),B=this.highlighters.filter(L=>!L.scope||L.scope(k.tree.type)),N=e.firstChild();for(let L=0,V=p;;L++){let se=L<k.overlay.length?k.overlay[L]:null,pe=se?se.from+p:g,re=Math.max(a,V),z=Math.min(l,pe);if(re<z&&N)for(;e.from<z&&(this.highlightRange(e,re,z,u,f),this.startSpan(Math.min(z,e.to),b),!(e.to>=pe||!e.nextSibling())););if(!se||pe>l)break;V=se.to+p,V>a&&(this.highlightRange(M.cursor(),Math.max(a,se.from+p),Math.min(l,V),"",B),this.startSpan(Math.min(l,V),b))}N&&e.parent()}else if(e.firstChild()){k&&(u="");do if(!(e.to<=a)){if(e.from>=l)break;this.highlightRange(e,a,l,u,f),this.startSpan(Math.min(l,e.to),b)}while(e.nextSibling());e.parent()}}}function getStyleTags(o){let e=o.type.prop(ruleNodeProp);for(;e&&e.context&&!o.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name$2=t(),typeName=t(name$2),propertyName=t(name$2),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation$1=t(),bracket=t(punctuation$1),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:name$2,variableName:t(name$2),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name$2),labelName:t(name$2),namespace:t(name$2),macroName:t(name$2),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation:punctuation$1,separator:t(punctuation$1),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);const C$1="ͼ",COUNT=typeof Symbol>"u"?"__"+C$1:Symbol.for(C$1),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,a){this.rules=[];let{finish:l}=a||{};function u(d){return/^@/.test(d)?[d]:d.split(/,\s*/)}function f(d,p,g,b){let O=[],A=/^@(\w+)\b/.exec(d[0]),k=A&&A[1]=="keyframes";if(A&&p==null)return g.push(d[0]+";");for(let M in p){let B=p[M];if(/&/.test(M))f(M.split(/,\s*/).map(N=>d.map(L=>N.replace(/&/,L))).reduce((N,L)=>N.concat(L)),B,g);else if(B&&typeof B=="object"){if(!A)throw new RangeError("The value of a property ("+M+") should be a primitive value.");f(u(M),B,O,k)}else B!=null&&O.push(M.replace(/_.*/,"").replace(/[A-Z]/g,N=>"-"+N.toLowerCase())+": "+B+";")}(O.length||k)&&g.push((l&&!A&&!b?d.map(l):d).join(", ")+" {"+O.join(" ")+"}")}for(let d in e)f(u(d),e[d],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C$1+e.toString(36)}static mount(e,a){(e[SET]||new StyleSet(e)).mount(Array.isArray(a)?a:[a])}}let adoptedSet=null;class StyleSet{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(adoptedSet)return e.adoptedStyleSheets=[adoptedSet.sheet].concat(e.adoptedStyleSheets),e[SET]=adoptedSet;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let a=e.head||e;a.insertBefore(this.styleTag,a.firstChild)}this.modules=[],e[SET]=this}mount(e){let a=this.sheet,l=0,u=0;for(let f=0;f<e.length;f++){let d=e[f],p=this.modules.indexOf(d);if(p<u&&p>-1&&(this.modules.splice(p,1),u--,p=-1),p==-1){if(this.modules.splice(u++,0,d),a)for(let g=0;g<d.rules.length;g++)a.insertRule(d.rules[g],l++)}else{for(;u<p;)l+=this.modules[u++].rules.length;l+=d.rules.length,u++}}if(!a){let f="";for(let d=0;d<this.modules.length;d++)f+=this.modules[d].getRules()+`
`;this.styleTag.textContent=f}}}var _a;const languageDataProp=new NodeProp$1;function defineLanguageFacet(o){return Facet.define({combine:o?e=>e.concat(o):void 0})}const sublanguageProp=new NodeProp$1;class Language{constructor(e,a,l=[],u=""){this.data=e,this.name=u,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=a,this.extension=[language.of(this),EditorState.languageData.of((f,d,p)=>{let g=topNodeAt(f,d,p),b=g.type.prop(languageDataProp);if(!b)return[];let O=f.facet(b),A=g.type.prop(sublanguageProp);if(A){let k=g.resolve(d-g.from,p);for(let M of A)if(M.test(k,f)){let B=f.facet(M.facet);return M.type=="replace"?B:B.concat(O)}}return O})].concat(l)}isActiveAt(e,a,l=-1){return topNodeAt(e,a,l).type.prop(languageDataProp)==this.data}findRegions(e){let a=e.facet(language);if(a?.data==this.data)return[{from:0,to:e.doc.length}];if(!a||!a.allowsNesting)return[];let l=[],u=(f,d)=>{if(f.prop(languageDataProp)==this.data){l.push({from:d,to:d+f.length});return}let p=f.prop(NodeProp$1.mounted);if(p){if(p.tree.prop(languageDataProp)==this.data){if(p.overlay)for(let g of p.overlay)l.push({from:g.from+d,to:g.to+d});else l.push({from:d,to:d+f.length});return}else if(p.overlay){let g=l.length;if(u(p.tree,p.overlay[0].from+d),l.length>g)return}}for(let g=0;g<f.children.length;g++){let b=f.children[g];b instanceof Tree$1&&u(b,f.positions[g]+d)}};return u(syntaxTree(e),0),l}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(o,e,a){let l=o.facet(language),u=syntaxTree(o).topNode;if(!l||l.allowsNesting)for(let f=u;f;f=f.enter(e,a,IterMode$1.ExcludeBuffers))f.type.isTop&&(u=f);return u}class LRLanguage extends Language{constructor(e,a,l){super(e,a,[],l),this.parser=a}static define(e){let a=defineLanguageFacet(e.languageData);return new LRLanguage(a,e.parser.configure({props:[languageDataProp.add(l=>l.isTop?a:void 0)]}),e.name)}configure(e,a){return new LRLanguage(this.data,this.parser.configure(e),a||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(o){let e=o.field(Language.state,!1);return e?e.tree:Tree$1.empty}function ensureSyntaxTree(o,e,a=50){var l;let u=(l=o.field(Language.state,!1))===null||l===void 0?void 0:l.context;if(!u)return null;let f=u.viewport;u.updateViewport({from:0,to:e});let d=u.isDone(e)||u.work(a,e)?u.tree:null;return u.updateViewport(f),d}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,a){let l=this.cursorPos-this.string.length;return e<l||a>=this.cursorPos?this.doc.sliceString(e,a):this.string.slice(e-l,a-l)}}let currentContext=null;class ParseContext{constructor(e,a,l=[],u,f,d,p,g){this.parser=e,this.state=a,this.fragments=l,this.tree=u,this.treeLen=f,this.viewport=d,this.skipped=p,this.scheduleOn=g,this.parse=null,this.tempSkipped=[]}static create(e,a,l){return new ParseContext(e,a,[],Tree$1.empty,0,l,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,a){return a!=null&&a>=this.state.doc.length&&(a=void 0),this.tree!=Tree$1.empty&&this.isDone(a??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var l;if(typeof e=="number"){let u=Date.now()+e;e=()=>Date.now()>u}for(this.parse||(this.parse=this.startParse()),a!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>a)&&a<this.state.doc.length&&this.parse.stopAt(a);;){let u=this.parse.advance();if(u)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(u,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(l=this.parse.stoppedAt)!==null&&l!==void 0?l:this.state.doc.length,this.tree=u,this.parse=null,this.treeLen<(a??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,a;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(a=this.parse.advance()););}),this.treeLen=e,this.tree=a,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let a=currentContext;currentContext=this;try{return e()}finally{currentContext=a}}withoutTempSkipped(e){for(let a;a=this.tempSkipped.pop();)e=cutFragments(e,a.from,a.to);return e}changes(e,a){let{fragments:l,tree:u,treeLen:f,viewport:d,skipped:p}=this;if(this.takeTree(),!e.empty){let g=[];if(e.iterChangedRanges((b,O,A,k)=>g.push({fromA:b,toA:O,fromB:A,toB:k})),l=TreeFragment.applyChanges(l,g),u=Tree$1.empty,f=0,d={from:e.mapPos(d.from,-1),to:e.mapPos(d.to,1)},this.skipped.length){p=[];for(let b of this.skipped){let O=e.mapPos(b.from,1),A=e.mapPos(b.to,-1);O<A&&p.push({from:O,to:A})}}}return new ParseContext(this.parser,a,l,u,f,d,p,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let a=this.skipped.length;for(let l=0;l<this.skipped.length;l++){let{from:u,to:f}=this.skipped[l];u<e.to&&f>e.from&&(this.fragments=cutFragments(this.fragments,u,f),this.skipped.splice(l--,1))}return this.skipped.length>=a?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,a){this.skipped.push({from:e,to:a})}static getSkippingParser(e){return new class extends Parser{createParse(a,l,u){let f=u[0].from,d=u[u.length-1].to;return{parsedPos:f,advance(){let g=currentContext;if(g){for(let b of u)g.tempSkipped.push(b);e&&(g.scheduleOn=g.scheduleOn?Promise.all([g.scheduleOn,e]):e)}return this.parsedPos=d,new Tree$1(NodeType$1.none,[],[],d-f)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let a=this.fragments;return this.treeLen>=e&&a.length&&a[0].from==0&&a[0].to>=e}static get(){return currentContext}}function cutFragments(o,e,a){return TreeFragment.applyChanges(o,[{fromA:e,toA:a,fromB:e,toB:a}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let a=this.context.changes(e.changes,e.state),l=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),a.viewport.to);return a.work(20,l)||a.takeTree(),new LanguageState(a)}static init(e){let a=Math.min(3e3,e.doc.length),l=ParseContext.create(e.facet(language).parser,e,{from:0,to:a});return l.work(20,a)||l.takeTree(),new LanguageState(l)}}Language.state=StateField.define({create:LanguageState.init,update(o,e){for(let a of e.effects)if(a.is(Language.setState))return a.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):o.apply(e)}});let requestIdle=o=>{let e=setTimeout(()=>o(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=o=>{let e=-1,a=setTimeout(()=>{e=requestIdleCallback(o,{timeout:500-100})},100);return()=>e<0?clearTimeout(a):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let a=this.view.state.field(Language.state).context;(a.updateViewport(e.view.viewport)||this.view.viewport.to>a.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(a)}scheduleWork(){if(this.working)return;let{state:e}=this.view,a=e.field(Language.state);(a.tree!=a.context.tree||!a.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let a=Date.now();if(this.chunkEnd<a&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=a+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:l,viewport:{to:u}}=this.view,f=l.field(Language.state);if(f.tree==f.context.tree&&f.context.isDone(u+1e5))return;let d=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),p=f.context.treeLen<u&&l.doc.length>u+1e3,g=f.context.work(()=>isInputPending&&isInputPending()||Date.now()>d,u+(p?0:1e5));this.chunkBudget-=Date.now()-a,(g||this.chunkBudget<=0)&&(f.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(f.context))})),this.chunkBudget>0&&!(g&&!p)&&this.scheduleWork(),this.checkAsyncSchedule(f.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(a=>logException(this.view.state,a)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(o){return o.length?o[0]:null},enables:o=>[Language.state,parseWorker,EditorView.contentAttributes.compute([o],e=>{let a=e.facet(o);return a&&a.name?{"data-language":a.name}:{}})]});class LanguageSupport{constructor(e,a=[]){this.language=e,this.support=a,this.extension=[e,a]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:o=>{if(!o.length)return"  ";let e=o[0];if(!e||/\S/.test(e)||Array.from(e).some(a=>a!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(o[0]));return e}});function getIndentUnit(o){let e=o.facet(indentUnit);return e.charCodeAt(0)==9?o.tabSize*e.length:e.length}function indentString(o,e){let a="",l=o.tabSize,u=o.facet(indentUnit)[0];if(u=="	"){for(;e>=l;)a+="	",e-=l;u=" "}for(let f=0;f<e;f++)a+=u;return a}function getIndentation(o,e){o instanceof EditorState&&(o=new IndentContext(o));for(let l of o.state.facet(indentService)){let u=l(o,e);if(u!==void 0)return u}let a=syntaxTree(o.state);return a.length>=e?syntaxIndentation(o,a,e):null}class IndentContext{constructor(e,a={}){this.state=e,this.options=a,this.unit=getIndentUnit(e)}lineAt(e,a=1){let l=this.state.doc.lineAt(e),{simulateBreak:u,simulateDoubleBreak:f}=this.options;return u!=null&&u>=l.from&&u<=l.to?f&&u==e?{text:"",from:e}:(a<0?u<e:u<=e)?{text:l.text.slice(u-l.from),from:u}:{text:l.text.slice(0,u-l.from),from:l.from}:l}textAfterPos(e,a=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:l,from:u}=this.lineAt(e,a);return l.slice(e-u,Math.min(l.length,e+100-u))}column(e,a=1){let{text:l,from:u}=this.lineAt(e,a),f=this.countColumn(l,e-u),d=this.options.overrideIndentation?this.options.overrideIndentation(u):-1;return d>-1&&(f+=d-this.countColumn(l,l.search(/\S|$/))),f}countColumn(e,a=e.length){return countColumn(e,this.state.tabSize,a)}lineIndent(e,a=1){let{text:l,from:u}=this.lineAt(e,a),f=this.options.overrideIndentation;if(f){let d=f(u);if(d>-1)return d}return this.countColumn(l,l.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp$1;function syntaxIndentation(o,e,a){let l=e.resolveStack(a),u=l.node.enterUnfinishedNodesBefore(a);if(u!=l.node){let f=[];for(let d=u;d!=l.node;d=d.parent)f.push(d);for(let d=f.length-1;d>=0;d--)l={node:f[d],next:l}}return indentFor(l,o,a)}function indentFor(o,e,a){for(let l=o;l;l=l.next){let u=indentStrategy(l.node);if(u)return u(TreeIndentContext.create(e,a,l))}return 0}function ignoreClosed(o){return o.pos==o.options.simulateBreak&&o.options.simulateDoubleBreak}function indentStrategy(o){let e=o.type.prop(indentNodeProp);if(e)return e;let a=o.firstChild,l;if(a&&(l=a.type.prop(NodeProp$1.closedBy))){let u=o.lastChild,f=u&&l.indexOf(u.name)>-1;return d=>delimitedStrategy(d,!0,1,void 0,f&&!ignoreClosed(d)?u.from:void 0)}return o.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,a,l){super(e.state,e.options),this.base=e,this.pos=a,this.context=l}get node(){return this.context.node}static create(e,a,l){return new TreeIndentContext(e,a,l)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let a=this.state.doc.lineAt(e.from);for(;;){let l=e.resolve(a.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if(isParent(l,e))break;a=this.state.doc.lineAt(l.from)}return this.lineIndent(a.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(o,e){for(let a=e;a;a=a.parent)if(o==a)return!0;return!1}function bracketedAligned(o){let e=o.node,a=e.childAfter(e.from),l=e.lastChild;if(!a)return null;let u=o.options.simulateBreak,f=o.state.doc.lineAt(a.from),d=u==null||u<=f.from?f.to:Math.min(f.to,u);for(let p=a.to;;){let g=e.childAfter(p);if(!g||g==l)return null;if(!g.type.isSkipped)return g.from<d?a:null;p=g.to}}function delimitedIndent({closing:o,align:e=!0,units:a=1}){return l=>delimitedStrategy(l,e,a,o)}function delimitedStrategy(o,e,a,l,u){let f=o.textAfter,d=f.match(/^\s*/)[0].length,p=l&&f.slice(d,d+l.length)==l||u==o.pos+d,g=e?bracketedAligned(o):null;return g?p?o.column(g.from):o.column(g.to):o.baseIndent+(p?0:o.unit*a)}const flatIndent=o=>o.baseIndent;function continuedIndent({except:o,units:e=1}={}){return a=>{let l=o&&o.test(a.textAfter);return a.baseIndent+(l?0:e*a.unit)}}const foldService=Facet.define(),foldNodeProp=new NodeProp$1;function foldInside(o){let e=o.firstChild,a=o.lastChild;return e&&e.to<a.from?{from:e.to,to:a.type.isError?o.to:a.from}:null}function syntaxFolding(o,e,a){let l=syntaxTree(o);if(l.length<a)return null;let u=l.resolveStack(a,1),f=null;for(let d=u;d;d=d.next){let p=d.node;if(p.to<=a||p.from>a)continue;if(f&&p.from<e)break;let g=p.type.prop(foldNodeProp);if(g&&(p.to<l.length-50||l.length==o.doc.length||!isUnfinished(p))){let b=g(p,o);b&&b.from<=a&&b.from>=e&&b.to>a&&(f=b)}}return f}function isUnfinished(o){let e=o.lastChild;return e&&e.to==o.to&&e.type.isError}function foldable(o,e,a){for(let l of o.facet(foldService)){let u=l(o,e,a);if(u)return u}return syntaxFolding(o,e,a)}function mapRange(o,e){let a=e.mapPos(o.from,1),l=e.mapPos(o.to,-1);return a>=l?void 0:{from:a,to:l}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(o){let e=[];for(let{head:a}of o.state.selection.ranges)e.some(l=>l.from<=a&&l.to>=a)||e.push(o.lineBlockAt(a));return e}const foldState=StateField.define({create(){return Decoration.none},update(o,e){o=o.map(e.changes);for(let a of e.effects)if(a.is(foldEffect)&&!foldExists(o,a.value.from,a.value.to)){let{preparePlaceholder:l}=e.state.facet(foldConfig),u=l?Decoration.replace({widget:new PreparedFoldWidget(l(e.state,a.value))}):foldWidget;o=o.update({add:[u.range(a.value.from,a.value.to)]})}else a.is(unfoldEffect)&&(o=o.update({filter:(l,u)=>a.value.from!=l||a.value.to!=u,filterFrom:a.value.from,filterTo:a.value.to}));if(e.selection){let a=!1,{head:l}=e.selection.main;o.between(l,l,(u,f)=>{u<l&&f>l&&(a=!0)}),a&&(o=o.update({filterFrom:l,filterTo:l,filter:(u,f)=>f<=l||u>=l}))}return o},provide:o=>EditorView.decorations.from(o),toJSON(o,e){let a=[];return o.between(0,e.doc.length,(l,u)=>{a.push(l,u)}),a},fromJSON(o){if(!Array.isArray(o)||o.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let a=0;a<o.length;){let l=o[a++],u=o[a++];if(typeof l!="number"||typeof u!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(l,u))}return Decoration.set(e,!0)}});function findFold(o,e,a){var l;let u=null;return(l=o.field(foldState,!1))===null||l===void 0||l.between(e,a,(f,d)=>{(!u||u.from>f)&&(u={from:f,to:d})}),u}function foldExists(o,e,a){let l=!1;return o.between(e,e,(u,f)=>{u==e&&f==a&&(l=!0)}),l}function maybeEnable(o,e){return o.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=o=>{for(let e of selectedLines(o)){let a=foldable(o.state,e.from,e.to);if(a)return o.dispatch({effects:maybeEnable(o.state,[foldEffect.of(a),announceFold(o,a)])}),!0}return!1},unfoldCode=o=>{if(!o.state.field(foldState,!1))return!1;let e=[];for(let a of selectedLines(o)){let l=findFold(o.state,a.from,a.to);l&&e.push(unfoldEffect.of(l),announceFold(o,l,!1))}return e.length&&o.dispatch({effects:e}),e.length>0};function announceFold(o,e,a=!0){let l=o.state.doc.lineAt(e.from).number,u=o.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${o.state.phrase(a?"Folded lines":"Unfolded lines")} ${l} ${o.state.phrase("to")} ${u}.`)}const foldAll=o=>{let{state:e}=o,a=[];for(let l=0;l<e.doc.length;){let u=o.lineBlockAt(l),f=foldable(e,u.from,u.to);f&&a.push(foldEffect.of(f)),l=(f?o.lineBlockAt(f.to):u).to+1}return a.length&&o.dispatch({effects:maybeEnable(o.state,a)}),!!a.length},unfoldAll=o=>{let e=o.state.field(foldState,!1);if(!e||!e.size)return!1;let a=[];return e.between(0,o.state.doc.length,(l,u)=>{a.push(unfoldEffect.of({from:l,to:u}))}),o.dispatch({effects:a}),!0},defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine(o){return combineConfig(o,defaultConfig)}});function codeFolding(o){let e=[foldState,baseTheme$1$1];return o&&e.push(foldConfig.of(o)),e}function widgetToDOM(o,e){let{state:a}=o,l=a.facet(foldConfig),u=d=>{let p=o.lineBlockAt(o.posAtDOM(d.target)),g=findFold(o.state,p.from,p.to);g&&o.dispatch({effects:unfoldEffect.of(g)}),d.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(o,u,e);let f=document.createElement("span");return f.textContent=l.placeholderText,f.setAttribute("aria-label",a.phrase("folded code")),f.title=a.phrase("unfold"),f.className="cm-foldPlaceholder",f.onclick=u,f}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(o){return widgetToDOM(o,null)}}});class PreparedFoldWidget extends WidgetType{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return widgetToDOM(e,this.value)}}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,a){this.specs=e;let l;function u(p){let g=StyleModule.newName();return(l||(l=Object.create(null)))["."+g]=p,g}const f=typeof a.all=="string"?a.all:a.all?u(a.all):void 0,d=a.scope;this.scope=d instanceof Language?p=>p.prop(languageDataProp)==d.data:d?p=>p==d:void 0,this.style=tagHighlighter(e.map(p=>({tag:p.tag,class:p.class||u(Object.assign({},p,{tag:null}))})),{all:f}).style,this.module=l?new StyleModule(l):null,this.themeType=a.themeType}static define(e,a){return new HighlightStyle(e,a||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(o){return o.length?[o[0]]:null}});function getHighlighters(o){let e=o.facet(highlighterFacet);return e.length?e:o.facet(fallbackHighlighter)}function syntaxHighlighting(o,e){let a=[treeHighlighter],l;return o instanceof HighlightStyle&&(o.module&&a.push(EditorView.styleModule.of(o.module)),l=o.themeType),e?.fallback?a.push(fallbackHighlighter.of(o)):l?a.push(highlighterFacet.computeN([EditorView.darkTheme],u=>u.facet(EditorView.darkTheme)==(l=="dark")?[o]:[])):a.push(highlighterFacet.of(o)),a}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let a=syntaxTree(e.state),l=getHighlighters(e.state),u=l!=getHighlighters(e.startState);a.length<e.view.viewport.to&&!u&&a.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(a!=this.tree||e.viewportChanged||u)&&(this.tree=a,this.decorations=this.buildDeco(e.view,l))}buildDeco(e,a){if(!a||!this.tree.length)return Decoration.none;let l=new RangeSetBuilder;for(let{from:u,to:f}of e.visibleRanges)highlightTree(this.tree,a,(d,p,g)=>{l.add(d,p,this.markCache[g]||(this.markCache[g]=Decoration.mark({class:g})))},u,f);return l.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:o=>o.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$5=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(o){return combineConfig(o,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(o){let e=[],a=o.matched?matchingMark:nonmatchingMark;return e.push(a.range(o.start.from,o.start.to)),o.end&&e.push(a.range(o.end.from,o.end.to)),e}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(o,e){if(!e.docChanged&&!e.selection)return o;let a=[],l=e.state.facet(bracketMatchingConfig);for(let u of e.state.selection.ranges){if(!u.empty)continue;let f=matchBrackets(e.state,u.head,-1,l)||u.head>0&&matchBrackets(e.state,u.head-1,1,l)||l.afterCursor&&(matchBrackets(e.state,u.head,1,l)||u.head<e.state.doc.length&&matchBrackets(e.state,u.head+1,-1,l));f&&(a=a.concat(l.renderMatch(f,e.state)))}return Decoration.set(a,!0)},provide:o=>EditorView.decorations.from(o)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$5];function bracketMatching(o={}){return[bracketMatchingConfig.of(o),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp$1;function matchingNodes(o,e,a){let l=o.prop(e<0?NodeProp$1.openedBy:NodeProp$1.closedBy);if(l)return l;if(o.name.length==1){let u=a.indexOf(o.name);if(u>-1&&u%2==(e<0?1:0))return[a[u+e]]}return null}function findHandle(o){let e=o.type.prop(bracketMatchingHandle);return e?e(o.node):o}function matchBrackets(o,e,a,l={}){let u=l.maxScanDistance||DefaultScanDist,f=l.brackets||DefaultBrackets,d=syntaxTree(o),p=d.resolveInner(e,a);for(let g=p;g;g=g.parent){let b=matchingNodes(g.type,a,f);if(b&&g.from<g.to){let O=findHandle(g);if(O&&(a>0?e>=O.from&&e<O.to:e>O.from&&e<=O.to))return matchMarkedBrackets(o,e,a,g,O,b,f)}}return matchPlainBrackets(o,e,a,d,p.type,u,f)}function matchMarkedBrackets(o,e,a,l,u,f,d){let p=l.parent,g={from:u.from,to:u.to},b=0,O=p?.cursor();if(O&&(a<0?O.childBefore(l.from):O.childAfter(l.to)))do if(a<0?O.to<=l.from:O.from>=l.to){if(b==0&&f.indexOf(O.type.name)>-1&&O.from<O.to){let A=findHandle(O);return{start:g,end:A?{from:A.from,to:A.to}:void 0,matched:!0}}else if(matchingNodes(O.type,a,d))b++;else if(matchingNodes(O.type,-a,d)){if(b==0){let A=findHandle(O);return{start:g,end:A&&A.from<A.to?{from:A.from,to:A.to}:void 0,matched:!1}}b--}}while(a<0?O.prevSibling():O.nextSibling());return{start:g,matched:!1}}function matchPlainBrackets(o,e,a,l,u,f,d){let p=a<0?o.sliceDoc(e-1,e):o.sliceDoc(e,e+1),g=d.indexOf(p);if(g<0||g%2==0!=a>0)return null;let b={from:a<0?e-1:e,to:a>0?e+1:e},O=o.doc.iterRange(e,a>0?o.doc.length:0),A=0;for(let k=0;!O.next().done&&k<=f;){let M=O.value;a<0&&(k+=M.length);let B=e+k*a;for(let N=a>0?0:M.length-1,L=a>0?M.length:-1;N!=L;N+=a){let V=d.indexOf(M[N]);if(!(V<0||l.resolveInner(B+N,1).type!=u))if(V%2==0==a>0)A++;else{if(A==1)return{start:b,end:{from:B+N,to:B+N+1},matched:V>>1==g>>1};A--}}a>0&&(k+=M.length)}return O.done?{start:b,matched:!1}:null}function countCol(o,e,a,l=0,u=0){e==null&&(e=o.search(/[^\s\u00a0]/),e==-1&&(e=o.length));let f=u;for(let d=l;d<e;d++)o.charCodeAt(d)==9?f+=a-f%a:f++;return f}class StringStream{constructor(e,a,l,u){this.string=e,this.tabSize=a,this.indentUnit=l,this.overrideIndent=u,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let a=this.string.charAt(this.pos),l;if(typeof e=="string"?l=a==e:l=a&&(e instanceof RegExp?e.test(a):e(a)),l)return++this.pos,a}eatWhile(e){let a=this.pos;for(;this.eat(e););return this.pos>a}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let a=this.string.indexOf(e,this.pos);if(a>-1)return this.pos=a,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:countCol(this.string,null,this.tabSize)}match(e,a,l){if(typeof e=="string"){let u=d=>l?d.toLowerCase():d,f=this.string.substr(this.pos,e.length);return u(f)==u(e)?(a!==!1&&(this.pos+=e.length),!0):null}else{let u=this.string.slice(this.pos).match(e);return u&&u.index>0?null:(u&&a!==!1&&(this.pos+=u[0].length),u)}}current(){return this.string.slice(this.start,this.pos)}}const noTokens=Object.create(null),typeArray=[NodeType$1.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[o,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[o]=createTokenType(noTokens,e);function warnForPart(o,e){warned.indexOf(o)>-1||(warned.push(o),console.warn(e))}function createTokenType(o,e){let a=[];for(let p of e.split(" ")){let g=[];for(let b of p.split(".")){let O=o[b]||tags[b];O?typeof O=="function"?g.length?g=g.map(O):warnForPart(b,`Modifier ${b} used at start of tag`):g.length?warnForPart(b,`Tag ${b} used as modifier`):g=Array.isArray(O)?O:[O]:warnForPart(b,`Unknown highlighting tag ${b}`)}for(let b of g)a.push(b)}if(!a.length)return 0;let l=e.replace(/ /g,"_"),u=l+" "+a.map(p=>p.id),f=byTag[u];if(f)return f.id;let d=byTag[u]=NodeType$1.define({id:typeArray.length,name:l,props:[styleTags({[l]:a})]});return typeArray.push(d),d.id}Direction.RTL,Direction.LTR;class CompletionContext{constructor(e,a,l){this.state=e,this.pos=a,this.explicit=l,this.abortListeners=[]}tokenBefore(e){let a=syntaxTree(this.state).resolveInner(this.pos,-1);for(;a&&e.indexOf(a.name)<0;)a=a.parent;return a?{from:a.from,to:this.pos,text:this.state.sliceDoc(a.from,this.pos),type:a.type}:null}matchBefore(e){let a=this.state.doc.lineAt(this.pos),l=Math.max(a.from,this.pos-250),u=a.text.slice(l-a.from,this.pos-a.from),f=u.search(ensureAnchor(e,!1));return f<0?null:{from:l+f,to:this.pos,text:u.slice(f)}}get aborted(){return this.abortListeners==null}addEventListener(e,a){e=="abort"&&this.abortListeners&&this.abortListeners.push(a)}}function toSet$1(o){let e=Object.keys(o).join(""),a=/\w/.test(e);return a&&(e=e.replace(/\w/g,"")),`[${a?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch$1(o){let e=Object.create(null),a=Object.create(null);for(let{label:u}of o){e[u[0]]=!0;for(let f=1;f<u.length;f++)a[u[f]]=!0}let l=toSet$1(e)+toSet$1(a)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function completeFromList$1(o){let e=o.map(u=>typeof u=="string"?{label:u}:u),[a,l]=e.every(u=>/^\w+$/.test(u.label))?[/\w*$/,/\w+$/]:prefixMatch$1(e);return u=>{let f=u.matchBefore(l);return f||u.explicit?{from:f?f.from:u.pos,options:e,validFor:a}:null}}class Option{constructor(e,a,l,u){this.completion=e,this.source=a,this.match=l,this.score=u}}function cur(o){return o.selection.main.from}function ensureAnchor(o,e){var a;let{source:l}=o,u=e&&l[0]!="^",f=l[l.length-1]!="$";return!u&&!f?o:new RegExp(`${u?"^":""}(?:${l})${f?"$":""}`,(a=o.flags)!==null&&a!==void 0?a:o.ignoreCase?"i":"")}const pickedCompletion$1=Annotation.define();function insertCompletionText(o,e,a,l){let{main:u}=o.selection,f=a-u.from,d=l-u.from;return Object.assign(Object.assign({},o.changeByRange(p=>p!=u&&a!=l&&o.sliceDoc(p.from+f,p.from+d)!=o.sliceDoc(a,l)?{range:p}:{changes:{from:p.from+f,to:l==u.from?p.to:p.from+d,insert:e},range:EditorSelection.cursor(p.from+f+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(o){if(!Array.isArray(o))return o;let e=SourceCache.get(o);return e||SourceCache.set(o,e=completeFromList$1(o)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let a=0;a<e.length;){let l=codePointAt(e,a),u=codePointSize(l);this.chars.push(l);let f=e.slice(a,a+u),d=f.toUpperCase();this.folded.push(codePointAt(d==f?f.toLowerCase():d,0)),a+=u}this.astral=e.length!=this.chars.length}ret(e,a){return this.score=e,this.matched=a,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:a,folded:l,any:u,precise:f,byWord:d}=this;if(a.length==1){let se=codePointAt(e,0),pe=codePointSize(se),re=pe==e.length?0:-100;if(se!=a[0])if(se==l[0])re+=-200;else return!1;return this.ret(re,[0,pe])}let p=e.indexOf(this.pattern);if(p==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let g=a.length,b=0;if(p<0){for(let se=0,pe=Math.min(e.length,200);se<pe&&b<g;){let re=codePointAt(e,se);(re==a[b]||re==l[b])&&(u[b++]=se),se+=codePointSize(re)}if(b<g)return!1}let O=0,A=0,k=!1,M=0,B=-1,N=-1,L=/[a-z]/.test(e),V=!0;for(let se=0,pe=Math.min(e.length,200),re=0;se<pe&&A<g;){let z=codePointAt(e,se);p<0&&(O<g&&z==a[O]&&(f[O++]=se),M<g&&(z==a[M]||z==l[M]?(M==0&&(B=se),N=se+1,M++):M=0));let oe,de=z<255?z>=48&&z<=57||z>=97&&z<=122?2:z>=65&&z<=90?1:0:(oe=fromCodePoint(z))!=oe.toLowerCase()?1:oe!=oe.toUpperCase()?2:0;(!se||de==1&&L||re==0&&de!=0)&&(a[A]==z||l[A]==z&&(k=!0)?d[A++]=se:d.length&&(V=!1)),re=de,se+=codePointSize(z)}return A==g&&d[0]==0&&V?this.result(-100+(k?-200:0),d,e):M==g&&B==0?this.ret(-200-e.length+(N==e.length?0:-100),[0,N]):p>-1?this.ret(-700-e.length,[p,p+this.pattern.length]):M==g?this.ret(-900-e.length,[B,N]):A==g?this.result(-100+(k?-200:0)+-700+(V?0:-1100),d,e):a.length==2?!1:this.result((u[0]?-700:0)+-200+-1100,u,e)}result(e,a,l){let u=[],f=0;for(let d of a){let p=d+(this.astral?codePointSize(codePointAt(l,d)):1);f&&u[f-1]==d?u[f-1]=p:(u[f++]=d,u[f++]=p)}return this.ret(e-l.length,u)}}const completionConfig=Facet.define({combine(o){return combineConfig(o,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(e,a)=>e.label.localeCompare(a.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,a)=>e&&a,closeOnBlur:(e,a)=>e&&a,icons:(e,a)=>e&&a,tooltipClass:(e,a)=>l=>joinClass(e(l),a(l)),optionClass:(e,a)=>l=>joinClass(e(l),a(l)),addToOptions:(e,a)=>e.concat(a)})}});function joinClass(o,e){return o?e?o+" "+e:o:e}function defaultPositionInfo(o,e,a,l,u,f){let d=o.textDirection==Direction.RTL,p=d,g=!1,b="top",O,A,k=e.left-u.left,M=u.right-e.right,B=l.right-l.left,N=l.bottom-l.top;if(p&&k<Math.min(B,M)?p=!1:!p&&M<Math.min(B,k)&&(p=!0),B<=(p?k:M))O=Math.max(u.top,Math.min(a.top,u.bottom-N))-e.top,A=Math.min(400,p?k:M);else{g=!0,A=Math.min(400,(d?e.right:u.right-e.left)-30);let se=u.bottom-e.bottom;se>=N||se>e.top?O=a.bottom-e.top:(b="bottom",O=e.bottom-a.top)}let L=(e.bottom-e.top)/f.offsetHeight,V=(e.right-e.left)/f.offsetWidth;return{style:`${b}: ${O/L}px; max-width: ${A/V}px`,class:"cm-completionInfo-"+(g?d?"left-narrow":"right-narrow":p?"left":"right")}}function optionContent(o){let e=o.addToOptions.slice();return o.icons&&e.push({render(a){let l=document.createElement("div");return l.classList.add("cm-completionIcon"),a.type&&l.classList.add(...a.type.split(/\s+/g).map(u=>"cm-completionIcon-"+u)),l.setAttribute("aria-hidden","true"),l},position:20}),e.push({render(a,l,u,f){let d=document.createElement("span");d.className="cm-completionLabel";let p=a.displayLabel||a.label,g=0;for(let b=0;b<f.length;){let O=f[b++],A=f[b++];O>g&&d.appendChild(document.createTextNode(p.slice(g,O)));let k=d.appendChild(document.createElement("span"));k.appendChild(document.createTextNode(p.slice(O,A))),k.className="cm-completionMatchedText",g=A}return g<p.length&&d.appendChild(document.createTextNode(p.slice(g))),d},position:50},{render(a){if(!a.detail)return null;let l=document.createElement("span");return l.className="cm-completionDetail",l.textContent=a.detail,l},position:80}),e.sort((a,l)=>a.position-l.position).map(a=>a.render)}function rangeAroundSelected(o,e,a){if(o<=a)return{from:0,to:o};if(e<0&&(e=0),e<=o>>1){let u=Math.floor(e/a);return{from:u*a,to:(u+1)*a}}let l=Math.floor((o-e)/a);return{from:o-(l+1)*a,to:o-l*a}}class CompletionTooltip{constructor(e,a,l){this.view=e,this.stateField=a,this.applyCompletion=l,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:g=>this.placeInfo(g),key:this},this.space=null,this.currentClass="";let u=e.state.field(a),{options:f,selected:d}=u.open,p=e.state.facet(completionConfig);this.optionContent=optionContent(p),this.optionClass=p.optionClass,this.tooltipClass=p.tooltipClass,this.range=rangeAroundSelected(f.length,d,p.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",g=>{let{options:b}=e.state.field(a).open;for(let O=g.target,A;O&&O!=this.dom;O=O.parentNode)if(O.nodeName=="LI"&&(A=/-(\d+)$/.exec(O.id))&&+A[1]<b.length){this.applyCompletion(e,b[+A[1]]),g.preventDefault();return}}),this.dom.addEventListener("focusout",g=>{let b=e.state.field(this.stateField,!1);b&&b.tooltip&&e.state.facet(completionConfig).closeOnBlur&&g.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(f,u.id)}mount(){this.updateSel()}showOptions(e,a){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,a,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var a;let l=e.state.field(this.stateField),u=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),l!=u){let{options:f,selected:d,disabled:p}=l.open;(!u.open||u.open.options!=f)&&(this.range=rangeAroundSelected(f.length,d,e.state.facet(completionConfig).maxRenderedOptions),this.showOptions(f,l.id)),this.updateSel(),p!=((a=u.open)===null||a===void 0?void 0:a.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!p)}}updateTooltipClass(e){let a=this.tooltipClass(e);if(a!=this.currentClass){for(let l of this.currentClass.split(" "))l&&this.dom.classList.remove(l);for(let l of a.split(" "))l&&this.dom.classList.add(l);this.currentClass=a}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),a=e.open;if((a.selected>-1&&a.selected<this.range.from||a.selected>=this.range.to)&&(this.range=rangeAroundSelected(a.options.length,a.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(a.options,e.id)),this.updateSelectedOption(a.selected)){this.destroyInfo();let{completion:l}=a.options[a.selected],{info:u}=l;if(!u)return;let f=typeof u=="string"?document.createTextNode(u):u(l);if(!f)return;"then"in f?f.then(d=>{d&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(d,l)}).catch(d=>logException(this.view.state,d,"completion info")):this.addInfoPane(f,l)}}addInfoPane(e,a){this.destroyInfo();let l=this.info=document.createElement("div");if(l.className="cm-tooltip cm-completionInfo",e.nodeType!=null)l.appendChild(e),this.infoDestroy=null;else{let{dom:u,destroy:f}=e;l.appendChild(u),this.infoDestroy=f||null}this.dom.appendChild(l),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let a=null;for(let l=this.list.firstChild,u=this.range.from;l;l=l.nextSibling,u++)l.nodeName!="LI"||!l.id?u--:u==e?l.hasAttribute("aria-selected")||(l.setAttribute("aria-selected","true"),a=l):l.hasAttribute("aria-selected")&&l.removeAttribute("aria-selected");return a&&scrollIntoView(this.list,a),a}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let a=this.dom.getBoundingClientRect(),l=this.info.getBoundingClientRect(),u=e.getBoundingClientRect(),f=this.space;if(!f){let d=this.dom.ownerDocument.defaultView||window;f={left:0,top:0,right:d.innerWidth,bottom:d.innerHeight}}return u.top>Math.min(f.bottom,a.bottom)-10||u.bottom<Math.max(f.top,a.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,a,u,l,f,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,a,l){const u=document.createElement("ul");u.id=a,u.setAttribute("role","listbox"),u.setAttribute("aria-expanded","true"),u.setAttribute("aria-label",this.view.state.phrase("Completions"));let f=null;for(let d=l.from;d<l.to;d++){let{completion:p,match:g}=e[d],{section:b}=p;if(b){let k=typeof b=="string"?b:b.name;if(k!=f&&(d>l.from||l.from==0))if(f=k,typeof b!="string"&&b.header)u.appendChild(b.header(b));else{let M=u.appendChild(document.createElement("completion-section"));M.textContent=k}}const O=u.appendChild(document.createElement("li"));O.id=a+"-"+d,O.setAttribute("role","option");let A=this.optionClass(p);A&&(O.className=A);for(let k of this.optionContent){let M=k(p,this.view.state,this.view,g);M&&O.appendChild(M)}}return l.from&&u.classList.add("cm-completionListIncompleteTop"),l.to<e.length&&u.classList.add("cm-completionListIncompleteBottom"),u}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(o,e){return a=>new CompletionTooltip(a,o,e)}function scrollIntoView(o,e){let a=o.getBoundingClientRect(),l=e.getBoundingClientRect(),u=a.height/o.offsetHeight;l.top<a.top?o.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(o.scrollTop+=(l.bottom-a.bottom)/u)}function score(o){return(o.boost||0)*100+(o.apply?10:0)+(o.info?5:0)+(o.type?1:0)}function sortOptions(o,e){let a=[],l=null,u=g=>{a.push(g);let{section:b}=g.completion;if(b){l||(l=[]);let O=typeof b=="string"?b:b.name;l.some(A=>A.name==O)||l.push(typeof b=="string"?{name:O}:b)}};for(let g of o)if(g.hasResult()){let b=g.result.getMatch;if(g.result.filter===!1)for(let O of g.result.options)u(new Option(O,g.source,b?b(O):[],1e9-a.length));else{let O=new FuzzyMatcher(e.sliceDoc(g.from,g.to));for(let A of g.result.options)if(O.match(A.label)){let k=A.displayLabel?b?b(A,O.matched):[]:O.matched;u(new Option(A,g.source,k,O.score+(A.boost||0)))}}}if(l){let g=Object.create(null),b=0,O=(A,k)=>{var M,B;return((M=A.rank)!==null&&M!==void 0?M:1e9)-((B=k.rank)!==null&&B!==void 0?B:1e9)||(A.name<k.name?-1:1)};for(let A of l.sort(O))b-=1e5,g[A.name]=b;for(let A of a){let{section:k}=A.completion;k&&(A.score+=g[typeof k=="string"?k:k.name])}}let f=[],d=null,p=e.facet(completionConfig).compareCompletions;for(let g of a.sort((b,O)=>O.score-b.score||p(b.completion,O.completion))){let b=g.completion;!d||d.label!=b.label||d.detail!=b.detail||d.type!=null&&b.type!=null&&d.type!=b.type||d.apply!=b.apply||d.boost!=b.boost?f.push(g):score(g.completion)>score(d)&&(f[f.length-1]=g),d=g.completion}return f}class CompletionDialog{constructor(e,a,l,u,f,d){this.options=e,this.attrs=a,this.tooltip=l,this.timestamp=u,this.selected=f,this.disabled=d}setSelected(e,a){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(a,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,a,l,u,f){let d=sortOptions(e,a);if(!d.length)return u&&e.some(g=>g.state==1)?new CompletionDialog(u.options,u.attrs,u.tooltip,u.timestamp,u.selected,!0):null;let p=a.facet(completionConfig).selectOnOpen?0:-1;if(u&&u.selected!=p&&u.selected!=-1){let g=u.options[u.selected].completion;for(let b=0;b<d.length;b++)if(d[b].completion==g){p=b;break}}return new CompletionDialog(d,makeAttrs(l,p),{pos:e.reduce((g,b)=>b.hasResult()?Math.min(g,b.from):g,1e8),create:createTooltip,above:f.aboveCursor},u?u.timestamp:Date.now(),p,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(e,a,l){this.active=e,this.id=a,this.open=l}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:a}=e,l=a.facet(completionConfig),f=(l.override||a.languageDataAt("autocomplete",cur(a)).map(asSource)).map(p=>(this.active.find(b=>b.source==p)||new ActiveSource(p,this.active.some(b=>b.state!=0)?1:0)).update(e,l));f.length==this.active.length&&f.every((p,g)=>p==this.active[g])&&(f=this.active);let d=this.open;d&&e.docChanged&&(d=d.map(e.changes)),e.selection||f.some(p=>p.hasResult()&&e.changes.touchesRange(p.from,p.to))||!sameResults(f,this.active)?d=CompletionDialog.build(f,a,this.id,d,l):d&&d.disabled&&!f.some(p=>p.state==1)&&(d=null),!d&&f.every(p=>p.state!=1)&&f.some(p=>p.hasResult())&&(f=f.map(p=>p.hasResult()?new ActiveSource(p.source,0):p));for(let p of e.effects)p.is(setSelectedEffect)&&(d=d&&d.setSelected(p.value,this.id));return f==this.active&&d==this.open?this:new CompletionState(f,this.id,d)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(o,e){if(o==e)return!0;for(let a=0,l=0;;){for(;a<o.length&&!o[a].hasResult;)a++;for(;l<e.length&&!e[l].hasResult;)l++;let u=a==o.length,f=l==e.length;if(u||f)return u==f;if(o[a++].result!=e[l++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(o,e){let a={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":o};return e>-1&&(a["aria-activedescendant"]=o+"-"+e),a}const none$1=[];function getUserEvent(o){return o.isUserEvent("input.type")?"input":o.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,a,l=-1){this.source=e,this.state=a,this.explicitPos=l}hasResult(){return!1}update(e,a){let l=getUserEvent(e),u=this;l?u=u.handleUserEvent(e,l,a):e.docChanged?u=u.handleChange(e):e.selection&&u.state!=0&&(u=new ActiveSource(u.source,0));for(let f of e.effects)if(f.is(startCompletionEffect))u=new ActiveSource(u.source,1,f.value?cur(e.state):-1);else if(f.is(closeCompletionEffect))u=new ActiveSource(u.source,0);else if(f.is(setActiveEffect))for(let d of f.value)d.source==u.source&&(u=d);return u}handleUserEvent(e,a,l){return a=="delete"||!l.activateOnTyping?this.map(e.changes):new ActiveSource(this.source,1)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}class ActiveResult extends ActiveSource{constructor(e,a,l,u,f){super(e,2,a),this.result=l,this.from=u,this.to=f}hasResult(){return!0}handleUserEvent(e,a,l){var u;let f=e.changes.mapPos(this.from),d=e.changes.mapPos(this.to,1),p=cur(e.state);if((this.explicitPos<0?p<=f:p<this.from)||p>d||a=="delete"&&cur(e.startState)==this.from)return new ActiveSource(this.source,a=="input"&&l.activateOnTyping?1:0);let g=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),b;return checkValid(this.result.validFor,e.state,f,d)?new ActiveResult(this.source,g,this.result,f,d):this.result.update&&(b=this.result.update(this.result,f,d,new CompletionContext(e.state,p,g>=0)))?new ActiveResult(this.source,g,b,b.from,(u=b.to)!==null&&u!==void 0?u:cur(e.state)):new ActiveSource(this.source,1,g)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function checkValid(o,e,a,l){if(!o)return!1;let u=e.sliceDoc(a,l);return typeof o=="function"?o(u,a,l,e):ensureAnchor(o,!0).test(u)}const setActiveEffect=StateEffect.define({map(o,e){return o.map(a=>a.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(o,e){return o.update(e)},provide:o=>[showTooltip.from(o,e=>e.tooltip),EditorView.contentAttributes.from(o,e=>e.attrs)]});function applyCompletion(o,e){const a=e.completion.apply||e.completion.label;let l=o.state.field(completionState).active.find(u=>u.source==e.source);return l instanceof ActiveResult?(typeof a=="string"?o.dispatch(Object.assign(Object.assign({},insertCompletionText(o.state,a,l.from,l.to)),{annotations:pickedCompletion$1.of(e.completion)})):a(o,e.completion,l.from,l.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(o,e="option"){return a=>{let l=a.state.field(completionState,!1);if(!l||!l.open||l.open.disabled||Date.now()-l.open.timestamp<a.state.facet(completionConfig).interactionDelay)return!1;let u=1,f;e=="page"&&(f=getTooltip(a,l.open.tooltip))&&(u=Math.max(2,Math.floor(f.dom.offsetHeight/f.dom.querySelector("li").offsetHeight)-1));let{length:d}=l.open.options,p=l.open.selected>-1?l.open.selected+u*(o?1:-1):o?0:d-1;return p<0?p=e=="page"?0:d-1:p>=d&&(p=e=="page"?d-1:0),a.dispatch({effects:setSelectedEffect.of(p)}),!0}}const acceptCompletion=o=>{let e=o.state.field(completionState,!1);return o.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<o.state.facet(completionConfig).interactionDelay?!1:applyCompletion(o,e.open.options[e.open.selected])},startCompletion=o=>o.state.field(completionState,!1)?(o.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=o=>{let e=o.state.field(completionState,!1);return!e||!e.active.some(a=>a.state!=0)?!1:(o.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(e,a){this.active=e,this.context=a,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of o.state.field(completionState).active)e.state==1&&this.startQuery(e)}update(o){let e=o.state.field(completionState);if(!o.selectionSet&&!o.docChanged&&o.startState.field(completionState)==e)return;let a=o.transactions.some(l=>(l.selection||l.docChanged)&&!getUserEvent(l));for(let l=0;l<this.running.length;l++){let u=this.running[l];if(a||u.updates.length+o.transactions.length>MaxUpdateCount&&Date.now()-u.time>MinAbortTime){for(let f of u.context.abortListeners)try{f()}catch(d){logException(this.view.state,d)}u.context.abortListeners=null,this.running.splice(l--,1)}else u.updates.push(...o.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(l=>l.state==1&&!this.running.some(u=>u.active.source==l.source))?setTimeout(()=>this.startUpdate(),50):-1,this.composing!=0)for(let l of o.transactions)getUserEvent(l)=="input"?this.composing=2:this.composing==2&&l.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:o}=this.view,e=o.field(completionState);for(let a of e.active)a.state==1&&!this.running.some(l=>l.active.source==a.source)&&this.startQuery(a)}startQuery(o){let{state:e}=this.view,a=cur(e),l=new CompletionContext(e,a,o.explicitPos==a),u=new RunningQuery(o,l);this.running.push(u),Promise.resolve(o.source(l)).then(f=>{u.context.aborted||(u.done=f||null,this.scheduleAccept())},f=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,f)})}scheduleAccept(){this.running.every(o=>o.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var o;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],a=this.view.state.facet(completionConfig);for(let l=0;l<this.running.length;l++){let u=this.running[l];if(u.done===void 0)continue;if(this.running.splice(l--,1),u.done){let d=new ActiveResult(u.active.source,u.active.explicitPos,u.done,u.done.from,(o=u.done.to)!==null&&o!==void 0?o:cur(u.updates.length?u.updates[0].startState:this.view.state));for(let p of u.updates)d=d.update(p,a);if(d.hasResult()){e.push(d);continue}}let f=this.view.state.field(completionState).active.find(d=>d.source==u.active.source);if(f&&f.state==1)if(u.done==null){let d=new ActiveSource(u.active.source,0);for(let p of u.updates)d=d.update(p,a);d.state!=1&&e.push(d)}else this.startQuery(f)}e.length&&this.view.dispatch({effects:setActiveEffect.of(e)})}},{eventHandlers:{blur(o){let e=this.view.state.field(completionState,!1);if(e&&e.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let a=e.open&&getTooltip(this.view,e.open.tooltip);(!a||!a.dom.contains(o.relatedTarget))&&this.view.dispatch({effects:closeCompletionEffect.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(o,e){let a=e.mapPos(o,-1,MapMode.TrackAfter);return a??void 0}}),closedBracket$1=new class extends RangeValue{};closedBracket$1.startSide=1,closedBracket$1.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(o,e){if(o=o.map(e.changes),e.selection){let a=e.state.doc.lineAt(e.selection.main.head);o=o.update({filter:l=>l>=a.from&&l<=a.to})}for(let a of e.effects)a.is(closeBracketEffect)&&(o=o.update({add:[closedBracket$1.range(a.value,a.value+1)]}));return o}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(o){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==o)return definedClosing.charAt(e+1);return fromCodePoint(o<128?o:o+1)}function config$d(o,e){return o.languageDataAt("closeBrackets",e)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((o,e,a,l)=>{if((android$1?o.composing:o.compositionStarted)||o.state.readOnly)return!1;let u=o.state.selection.main;if(l.length>2||l.length==2&&codePointSize(codePointAt(l,0))==1||e!=u.from||a!=u.to)return!1;let f=insertBracket(o.state,l);return f?(o.dispatch(f),!0):!1}),deleteBracketPair=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let l=config$d(o,o.selection.main.head).brackets||defaults.brackets,u=null,f=o.changeByRange(d=>{if(d.empty){let p=prevChar(o.doc,d.head);for(let g of l)if(g==p&&nextChar(o.doc,d.head)==closing(codePointAt(g,0)))return{changes:{from:d.head-g.length,to:d.head+g.length},range:EditorSelection.cursor(d.head-g.length)}}return{range:u=d}});return u||e(o.update(f,{scrollIntoView:!0,userEvent:"delete.backward"})),!u};function insertBracket(o,e){let a=config$d(o,o.selection.main.head),l=a.brackets||defaults.brackets;for(let u of l){let f=closing(codePointAt(u,0));if(e==u)return f==u?handleSame(o,u,l.indexOf(u+u+u)>-1,a):handleOpen(o,u,f,a.before||defaults.before);if(e==f&&closedBracketAt(o,o.selection.main.from))return handleClose(o,u,f)}return null}function closedBracketAt(o,e){let a=!1;return o.field(bracketState).between(0,o.doc.length,l=>{l==e&&(a=!0)}),a}function nextChar(o,e){let a=o.sliceString(e,e+2);return a.slice(0,codePointSize(codePointAt(a,0)))}function prevChar(o,e){let a=o.sliceString(e-2,e);return codePointSize(codePointAt(a,0))==a.length?a:a.slice(1)}function handleOpen(o,e,a,l){let u=null,f=o.changeByRange(d=>{if(!d.empty)return{changes:[{insert:e,from:d.from},{insert:a,from:d.to}],effects:closeBracketEffect.of(d.to+e.length),range:EditorSelection.range(d.anchor+e.length,d.head+e.length)};let p=nextChar(o.doc,d.head);return!p||/\s/.test(p)||l.indexOf(p)>-1?{changes:{insert:e+a,from:d.head},effects:closeBracketEffect.of(d.head+e.length),range:EditorSelection.cursor(d.head+e.length)}:{range:u=d}});return u?null:o.update(f,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(o,e,a){let l=null,u=o.changeByRange(f=>f.empty&&nextChar(o.doc,f.head)==a?{changes:{from:f.head,to:f.head+a.length,insert:a},range:EditorSelection.cursor(f.head+a.length)}:l={range:f});return l?null:o.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(o,e,a,l){let u=l.stringPrefixes||defaults.stringPrefixes,f=null,d=o.changeByRange(p=>{if(!p.empty)return{changes:[{insert:e,from:p.from},{insert:e,from:p.to}],effects:closeBracketEffect.of(p.to+e.length),range:EditorSelection.range(p.anchor+e.length,p.head+e.length)};let g=p.head,b=nextChar(o.doc,g),O;if(b==e){if(nodeStart(o,g))return{changes:{insert:e+e,from:g},effects:closeBracketEffect.of(g+e.length),range:EditorSelection.cursor(g+e.length)};if(closedBracketAt(o,g)){let k=a&&o.sliceDoc(g,g+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:g,to:g+k.length,insert:k},range:EditorSelection.cursor(g+k.length)}}}else{if(a&&o.sliceDoc(g-2*e.length,g)==e+e&&(O=canStartStringAt(o,g-2*e.length,u))>-1&&nodeStart(o,O))return{changes:{insert:e+e+e+e,from:g},effects:closeBracketEffect.of(g+e.length),range:EditorSelection.cursor(g+e.length)};if(o.charCategorizer(g)(b)!=CharCategory.Word&&canStartStringAt(o,g,u)>-1&&!probablyInString(o,g,e,u))return{changes:{insert:e+e,from:g},effects:closeBracketEffect.of(g+e.length),range:EditorSelection.cursor(g+e.length)}}return{range:f=p}});return f?null:o.update(d,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(o,e){let a=syntaxTree(o).resolveInner(e+1);return a.parent&&a.from==e}function probablyInString(o,e,a,l){let u=syntaxTree(o).resolveInner(e,-1),f=l.reduce((d,p)=>Math.max(d,p.length),0);for(let d=0;d<5;d++){let p=o.sliceDoc(u.from,Math.min(u.to,u.from+a.length+f)),g=p.indexOf(a);if(!g||g>-1&&l.indexOf(p.slice(0,g))>-1){let O=u.firstChild;for(;O&&O.from==u.from&&O.to-O.from>a.length+g;){if(o.sliceDoc(O.to-a.length,O.to)==a)return!1;O=O.firstChild}return!0}let b=u.to==e&&u.parent;if(!b)break;u=b}return!1}function canStartStringAt(o,e,a){let l=o.charCategorizer(e);if(l(o.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let u of a){let f=e-u.length;if(o.sliceDoc(f,e)==u&&l(o.sliceDoc(f-1,f))!=CharCategory.Word)return f}return-1}function autocompletion(o={}){return[completionState,completionConfig.of(o),completionPlugin,completionKeymapExt,baseTheme$4]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],o=>o.facet(completionConfig).defaultKeymap?[completionKeymap]:[])),toggleComment=o=>{let{state:e}=o,a=e.doc.lineAt(e.selection.main.from),l=getConfig(o.state,a.from);return l.line?toggleLineComment(o):l.block?toggleBlockCommentByLine(o):!1};function command(o,e){return({state:a,dispatch:l})=>{if(a.readOnly)return!1;let u=o(e,a);return u?(l(a.update(u)),!0):!1}}const toggleLineComment=command(changeLineComment,0),lineComment=command(changeLineComment,1),lineUncomment=command(changeLineComment,2),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((o,e)=>changeBlockComment(o,e,selectedLineRanges(e)),0);function getConfig(o,e){let a=o.languageDataAt("commentTokens",e);return a.length?a[0]:{}}const SearchMargin=50;function findBlockComment(o,{open:e,close:a},l,u){let f=o.sliceDoc(l-SearchMargin,l),d=o.sliceDoc(u,u+SearchMargin),p=/\s*$/.exec(f)[0].length,g=/^\s*/.exec(d)[0].length,b=f.length-p;if(f.slice(b-e.length,b)==e&&d.slice(g,g+a.length)==a)return{open:{pos:l-p,margin:p&&1},close:{pos:u+g,margin:g&&1}};let O,A;u-l<=2*SearchMargin?O=A=o.sliceDoc(l,u):(O=o.sliceDoc(l,l+SearchMargin),A=o.sliceDoc(u-SearchMargin,u));let k=/^\s*/.exec(O)[0].length,M=/\s*$/.exec(A)[0].length,B=A.length-M-a.length;return O.slice(k,k+e.length)==e&&A.slice(B,B+a.length)==a?{open:{pos:l+k+e.length,margin:/\s/.test(O.charAt(k+e.length))?1:0},close:{pos:u-M-a.length,margin:/\s/.test(A.charAt(B-1))?1:0}}:null}function selectedLineRanges(o){let e=[];for(let a of o.selection.ranges){let l=o.doc.lineAt(a.from),u=a.to<=l.to?l:o.doc.lineAt(a.to),f=e.length-1;f>=0&&e[f].to>l.from?e[f].to=u.to:e.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:u.to})}return e}function changeBlockComment(o,e,a=e.selection.ranges){let l=a.map(f=>getConfig(e,f.from).block);if(!l.every(f=>f))return null;let u=a.map((f,d)=>findBlockComment(e,l[d],f.from,f.to));if(o!=2&&!u.every(f=>f))return{changes:e.changes(a.map((f,d)=>u[d]?[]:[{from:f.from,insert:l[d].open+" "},{from:f.to,insert:" "+l[d].close}]))};if(o!=1&&u.some(f=>f)){let f=[];for(let d=0,p;d<u.length;d++)if(p=u[d]){let g=l[d],{open:b,close:O}=p;f.push({from:b.pos-g.open.length,to:b.pos+b.margin},{from:O.pos-O.margin,to:O.pos+g.close.length})}return{changes:f}}return null}function changeLineComment(o,e,a=e.selection.ranges){let l=[],u=-1;for(let{from:f,to:d}of a){let p=l.length,g=1e9,b=getConfig(e,f).line;if(b){for(let O=f;O<=d;){let A=e.doc.lineAt(O);if(A.from>u&&(f==d||d>A.from)){u=A.from;let k=/^\s*/.exec(A.text)[0].length,M=k==A.length,B=A.text.slice(k,k+b.length)==b?k:-1;k<A.text.length&&k<g&&(g=k),l.push({line:A,comment:B,token:b,indent:k,empty:M,single:!1})}O=A.to+1}if(g<1e9)for(let O=p;O<l.length;O++)l[O].indent<l[O].line.text.length&&(l[O].indent=g);l.length==p+1&&(l[p].single=!0)}}if(o!=2&&l.some(f=>f.comment<0&&(!f.empty||f.single))){let f=[];for(let{line:p,token:g,indent:b,empty:O,single:A}of l)(A||!O)&&f.push({from:p.from+b,insert:g+" "});let d=e.changes(f);return{changes:d,selection:e.selection.map(d,1)}}else if(o!=1&&l.some(f=>f.comment>=0)){let f=[];for(let{line:d,comment:p,token:g}of l)if(p>=0){let b=d.from+p,O=b+g.length;d.text[O-d.from]==" "&&O++,f.push({from:b,to:O})}return{changes:f}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(o){return combineConfig(o,{minDepth:100,newGroupDelay:500,joinToEvent:(e,a)=>a},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,a)=>(l,u)=>e(l,u)||a(l,u)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(o,e){let a=e.state.facet(historyConfig),l=e.annotation(fromHistory);if(l){let g=HistEvent.fromTransaction(e,l.selection),b=l.side,O=b==0?o.undone:o.done;return g?O=updateBranch(O,O.length,a.minDepth,g):O=addSelection(O,e.startState.selection),new HistoryState(b==0?l.rest:O,b==0?O:l.rest)}let u=e.annotation(isolateHistory);if((u=="full"||u=="before")&&(o=o.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?o:o.addMapping(e.changes.desc);let f=HistEvent.fromTransaction(e),d=e.annotation(Transaction.time),p=e.annotation(Transaction.userEvent);return f?o=o.addChanges(f,d,p,a,e):e.selection&&(o=o.addSelection(e.startState.selection,d,p,a.newGroupDelay)),(u=="full"||u=="after")&&(o=o.isolate()),o},toJSON(o){return{done:o.done.map(e=>e.toJSON()),undone:o.undone.map(e=>e.toJSON())}},fromJSON(o){return new HistoryState(o.done.map(HistEvent.fromJSON),o.undone.map(HistEvent.fromJSON))}});function history(o={}){return[historyField_,historyConfig.of(o),EditorView.domEventHandlers({beforeinput(e,a){let l=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return l?(e.preventDefault(),l(a)):!1}})]}function cmd(o,e){return function({state:a,dispatch:l}){if(!e&&a.readOnly)return!1;let u=a.field(historyField_,!1);if(!u)return!1;let f=u.pop(o,a,e);return f?(l(f),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,a,l,u,f){this.changes=e,this.effects=a,this.mapped=l,this.startSelection=u,this.selectionsAfter=f}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,a,l;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(a=this.mapped)===null||a===void 0?void 0:a.toJSON(),startSelection:(l=this.startSelection)===null||l===void 0?void 0:l.toJSON(),selectionsAfter:this.selectionsAfter.map(u=>u.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,a){let l=none;for(let u of e.startState.facet(invertedEffects)){let f=u(e);f.length&&(l=l.concat(f))}return!l.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),l,void 0,a||e.startState.selection,none)}static selection(e){return new HistEvent(void 0,none,void 0,void 0,e)}}function updateBranch(o,e,a,l){let u=e+1>a+20?e-a-1:0,f=o.slice(u,e);return f.push(l),f}function isAdjacent(o,e){let a=[],l=!1;return o.iterChangedRanges((u,f)=>a.push(u,f)),e.iterChangedRanges((u,f,d,p)=>{for(let g=0;g<a.length;){let b=a[g++],O=a[g++];p>=b&&d<=O&&(l=!0)}}),l}function eqSelectionShape(o,e){return o.ranges.length==e.ranges.length&&o.ranges.filter((a,l)=>a.empty!=e.ranges[l].empty).length===0}function conc(o,e){return o.length?e.length?o.concat(e):o:e}const none=[],MaxSelectionsPerEvent=200;function addSelection(o,e){if(o.length){let a=o[o.length-1],l=a.selectionsAfter.slice(Math.max(0,a.selectionsAfter.length-MaxSelectionsPerEvent));return l.length&&l[l.length-1].eq(e)?o:(l.push(e),updateBranch(o,o.length-1,1e9,a.setSelAfter(l)))}else return[HistEvent.selection([e])]}function popSelection(o){let e=o[o.length-1],a=o.slice();return a[o.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),a}function addMappingToBranch(o,e){if(!o.length)return o;let a=o.length,l=none;for(;a;){let u=mapEvent(o[a-1],e,l);if(u.changes&&!u.changes.empty||u.effects.length){let f=o.slice(0,a);return f[a-1]=u,f}else e=u.mapped,a--,l=u.selectionsAfter}return l.length?[HistEvent.selection(l)]:none}function mapEvent(o,e,a){let l=conc(o.selectionsAfter.length?o.selectionsAfter.map(p=>p.map(e)):none,a);if(!o.changes)return HistEvent.selection(l);let u=o.changes.map(e),f=e.mapDesc(o.changes,!0),d=o.mapped?o.mapped.composeDesc(f):f;return new HistEvent(u,StateEffect.mapEffects(o.effects,e),d,o.startSelection.map(f),l)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,a,l=0,u=void 0){this.done=e,this.undone=a,this.prevTime=l,this.prevUserEvent=u}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,a,l,u,f){let d=this.done,p=d[d.length-1];return p&&p.changes&&!p.changes.empty&&e.changes&&(!l||joinableUserEvent.test(l))&&(!p.selectionsAfter.length&&a-this.prevTime<u.newGroupDelay&&u.joinToEvent(f,isAdjacent(p.changes,e.changes))||l=="input.type.compose")?d=updateBranch(d,d.length-1,u.minDepth,new HistEvent(e.changes.compose(p.changes),conc(e.effects,p.effects),p.mapped,p.startSelection,none)):d=updateBranch(d,d.length,u.minDepth,e),new HistoryState(d,none,a,l)}addSelection(e,a,l,u){let f=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return f.length>0&&a-this.prevTime<u&&l==this.prevUserEvent&&l&&/^select($|\.)/.test(l)&&eqSelectionShape(f[f.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,a,l)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,a,l){let u=e==0?this.done:this.undone;if(u.length==0)return null;let f=u[u.length-1],d=f.selectionsAfter[0]||a.selection;if(l&&f.selectionsAfter.length)return a.update({selection:f.selectionsAfter[f.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(u),selection:d}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(f.changes){let p=u.length==1?none:u.slice(0,u.length-1);return f.mapped&&(p=addMappingToBranch(p,f.mapped)),a.update({changes:f.changes,selection:f.startSelection,effects:f.effects,annotations:fromHistory.of({side:e,rest:p,selection:d}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(o,e){return EditorSelection.create(o.ranges.map(e),o.mainIndex)}function setSel(o,e){return o.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:o,dispatch:e},a){let l=updateSel(o.selection,a);return l.eq(o.selection,!0)?!1:(e(setSel(o,l)),!0)}function rangeEnd(o,e){return EditorSelection.cursor(e?o.to:o.from)}function cursorByChar(o,e){return moveSel(o,a=>a.empty?o.moveByChar(a,e):rangeEnd(a,e))}function ltrAtCursor(o){return o.textDirectionAt(o.state.selection.main.head)==Direction.LTR}const cursorCharLeft=o=>cursorByChar(o,!ltrAtCursor(o)),cursorCharRight=o=>cursorByChar(o,ltrAtCursor(o)),cursorCharBackward=o=>cursorByChar(o,!1);function cursorByGroup(o,e){return moveSel(o,a=>a.empty?o.moveByGroup(a,e):rangeEnd(a,e))}const cursorGroupLeft=o=>cursorByGroup(o,!ltrAtCursor(o)),cursorGroupRight=o=>cursorByGroup(o,ltrAtCursor(o));function interestingNode(o,e,a){if(e.type.prop(a))return!0;let l=e.to-e.from;return l&&(l>2||/[^\s,.;:]/.test(o.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(o,e,a){let l=syntaxTree(o).resolveInner(e.head),u=a?NodeProp$1.closedBy:NodeProp$1.openedBy;for(let g=e.head;;){let b=a?l.childAfter(g):l.childBefore(g);if(!b)break;interestingNode(o,b,u)?l=b:g=a?b.to:b.from}let f=l.type.prop(u),d,p;return f&&(d=a?matchBrackets(o,l.from,1):matchBrackets(o,l.to,-1))&&d.matched?p=a?d.end.to:d.end.from:p=a?l.to:l.from,EditorSelection.cursor(p,a?-1:1)}const cursorSyntaxLeft=o=>moveSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),cursorSyntaxRight=o=>moveSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function cursorByLine(o,e){return moveSel(o,a=>{if(!a.empty)return rangeEnd(a,e);let l=o.moveVertically(a,e);return l.head!=a.head?l:o.moveToLineBoundary(a,e)})}const cursorLineUp=o=>cursorByLine(o,!1),cursorLineDown=o=>cursorByLine(o,!0);function pageInfo(o){let e=o.scrollDOM.clientHeight<o.scrollDOM.scrollHeight-2,a=0,l=0,u;if(e){for(let f of o.state.facet(EditorView.scrollMargins)){let d=f(o);d?.top&&(a=Math.max(d?.top,a)),d?.bottom&&(l=Math.max(d?.bottom,l))}u=o.scrollDOM.clientHeight-a-l}else u=(o.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:a,marginBottom:l,selfScroll:e,height:Math.max(o.defaultLineHeight,u-5)}}function cursorByPage(o,e){let a=pageInfo(o),{state:l}=o,u=updateSel(l.selection,d=>d.empty?o.moveVertically(d,e,a.height):rangeEnd(d,e));if(u.eq(l.selection))return!1;let f;if(a.selfScroll){let d=o.coordsAtPos(l.selection.main.head),p=o.scrollDOM.getBoundingClientRect(),g=p.top+a.marginTop,b=p.bottom-a.marginBottom;d&&d.top>g&&d.bottom<b&&(f=EditorView.scrollIntoView(u.main.head,{y:"start",yMargin:d.top-g}))}return o.dispatch(setSel(l,u),{effects:f}),!0}const cursorPageUp=o=>cursorByPage(o,!1),cursorPageDown=o=>cursorByPage(o,!0);function moveByLineBoundary(o,e,a){let l=o.lineBlockAt(e.head),u=o.moveToLineBoundary(e,a);if(u.head==e.head&&u.head!=(a?l.to:l.from)&&(u=o.moveToLineBoundary(e,a,!1)),!a&&u.head==l.from&&l.length){let f=/^\s*/.exec(o.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;f&&e.head!=l.from+f&&(u=EditorSelection.cursor(l.from+f))}return u}const cursorLineBoundaryForward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!0)),cursorLineBoundaryBackward=o=>moveSel(o,e=>moveByLineBoundary(o,e,!1)),cursorLineBoundaryLeft=o=>moveSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),cursorLineBoundaryRight=o=>moveSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),cursorLineStart=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from,1)),cursorLineEnd=o=>moveSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to,-1));function toMatchingBracket(o,e,a){let l=!1,u=updateSel(o.selection,f=>{let d=matchBrackets(o,f.head,-1)||matchBrackets(o,f.head,1)||f.head>0&&matchBrackets(o,f.head-1,1)||f.head<o.doc.length&&matchBrackets(o,f.head+1,-1);if(!d||!d.end)return f;l=!0;let p=d.start.from==f.head?d.end.to:d.end.from;return a?EditorSelection.range(f.anchor,p):EditorSelection.cursor(p)});return l?(e(setSel(o,u)),!0):!1}const cursorMatchingBracket=({state:o,dispatch:e})=>toMatchingBracket(o,e,!1);function extendSel(o,e){let a=updateSel(o.state.selection,l=>{let u=e(l);return EditorSelection.range(l.anchor,u.head,u.goalColumn,u.bidiLevel||void 0)});return a.eq(o.state.selection)?!1:(o.dispatch(setSel(o.state,a)),!0)}function selectByChar(o,e){return extendSel(o,a=>o.moveByChar(a,e))}const selectCharLeft=o=>selectByChar(o,!ltrAtCursor(o)),selectCharRight=o=>selectByChar(o,ltrAtCursor(o));function selectByGroup(o,e){return extendSel(o,a=>o.moveByGroup(a,e))}const selectGroupLeft=o=>selectByGroup(o,!ltrAtCursor(o)),selectGroupRight=o=>selectByGroup(o,ltrAtCursor(o)),selectSyntaxLeft=o=>extendSel(o,e=>moveBySyntax(o.state,e,!ltrAtCursor(o))),selectSyntaxRight=o=>extendSel(o,e=>moveBySyntax(o.state,e,ltrAtCursor(o)));function selectByLine(o,e){return extendSel(o,a=>o.moveVertically(a,e))}const selectLineUp=o=>selectByLine(o,!1),selectLineDown=o=>selectByLine(o,!0);function selectByPage(o,e){return extendSel(o,a=>o.moveVertically(a,e,pageInfo(o).height))}const selectPageUp=o=>selectByPage(o,!1),selectPageDown=o=>selectByPage(o,!0),selectLineBoundaryForward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!0)),selectLineBoundaryBackward=o=>extendSel(o,e=>moveByLineBoundary(o,e,!1)),selectLineBoundaryLeft=o=>extendSel(o,e=>moveByLineBoundary(o,e,!ltrAtCursor(o))),selectLineBoundaryRight=o=>extendSel(o,e=>moveByLineBoundary(o,e,ltrAtCursor(o))),selectLineStart=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).from)),selectLineEnd=o=>extendSel(o,e=>EditorSelection.cursor(o.lineBlockAt(e.head).to)),cursorDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:0})),!0),cursorDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.doc.length})),!0),selectDocStart=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:0})),!0),selectDocEnd=({state:o,dispatch:e})=>(e(setSel(o,{anchor:o.selection.main.anchor,head:o.doc.length})),!0),selectAll=({state:o,dispatch:e})=>(e(o.update({selection:{anchor:0,head:o.doc.length},userEvent:"select"})),!0),selectLine=({state:o,dispatch:e})=>{let a=selectedLineBlocks(o).map(({from:l,to:u})=>EditorSelection.range(l,Math.min(u+1,o.doc.length)));return e(o.update({selection:EditorSelection.create(a),userEvent:"select"})),!0},selectParentSyntax=({state:o,dispatch:e})=>{let a=updateSel(o.selection,l=>{var u;let f=syntaxTree(o).resolveStack(l.from,1);for(let d=f;d;d=d.next){let{node:p}=d;if((p.from<l.from&&p.to>=l.to||p.to>l.to&&p.from<=l.from)&&(!((u=p.parent)===null||u===void 0)&&u.parent))return EditorSelection.range(p.to,p.from)}return l});return e(setSel(o,a)),!0},simplifySelection=({state:o,dispatch:e})=>{let a=o.selection,l=null;return a.ranges.length>1?l=EditorSelection.create([a.main]):a.main.empty||(l=EditorSelection.create([EditorSelection.cursor(a.main.head)])),l?(e(setSel(o,l)),!0):!1};function deleteBy(o,e){if(o.state.readOnly)return!1;let a="delete.selection",{state:l}=o,u=l.changeByRange(f=>{let{from:d,to:p}=f;if(d==p){let g=e(f);g<d?(a="delete.backward",g=skipAtomic(o,g,!1)):g>d&&(a="delete.forward",g=skipAtomic(o,g,!0)),d=Math.min(d,g),p=Math.max(p,g)}else d=skipAtomic(o,d,!1),p=skipAtomic(o,p,!0);return d==p?{range:f}:{changes:{from:d,to:p},range:EditorSelection.cursor(d,d<f.head?-1:1)}});return u.changes.empty?!1:(o.dispatch(l.update(u,{scrollIntoView:!0,userEvent:a,effects:a=="delete.selection"?EditorView.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(o,e,a){if(o instanceof EditorView)for(let l of o.state.facet(EditorView.atomicRanges).map(u=>u(o)))l.between(e,e,(u,f)=>{u<e&&f>e&&(e=a?f:u)});return e}const deleteByChar=(o,e)=>deleteBy(o,a=>{let l=a.from,{state:u}=o,f=u.doc.lineAt(l),d,p;if(!e&&l>f.from&&l<f.from+200&&!/[^ \t]/.test(d=f.text.slice(0,l-f.from))){if(d[d.length-1]=="	")return l-1;let g=countColumn(d,u.tabSize),b=g%getIndentUnit(u)||getIndentUnit(u);for(let O=0;O<b&&d[d.length-1-O]==" ";O++)l--;p=l}else p=findClusterBreak(f.text,l-f.from,e,e)+f.from,p==l&&f.number!=(e?u.doc.lines:1)?p+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(f.text.slice(p-f.from,l-f.from))&&(p=findClusterBreak(f.text,p-f.from,!1,!1)+f.from);return p}),deleteCharBackward=o=>deleteByChar(o,!1),deleteCharForward=o=>deleteByChar(o,!0),deleteByGroup=(o,e)=>deleteBy(o,a=>{let l=a.head,{state:u}=o,f=u.doc.lineAt(l),d=u.charCategorizer(l);for(let p=null;;){if(l==(e?f.to:f.from)){l==a.head&&f.number!=(e?u.doc.lines:1)&&(l+=e?1:-1);break}let g=findClusterBreak(f.text,l-f.from,e)+f.from,b=f.text.slice(Math.min(l,g)-f.from,Math.max(l,g)-f.from),O=d(b);if(p!=null&&O!=p)break;(b!=" "||l!=a.head)&&(p=O),l=g}return l}),deleteGroupBackward=o=>deleteByGroup(o,!1),deleteGroupForward=o=>deleteByGroup(o,!0),deleteToLineEnd=o=>deleteBy(o,e=>{let a=o.lineBlockAt(e.head).to;return e.head<a?a:Math.min(o.state.doc.length,e.head+1)}),deleteToLineStart=o=>deleteBy(o,e=>{let a=o.lineBlockAt(e.head).from;return e.head>a?a:Math.max(0,e.head-1)}),deleteLineBoundaryBackward=o=>deleteBy(o,e=>{let a=o.moveToLineBoundary(e,!1).head;return e.head>a?a:Math.max(0,e.head-1)}),deleteLineBoundaryForward=o=>deleteBy(o,e=>{let a=o.moveToLineBoundary(e,!0).head;return e.head<a?a:Math.min(o.state.doc.length,e.head+1)}),splitLine=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let a=o.changeByRange(l=>({changes:{from:l.from,to:l.to,insert:Text.of(["",""])},range:EditorSelection.cursor(l.from)}));return e(o.update(a,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let a=o.changeByRange(l=>{if(!l.empty||l.from==0||l.from==o.doc.length)return{range:l};let u=l.from,f=o.doc.lineAt(u),d=u==f.from?u-1:findClusterBreak(f.text,u-f.from,!1)+f.from,p=u==f.to?u+1:findClusterBreak(f.text,u-f.from,!0)+f.from;return{changes:{from:d,to:p,insert:o.doc.slice(u,p).append(o.doc.slice(d,u))},range:EditorSelection.cursor(p)}});return a.changes.empty?!1:(e(o.update(a,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(o){let e=[],a=-1;for(let l of o.selection.ranges){let u=o.doc.lineAt(l.from),f=o.doc.lineAt(l.to);if(!l.empty&&l.to==f.from&&(f=o.doc.lineAt(l.to-1)),a>=u.number){let d=e[e.length-1];d.to=f.to,d.ranges.push(l)}else e.push({from:u.from,to:f.to,ranges:[l]});a=f.number+1}return e}function moveLine(o,e,a){if(o.readOnly)return!1;let l=[],u=[];for(let f of selectedLineBlocks(o)){if(a?f.to==o.doc.length:f.from==0)continue;let d=o.doc.lineAt(a?f.to+1:f.from-1),p=d.length+1;if(a){l.push({from:f.to,to:d.to},{from:f.from,insert:d.text+o.lineBreak});for(let g of f.ranges)u.push(EditorSelection.range(Math.min(o.doc.length,g.anchor+p),Math.min(o.doc.length,g.head+p)))}else{l.push({from:d.from,to:f.from},{from:f.to,insert:o.lineBreak+d.text});for(let g of f.ranges)u.push(EditorSelection.range(g.anchor-p,g.head-p))}}return l.length?(e(o.update({changes:l,scrollIntoView:!0,selection:EditorSelection.create(u,o.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:o,dispatch:e})=>moveLine(o,e,!1),moveLineDown=({state:o,dispatch:e})=>moveLine(o,e,!0);function copyLine(o,e,a){if(o.readOnly)return!1;let l=[];for(let u of selectedLineBlocks(o))a?l.push({from:u.from,insert:o.doc.slice(u.from,u.to)+o.lineBreak}):l.push({from:u.to,insert:o.lineBreak+o.doc.slice(u.from,u.to)});return e(o.update({changes:l,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:o,dispatch:e})=>copyLine(o,e,!1),copyLineDown=({state:o,dispatch:e})=>copyLine(o,e,!0),deleteLine=o=>{if(o.state.readOnly)return!1;let{state:e}=o,a=e.changes(selectedLineBlocks(e).map(({from:u,to:f})=>(u>0?u--:f<e.doc.length&&f++,{from:u,to:f}))),l=updateSel(e.selection,u=>o.moveVertically(u,!0)).map(a);return o.dispatch({changes:a,selection:l,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(o,e){if(/\(\)|\[\]|\{\}/.test(o.sliceDoc(e-1,e+1)))return{from:e,to:e};let a=syntaxTree(o).resolveInner(e),l=a.childBefore(e),u=a.childAfter(e),f;return l&&u&&l.to<=e&&u.from>=e&&(f=l.type.prop(NodeProp$1.closedBy))&&f.indexOf(u.name)>-1&&o.doc.lineAt(l.to).from==o.doc.lineAt(u.from).from&&!/\S/.test(o.sliceDoc(l.to,u.from))?{from:l.to,to:u.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(o){return({state:e,dispatch:a})=>{if(e.readOnly)return!1;let l=e.changeByRange(u=>{let{from:f,to:d}=u,p=e.doc.lineAt(f),g=!o&&f==d&&isBetweenBrackets(e,f);o&&(f=d=(d<=p.to?p:e.doc.lineAt(d)).to);let b=new IndentContext(e,{simulateBreak:f,simulateDoubleBreak:!!g}),O=getIndentation(b,f);for(O==null&&(O=countColumn(/^\s*/.exec(e.doc.lineAt(f).text)[0],e.tabSize));d<p.to&&/\s/.test(p.text[d-p.from]);)d++;g?{from:f,to:d}=g:f>p.from&&f<p.from+100&&!/\S/.test(p.text.slice(0,f))&&(f=p.from);let A=["",indentString(e,O)];return g&&A.push(indentString(e,b.lineIndent(p.from,-1))),{changes:{from:f,to:d,insert:Text.of(A)},range:EditorSelection.cursor(f+1+A[1].length)}});return a(e.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(o,e){let a=-1;return o.changeByRange(l=>{let u=[];for(let d=l.from;d<=l.to;){let p=o.doc.lineAt(d);p.number>a&&(l.empty||l.to>p.from)&&(e(p,u,l),a=p.number),d=p.to+1}let f=o.changes(u);return{changes:u,range:EditorSelection.range(f.mapPos(l.anchor,1),f.mapPos(l.head,1))}})}const indentSelection=({state:o,dispatch:e})=>{if(o.readOnly)return!1;let a=Object.create(null),l=new IndentContext(o,{overrideIndentation:f=>{let d=a[f];return d??-1}}),u=changeBySelectedLine(o,(f,d,p)=>{let g=getIndentation(l,f.from);if(g==null)return;/\S/.test(f.text)||(g=0);let b=/^\s*/.exec(f.text)[0],O=indentString(o,g);(b!=O||p.from<f.from+b.length)&&(a[f.from]=g,d.push({from:f.from,to:f.from+b.length,insert:O}))});return u.changes.empty||e(o.update(u,{userEvent:"indent"})),!0},indentMore=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(a,l)=>{l.push({from:a.from,insert:o.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:o,dispatch:e})=>o.readOnly?!1:(e(o.update(changeBySelectedLine(o,(a,l)=>{let u=/^\s*/.exec(a.text)[0];if(!u)return;let f=countColumn(u,o.tabSize),d=0,p=indentString(o,Math.max(0,f-getIndentUnit(o)));for(;d<u.length&&d<p.length&&u.charCodeAt(d)==p.charCodeAt(d);)d++;l.push({from:a.from+d,to:a.from+u.length,insert:p.slice(d)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(o=>({mac:o.key,run:o.run,shift:o.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap);class Stack{constructor(e,a,l,u,f,d,p,g,b,O=0,A){this.p=e,this.stack=a,this.state=l,this.reducePos=u,this.pos=f,this.score=d,this.buffer=p,this.bufferBase=g,this.curContext=b,this.lookAhead=O,this.parent=A}toString(){return`[${this.stack.filter((e,a)=>a%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,a,l=0){let u=e.parser.context;return new Stack(e,[],a,l,l,0,[],0,u?new StackContext(u,u.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,a){this.stack.push(this.state,a,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let a=e>>19,l=e&65535,{parser:u}=this.p,f=u.dynamicPrecedence(l);if(f&&(this.score+=f),a==0){this.pushState(u.getGoto(this.state,l,!0),this.reducePos),l<u.minRepeatTerm&&this.storeNode(l,this.reducePos,this.reducePos,4,!0),this.reduceContext(l,this.reducePos);return}let d=this.stack.length-(a-1)*3-(e&262144?6:0),p=d?this.stack[d-2]:0,g=this.reducePos-p;g>=2e3&&(p==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=g):this.p.lastBigReductionSize<g&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=p,this.p.lastBigReductionSize=g));let b=d?this.stack[d-1]:0,O=this.bufferBase+this.buffer.length-b;if(l<u.minRepeatTerm||e&131072){let A=u.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(l,p,A,O+4,!0)}if(e&262144)this.state=this.stack[d];else{let A=this.stack[d-3];this.state=u.getGoto(A,l,!0)}for(;this.stack.length>d;)this.stack.pop();this.reduceContext(l,p)}storeNode(e,a,l,u=4,f=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let d=this,p=this.buffer.length;if(p==0&&d.parent&&(p=d.bufferBase-d.parent.bufferBase,d=d.parent),p>0&&d.buffer[p-4]==0&&d.buffer[p-1]>-1){if(a==l)return;if(d.buffer[p-2]>=a){d.buffer[p-2]=l;return}}}if(!f||this.pos==l)this.buffer.push(e,a,l,u);else{let d=this.buffer.length;if(d>0&&this.buffer[d-4]!=0)for(;d>0&&this.buffer[d-2]>l;)this.buffer[d]=this.buffer[d-4],this.buffer[d+1]=this.buffer[d-3],this.buffer[d+2]=this.buffer[d-2],this.buffer[d+3]=this.buffer[d-1],d-=4,u>4&&(u-=4);this.buffer[d]=e,this.buffer[d+1]=a,this.buffer[d+2]=l,this.buffer[d+3]=u}}shift(e,a,l){let u=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=l,this.shiftContext(a,u),a<=this.p.parser.maxNode&&this.buffer.push(a,u,l,4);else{let f=e,{parser:d}=this.p;(l>this.pos||a<=d.maxNode)&&(this.pos=l,d.stateFlag(f,1)||(this.reducePos=l)),this.pushState(f,u),this.shiftContext(a,u),a<=d.maxNode&&this.buffer.push(a,u,l,4)}}apply(e,a,l){e&65536?this.reduce(e):this.shift(e,a,l)}useNode(e,a){let l=this.p.reused.length-1;(l<0||this.p.reused[l]!=e)&&(this.p.reused.push(e),l++);let u=this.pos;this.reducePos=this.pos=u+e.length,this.pushState(a,u),this.buffer.push(l,u,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,a=e.buffer.length;for(;a>0&&e.buffer[a-2]>e.reducePos;)a-=4;let l=e.buffer.slice(a),u=e.bufferBase+a;for(;e&&u==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,l,u,this.curContext,this.lookAhead,e)}recoverByDelete(e,a){let l=e<=this.p.parser.maxNode;l&&this.storeNode(e,this.pos,a,4),this.storeNode(0,this.pos,a,l?8:4),this.pos=this.reducePos=a,this.score-=190}canShift(e){for(let a=new SimulatedStack(this);;){let l=this.p.parser.stateSlot(a.state,4)||this.p.parser.hasAction(a.state,e);if(l==0)return!1;if(!(l&65536))return!0;a.reduce(l)}}recoverByInsert(e){if(this.stack.length>=300)return[];let a=this.p.parser.nextStates(this.state);if(a.length>8||this.stack.length>=120){let u=[];for(let f=0,d;f<a.length;f+=2)(d=a[f+1])!=this.state&&this.p.parser.hasAction(d,e)&&u.push(a[f],d);if(this.stack.length<120)for(let f=0;u.length<8&&f<a.length;f+=2){let d=a[f+1];u.some((p,g)=>g&1&&p==d)||u.push(a[f],d)}a=u}let l=[];for(let u=0;u<a.length&&l.length<4;u+=2){let f=a[u+1];if(f==this.state)continue;let d=this.split();d.pushState(f,this.pos),d.storeNode(0,d.pos,d.pos,4,!0),d.shiftContext(a[u],this.pos),d.score-=200,l.push(d)}return l}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:a}=this.p;if(!a.validAction(this.state,e)){let l=e>>19,u=e&65535,f=this.stack.length-l*3;if(f<0||a.getGoto(this.stack[f],u,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let a=0;a<this.stack.length;a+=3)if(this.stack[a]!=e.stack[a])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,a){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(a)))}reduceContext(e,a){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(a)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let a=new StackContext(this.curContext.tracker,e);a.hash!=this.curContext.hash&&this.emitContext(),this.curContext=a}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,a){this.tracker=e,this.context=a,this.hash=e.strict?e.hash(a):0}}var Recover;(function(o){o[o.Insert=200]="Insert",o[o.Delete=190]="Delete",o[o.Reduce=100]="Reduce",o[o.MaxNext=4]="MaxNext",o[o.MaxInsertStackDepth=300]="MaxInsertStackDepth",o[o.DampenInsertStackDepth=120]="DampenInsertStackDepth",o[o.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let a=e&65535,l=e>>19;l==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(l-1)*3;let u=this.start.p.parser.getGoto(this.stack[this.base-3],a,!0);this.state=u}}class StackBufferCursor{constructor(e,a,l){this.stack=e,this.pos=a,this.index=l,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,a=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,a,a-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(o,e=Uint16Array){if(typeof o!="string")return o;let a=null;for(let l=0,u=0;l<o.length;){let f=0;for(;;){let d=o.charCodeAt(l++),p=!1;if(d==126){f=65535;break}d>=92&&d--,d>=34&&d--;let g=d-32;if(g>=46&&(g-=46,p=!0),f+=g,p)break;f*=46}a?a[u++]=f:a=new e(f)}return a}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,a){this.input=e,this.ranges=a,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=a[0].from,this.range=a[0],this.end=a[a.length-1].to,this.readNext()}resolveOffset(e,a){let l=this.range,u=this.rangeIndex,f=this.pos+e;for(;f<l.from;){if(!u)return null;let d=this.ranges[--u];f-=l.from-d.to,l=d}for(;a<0?f>l.to:f>=l.to;){if(u==this.ranges.length-1)return null;let d=this.ranges[++u];f+=d.from-l.to,l=d}return f}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let a of this.ranges)if(a.to>e)return Math.max(e,a.from);return this.end}peek(e){let a=this.chunkOff+e,l,u;if(a>=0&&a<this.chunk.length)l=this.pos+e,u=this.chunk.charCodeAt(a);else{let f=this.resolveOffset(e,1);if(f==null)return-1;if(l=f,l>=this.chunk2Pos&&l<this.chunk2Pos+this.chunk2.length)u=this.chunk2.charCodeAt(l-this.chunk2Pos);else{let d=this.rangeIndex,p=this.range;for(;p.to<=l;)p=this.ranges[++d];this.chunk2=this.input.chunk(this.chunk2Pos=l),l+this.chunk2.length>p.to&&(this.chunk2=this.chunk2.slice(0,p.to-l)),u=this.chunk2.charCodeAt(0)}}return l>=this.token.lookAhead&&(this.token.lookAhead=l+1),u}acceptToken(e,a=0){let l=a?this.resolveOffset(a,-1):this.pos;if(l==null||l<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=l}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:a}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=a,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),a=this.pos+e.length;this.chunk=a>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,a){if(a?(this.token=a,a.start=e,a.lookAhead=e+1,a.value=a.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,a){if(e>=this.chunkPos&&a<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,a-this.chunkPos);if(e>=this.chunk2Pos&&a<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,a-this.chunk2Pos);if(e>=this.range.from&&a<=this.range.to)return this.input.read(e,a);let l="";for(let u of this.ranges){if(u.from>=a)break;u.to>e&&(l+=this.input.read(Math.max(u.from,e),Math.min(u.to,a)))}return l}}class TokenGroup{constructor(e,a){this.data=e,this.id=a}token(e,a){let{parser:l}=a.p;readToken(this.data,e,a,this.id,l.data,l.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(e,a,l){this.precTable=a,this.elseToken=l,this.data=typeof e=="string"?decodeArray(e):e}token(e,a){let l=e.pos,u;for(;u=e.pos,readToken(this.data,e,a,0,this.data,this.precTable),!(e.token.value>-1);){if(this.elseToken==null)return;if(e.next<0)break;e.advance(),e.reset(u+1,e.token)}u>l&&(e.reset(l,e.token),e.acceptToken(this.elseToken,u-l))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,a={}){this.token=e,this.contextual=!!a.contextual,this.fallback=!!a.fallback,this.extend=!!a.extend}}function readToken(o,e,a,l,u,f){let d=0,p=1<<l,{dialect:g}=a.p.parser;e:for(;p&o[d];){let b=o[d+1];for(let M=d+3;M<b;M+=2)if((o[M+1]&p)>0){let B=o[M];if(g.allows(B)&&(e.token.value==-1||e.token.value==B||overrides(B,e.token.value,u,f))){e.acceptToken(B);break}}let O=e.next,A=0,k=o[d+2];if(e.next<0&&k>A&&o[b+k*3-3]==65535&&o[b+k*3-3]==65535){d=o[b+k*3-1];continue e}for(;A<k;){let M=A+k>>1,B=b+M+(M<<1),N=o[B],L=o[B+1]||65536;if(O<N)k=M;else if(O>=L)A=M+1;else{d=o[B+2],e.advance();continue e}}break}}function findOffset(o,e,a){for(let l=e,u;(u=o[l])!=65535;l++)if(u==a)return l-e;return-1}function overrides(o,e,a,l){let u=findOffset(a,l,e);return u<0||findOffset(a,l,o)<u}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let stackIDs=null;var Safety;(function(o){o[o.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(o,e,a){let l=o.cursor(IterMode$1.IncludeAnonymous);for(l.moveTo(e);;)if(!(a<0?l.childBefore(e):l.childAfter(e)))for(;;){if((a<0?l.to<e:l.from>e)&&!l.type.isError)return a<0?Math.max(0,Math.min(l.to-1,e-25)):Math.min(o.length,Math.max(l.from+1,e+25));if(a<0?l.prevSibling():l.nextSibling())break;if(!l.parent())return a<0?0:o.length}}class FragmentCursor{constructor(e,a){this.fragments=e,this.nodeSet=a,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let a=this.trees.length-1;if(a<0)return this.nextFragment(),null;let l=this.trees[a],u=this.index[a];if(u==l.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let f=l.children[u],d=this.start[a]+l.positions[u];if(d>e)return this.nextStart=d,null;if(f instanceof Tree$1){if(d==e){if(d<this.safeFrom)return null;let p=d+f.length;if(p<=this.safeTo){let g=f.prop(NodeProp$1.lookAhead);if(!g||p+g<this.fragment.to)return f}}this.index[a]++,d+f.length>=Math.max(this.safeFrom,e)&&(this.trees.push(f),this.start.push(d),this.index.push(0))}else this.index[a]++,this.nextStart=d+f.length}}}class TokenCache{constructor(e,a){this.stream=a,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(l=>new CachedToken)}getActions(e){let a=0,l=null,{parser:u}=e.p,{tokenizers:f}=u,d=u.stateSlot(e.state,3),p=e.curContext?e.curContext.hash:0,g=0;for(let b=0;b<f.length;b++){if(!(1<<b&d))continue;let O=f[b],A=this.tokens[b];if(!(l&&!O.fallback)&&((O.contextual||A.start!=e.pos||A.mask!=d||A.context!=p)&&(this.updateCachedToken(A,O,e),A.mask=d,A.context=p),A.lookAhead>A.end+25&&(g=Math.max(A.lookAhead,g)),A.value!=0)){let k=a;if(A.extended>-1&&(a=this.addActions(e,A.extended,A.end,a)),a=this.addActions(e,A.value,A.end,a),!O.extend&&(l=A,a>k))break}}for(;this.actions.length>a;)this.actions.pop();return g&&e.setLookAhead(g),!l&&e.pos==this.stream.end&&(l=new CachedToken,l.value=e.p.parser.eofTerm,l.start=l.end=e.pos,a=this.addActions(e,l.value,l.end,a)),this.mainToken=l,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let a=new CachedToken,{pos:l,p:u}=e;return a.start=l,a.end=Math.min(l+1,u.stream.end),a.value=l==u.stream.end?u.parser.eofTerm:0,a}updateCachedToken(e,a,l){let u=this.stream.clipPos(l.pos);if(a.token(this.stream.reset(u,e),l),e.value>-1){let{parser:f}=l.p;for(let d=0;d<f.specialized.length;d++)if(f.specialized[d]==e.value){let p=f.specializers[d](this.stream.read(e.start,e.end),l);if(p>=0&&l.p.parser.dialect.allows(p>>1)){p&1?e.extended=p>>1:e.value=p>>1;break}}}else e.value=0,e.end=this.stream.clipPos(u+1)}putAction(e,a,l,u){for(let f=0;f<u;f+=3)if(this.actions[f]==e)return u;return this.actions[u++]=e,this.actions[u++]=a,this.actions[u++]=l,u}addActions(e,a,l,u){let{state:f}=e,{parser:d}=e.p,{data:p}=d;for(let g=0;g<2;g++)for(let b=d.stateSlot(f,g?2:1);;b+=3){if(p[b]==65535)if(p[b+1]==1)b=pair(p,b+2);else{u==0&&p[b+1]==2&&(u=this.putAction(pair(p,b+2),a,l,u));break}p[b]==a&&(u=this.putAction(pair(p,b+1),a,l,u))}return u}}var Rec;(function(o){o[o.Distance=5]="Distance",o[o.MaxRemainingPerStep=3]="MaxRemainingPerStep",o[o.MinBufferLengthPrune=500]="MinBufferLengthPrune",o[o.ForceReduceLimit=10]="ForceReduceLimit",o[o.CutDepth=15e3]="CutDepth",o[o.CutTo=9e3]="CutTo",o[o.MaxLeftAssociativeReductionCount=1e3]="MaxLeftAssociativeReductionCount"})(Rec||(Rec={}));class Parse{constructor(e,a,l,u){this.parser=e,this.input=a,this.ranges=u,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(a,u),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:f}=u[0];this.stacks=[Stack.start(this,e.top[0],f)],this.fragments=l.length&&this.stream.end-f>e.bufferLength*4?new FragmentCursor(l,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,a=this.minStackPos,l=this.stacks=[],u,f;if(this.bigReductionCount>1e3&&e.length==1){let[d]=e;for(;d.forceReduce()&&d.stack.length&&d.stack[d.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let d=0;d<e.length;d++){let p=e[d];for(;;){if(this.tokens.mainToken=null,p.pos>a)l.push(p);else{if(this.advanceStack(p,l,e))continue;{u||(u=[],f=[]),u.push(p);let g=this.tokens.getMainToken(p);f.push(g.value,g.end)}}break}}if(!l.length){let d=u&&findFinished(u);if(d)return this.stackToTree(d);if(this.parser.strict)throw verbose&&u&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+a);this.recovering||(this.recovering=5)}if(this.recovering&&u){let d=this.stoppedAt!=null&&u[0].pos>this.stoppedAt?u[0]:this.runRecovery(u,f,l);if(d)return this.stackToTree(d.forceAll())}if(this.recovering){let d=this.recovering==1?1:this.recovering*3;if(l.length>d)for(l.sort((p,g)=>g.score-p.score);l.length>d;)l.pop();l.some(p=>p.reducePos>a)&&this.recovering--}else if(l.length>1)e:for(let d=0;d<l.length-1;d++){let p=l[d];for(let g=d+1;g<l.length;g++){let b=l[g];if(p.sameState(b)||p.buffer.length>500&&b.buffer.length>500)if((p.score-b.score||p.buffer.length-b.buffer.length)>0)l.splice(g--,1);else{l.splice(d--,1);continue e}}}this.minStackPos=l[0].pos;for(let d=1;d<l.length;d++)l[d].pos<this.minStackPos&&(this.minStackPos=l[d].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,a,l){let u=e.pos,{parser:f}=this,d=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&u>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let b=e.curContext&&e.curContext.tracker.strict,O=b?e.curContext.hash:0;for(let A=this.fragments.nodeAt(u);A;){let k=this.parser.nodeSet.types[A.type.id]==A.type?f.getGoto(e.state,A.type.id):-1;if(k>-1&&A.length&&(!b||(A.prop(NodeProp$1.contextHash)||0)==O))return e.useNode(A,k),verbose&&console.log(d+this.stackID(e)+` (via reuse of ${f.getName(A.type.id)})`),!0;if(!(A instanceof Tree$1)||A.children.length==0||A.positions[0]>0)break;let M=A.children[0];if(M instanceof Tree$1&&A.positions[0]==0)A=M;else break}}let p=f.stateSlot(e.state,4);if(p>0)return e.reduce(p),verbose&&console.log(d+this.stackID(e)+` (via always-reduce ${f.getName(p&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let g=this.tokens.getActions(e);for(let b=0;b<g.length;){let O=g[b++],A=g[b++],k=g[b++],M=b==g.length||!l,B=M?e:e.split();if(B.apply(O,A,k),verbose&&console.log(d+this.stackID(B)+` (via ${O&65536?`reduce of ${f.getName(O&65535)}`:"shift"} for ${f.getName(A)} @ ${u}${B==e?"":", split"})`),M)return!0;B.pos>u?a.push(B):l.push(B)}return!1}advanceFully(e,a){let l=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>l)return pushStackDedup(e,a),!0}}runRecovery(e,a,l){let u=null,f=!1;for(let d=0;d<e.length;d++){let p=e[d],g=a[d<<1],b=a[(d<<1)+1],O=verbose?this.stackID(p)+" -> ":"";if(p.deadEnd&&(f||(f=!0,p.restart(),verbose&&console.log(O+this.stackID(p)+" (restarted)"),this.advanceFully(p,l))))continue;let A=p.split(),k=O;for(let M=0;A.forceReduce()&&M<10&&(verbose&&console.log(k+this.stackID(A)+" (via force-reduce)"),!this.advanceFully(A,l));M++)verbose&&(k=this.stackID(A)+" -> ");for(let M of p.recoverByInsert(g))verbose&&console.log(O+this.stackID(M)+" (via recover-insert)"),this.advanceFully(M,l);this.stream.end>p.pos?(b==p.pos&&(b++,g=0),p.recoverByDelete(g,b),verbose&&console.log(O+this.stackID(p)+` (via recover-delete ${this.parser.getName(g)})`),pushStackDedup(p,l)):(!u||u.score<p.score)&&(u=p)}return u}stackToTree(e){return e.close(),Tree$1.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let a=(stackIDs||(stackIDs=new WeakMap)).get(e);return a||stackIDs.set(e,a=String.fromCodePoint(this.nextStackID++)),a+e}}function pushStackDedup(o,e){for(let a=0;a<e.length;a++){let l=e[a];if(l.pos==o.pos&&l.sameState(o)){e[a].score<o.score&&(e[a]=o);return}}e.push(o)}class Dialect{constructor(e,a,l){this.source=e,this.flags=a,this.disabled=l}allows(e){return!this.disabled||this.disabled[e]==0}}const id=o=>o;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let a=e.nodeNames.split(" ");this.minRepeatTerm=a.length;for(let p=0;p<e.repeatNodeCount;p++)a.push("");let l=Object.keys(e.topRules).map(p=>e.topRules[p][1]),u=[];for(let p=0;p<a.length;p++)u.push([]);function f(p,g,b){u[p].push([g,g.deserialize(String(b))])}if(e.nodeProps)for(let p of e.nodeProps){let g=p[0];typeof g=="string"&&(g=NodeProp$1[g]);for(let b=1;b<p.length;){let O=p[b++];if(O>=0)f(O,g,p[b++]);else{let A=p[b+-O];for(let k=-O;k>0;k--)f(p[b++],g,A);b++}}}this.nodeSet=new NodeSet(a.map((p,g)=>NodeType$1.define({name:g>=this.minRepeatTerm?void 0:p,id:g,props:u[g],top:l.indexOf(g)>-1,error:g==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(g)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength$1;let d=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let p=0;p<this.specializerSpecs.length;p++)this.specialized[p]=this.specializerSpecs[p].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(p=>typeof p=="number"?new TokenGroup(d,p):p),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,a,l){let u=new Parse(this,e,a,l);for(let f of this.wrappers)u=f(u,e,a,l);return u}getGoto(e,a,l=!1){let u=this.goto;if(a>=u[0])return-1;for(let f=u[a+1];;){let d=u[f++],p=d&1,g=u[f++];if(p&&l)return g;for(let b=f+(d>>1);f<b;f++)if(u[f]==e)return g;if(p)return-1}}hasAction(e,a){let l=this.data;for(let u=0;u<2;u++)for(let f=this.stateSlot(e,u?2:1),d;;f+=3){if((d=l[f])==65535)if(l[f+1]==1)d=l[f=pair(l,f+2)];else{if(l[f+1]==2)return pair(l,f+2);break}if(d==a||d==0)return pair(l,f+1)}return 0}stateSlot(e,a){return this.states[e*6+a]}stateFlag(e,a){return(this.stateSlot(e,0)&a)>0}validAction(e,a){if(a==this.stateSlot(e,4))return!0;for(let l=this.stateSlot(e,1);;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=pair(this.data,l+2);else return!1;if(a==pair(this.data,l+1))return!0}}nextStates(e){let a=[];for(let l=this.stateSlot(e,1);;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=pair(this.data,l+2);else break;if(!(this.data[l+2]&1)){let u=this.data[l+1];a.some((f,d)=>d&1&&f==u)||a.push(this.data[l],u)}}return a}configure(e){let a=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(a.nodeSet=this.nodeSet.extend(...e.props)),e.top){let l=this.topRules[e.top];if(!l)throw new RangeError(`Invalid top rule name ${e.top}`);a.top=l}return e.tokenizers&&(a.tokenizers=this.tokenizers.map(l=>{let u=e.tokenizers.find(f=>f.from==l);return u?u.to:l})),e.specializers&&(a.specializers=this.specializers.slice(),a.specializerSpecs=this.specializerSpecs.map((l,u)=>{let f=e.specializers.find(p=>p.from==l.external);if(!f)return l;let d=Object.assign(Object.assign({},l),{external:f.to});return a.specializers[u]=getSpecializer(d),d})),e.contextTracker&&(a.context=e.contextTracker),e.dialect&&(a.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(a.strict=e.strict),e.wrap&&(a.wrappers=a.wrappers.concat(e.wrap)),e.bufferLength!=null&&(a.bufferLength=e.bufferLength),a}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let a=this.dynamicPrecedences;return a==null?0:a[e]||0}parseDialect(e){let a=Object.keys(this.dialects),l=a.map(()=>!1);if(e)for(let f of e.split(" ")){let d=a.indexOf(f);d>=0&&(l[d]=!0)}let u=null;for(let f=0;f<a.length;f++)if(!l[f])for(let d=this.dialects[a[f]],p;(p=this.data[d++])!=65535;)(u||(u=new Uint8Array(this.maxTerm+1)))[p]=1;return new Dialect(e,l,u)}static deserialize(e){return new LRParser(e)}}function pair(o,e){return o[e]|o[e+1]<<16}function findFinished(o){let e=null;for(let a of o){let l=a.p.stoppedAt;(a.pos==a.p.stream.end||l!=null&&a.pos>l)&&a.p.parser.stateFlag(a.state,2)&&(!e||e.score<a.score)&&(e=a)}return e}function getSpecializer(o){if(o.external){let e=o.extend?1:0;return(a,l)=>o.external(a,l)<<1|e}return o.get}const noSemi=301,incdec=1,incdecPrefix=2,insertSemi=302,spaces=304,newline=305,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift(o,e){return e==LineComment||e==BlockComment||e==spaces?o:e==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((o,e)=>{let{next:a}=o;(a==braceR||a==-1||e.context)&&e.canShift(insertSemi)&&o.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((o,e)=>{let{next:a}=o,l;space.indexOf(a)>-1||a==slash&&((l=o.peek(1))==slash||l==star)||a!=braceR&&a!=semicolon&&a!=-1&&!e.context&&e.canShift(noSemi)&&o.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((o,e)=>{let{next:a}=o;if((a==plus||a==minus)&&(o.advance(),a==o.next)){o.advance();let l=!e.context&&e.canShift(incdec);o.acceptToken(l?incdec:incdecPrefix)}},{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:219,private:219,protected:219,readonly:221,instanceof:240,satisfies:243,in:244,const:246,import:278,keyof:333,unique:337,infer:343,is:379,abstract:399,implements:401,type:403,let:406,var:408,interface:415,enum:419,namespace:425,module:427,declare:431,global:435,for:456,of:465,while:468,with:472,do:476,if:480,else:482,switch:486,case:492,try:498,catch:502,finally:506,return:510,throw:514,break:518,continue:522,debugger:526},spec_word={__proto__:null,async:117,get:119,set:121,public:181,private:181,protected:181,static:183,abstract:185,override:187,readonly:193,accessor:195,new:383},spec_LessThan={__proto__:null,"<":137},parser$1=LRParser.deserialize({version:14,states:"$BhO`QUOOO%QQUOOO'TQWOOP(_OSOOO*mQ(CjO'#CfO*tOpO'#CgO+SO!bO'#CgO+bO07`O'#DZO-sQUO'#DaO.TQUO'#DlO%QQUO'#DvO0[QUO'#EOOOQ(CY'#EW'#EWO0rQSO'#ETOOQO'#I_'#I_O0zQSO'#GjOOQO'#Eh'#EhO1VQSO'#EgO1[QSO'#EgO3^Q(CjO'#JbO5}Q(CjO'#JcO6kQSO'#FVO6pQ#tO'#FnOOQ(CY'#F_'#F_O6{O&jO'#F_O7ZQ,UO'#FuO8qQSO'#FtOOQ(CY'#Jc'#JcOOQ(CW'#Jb'#JbOOQQ'#J|'#J|O8vQSO'#IOO8{Q(C[O'#IPOOQQ'#JO'#JOOOQQ'#IT'#ITQ`QUOOO%QQUO'#DnO9TQUO'#DzO%QQUO'#D|O9[QSO'#GjO9aQ,UO'#ClO9oQSO'#EfO9zQSO'#EqO:PQ,UO'#F^O:nQSO'#GjO:sQSO'#GnO;OQSO'#GnO;^QSO'#GqO;^QSO'#GrO;^QSO'#GtO9[QSO'#GwO;}QSO'#GzO=`QSO'#CbO=pQSO'#HXO=xQSO'#H_O=xQSO'#HaO`QUO'#HcO=xQSO'#HeO=xQSO'#HhO=}QSO'#HnO>SQ(C]O'#HtO%QQUO'#HvO>_Q(C]O'#HxO>jQ(C]O'#HzO8{Q(C[O'#H|O>uQ(CjO'#CfO?wQWO'#DfQOQSOOO@_QSO'#EPO9aQ,UO'#EfO@jQSO'#EfO@uQ`O'#F^OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jf'#JfO%QQUO'#JfOBOQWO'#E_OOQ(CW'#E^'#E^OBYQ(C`O'#E_OBtQWO'#ESOOQO'#Ji'#JiOCYQWO'#ESOCgQWO'#E_OC}QWO'#EeODQQWO'#E_O@}QWO'#E_OBtQWO'#E_PDkO?MpO'#C`POOO)CDm)CDmOOOO'#IU'#IUODvOpO,59ROOQ(CY,59R,59ROOOO'#IV'#IVOEUO!bO,59RO%QQUO'#D]OOOO'#IX'#IXOEdO07`O,59uOOQ(CY,59u,59uOErQUO'#IYOFVQSO'#JdOHXQbO'#JdO+pQUO'#JdOH`QSO,59{OHvQSO'#EhOITQSO'#JqOI`QSO'#JpOI`QSO'#JpOIhQSO,5;UOImQSO'#JoOOQ(CY,5:W,5:WOItQUO,5:WOKuQ(CjO,5:bOLfQSO,5:jOLkQSO'#JmOMeQ(C[O'#JnO:sQSO'#JmOMlQSO'#JmOMtQSO,5;TOMyQSO'#JmOOQ(CY'#Cf'#CfO%QQUO'#EOONmQ`O,5:oOOQO'#Jj'#JjOOQO-E<]-E<]O9[QSO,5=UO! TQSO,5=UO! YQUO,5;RO!#]Q,UO'#EcO!$pQSO,5;RO!&YQ,UO'#DpO!&aQUO'#DuO!&kQWO,5;[O!&sQWO,5;[O%QQUO,5;[OOQQ'#E}'#E}OOQQ'#FP'#FPO%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]OOQQ'#FT'#FTO!'RQUO,5;nOOQ(CY,5;s,5;sOOQ(CY,5;t,5;tO!)UQSO,5;tOOQ(CY,5;u,5;uO%QQUO'#IeO!)^Q(C[O,5<bO!#]Q,UO,5;]O!){Q,UO,5;]O%QQUO,5;qO!*SQ#tO'#FdO!+PQ#tO'#JuO!*kQ#tO'#JuO!+WQ#tO'#JuOOQO'#Ju'#JuO!+lQ#tO,5;|OOOO,5<Y,5<YO!+}QUO'#FpOOOO'#Id'#IdO6{O&jO,5;yO!,UQ#tO'#FrOOQ(CY,5;y,5;yO!,uQ7[O'#CrOOQ(CY'#Cv'#CvO!-YQSO'#CvO!-_O07`O'#CzO!-{Q,UO,5<_O!.SQSO,5<aO!/iQMhO'#GPO!/vQSO'#GQO!/{QSO'#GQO!0QQMhO'#GUO!1PQWO'#GYO!1rQ7[O'#J]OOQ(CY'#J]'#J]O!1|QSO'#J[O!2[QSO'#JZO!2dQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0uQSO'#DSO!$uQ,UO'#FwO!$uQ,UO'#FyO!2lQSO'#F{O!2qQSO'#F|O!/{QSO'#GSO!$uQ,UO'#GXO!2vQSO'#EiO!3bQSO,5<`O`QUO,5>jOOQQ'#JW'#JWOOQQ,5>k,5>kOOQQ-E<R-E<RO!5aQ(CjO,5:YO!7}Q(CjO,5:fO%QQUO,5:fO!:hQ(CjO,5:hOOQ(CW'#Co'#CoO!;XQ,UO,5=UO!;gQ(C[O'#JXO8qQSO'#JXO=}QSO,59WO!;xQWO,59WO!<QQ,UO,59WO9aQ,UO,59WO!<]QSO,5;RO!<eQSO'#HWO!<vQSO'#KQO%QQUO,5;vO!=OQWO,5;xO!=TQSO,5=qO!=YQSO,5=qO!=_QSO,5=qO8{Q(C[O,5=qO!=mQSO'#EjO!>gQWO'#EkOOQ(CW'#Jo'#JoO!>nQ(C[O'#J}O8{Q(C[O,5=YO;^QSO,5=`OOQO'#Cr'#CrO!>yQWO,5=]O!?RQ,UO,5=^O!?^QSO,5=`O!?cQ`O,5=cO=}QSO'#G|O9[QSO'#HOO!?kQSO'#HOO9aQ,UO'#HRO!?pQSO'#HROOQQ,5=f,5=fO!?uQSO'#HSO!?}QSO'#ClO!@SQSO,58|O!@^QSO,58|O!BfQUO,58|OOQQ,58|,58|O!BsQ(C[O,58|O%QQUO,58|O!COQUO'#HZOOQQ'#H['#H[OOQQ'#H]'#H]O`QUO,5=sO!C`QSO,5=sO`QUO,5=yO`QUO,5={O!CeQSO,5=}O`QUO,5>PO!CjQSO,5>SO!CoQUO,5>YOOQQ,5>`,5>`O%QQUO,5>`O8{Q(C[O,5>bOOQQ,5>d,5>dO!GvQSO,5>dOOQQ,5>f,5>fO!GvQSO,5>fOOQQ,5>h,5>hO!G{QWO'#DXO%QQUO'#JfO!HjQWO'#JfO!IXQWO'#DgO!IjQWO'#DgO!K{QUO'#DgO!LSQSO'#JeO!L[QSO,5:QO!LaQSO'#ElO!LoQSO'#JrO!LwQSO,5;VO!L|QWO'#DgO!MZQWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!MbQSO,5:kO=}QSO,5;QO!;xQWO,5;QO!<QQ,UO,5;QO9aQ,UO,5;QO!MjQSO,5@QO!MoQ!LQO,5:oO!NrQ(C`O,5:yOBtQWO,5:nO# ^QWO,5:nO# kQWO,5:yO#!RQWO,5:yO#!lQWO,5:yOBtQWO,5:yO=}QSO,5:nOOQ(CW'#Eb'#EbOOQO,5:y,5:yO%QQUO,5:yO##]Q(C[O,5:yO##hQ(C[O,5:yO!;xQWO,5:nOOQO,5;P,5;PO##vQ(C[O,5:yPOOO'#IS'#ISP#$[O?MpO,58zPOOO,58z,58zOOOO-E<S-E<SOOQ(CY1G.m1G.mOOOO-E<T-E<TO#$gQ`O,59wOOOO-E<V-E<VOOQ(CY1G/a1G/aO#$lQbO,5>tO+pQUO,5>tOOQO,5>z,5>zO#$vQUO'#IYOOQO-E<W-E<WO#%TQSO,5@OO#%]QbO,5@OO#%dQSO,5@[OOQ(CY1G/g1G/gO%QQUO,5@]O#%lQSO'#I`OOQO-E<^-E<^O#%dQSO,5@[OOQ(CW1G0p1G0pOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#&QQSO,5@XO:sQSO,5@XO#&YQSO,5@XO%QQUO,5@YO#&hQ(C[O,5@YO#&yQ(C[O,5@YO#'QQSO'#IbO#&QQSO,5@XOOQ(CW1G0o1G0oO!&kQWO,5:qO!&vQWO,5:qOOQO,5:s,5:sO#'oQSO,5:sO#'wQ,UO1G2pO9[QSO1G2pOOQ(CY1G0m1G0mO#(VQ(CjO1G0mO#)[Q(ChO,5:}OOQ(CY'#GO'#GOO#)xQ(CjO'#J]O! YQUO1G0mO#,QQ,UO'#JgO#,[QSO,5:[O#,aQbO'#JhO%QQUO'#JhO#,kQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0v1G0vO%QQUO1G0vOOQ(CY1G1`1G1`O#,pQSO1G0vO#/XQ(CjO1G0wO#/`Q(CjO1G0wO#1yQ(CjO1G0wO#2QQ(CjO1G0wO#4[Q(CjO1G0wO#4rQ(CjO1G0wO#7lQ(CjO1G0wO#7sQ(CjO1G0wO#:^Q(CjO1G0wO#:eQ(CjO1G0wO#<]Q(CjO1G0wO#?]Q$IUO'#CfO#AZQ$IUO1G1YO#CXQ$IUO'#JcO!)XQSO1G1`O#ClQ(CjO,5?POOQ(CW-E<c-E<cO#D`Q(CjO1G0wOOQ(CY1G0w1G0wO#FkQ(CjO1G1]O#G_Q#tO,5<QO#GgQ#tO,5<RO#GoQ#tO'#FiO#HWQSO'#FhOOQO'#Jv'#JvOOQO'#Ic'#IcO#H]Q#tO1G1hOOQ(CY1G1h1G1hOOOO1G1s1G1sO#HnQ$IUO'#JbO#HxQSO,5<[O!'RQUO,5<[OOOO-E<b-E<bOOQ(CY1G1e1G1eO#H}QWO'#JuOOQ(CY,5<^,5<^O#IVQWO,5<^OOQ(CY,59b,59bO!#]Q,UO'#C|OOOO'#IW'#IWO#I[O07`O,59fOOQ(CY,59f,59fO%QQUO1G1yO!2qQSO'#IgO#IgQSO,5<rOOQ(CY,5<o,5<oOOQO'#Ge'#GeO!$uQ,UO,5=OOOQO'#Gg'#GgO!$uQ,UO,5=QO!#]Q,UO,5=SOOQO1G1{1G1{O#IuQ`O'#CoO#JYQ`O,5<kO#JaQSO'#JyO9[QSO'#JyO#JoQSO,5<mO!$uQ,UO,5<lO#JtQSO'#GRO#KPQSO,5<lO#KUQ`O'#GOO#KcQ`O'#JzO#KmQSO'#JzO!#]Q,UO'#JzO#KrQSO,5<pO#KwQWO'#GZO!0zQWO'#GZO#LYQSO'#G]O#L_QSO'#G_O!/{QSO'#GbO#LdQ(C[O'#IiO#LoQWO,5<tOOQ(CY,5<t,5<tO#LvQWO'#GZO#MUQWO'#G[O#M^QWO'#G[OOQ(CY,5=T,5=TO!$uQ,UO,5?vO!$uQ,UO,5?vO#McQSO'#IjO#MnQSO,5?uO#MvQSO,59]O#NgQ,UO,59nOOQ(CY,59n,59nO$ YQ,UO,5<cO$ {Q,UO,5<eO?oQSO,5<gOOQ(CY,5<h,5<hO$!VQSO,5<nO$![Q,UO,5<sO! YQUO1G1zO$!lQSO1G1zOOQQ1G4U1G4UOOQ(CY1G/t1G/tO!)UQSO1G/tO$$kQ(CjO1G0QOOQQ1G2p1G2pO!#]Q,UO1G2pO%QQUO1G2pO$%[QSO1G2pO$%gQ,UO'#EcOOQ(CW,5?s,5?sO$%qQ(C[O,5?sOOQQ1G.r1G.rO=}QSO1G.rO!;xQWO1G.rO!<QQ,UO1G.rO$&SQSO1G0mO$&XQSO'#CfO$&dQSO'#KRO$&lQSO,5=rO$&qQSO'#KRO$&vQSO'#KRO$'RQSO'#IrO$'aQSO,5@lO$'iQbO1G1bOOQ(CY1G1d1G1dO9[QSO1G3]O?oQSO1G3]O$'pQSO1G3]O$'uQSO1G3]OOQQ1G3]1G3]O:sQSO'#JpO:sQSO'#ElO%QQUO'#ElO:sQSO'#IlO$'zQ(C[O,5@iOOQQ1G2t1G2tO!?^QSO1G2zO!#]Q,UO1G2wO$(VQSO1G2wOOQQ1G2x1G2xO!#]Q,UO1G2xO$([QSO1G2xO$(dQWO'#GvOOQQ1G2z1G2zO!0zQWO'#InO!?cQ`O1G2}OOQQ1G2}1G2}OOQQ,5=h,5=hO$(lQ,UO,5=jO9[QSO,5=jO#L_QSO,5=mO8qQSO,5=mO!;xQWO,5=mO!<QQ,UO,5=mO9aQ,UO,5=mO$(zQSO'#KPO$)VQSO,5=nOOQQ1G.h1G.hO$)[Q(C[O1G.hO?oQSO1G.hO$)gQSO1G.hO8{Q(C[O1G.hO$)rQbO,5@nO$*VQSO,5@nO$*bQUO,5=uO$*iQSO,5=uO:sQSO,5@nOOQQ1G3_1G3_O`QUO1G3_OOQQ1G3e1G3eOOQQ1G3g1G3gO=xQSO1G3iO$*nQUO1G3kO$.oQUO'#HjOOQQ1G3n1G3nO$.|QSO'#HpO=}QSO'#HrOOQQ1G3t1G3tO$/UQUO1G3tO8{Q(C[O1G3zOOQQ1G3|1G3|OOQ(CW'#GV'#GVO8{Q(C[O1G4OO8{Q(C[O1G4QO$3YQSO,5@QO!'RQUO,5;WO:sQSO,5;WO=}QSO,5:RO!'RQUO,5:RO!;xQWO,5:RO$3_Q$IUO,5:ROOQO,5;W,5;WO$3iQWO'#IZO$4PQSO,5@POOQ(CY1G/l1G/lO$4XQWO'#IaO$4cQSO,5@^OOQ(CW1G0q1G0qO!IjQWO,5:ROOQO'#I^'#I^O$4kQWO,5:mOOQ(CY,5:m,5:mO!MeQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0l1G0lO=}QSO1G0lO!;xQWO1G0lO!<QQ,UO1G0lOOQ(CW1G5l1G5lO=}QSO1G0YOOQO1G0e1G0eO%QQUO1G0eO$4rQ(C[O1G0eO$4}Q(C[O1G0eO!;xQWO1G0YOBtQWO1G0YO$5]Q(C`O1G0eO$5wQWO1G0YOBtQWO1G0eO$6UQWO1G0eO$6lQWO1G0eO$7VQ(C[O1G0eOOQO1G0Y1G0YO$7kQ(CjO1G0ePOOO-E<Q-E<QPOOO1G.f1G.fOOOO1G/c1G/cO$7uQ`O,5<bO$7}QbO1G4`OOQO1G4f1G4fO%QQUO,5>tO$8XQSO1G5jO$8aQSO1G5vO$8iQbO1G5wO:sQSO,5>zO$8sQSO1G5sO$8sQSO1G5sO:sQSO1G5sO$8{Q(CjO1G5tO%QQUO1G5tO$9]Q(C[O1G5tO$9nQSO,5>|O:sQSO,5>|OOQO,5>|,5>|O$:SQSO,5>|OOQO-E<`-E<`OOQO1G0]1G0]OOQO1G0_1G0_O!)XQSO1G0_OOQQ7+([7+([O!#]Q,UO7+([O%QQUO7+([O$:bQSO7+([O$:mQ,UO7+([O$:{Q(CjO,59nO$=TQ(CjO,5<cO$?`Q(CjO,5<eO$AkQ(CjO,5<sOOQ(CY7+&X7+&XO$C|Q(CjO7+&XO$DpQ,UO'#I[O$DzQSO,5@ROOQ(CY1G/v1G/vO$ESQUO'#I]O$EaQSO,5@SO$EiQbO,5@SOOQ(CY1G/{1G/{O$EsQSO7+&bOOQ(CY7+&b7+&bO$ExQ$IUO,5:bO%QQUO7+&tO$FSQ$IUO,5:YO$FaQ$IUO,5:fO$FkQ$IUO,5:hOOQ(CY7+&z7+&zOOQO1G1l1G1lOOQO1G1m1G1mO$FuQ#tO,5<TO!'RQUO,5<SOOQO-E<a-E<aOOQ(CY7+'S7+'SOOOO7+'_7+'_OOOO1G1v1G1vO$GQQSO1G1vOOQ(CY1G1x1G1xO$GVQ`O,59hOOOO-E<U-E<UOOQ(CY1G/Q1G/QO$G^Q(CjO7+'eOOQ(CY,5?R,5?RO$HQQSO,5?ROOQ(CY1G2^1G2^P$HVQSO'#IgPOQ(CY-E<e-E<eO$HyQ,UO1G2jO$IlQ,UO1G2lO$IvQ`O1G2nOOQ(CY1G2V1G2VO$I}QSO'#IfO$J]QSO,5@eO$J]QSO,5@eO$JeQSO,5@eO$JpQSO,5@eOOQO1G2X1G2XO$KOQ,UO1G2WO!$uQ,UO1G2WO$K`QMhO'#IhO$KpQSO,5@fO!#]Q,UO,5@fO$KxQ`O,5@fOOQ(CY1G2[1G2[OOQ(CW,5<u,5<uOOQ(CW,5<v,5<vO$LSQSO,5<vOBoQSO,5<vO!;xQWO,5<uOOQO'#G^'#G^O$LXQSO,5<wOOQ(CW,5<y,5<yO$LSQSO,5<|OOQO,5?T,5?TOOQO-E<g-E<gOOQ(CY1G2`1G2`O!0zQWO,5<uO$LaQSO,5<vO#LYQSO,5<wO!0zQWO,5<vO$LlQ,UO1G5bO$LvQ,UO1G5bOOQO,5?U,5?UOOQO-E<h-E<hOOQO1G.w1G.wO!=OQWO,59pO%QQUO,59pO$MTQSO1G2RO!$uQ,UO1G2YO$MYQ(CjO7+'fOOQ(CY7+'f7+'fO! YQUO7+'fOOQ(CY7+%`7+%`O$M|Q`O'#J{O!MeQSO7+([O$NWQbO7+([O$:eQSO7+([O$N_Q(ChO'#CfO$NrQ(ChO,5<zO% dQSO,5<zOOQ(CW1G5_1G5_OOQQ7+$^7+$^O=}QSO7+$^O!;xQWO7+$^O! YQUO7+&XO% iQSO'#IqO% }QSO,5@mOOQO1G3^1G3^O9[QSO,5@mO% }QSO,5@mO%!VQSO,5@mOOQO,5?^,5?^OOQO-E<p-E<pOOQ(CY7+&|7+&|O%![QSO7+(wO8{Q(C[O7+(wO9[QSO7+(wO?oQSO7+(wO%!aQSO,5;WOOQ(CW,5?W,5?WOOQ(CW-E<j-E<jOOQQ7+(f7+(fO%!fQ(ChO7+(cO!#]Q,UO7+(cO%!pQ`O7+(dOOQQ7+(d7+(dO!#]Q,UO7+(dO%!wQSO'#KOO%#SQSO,5=bOOQO,5?Y,5?YOOQO-E<l-E<lOOQQ7+(i7+(iO%$`QWO'#HPOOQQ1G3U1G3UO!#]Q,UO1G3UO%QQUO1G3UO%$gQSO1G3UO%$rQ,UO1G3UO8{Q(C[O1G3XO#L_QSO1G3XO8qQSO1G3XO!;xQWO1G3XO!<QQ,UO1G3XO%%QQSO'#IpO%%]QSO,5@kO%%eQWO,5@kOOQ(CW1G3Y1G3YOOQQ7+$S7+$SO?oQSO7+$SO8{Q(C[O7+$SO%%pQSO7+$SO%QQUO1G6YO%QQUO1G6ZO%%uQUO1G3aO%%|QSO1G3aO%&RQUO1G3aO%&YQ(C[O1G6YOOQQ7+(y7+(yO8{Q(C[O7+)TO`QUO7+)VOOQQ'#KU'#KUOOQQ'#Is'#IsO%&dQUO,5>UOOQQ,5>U,5>UO%QQUO'#HkO%&qQSO'#HmOOQQ,5>[,5>[O:sQSO,5>[OOQQ,5>^,5>^OOQQ7+)`7+)`OOQQ7+)f7+)fOOQQ7+)j7+)jOOQQ7+)l7+)lO%&vQWO1G5lO%'[Q$IUO1G0rO%'fQSO1G0rOOQO1G/m1G/mO%'qQ$IUO1G/mO=}QSO1G/mO!'RQUO'#DgOOQO,5>u,5>uOOQO-E<X-E<XOOQO,5>{,5>{OOQO-E<_-E<_O!;xQWO1G/mOOQO-E<[-E<[OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!MeQSO7+%qOOQ(CY7+&W7+&WO=}QSO7+&WO!;xQWO7+&WOOQO7+%t7+%tO$7kQ(CjO7+&POOQO7+&P7+&PO%QQUO7+&PO%'{Q(C[O7+&PO=}QSO7+%tO!;xQWO7+%tO%(WQ(C[O7+&POBtQWO7+%tO%(fQ(C[O7+&PO%(zQ(C`O7+&PO%)UQWO7+%tOBtQWO7+&PO%)cQWO7+&PO%)yQSO7++_O%)yQSO7++_O%*RQ(CjO7++`O%QQUO7++`OOQO1G4h1G4hO:sQSO1G4hO%*cQSO1G4hOOQO7+%y7+%yO!MeQSO<<KvO$NWQbO<<KvO%*qQSO<<KvOOQQ<<Kv<<KvO!#]Q,UO<<KvO%QQUO<<KvO%*yQSO<<KvO%+UQ(CjO1G2jO%-aQ(CjO1G2lO%/lQ(CjO1G2WO%1}Q,UO,5>vOOQO-E<Y-E<YO%2XQbO,5>wO%QQUO,5>wOOQO-E<Z-E<ZO%2cQSO1G5nOOQ(CY<<I|<<I|O%2kQ$IUO1G0mO%4uQ$IUO1G0wO%4|Q$IUO1G0wO%7QQ$IUO1G0wO%7XQ$IUO1G0wO%8|Q$IUO1G0wO%9dQ$IUO1G0wO%;wQ$IUO1G0wO%<OQ$IUO1G0wO%>SQ$IUO1G0wO%>ZQ$IUO1G0wO%@RQ$IUO1G0wO%@fQ(CjO<<J`O%AkQ$IUO1G0wO%CaQ$IUO'#J]O%EdQ$IUO1G1]O%EqQ$IUO1G0QO!'RQUO'#FkOOQO'#Jw'#JwOOQO1G1o1G1oO%E{QSO1G1nO%FQQ$IUO,5?POOOO7+'b7+'bOOOO1G/S1G/SOOQ(CY1G4m1G4mO!$uQ,UO7+(YO%F[QSO,5?QO9[QSO,5?QOOQO-E<d-E<dO%FjQSO1G6PO%FjQSO1G6PO%FrQSO1G6PO%F}Q,UO7+'rO%G_Q`O,5?SO%GiQSO,5?SO!#]Q,UO,5?SOOQO-E<f-E<fO%GnQ`O1G6QO%GxQSO1G6QOOQ(CW1G2b1G2bO$LSQSO1G2bOOQ(CW1G2a1G2aO%HQQSO1G2cO!#]Q,UO1G2cOOQ(CW1G2h1G2hO!;xQWO1G2aOBoQSO1G2bO%HVQSO1G2cO%H_QSO1G2bO!$uQ,UO7+*|OOQ(CY1G/[1G/[O%HjQSO1G/[OOQ(CY7+'m7+'mO%HoQ,UO7+'tO%IPQ(CjO<<KQOOQ(CY<<KQ<<KQO!#]Q,UO'#IkO%IsQSO,5@gO!#]Q,UO1G2fOOQQ<<Gx<<GxO=}QSO<<GxO%I{Q(CjO<<IsOOQ(CY<<Is<<IsOOQO,5?],5?]O%JoQSO,5?]O$&vQSO,5?]OOQO-E<o-E<oO%JtQSO1G6XO%JtQSO1G6XO9[QSO1G6XO?oQSO<<LcOOQQ<<Lc<<LcO%J|QSO<<LcO8{Q(C[O<<LcO%KRQSO1G0rOOQQ<<K}<<K}O%!fQ(ChO<<K}OOQQ<<LO<<LOO%!pQ`O<<LOO%KWQWO'#ImO%KcQSO,5@jO!'RQUO,5@jOOQQ1G2|1G2|O%KkQ(C`O'#JfO%LVQUO'#JfO%L^QWO'#E_O%LwQ(C[O'#E_OBYQ(C`O'#E_O(VQWO'#HQOOQO'#Io'#IoO8{Q(C[O'#IoO%M]QWO,5=kOOQQ,5=k,5=kO%MuQWO'#E_O%LmQWO'#E_O%M|QWO'#E_O%NgQWO'#E_O& WQWO'#HQO& iQSO7+(pO& nQSO7+(pOOQQ7+(p7+(pO!#]Q,UO7+(pO%QQUO7+(pO& vQSO7+(pOOQQ7+(s7+(sO8{Q(C[O7+(sO#L_QSO7+(sO8qQSO7+(sO!;xQWO7+(sO&!RQSO,5?[OOQO-E<n-E<nOOQO'#HT'#HTO&!^QSO1G6VO8{Q(C[O<<GnOOQQ<<Gn<<GnO?oQSO<<GnO&!fQSO7++tO&!kQSO7++uOOQQ7+({7+({O&!pQSO7+({O&!uQUO7+({O&!|QSO7+({O%QQUO7++tO%QQUO7++uOOQQ<<Lo<<LoOOQQ<<Lq<<LqOOQQ-E<q-E<qOOQQ1G3p1G3pO&#RQSO,5>VOOQQ,5>X,5>XO&#WQSO1G3vO:sQSO7+&^O!'RQUO7+&^OOQO7+%X7+%XO&#]Q$IUO1G5wO=}QSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Ir<<IrO=}QSO<<IrOOQO<<Ik<<IkO$7kQ(CjO<<IkO%QQUO<<IkOOQO<<I`<<I`O=}QSO<<I`O&#gQ(C[O<<IkO!;xQWO<<I`O&#rQ(C[O<<IkOBtQWO<<I`O&$QQ(C[O<<IkO&$fQ(C`O<<IkO&$pQWO<<I`OBtQWO<<IkO&$}QSO<<NyO&%VQ(CjO<<NzOOQO7+*S7+*SO:sQSO7+*SOOQQANAbANAbO&%gQSOANAbO!#]Q,UOANAbO!MeQSOANAbO$NWQbOANAbO%QQUOANAbO&%oQ(CjO7+'rO&(QQ(CjO7+'tO&*cQbO1G4cO&*mQ$IUO7+&XO&*zQ$IUO,59nO&,}Q$IUO,5<cO&/QQ$IUO,5<eO&1TQ$IUO,5<sO&2yQ$IUO7+'eO&3WQ$IUO7+'fO&3eQSO,5<VOOQO7+'Y7+'YO&3jQ,UO<<KtOOQO1G4l1G4lO&3qQSO1G4lO&3|QSO1G4lO&4[QSO7++kO&4[QSO7++kO!#]Q,UO1G4nO&4dQ`O1G4nO&4nQSO7++lOOQ(CW7+'|7+'|O$LSQSO7+'}O&4vQ`O7+'}OOQ(CW7+'{7+'{O$LSQSO7+'|O&4}QSO7+'}O!#]Q,UO7+'}OBoQSO7+'|O&5SQ,UO<<NhOOQ(CY7+$v7+$vO&5^Q`O,5?VOOQO-E<i-E<iO&5hQ(ChO7+(QOOQQAN=dAN=dO9[QSO1G4wOOQO1G4w1G4wO&5xQSO1G4wO&5}QSO7++sO&5}QSO7++sO8{Q(C[OANA}O?oQSOANA}OOQQANA}ANA}OOQQANAiANAiOOQQANAjANAjO&6VQSO,5?XOOQO-E<k-E<kO&6bQ$IUO1G6UO#L_QSO,5=lO8qQSO,5=lO&8rQbO'#CfO&8|QWO,5:yO&9WQWO,5:yO&9eQWO,5:yO!;xQWO,5=lOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ1G3V1G3VO%LVQUO,5<wO%KkQ(C`O,5=lO!NrQ(C`O,5:yO(VQWO,5=lO&9xQWO,5=lO&:ZQWO,5:yOOQQ<<L[<<L[O!#]Q,UO<<L[O& iQSO<<L[O&:tQSO<<L[O%QQUO<<L[OOQQ<<L_<<L_O8{Q(C[O<<L_O#L_QSO<<L_O8qQSO<<L_O&:|QWO1G4vO&;XQSO7++qOOQQAN=YAN=YO8{Q(C[OAN=YOOQQ<= `<= `OOQQ<= a<= aOOQQ<<Lg<<LgO&;aQSO<<LgO&;fQUO<<LgO&;mQSO<= `O&;rQSO<= aOOQQ1G3q1G3qO=}QSO7+)bO&;wQSO<<IxO&<SQ$IUO<<IxOOQO<<Hs<<HsOOQ(CYAN?^AN?^OOQOAN?VAN?VO$7kQ(CjOAN?VOOQOAN>zAN>zO%QQUOAN?VO=}QSOAN>zO&<^Q(C[OAN?VO!;xQWOAN>zO&<iQ(C[OAN?VOBtQWOAN>zO&<wQ(C[OAN?VOOQO<<Mn<<MnOOQQG26|G26|O!#]Q,UOG26|O!MeQSOG26|O&=]QSOG26|O$NWQbOG26|O&=eQ$IUO<<J`O&=rQ$IUO1G2WO&?hQ$IUO1G2jO&AkQ$IUO1G2lO&CnQ$IUO<<KQO&C{Q$IUO<<IsOOQO1G1q1G1qO!$uQ,UOANA`OOQO7+*W7+*WO&DYQSO7+*WO&DeQSO<= VO&DmQ`O7+*YOOQ(CW<<Ki<<KiO$LSQSO<<KiOOQ(CW<<Kh<<KhO&DwQ`O<<KiO$LSQSO<<KhOOQO7+*c7+*cO9[QSO7+*cO&EOQSO<= _OOQQG27iG27iO8{Q(C[OG27iO!'RQUO1G4sO&EWQSO7++pO8{Q(C[O1G3WO#L_QSO1G3WO&E`QWO1G0eO&EjQWO1G0eO8qQSO1G3WO!;xQWO1G3WO(VQWO1G3WO%KkQ(C`O1G3WO$5]Q(C`O1G0eO&EwQWO1G3WO& iQSOANAvOOQQANAvANAvO!#]Q,UOANAvO&FYQSOANAvOOQQANAyANAyO8{Q(C[OANAyO#L_QSOANAyOOQO'#HU'#HUOOQO7+*b7+*bOOQQG22tG22tOOQQANBRANBRO&FbQSOANBROOQQANDzANDzOOQQAND{AND{OOQQ<<L|<<L|O!'RQUOAN?dOOQOG24qG24qO$7kQ(CjOG24qOOQOG24fG24fO%QQUOG24qO=}QSOG24fO&FgQ(C[OG24qO!;xQWOG24fO&FrQ(C[OG24qO!MeQSOLD,hOOQQLD,hLD,hO!#]Q,UOLD,hO&GQQSOLD,hO&GYQ$IUO7+'rO&IOQ$IUO7+'tO&JtQ,UOG26zOOQO<<Mr<<MrOOQ(CWANATANATO$LSQSOANATOOQ(CWANASANASOOQO<<M}<<M}OOQQLD-TLD-TO&KUQ$IUO7+*_OOQO7+(r7+(rO8{Q(C[O7+(rO&K`QWO7+&PO#L_QSO7+(rO8qQSO7+(rO!;xQWO7+(rO(VQWO7+(rOOQQG27bG27bO& iQSOG27bO!#]Q,UOG27bOOQQG27eG27eO8{Q(C[OG27eOOQQG27mG27mO&KjQ$IUOG25OOOQOLD*]LD*]O$7kQ(CjOLD*]OOQOLD*QLD*QO%QQUOLD*]O=}QSOLD*QO&KtQ(C[OLD*]OOQQ!$(!S!$(!SO!MeQSO!$(!SO!#]Q,UO!$(!SO&LPQ(CjOG26zOOQ(CWG26oG26oOOQO<<L^<<L^O8{Q(C[O<<L^O#L_QSO<<L^O8qQSO<<L^O!;xQWO<<L^OOQQLD,|LD,|O& iQSOLD,|OOQQLD-PLD-POOQO!$'Mw!$'MwO$7kQ(CjO!$'MwOOQO!$'Ml!$'MlO%QQUO!$'MwOOQQ!)9En!)9EnO!MeQSO!)9EnOOQOANAxANAxO8{Q(C[OANAxO#L_QSOANAxO8qQSOANAxOOQQ!$(!h!$(!hOOQO!)9Cc!)9CcO$7kQ(CjO!)9CcOOQQ!.K;Y!.K;YO&NbQ$IUOG26zOOQOG27dG27dO8{Q(C[OG27dO#L_QSOG27dOOQO!.K8}!.K8}OOQOLD-OLD-OO8{Q(C[OLD-OOOQO!$(!j!$(!jO!'RQUO'#DvO0rQSO'#ETO'!WQbO'#JbO!'RQUO'#DnO'!_QUO'#DzO!'RQUO'#D|O'!fQbO'#CfO'$|QbO'#CfO'%^QUO,5;RO!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO'#IeO''aQSO,5<bO''iQ,UO,5;]O'(|Q,UO,5;]O!'RQUO,5;qO0uQSO'#DSO0uQSO'#DSO!#]Q,UO'#FwO''iQ,UO'#FwO!#]Q,UO'#FyO''iQ,UO'#FyO!#]Q,UO'#GXO''iQ,UO'#GXO!'RQUO,5:fO!'RQUO,5@]O'%^QUO1G0mO')TQ$IUO'#CfO!'RQUO1G1yO!#]Q,UO,5=OO''iQ,UO,5=OO!#]Q,UO,5=QO''iQ,UO,5=QO!#]Q,UO,5<lO''iQ,UO,5<lO'%^QUO1G1zO!'RQUO7+&tO!#]Q,UO1G2WO''iQ,UO1G2WO!#]Q,UO1G2YO''iQ,UO1G2YO'%^QUO7+'fO'%^QUO7+&XO!#]Q,UOANA`O''iQ,UOANA`O')_QSO'#EgO')dQSO'#EgO')lQSO'#FVO')qQSO'#EqO')vQSO'#JqO'*RQSO'#JoO'*^QSO,5;RO'*cQ,UO,5<_O'*jQSO'#GQO'*oQSO'#GQO'*tQSO,5<`O'*|QSO,5;RO'+UQ$IUO1G1YO'+]QSO,5<lO'+bQSO,5<lO'+gQSO,5<nO'+lQSO,5<nO'+qQSO1G1zO'+vQSO1G0mO'+{Q,UO<<KtO',SQ,UO<<KtO7ZQ,UO'#FuO8qQSO'#FtO@jQSO'#EfO!'RQUO,5;nO!/{QSO'#GQO!/{QSO'#GQO!/{QSO'#GSO!/{QSO'#GSO!$uQ,UO7+(YO!$uQ,UO7+(YO$IvQ`O1G2nO$IvQ`O1G2nO!#]Q,UO,5=SO!#]Q,UO,5=S",stateData:"'-[~O'lOS'mOSROS'nRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#o}O$PzO$TfO%_{O%a!OO%c|O%d|O%g!PO%i!QO%l!RO%m!RO%o!SO%|!UO&S!VO&U!WO&W!XO&Y!YO&]!ZO&c![O&i!]O&k!^O&m!_O&o!`O&q!aO'sSO'uTO'xUO(QVO(_[O(liO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO's!bO'uTO'xUO(QVO(_[O(liO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x;oO!|!vO!}!tO#O!uO#P!sO#S!wO#T!wO't!iO'uTO'xUO(T!jO(_!nO~O'n!xO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#WYX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX'jYX(QYX(`YX(gYX(hYX~O!a$yX~P(dO[!zO'u!|O'v!zO'w!|O~O[!}O'w!|O'x!|O'y!}O~Oq#PO!O#QO(R#QO(S#SO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO's;tO'uTO'xUO(QVO(_[O(liO~O!U#WO!V#TO!S(WP!S(dP~P+pO!W#`O~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO'uTO'xUO(QVO(_[O(liO~O!U#fO!x]O#a#iO#b#fO's;uO!g(aP~P.[O!h#kO's#jO~O!t#oO!x]O%_#pO~O#c#qO~O!a#rO#c#qO~OP$YOX$aOk#}Oy#vOz#wO|#xO!V$^O!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO#u$VO(QVO(`$WO(g#yO(h#zO~O^(UX'j(UX'h(UX!g(UX!S(UX!X(UX%`(UX!a(UX~P1dO#W$bO#z$bOP(VXX(VXk(VXy(VXz(VX|(VX!V(VX!e(VX!h(VX!l(VX#f(VX#g(VX#h(VX#i(VX#j(VX#k(VX#l(VX#m(VX#n(VX#p(VX#r(VX#t(VX#u(VX(Q(VX(`(VX(g(VX(h(VX!X(VX%`(VX~O^(VX!f(VX'j(VX'h(VX!S(VX!g(VXo(VX!a(VX~P3zO#W$bO~O$V$dO$X$cO$`$iO~O!X$jO$TfO$c$kO$e$mO~Oi%POk$qOl$pOm$pOs%QOu%ROw%SO|$xO!X$yO!c%XO!h$uO#b%YO$P%VO$l%TO$n%UO$q%WO's$oO'uTO'xUO'|%OO(Q$rOd'}P~O!h%ZO~O!a%]O~O^%^O'j%^O~O't!iO~P%QO's%eO~O!h%ZO's%eO't!iO'|%OO~Ob%lO!h%ZO's%eO~O#n$PO~Oy%qO!X%nO!h%pO%a%tO's%eO't!iO'uTO'xUO](tP~O!t#oO~O|%vO!X%wO's%eO~O|%vO!X%wO%i%{O's%eO~O's%|O~O#o}O%a!OO%c|O%d|O%g!PO%i!QO%l!RO%m!RO~Oa&VOb&UO!t&SO%_&TO%q&RO~P;cOa&YObwO!X&XO!tvO!x]O#o}O%_{O%c|O%d|O%g!PO%i!QO%l!RO%m!RO%o!SO~O_&]O#W&`O%a&ZO't!iO~P<bO!h&aO!q&eO~O!h#kO~O!XXO~O^%^O'i&mO'j%^O~O^%^O'i&pO'j%^O~O^%^O'i&rO'j%^O~O'hYX!SYXoYX!gYX&QYX!XYX%`YX!aYX~P(dO!['PO!]&xO!^&xO't!iO'uTO'xUO~Ol&vO|&uO!U&yO(T&tO!W(XP!W(fP~P?cOg'SO!X'QO's%eO~Ob'XO!h%ZO's%eO~Oy%qO!h%pO~Ol!kO|!lO!['^O!]']O!^']O!}'`O#O'`O#P'_O#S'bO#T'bO't!iO'uTO'xUO(T!jO(_!nO~O!x;oO!|'aO~P@}O^%^O!a#rO!h%ZO!l'hO#W'fO'j%^O'|%OO(`'dO~Ol!kO|!lO'uTO'xUO(T!jO(_!nO~O!]']O!^']O't!iO~PBtO!['^O!]']O!^']O#S'bO#T'bO't!iO~PBtO!XXO!['^O!]']O!^']O#P'_O#S'bO#T'bO't!iO~PBtO'o'lO'p'lO'q'nO~O[!zO'u'pO'v!zO'w'pO~O[!}O'w'pO'x'pO'y!}O~Oq#PO!O#QO(R#QO(S'tO~O!U'vO!S&|X!S'SX!V&|X!V'SX~P+pO!V'xO!S(WX~OP$YOX$aOk#}Oy#vOz#wO|#xO!V'xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO#u$VO(QVO(`$WO(g#yO(h#zO~O!S(WX~PF_O!S'}O~O!S(cX!V(cX!a(cX!g(cX(`(cX~O#W(cX#c#[X!W(cX~PHeO#W(OO!S(eX!V(eX~O!V(PO!S(dX~O!S(SO~O#W$bO~PHeO!W(TO~P`Oy#vOz#wO|#xO!f#tO!h#uO(QVOP!jaX!jak!ja!V!ja!e!ja!l!ja#f!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#p!ja#r!ja#t!ja#u!ja(`!ja(g!ja(h!ja~O^!ja'j!ja'h!ja!S!ja!g!jao!ja!X!ja%`!ja!a!ja~PI{O!g(UO~O|%vO!X%wO!x]O#a(XO#b(WO's%eO~O!a#rO#W(YO(`'dO!V(bX^(bX'j(bX~O!g(bX~PMPO!V(]O!g(aX~O!g(_O~O|%vO!X%wO#b(WO's%eO~Oy(`Oz(aO!f#tO!h#uO!x!wa|!wa~O!t!wa%_!wa!X!wa#a!wa#b!wa's!wa~PNXO!t(eO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO's!bO'uTO'xUO(QVO(_[O(liO~Oi%POk$qOl$pOm$pOs%QOu%ROw<XO|$xO!X$yO!c=cO!h$uO#b<_O$P%VO$l<ZO$n<]O$q%WO's(iO'uTO'xUO'|%OO(Q$rO~O#c(kO~Oi%POk$qOl$pOm$pOs%QOu%ROw%SO|$xO!X$yO!c%XO!h$uO#b%YO$P%VO$l%TO$n%UO$q%WO's(iO'uTO'xUO'|%OO(Q$rO~Od(ZP~P!$uO!U(oO!g([P~P%QO(T(qO(_[O~O|(sO!h#uO(T(qO(_[O~OP;nOQ;nOa=_Ob!fOikOk;nOlkOmkOskOu;nOw;nO|WO!QkO!RkO!X!cO!c;qO!hZO!k;nO!l;nO!m;nO!o;rO!q;sO!t!eO$P!hO$TfO's)RO'uTO'xUO(QVO(_[O(l=]O~Oz)UO!h#uO~O!V$^O^$ja'j$ja'h$ja!g$ja!S$ja!X$ja%`$ja!a$ja~O#o)YO~P!#]Oy)]O!a)[O!X$WX$S$WX$V$WX$X$WX$`$WX~O!a)[O!X(iX$S(iX$V(iX$X(iX$`(iX~Oy)]O~P!*kOy)]O!X(iX$S(iX$V(iX$X(iX$`(iX~O!X)_O$S)cO$V)^O$X)^O$`)dO~O!U)gO~P!'RO$V$dO$X$cO$`)kO~Og$rXy$rX|$rX!f$rX(g$rX(h$rX~OdfXd$rXgfX!VfX#WfX~P!,aOl)mO~Oq)nO(R)oO(S)qO~Og)zOy)sO|)tO(g)vO(h)xO~Od)rO~P!-jOd){O~Oi%POk$qOl$pOm$pOs%QOu%ROw<XO|$xO!X$yO!c=cO!h$uO#b<_O$P%VO$l<ZO$n<]O$q%WO'uTO'xUO'|%OO(Q$rO~O!U*PO's)|O!g(mP~P!.XO#c*RO~O!h*SO~O!U*XO's*UO!S(nP~P!.XOk*eO|*]O![*cO!]*[O!^*[O!h*SO#S*dO%V*_O't!iO(T!jO~O!W*bO~P!0_O!f#tOg(PXy(PX|(PX(g(PX(h(PX!V(PX#W(PX~Od(PX#x(PX~P!1WOg*hO#W*gOd(OX!V(OX~O!V*iOd'}X~O's%|Od'}P~O!h*pO~O's(iO~O|%vO!U#fO!X%wO!x]O#a#iO#b#fO's%eO!g(aP~O!a#rO#c*tO~OP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO#u$VO(QVO(`$WO(g#yO(h#zO~O^!ba!V!ba'j!ba'h!ba!S!ba!g!bao!ba!X!ba%`!ba!a!ba~P!3jOy#vOz#wO|#xO!f#tO!h#uO(QVOP!naX!nak!na!V!na!e!na!l!na#f!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#p!na#r!na#t!na#u!na(`!na(g!na(h!na~O^!na'j!na'h!na!S!na!g!nao!na!X!na%`!na!a!na~P!6TOy#vOz#wO|#xO!f#tO!h#uO(QVOP!paX!pak!pa!V!pa!e!pa!l!pa#f!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#p!pa#r!pa#t!pa#u!pa(`!pa(g!pa(h!pa~O^!pa'j!pa'h!pa!S!pa!g!pao!pa!X!pa%`!pa!a!pa~P!8nOg*|O!X'QO%`*{O'|%OO~O!a+OO!X'{X^'{X!V'{X'j'{X~O!h%ZO'|%OO~O!h%ZO's%eO'|%OO~O!a#rO#c(kO~O%a+[O's+WO'uTO'xUO!W(uP~O!V+]O](tX~O(T(qO~OX+aO~O]+bO~O!X%nO's%eO't!iO](tP~O|%vO!U+fO!V(PO!X%wO's%eO!S(dP~Ol&|O|+hO!U+gO'uTO'xUO(T(qO~O!W(fP~P!>RO!V+iO^(qX'j(qX~O#W+mO'|%OO~Og+pO!X$yO'|%OO~O!X+rO~Oy+tO!XXO~O!t+yO~Ob,OO~O's#jO!W(sP~Ob%lO~O%a!OO's%|O~P<bOX,UO],TO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$TfO%_{O'uTO'xUO(QVO(_[O(liO~O!X!cO$P!hO's!bO~P!@fO],TO^%^O'j%^O~O^,YO#o,[O%c,[O%d,[O~P%QO!h&aO~O&S,aO~O!X,cO~O&e,eO&g,fOP&baQ&baV&ba^&baa&bab&bai&bak&bal&bam&bas&bau&baw&ba|&ba!Q&ba!R&ba!X&ba!c&ba!h&ba!k&ba!l&ba!m&ba!o&ba!q&ba!t&ba!x&ba#o&ba$P&ba$T&ba%_&ba%a&ba%c&ba%d&ba%g&ba%i&ba%l&ba%m&ba%o&ba%|&ba&S&ba&U&ba&W&ba&Y&ba&]&ba&c&ba&i&ba&k&ba&m&ba&o&ba&q&ba'h&ba's&ba'u&ba'x&ba(Q&ba(_&ba(l&ba!W&ba&Z&ba_&ba&`&ba~O's,kO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#W{X'|!_X~O!a,pO#W,oO!V#`X!V(YX!W#`X!W(YX!a(YX!h(YX'|(YX~O!a,rO!h%ZO'|%OO!V!ZX!W!ZX~Ol!kO|!lO'uTO'xUO(T!jO~OP;nOQ;nOa=_Ob!fOikOk;nOlkOmkOskOu;nOw;nO|WO!QkO!RkO!X!cO!c;qO!hZO!k;nO!l;nO!m;nO!o;rO!q;sO!t!eO$P!hO$TfO'uTO'xUO(QVO(_[O(l=]O~O's<dO~P!I{O!V,vO!W(XX~O!W,xO~O!a,pO#W,oO!V#`X!W#`X~O!V,yO!W(fX~O!W,{O~O!],|O!^,|O't!iO~P!IjO!W-PO~P'TOg-SO!X'QO~O!S-XO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#S!wa#T!wa't!wa'u!wa'x!wa(T!wa(_!wa~PNXO^%^O!a#rO!h%ZO!l-^O#W-[O'j%^O'|%OO(`'dO~O!]-`O!^-`O't!iO~PBtO![-bO!]-`O!^-`O#S-cO#T-cO't!iO~PBtO![-bO!]-`O!^-`O#P-dO#S-cO#T-cO't!iO~PBtO![-bO!]-`O!^-`O!}-eO#O-eO#P-dO#S-cO#T-cO't!iO~PBtO^%^O#W-[O'j%^O~O^%^O!a#rO#W-[O'j%^O~O^%^O!a#rO!l-^O#W-[O'j%^O(`'dO~O'o'lO'p'lO'q-jO~Oo-kO~O!S&|a!V&|a~P!3jO!U-oO!S&|X!V&|X~P%QO!V'xO!S(Wa~O!S(Wa~PF_O!V(PO!S(da~O|%vO!U-sO!X%wO's%eO!S'SX!V'SX~O!V(]O!g(aa~O|%vO!X%wO#b-vO's%eO~O#W-xO!V(ba!g(ba^(ba'j(ba~O!a#rO~P#&hO|%vO!U-{O!X%wO!x]O#a-}O#b-{O's%eO!V'UX!g'UX~Oz.RO!h#uO~Og.UO!X'QO%`.TO'|%OO~O^#Zi!V#Zi'j#Zi'h#Zi!S#Zi!g#Zio#Zi!X#Zi%`#Zi!a#Zi~P!3jOg=iOy)sO|)tO(g)vO(h)xO~O#c#Va^#Va#W#Va'j#Va!V#Va!g#Va!X#Va!S#Va~P#(yO#c(PXP(PXX(PX^(PXk(PXz(PX!e(PX!h(PX!l(PX#f(PX#g(PX#h(PX#i(PX#j(PX#k(PX#l(PX#m(PX#n(PX#p(PX#r(PX#t(PX#u(PX'j(PX(Q(PX(`(PX!g(PX!S(PX'h(PXo(PX!X(PX%`(PX!a(PX~P!1WO!V._Od(ZX~P!-jOd.aO~O!V.bO!g([X~P!3jO!g.eO~O!S.gO~OP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO(QVOX#ei^#eik#ei!V#ei!e#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei'j#ei(`#ei(g#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~O#f#ei~P#,uO#f#{O~P#,uOP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O(QVOX#ei^#ei!V#ei!e#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei'j#ei(`#ei(g#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~Ok#ei~P#/gOk#}O~P#/gOP$YOk#}Oy#vOz#wO|#xO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO(QVO^#ei!V#ei#p#ei#r#ei#t#ei#u#ei'j#ei(`#ei(g#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~OX#ei!e#ei#k#ei#l#ei#m#ei#n#ei~P#2XOX$aO!e$PO#k$PO#l$PO#m$`O#n$PO~P#2XOP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO(QVO^#ei!V#ei#r#ei#t#ei#u#ei'j#ei(`#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~O(g#ei~P#5YO(g#yO~P#5YOP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO(QVO(g#yO^#ei!V#ei#t#ei#u#ei'j#ei(`#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~O(h#ei~P#7zO(h#zO~P#7zOP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO(QVO(g#yO(h#zO~O^#ei!V#ei#u#ei'j#ei(`#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~P#:lOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#WYX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX(QYX(`YX(gYX(hYX!VYX!WYX~O#xYX~P#=VOP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O#r<OO#t<QO#u<RO(QVO(`$WO(g#yO(h#zO~O#x.iO~P#?dOP(VXX(VXk(VXy(VXz(VX|(VX!e(VX!f(VX!h(VX!l(VX#f(VX#g(VX#h(VX#i(VX#j(VX#k(VX#l(VX#m(VX#p(VX#r(VX#t(VX#u(VX(Q(VX(`(VX(g(VX(h(VX!V(VX~O#W<WO#z<WO#n(VX#x(VX!W(VX~P#AbO^'Xa!V'Xa'j'Xa'h'Xa!g'Xa!S'Xao'Xa!X'Xa%`'Xa!a'Xa~P!3jOP#eiX#ei^#eik#eiz#ei!V#ei!e#ei!f#ei!h#ei!l#ei#f#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei'j#ei(Q#ei(`#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~P#(yO^#yi!V#yi'j#yi'h#yi!S#yi!g#yio#yi!X#yi%`#yi!a#yi~P!3jO$V.nO$X.nO~O$V.oO$X.oO~O!a)[O#W.pO!X$]X$S$]X$V$]X$X$]X$`$]X~O!U.qO~O!X)_O$S.sO$V)^O$X)^O$`.tO~O!V<SO!W(UX~P#?dO!W.uO~O!a)[O$`(iX~O$`.wO~Oq)nO(R)oO(S.zO~Ol.}O!S/OO'uTO'xUO~O!VcX!acX!gcX!g$rX(`cX~P!,aO!g/UO~P#(yO!V/VO!a#rO(`'dO!g(mX~O!g/[O~O!U*PO's%eO!g(mP~O#c/^O~O!S$rX!V$rX!a$yX~P!,aO!V/_O!S(nX~P#(yO!a/aO~O!S/cO~Ok/gO!a#rO!h%ZO'|%OO(`'dO~O's/iO~O!a+OO~O^%^O!V/mO'j%^O~O!W/oO~P!0_O!]/pO!^/pO't!iO(T!jO~O|/rO(T!jO~O#S/sO~O's%|Od'^X!V'^X~O!V*iOd'}a~Od/xO~Oy/yOz/yO|/zOgva(gva(hva!Vva#Wva~Odva#xva~P#M{Oy)sO|)tOg$ka(g$ka(h$ka!V$ka#W$ka~Od$ka#x$ka~P#NqOy)sO|)tOg$ma(g$ma(h$ma!V$ma#W$ma~Od$ma#x$ma~P$ dO#c/|O~Od${a!V${a#W${a#x${a~P!-jO#c0PO~Oy#vOz#wO|#xO!f#tO!h#uO(QVOP!niX!nik!ni!V!ni!e!ni!l!ni#f!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#p!ni#r!ni#t!ni#u!ni(`!ni(g!ni(h!ni~O^!ni'j!ni'h!ni!S!ni!g!nio!ni!X!ni%`!ni!a!ni~P$!qOg.UO!X'QO%`.TO~Oi0WO's0VO~P!.[O!a+OO!X'{a^'{a!V'{a'j'{a~O#c0^O~OXYX!VcX!WcX~O!V0_O!W(uX~O!W0aO~OX0bO~O's+WO'uTO'xUO~O!X%nO's%eO]'fX!V'fX~O!V+]O](ta~O!g0gO~P!3jOX0jO~O]0kO~O!V+iO^(qa'j(qa~O#W0qO~Og0tO!X$yO~O(T(qO!W(rP~Og0}O!X0zO%`0|O'|%OO~OX1XO!V1VO!W(sX~O!W1YO~O]1[O^%^O'j%^O~O's#jO'uTO'xUO~O#W$bO#n1_O#z$bO&Q1`O^(VX~P#AbO#W$bO#n1_O&Q1`O~O^1aO~P%QO^1cO~O&Z1gOP&XiQ&XiV&Xi^&Xia&Xib&Xii&Xik&Xil&Xim&Xis&Xiu&Xiw&Xi|&Xi!Q&Xi!R&Xi!X&Xi!c&Xi!h&Xi!k&Xi!l&Xi!m&Xi!o&Xi!q&Xi!t&Xi!x&Xi#o&Xi$P&Xi$T&Xi%_&Xi%a&Xi%c&Xi%d&Xi%g&Xi%i&Xi%l&Xi%m&Xi%o&Xi%|&Xi&S&Xi&U&Xi&W&Xi&Y&Xi&]&Xi&c&Xi&i&Xi&k&Xi&m&Xi&o&Xi&q&Xi'h&Xi's&Xi'u&Xi'x&Xi(Q&Xi(_&Xi(l&Xi!W&Xi_&Xi&`&Xi~O_1mO!W1kO&`1lO~P`O!XXO!h1oO~O&g,fOP&biQ&biV&bi^&bia&bib&bii&bik&bil&bim&bis&biu&biw&bi|&bi!Q&bi!R&bi!X&bi!c&bi!h&bi!k&bi!l&bi!m&bi!o&bi!q&bi!t&bi!x&bi#o&bi$P&bi$T&bi%_&bi%a&bi%c&bi%d&bi%g&bi%i&bi%l&bi%m&bi%o&bi%|&bi&S&bi&U&bi&W&bi&Y&bi&]&bi&c&bi&i&bi&k&bi&m&bi&o&bi&q&bi'h&bi's&bi'u&bi'x&bi(Q&bi(_&bi(l&bi!W&bi&Z&bi_&bi&`&bi~O!S1uO~O!V!Za!W!Za~P#?dOl!kO|!lO!U1{O(T!jO!V&}X!W&}X~P?cO!V,vO!W(Xa~O!V'TX!W'TX~P!>RO!V,yO!W(fa~O!W2SO~P'TO^%^O#W2]O'j%^O~O^%^O!a#rO#W2]O'j%^O~O^%^O!a#rO!h%ZO!l2aO#W2]O'j%^O'|%OO(`'dO~O!]2bO!^2bO't!iO~PBtO![2eO!]2bO!^2bO#S2fO#T2fO't!iO~PBtO![2eO!]2bO!^2bO#P2gO#S2fO#T2fO't!iO~PBtO^%^O!a#rO!l2aO#W2]O'j%^O(`'dO~O^%^O'j%^O~P!3jO!V$^Oo$ja~O!S&|i!V&|i~P!3jO!V'xO!S(Wi~O!V(PO!S(di~O!S(ei!V(ei~P!3jO!V(]O!g(ai~O!V(bi!g(bi^(bi'j(bi~P!3jO#W2kO!V(bi!g(bi^(bi'j(bi~O|%vO!X%wO!x]O#a2nO#b2mO's%eO~O|%vO!X%wO#b2mO's%eO~Og2uO!X'QO%`2tO~Og2uO!X'QO%`2tO'|%OO~O#cvaPvaXva^vakva!eva!fva!hva!lva#fva#gva#hva#iva#jva#kva#lva#mva#nva#pva#rva#tva#uva'jva(Qva(`va!gva!Sva'hvaova!Xva%`va!ava~P#M{O#c$kaP$kaX$ka^$kak$kaz$ka!e$ka!f$ka!h$ka!l$ka#f$ka#g$ka#h$ka#i$ka#j$ka#k$ka#l$ka#m$ka#n$ka#p$ka#r$ka#t$ka#u$ka'j$ka(Q$ka(`$ka!g$ka!S$ka'h$kao$ka!X$ka%`$ka!a$ka~P#NqO#c$maP$maX$ma^$mak$maz$ma!e$ma!f$ma!h$ma!l$ma#f$ma#g$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#p$ma#r$ma#t$ma#u$ma'j$ma(Q$ma(`$ma!g$ma!S$ma'h$mao$ma!X$ma%`$ma!a$ma~P$ dO#c${aP${aX${a^${ak${az${a!V${a!e${a!f${a!h${a!l${a#f${a#g${a#h${a#i${a#j${a#k${a#l${a#m${a#n${a#p${a#r${a#t${a#u${a'j${a(Q${a(`${a!g${a!S${a'h${a#W${ao${a!X${a%`${a!a${a~P#(yO^#Zq!V#Zq'j#Zq'h#Zq!S#Zq!g#Zqo#Zq!X#Zq%`#Zq!a#Zq~P!3jOd'OX!V'OX~P!$uO!V._Od(Za~O!U2}O!V'PX!g'PX~P%QO!V.bO!g([a~O!V.bO!g([a~P!3jO!S3QO~O#x!ja!W!ja~PI{O#x!ba!V!ba!W!ba~P#?dO#x!na!W!na~P!6TO#x!pa!W!pa~P!8nO!X3dO$TfO$^3eO~O!W3iO~Oo3jO~P#(yO^$gq!V$gq'j$gq'h$gq!S$gq!g$gqo$gq!X$gq%`$gq!a$gq~P!3jO!S3kO~Ol.}O'uTO'xUO~Oy)sO|)tO(h)xOg%Wi(g%Wi!V%Wi#W%Wi~Od%Wi#x%Wi~P$HbOy)sO|)tOg%Yi(g%Yi(h%Yi!V%Yi#W%Yi~Od%Yi#x%Yi~P$ITO(`$WO~P#(yO!U3nO's%eO!V'YX!g'YX~O!V/VO!g(ma~O!V/VO!a#rO!g(ma~O!V/VO!a#rO(`'dO!g(ma~Od$ti!V$ti#W$ti#x$ti~P!-jO!U3vO's*UO!S'[X!V'[X~P!.XO!V/_O!S(na~O!V/_O!S(na~P#(yO!a#rO~O!a#rO#n4OO~Ok4RO!a#rO(`'dO~Od(Oi!V(Oi~P!-jO#W4UOd(Oi!V(Oi~P!-jO!g4XO~O^$hq!V$hq'j$hq'h$hq!S$hq!g$hqo$hq!X$hq%`$hq!a$hq~P!3jO!V4]O!X(oX~P#(yO!f#tO~P3zO!X$rX%TYX^$rX!V$rX'j$rX~P!,aO%T4_OghXyhX|hX!XhX(ghX(hhX^hX!VhX'jhX~O%T4_O~O%a4fO's+WO'uTO'xUO!V'eX!W'eX~O!V0_O!W(ua~OX4jO~O]4kO~O!S4oO~O^%^O'j%^O~P#(yO!X$yO~P#(yO!V4tO#W4vO!W(rX~O!W4wO~Ol!kO|4yO![5WO!]4}O!^4}O!x;oO!|5VO!}5UO#O5UO#P5TO#S5SO#T!wO't!iO'uTO'xUO(T!jO(_!nO~O!W5RO~P%#XOg5]O!X0zO%`5[O~Og5]O!X0zO%`5[O'|%OO~O's#jO!V'dX!W'dX~O!V1VO!W(sa~O'uTO'xUO(T5fO~O]5jO~O!g5mO~P%QO^5oO~O^5oO~P%QO#n5qO&Q5rO~PMPO_1mO!W5vO&`1lO~P`O!a5xO~O!a5zO!V(Yi!W(Yi!a(Yi!h(Yi'|(Yi~O!V#`i!W#`i~P#?dO#W5{O!V#`i!W#`i~O!V!Zi!W!Zi~P#?dO^%^O#W6UO'j%^O~O^%^O!a#rO#W6UO'j%^O~O^%^O!a#rO!l6ZO#W6UO'j%^O(`'dO~O!h%ZO'|%OO~P%(fO!]6[O!^6[O't!iO~PBtO![6_O!]6[O!^6[O#S6`O#T6`O't!iO~PBtO!V(]O!g(aq~O!V(bq!g(bq^(bq'j(bq~P!3jO|%vO!X%wO#b6dO's%eO~O!X'QO%`6gO~Og6jO!X'QO%`6gO~O#c%WiP%WiX%Wi^%Wik%Wiz%Wi!e%Wi!f%Wi!h%Wi!l%Wi#f%Wi#g%Wi#h%Wi#i%Wi#j%Wi#k%Wi#l%Wi#m%Wi#n%Wi#p%Wi#r%Wi#t%Wi#u%Wi'j%Wi(Q%Wi(`%Wi!g%Wi!S%Wi'h%Wio%Wi!X%Wi%`%Wi!a%Wi~P$HbO#c%YiP%YiX%Yi^%Yik%Yiz%Yi!e%Yi!f%Yi!h%Yi!l%Yi#f%Yi#g%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#p%Yi#r%Yi#t%Yi#u%Yi'j%Yi(Q%Yi(`%Yi!g%Yi!S%Yi'h%Yio%Yi!X%Yi%`%Yi!a%Yi~P$ITO#c$tiP$tiX$ti^$tik$tiz$ti!V$ti!e$ti!f$ti!h$ti!l$ti#f$ti#g$ti#h$ti#i$ti#j$ti#k$ti#l$ti#m$ti#n$ti#p$ti#r$ti#t$ti#u$ti'j$ti(Q$ti(`$ti!g$ti!S$ti'h$ti#W$tio$ti!X$ti%`$ti!a$ti~P#(yOd'Oa!V'Oa~P!-jO!V'Pa!g'Pa~P!3jO!V.bO!g([i~O#x#Zi!V#Zi!W#Zi~P#?dOP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO(QVOX#eik#ei!e#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei#x#ei(`#ei(g#ei(h#ei!V#ei!W#ei~O#f#ei~P%2xO#f;wO~P%2xOP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO(QVOX#ei!e#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei#x#ei(`#ei(g#ei(h#ei!V#ei!W#ei~Ok#ei~P%5TOk;yO~P%5TOP$YOk;yOy#vOz#wO|#xO!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO(QVO#p#ei#r#ei#t#ei#u#ei#x#ei(`#ei(g#ei(h#ei!V#ei!W#ei~OX#ei!e#ei#k#ei#l#ei#m#ei#n#ei~P%7`OX<VO!e;{O#k;{O#l;{O#m<UO#n;{O~P%7`OP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O(QVO#r#ei#t#ei#u#ei#x#ei(`#ei(h#ei!V#ei!W#ei~O(g#ei~P%9zO(g#yO~P%9zOP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O#r<OO(QVO(g#yO#t#ei#u#ei#x#ei(`#ei!V#ei!W#ei~O(h#ei~P%<VO(h#zO~P%<VOP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O#r<OO#t<QO(QVO(g#yO(h#zO~O#u#ei#x#ei(`#ei!V#ei!W#ei~P%>bO^#vy!V#vy'j#vy'h#vy!S#vy!g#vyo#vy!X#vy%`#vy!a#vy~P!3jOg=jOy)sO|)tO(g)vO(h)xO~OP#eiX#eik#eiz#ei!e#ei!f#ei!h#ei!l#ei#f#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei#x#ei(Q#ei(`#ei!V#ei!W#ei~P%AYO!f#tOP(PXX(PXg(PXk(PXy(PXz(PX|(PX!e(PX!h(PX!l(PX#f(PX#g(PX#h(PX#i(PX#j(PX#k(PX#l(PX#m(PX#n(PX#p(PX#r(PX#t(PX#u(PX#x(PX(Q(PX(`(PX(g(PX(h(PX!V(PX!W(PX~O#x#yi!V#yi!W#yi~P#?dO#x!ni!W!ni~P$!qO!W6vO~O!V'Xa!W'Xa~P#?dO!a#rO(`'dO!V'Ya!g'Ya~O!V/VO!g(mi~O!V/VO!a#rO!g(mi~Od$tq!V$tq#W$tq#x$tq~P!-jO!S'[a!V'[a~P#(yO!a6}O~O!V/_O!S(ni~P#(yO!V/_O!S(ni~O!S7RO~O!a#rO#n7WO~Ok7XO!a#rO(`'dO~O!S7ZO~Od$vq!V$vq#W$vq#x$vq~P!-jO^$hy!V$hy'j$hy'h$hy!S$hy!g$hyo$hy!X$hy%`$hy!a$hy~P!3jO!V4]O!X(oa~O^#Zy!V#Zy'j#Zy'h#Zy!S#Zy!g#Zyo#Zy!X#Zy%`#Zy!a#Zy~P!3jOX7`O~O!V0_O!W(ui~O]7fO~O!a5zO~O(T(qO!V'aX!W'aX~O!V4tO!W(ra~O!h%ZO'|%OO^(YX!a(YX!l(YX#W(YX'j(YX(`(YX~O's7oO~P.[O!x;oO!|7rO!}7qO#O7qO#P7pO#S'bO#T'bO~PBtO^%^O!a#rO!l'hO#W'fO'j%^O(`'dO~O!W7vO~P%#XOl!kO'uTO'xUO(T!jO(_!nO~O|7wO~P%MdO![7{O!]7zO!^7zO#P7pO#S'bO#T'bO't!iO~PBtO![7{O!]7zO!^7zO!}7|O#O7|O#P7pO#S'bO#T'bO't!iO~PBtO!]7zO!^7zO't!iO(T!jO(_!nO~O!X0zO~O!X0zO%`8OO~Og8RO!X0zO%`8OO~OX8WO!V'da!W'da~O!V1VO!W(si~O!g8[O~O!g8]O~O!g8^O~O!g8^O~P%QO^8`O~O!a8cO~O!g8dO~O!V(ei!W(ei~P#?dO^%^O#W8lO'j%^O~O^%^O!a#rO#W8lO'j%^O~O^%^O!a#rO!l8pO#W8lO'j%^O(`'dO~O!h%ZO'|%OO~P&$QO!]8qO!^8qO't!iO~PBtO!V(]O!g(ay~O!V(by!g(by^(by'j(by~P!3jO!X'QO%`8uO~O#c$tqP$tqX$tq^$tqk$tqz$tq!V$tq!e$tq!f$tq!h$tq!l$tq#f$tq#g$tq#h$tq#i$tq#j$tq#k$tq#l$tq#m$tq#n$tq#p$tq#r$tq#t$tq#u$tq'j$tq(Q$tq(`$tq!g$tq!S$tq'h$tq#W$tqo$tq!X$tq%`$tq!a$tq~P#(yO#c$vqP$vqX$vq^$vqk$vqz$vq!V$vq!e$vq!f$vq!h$vq!l$vq#f$vq#g$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#p$vq#r$vq#t$vq#u$vq'j$vq(Q$vq(`$vq!g$vq!S$vq'h$vq#W$vqo$vq!X$vq%`$vq!a$vq~P#(yO!V'Pi!g'Pi~P!3jO#x#Zq!V#Zq!W#Zq~P#?dOy/yOz/yO|/zOPvaXvagvakva!eva!fva!hva!lva#fva#gva#hva#iva#jva#kva#lva#mva#nva#pva#rva#tva#uva#xva(Qva(`va(gva(hva!Vva!Wva~Oy)sO|)tOP$kaX$kag$kak$kaz$ka!e$ka!f$ka!h$ka!l$ka#f$ka#g$ka#h$ka#i$ka#j$ka#k$ka#l$ka#m$ka#n$ka#p$ka#r$ka#t$ka#u$ka#x$ka(Q$ka(`$ka(g$ka(h$ka!V$ka!W$ka~Oy)sO|)tOP$maX$mag$mak$maz$ma!e$ma!f$ma!h$ma!l$ma#f$ma#g$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#p$ma#r$ma#t$ma#u$ma#x$ma(Q$ma(`$ma(g$ma(h$ma!V$ma!W$ma~OP${aX${ak${az${a!e${a!f${a!h${a!l${a#f${a#g${a#h${a#i${a#j${a#k${a#l${a#m${a#n${a#p${a#r${a#t${a#u${a#x${a(Q${a(`${a!V${a!W${a~P%AYO#x$gq!V$gq!W$gq~P#?dO#x$hq!V$hq!W$hq~P#?dO!W9PO~O#x9QO~P!-jO!a#rO!V'Yi!g'Yi~O!a#rO(`'dO!V'Yi!g'Yi~O!V/VO!g(mq~O!S'[i!V'[i~P#(yO!V/_O!S(nq~O!S9WO~P#(yO!S9WO~Od(Oy!V(Oy~P!-jO!V'_a!X'_a~P#(yO!X%Sq^%Sq!V%Sq'j%Sq~P#(yOX9]O~O!V0_O!W(uq~O#W9aO!V'aa!W'aa~O!V4tO!W(ri~P#?dOPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#WYX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX(QYX(`YX(gYX(hYX~O!a%QX#n%QX~P&6lO#S-cO#T-cO~PBtO#P9eO#S-cO#T-cO~PBtO!}9fO#O9fO#P9eO#S-cO#T-cO~PBtO!]9iO!^9iO't!iO(T!jO(_!nO~O![9lO!]9iO!^9iO#P9eO#S-cO#T-cO't!iO~PBtO!X0zO%`9oO~O'uTO'xUO(T9tO~O!V1VO!W(sq~O!g9wO~O!g9wO~P%QO!g9yO~O!g9zO~O#W9|O!V#`y!W#`y~O!V#`y!W#`y~P#?dO^%^O#W:QO'j%^O~O^%^O!a#rO#W:QO'j%^O~O^%^O!a#rO!l:UO#W:QO'j%^O(`'dO~O!X'QO%`:XO~O#x#vy!V#vy!W#vy~P#?dOP$tiX$tik$tiz$ti!e$ti!f$ti!h$ti!l$ti#f$ti#g$ti#h$ti#i$ti#j$ti#k$ti#l$ti#m$ti#n$ti#p$ti#r$ti#t$ti#u$ti#x$ti(Q$ti(`$ti!V$ti!W$ti~P%AYOy)sO|)tO(h)xOP%WiX%Wig%Wik%Wiz%Wi!e%Wi!f%Wi!h%Wi!l%Wi#f%Wi#g%Wi#h%Wi#i%Wi#j%Wi#k%Wi#l%Wi#m%Wi#n%Wi#p%Wi#r%Wi#t%Wi#u%Wi#x%Wi(Q%Wi(`%Wi(g%Wi!V%Wi!W%Wi~Oy)sO|)tOP%YiX%Yig%Yik%Yiz%Yi!e%Yi!f%Yi!h%Yi!l%Yi#f%Yi#g%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#p%Yi#r%Yi#t%Yi#u%Yi#x%Yi(Q%Yi(`%Yi(g%Yi(h%Yi!V%Yi!W%Yi~O#x$hy!V$hy!W$hy~P#?dO#x#Zy!V#Zy!W#Zy~P#?dO!a#rO!V'Yq!g'Yq~O!V/VO!g(my~O!S'[q!V'[q~P#(yO!S:`O~P#(yO!V0_O!W(uy~O!V4tO!W(rq~O#S2fO#T2fO~PBtO#P:gO#S2fO#T2fO~PBtO!]:kO!^:kO't!iO(T!jO(_!nO~O!X0zO%`:nO~O!g:qO~O^%^O#W:vO'j%^O~O^%^O!a#rO#W:vO'j%^O~O!X'QO%`:{O~OP$tqX$tqk$tqz$tq!e$tq!f$tq!h$tq!l$tq#f$tq#g$tq#h$tq#i$tq#j$tq#k$tq#l$tq#m$tq#n$tq#p$tq#r$tq#t$tq#u$tq#x$tq(Q$tq(`$tq!V$tq!W$tq~P%AYOP$vqX$vqk$vqz$vq!e$vq!f$vq!h$vq!l$vq#f$vq#g$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#p$vq#r$vq#t$vq#u$vq#x$vq(Q$vq(`$vq!V$vq!W$vq~P%AYOd%[!Z!V%[!Z#W%[!Z#x%[!Z~P!-jO!V'aq!W'aq~P#?dO#S6`O#T6`O~PBtO!V#`!Z!W#`!Z~P#?dO^%^O#W;ZO'j%^O~O#c%[!ZP%[!ZX%[!Z^%[!Zk%[!Zz%[!Z!V%[!Z!e%[!Z!f%[!Z!h%[!Z!l%[!Z#f%[!Z#g%[!Z#h%[!Z#i%[!Z#j%[!Z#k%[!Z#l%[!Z#m%[!Z#n%[!Z#p%[!Z#r%[!Z#t%[!Z#u%[!Z'j%[!Z(Q%[!Z(`%[!Z!g%[!Z!S%[!Z'h%[!Z#W%[!Zo%[!Z!X%[!Z%`%[!Z!a%[!Z~P#(yOP%[!ZX%[!Zk%[!Zz%[!Z!e%[!Z!f%[!Z!h%[!Z!l%[!Z#f%[!Z#g%[!Z#h%[!Z#i%[!Z#j%[!Z#k%[!Z#l%[!Z#m%[!Z#n%[!Z#p%[!Z#r%[!Z#t%[!Z#u%[!Z#x%[!Z(Q%[!Z(`%[!Z!V%[!Z!W%[!Z~P%AYOo(UX~P1dO't!iO~P!'RO!ScX!VcX#WcX~P&6lOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#WYX#WcX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX(QYX(`YX(gYX(hYX~O!acX!gYX!gcX(`cX~P'!sOP;nOQ;nOa=_Ob!fOikOk;nOlkOmkOskOu;nOw;nO|WO!QkO!RkO!XXO!c;qO!hZO!k;nO!l;nO!m;nO!o;rO!q;sO!t!eO$P!hO$TfO's)RO'uTO'xUO(QVO(_[O(l=]O~O!V<SO!W$ja~Oi%POk$qOl$pOm$pOs%QOu%ROw<YO|$xO!X$yO!c=dO!h$uO#b<`O$P%VO$l<[O$n<^O$q%WO's(iO'uTO'xUO'|%OO(Q$rO~O#o)YO~P''iO!WYX!WcX~P'!sO#c;vO~O!a#rO#c;vO~O#W<WO~O#n;{O~O#W<bO!V(eX!W(eX~O#W<WO!V(cX!W(cX~O#c<cO~Od<eO~P!-jO#c<jO~O#c<kO~O!a#rO#c<lO~O!a#rO#c<cO~O#x<mO~P#?dO#c<nO~O#c<oO~O#c<pO~O#c<qO~O#c<rO~O#c<sO~O#x<tO~P!-jO#x<uO~P!-jO$T~!f!|#O#P#S#a#b#m(l$l$n$q%T%_%`%a%g%i%l%m%o%q~'nR$T(l#g!R'l't#hl#f#iky'm(T'm's$V$X$V~",goto:"$/X(yPPPP(zP(}P)_P+a/fPPPP6iPP7OP<|@mPAQPAQPPPAQPBpPAQPAQPAQPBtPPByPCdPH`PPPHdPPPPHdKfPPPKlMlPHdP!!SPPPP!$eHdPPPHdPHdP!&vHdP!*]!+_!+dP!,U!,Y!,UPPPP!/f!1kPP!1t!3OP!+_HdHd!6b!9m!>v!>v!BnPPP!BuHdPPPPPPPPPPP!FTP!GiPPHd!HyPHdPHdHdHdHdPHd!J`PP!MiP#!nP#!r#!|##Q##QP!MfP##U##UP#&ZP#&_HdHd#&e#)iAQPAQPAQAQP#*sAQAQ#,mAQ#.zAQ#0nAQAQ#1[#3W#3W#3[#3d#3W#3lP#3WPAQ#4hAQ#5pAQAQ6iPPP#6{PP#7e#7eP#7eP#7z#7ePP#8QP#7wP#7w#8d!1p#7w#9O#9U6f(}#9X(}P#9`#9`#9`P(}P(}P(}P(}PP(}P#9f#9iP#9i(}P#9mP#9pP(}P(}P(}P(}P(}P(}(}PP#9v#9|#:W#:^#:d#:j#:p#;O#;U#;[#;f#;l#<h#<w#<}#=a#=g#=m#={#>b#?r#@Q#@W#@^#@d#@j#@t#@z#AQ#A[#An#AtPPPPPPPPPP#AzPPPPPPP#Bn#FYP#Gu#G|#HUPPPP#L`$ U$'t$'w$'z$)w$)z$)}$*UPP$*[$*`$+X$,X$,]$,qPP$,u$,{$-PP$-S$-W$-Z$.P$.g$.l$.o$.r$.x$.{$/P$/TR!yRmpOXr!X#a%]&d&f&g&i,^,c1g1jU!pQ'Q-OQ%ctQ%kwQ%rzQ&[!TS&x!c,vQ'W!f[']!m!r!s!t!u!vS*[$y*aQ+U%lQ+c%tQ+}&UQ,|'PQ-W'XW-`'^'_'`'aQ/p*cQ1U,OU2b-b-d-eS4}0z5QS6[2e2gU7z5U5V5WQ8q6_S9i7{7|Q:k9lR<a;r%QdOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t+h,Y,^,c-S-[-o-x.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2}4y5]5o5q5r6U7w8R8`8l:Q:v;ZS#m];o!r)T$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q*l%SQ+Z%nQ,P&XQ,W&aQ.X<XQ0T*|Q0X+OQ0d+[Q1^,UQ2q.UQ4e0_Q5d1VQ6i2uQ6o<YQ7b4fR8x6j'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`#S!kQ!m!p!r!s!t!u!v!w&x'P'Q']'^'_'`'a'b,v,|-O-`-b-c-d-e0z2b2e2f2g4z5Q5S5T5U5V6[6_6`7p7q7r7|8q9e9f:g$Y$pi#r#t$`$a$u$x%T%U%Y)n)w)y)z*R*X*g*h*{+O+m+p.T._/^/_/a/|0q0t0|2t3l3v4O4U4]4_5[6g6}7W8O8u9Q9o:X:n:{<U<V<Z<[<]<^<_<`<f<g<h<i<j<k<n<o<p<q<t<u=]=e=f=i=jQ%uzQ&v!cS&|%w,yQ+Z%nS.})t/PQ/{*pQ0d+[Q0i+bQ1],TQ1^,UQ4e0_Q4n0kQ5g1XQ5h1[Q7b4fQ7e4kQ8Z5jQ9`7fR9u8WpmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jR,R&]&x`OPXYrstux!X!^!g!l#P#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u'S'f'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=_=`[#YWZ#T#W&y'vQ%fvQ%jwS%oz%t!U%x|}#d#f#i%Z%v(P(W(X(]+f+g+i,[,p-s-v-z-{-}1o2m2n5z6dQ&Q!RQ'T!eQ'V!fQ(d#oS*O$u*SS+T%k%lQ+X%nQ+x&SQ+|&US-V'W'XQ.W(eQ/Z*PQ0]+UQ0c+[Q0e+]Q0h+aQ1P+yS1T+},OQ2X-WQ3m/VQ4d0_Q4h0bQ4m0jQ5c1UQ6z3nQ7a4fQ7d4jQ9[7`R:b9]v$wi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=f!`%hw!f!o%j%k%l&w'V'W'X'['i*Z+T+U,s-V-W-_-a/h0]2Q2X2`2d4Q6Y6^8o:TQ*}%fQ+n%}Q+q&OQ+{&UQ.V(dQ1O+xU1S+|+},OQ2v.WQ5^1PS5b1T1US7n4x4|Q8V5cU9g7s7x7yU:i9h9j9kQ;R:jQ;a;S!z=a#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jg=b<U<V<[<^<`<g<i<k<o<q<uW$|i%O*i=]S%}!O&ZQ&O!PQ&P!QR+l%{$Z${i#r#t$`$a$u$x%T%U%Y)n)w)y)z*R*X*g*h*{+O+m+p.T._/^/_/a/|0q0t0|2t3l3v4O4U4]4_5[6g6}7W8O8u9Q9o:X:n:{<U<V<Z<[<]<^<_<`<f<g<h<i<j<k<n<o<p<q<t<u=]=e=f=i=jT)o$r)pV*m%S<X<YU&|!c%w,yS(r#v#wQ+`%qS.P(`(aQ0u+rQ4V/yR7j4t'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`$o$]c#V#b%a%b%d'u'{(g(n(v(w(x(y(z({(|(})O)P)Q)S)V)Z)e*y+_,t-h-m-r-w.^.d.h.j.k.l.{/}1v1y2Z2j2|3R3S3T3U3V3W3X3Y3Z3[3]3^3_3b3c3h4Z4b5}6T6b6m6n6s6t7l8f8j8y8}9O:O:d:r:t;X;d;p=ST#QV#R'PkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q&z!cR1|,v!z!kQ!c!m!p!r!s!t!u!v!w&x'P'Q']'^'_'`'a'b,v,|-O-`-b-c-d-e2b2e2f2g4z5S5T6[6_6`7p7q7r8q9e9f:gS*Z$y*aS/h*[*cQ/q*dQ0w+tQ4Q/pQ4T/sS4x0z5QS7s4}5WS7x5U5VS9h7z7{Q9j7|S:j9i9lR;S:klpOXr!X#a%]&d&f&g&i,^,c1g1jQ&k![Q'j!tS(f#q;vQ+R%iQ+v&QQ+w&RQ-T'UQ-g'cS.](k<cS0O*t<lQ0Z+SQ0y+uQ1n,eQ1p,fQ1x,qQ2V-UQ2Y-YS4[0P<rQ4`0[S4c0^<sQ5|1zQ6Q2WQ6V2_Q7_4aQ8g6OQ8h6RQ8k6WQ9{8dQ:P8mQ:u:RR;Y:w$j$[c#V#b%b%d'u'{(g(n(v(w(x(y(z({(|(})O)P)Q)S)V)Z)e*y+_,t-h-m-r-w.^.d.h.k.l.{/}1v1y2Z2j2|3R3S3T3U3V3W3X3Y3Z3[3]3^3_3b3c3h4Z4b5}6T6b6m6n6s6t7l8f8j8y8}9O:O:d:r:t;X;d;p=SS(c#l'ZU*f$z(j3aS*x%a.jQ2r0TQ6f2qQ8w6iR:Y8x$j$Zc#V#b%b%d'u'{(g(n(v(w(x(y(z({(|(})O)P)Q)S)V)Z)e*y+_,t-h-m-r-w.^.d.h.k.l.{/}1v1y2Z2j2|3R3S3T3U3V3W3X3Y3Z3[3]3^3_3b3c3h4Z4b5}6T6b6m6n6s6t7l8f8j8y8}9O:O:d:r:t;X;d;p=SS(b#l'ZS(t#w$[S*w%a.jS.Q(a(cQ.m)UQ0Q*xR2o.R'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`S#m];oQ&f!VQ&g!WQ&i!YQ&j!ZR1f,aQ'R!eQ*z%fQ-R'TS.S(d*}Q2T-QW2s.V.W0S0UQ6P2UU6e2p2r2vS8t6f6hS:W8v8wS:y:V:YQ;[:zR;e;]V!qQ'Q-O!_^OQXZ_r!T!X!m#a#d%Z%]&Z&]&d&f&g&i'Q(],^,c-O-z0z1g1j4z5QT#m];o%[yOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZS(r#v#wS.P(`(a!s<y$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`U!oQ'Q-OY'[!m!s!t!u!vS'i!p!rW'k!w4z5S5TS-_']'^U-a'_'`'aW-f'b7p7q7rS2`-`-bU2c-c9e9fS2d-d-eS4|0z5QS6Y2b2eS6]2f:gQ6^2gS7s4}5WS7y5U5VS8o6[6_Q8r6`S9h7z7{Q9k7|Q:T8qS:j9i9lR;S:kU!qQ'Q-OT5O0z5QU'h!o4{4|S([#e1dU-^'['k7yQ/Y*OQ/f*ZU2a-a-f9kQ3r/ZS3{/g/qS6Z2c2dQ6y3mS7U4R4TS8p6]6^Q9S6zQ9Z7XR:U8rQ#sbU'g!o4{4|S(Z#e1dQ*u%[Q+P%gQ+V%mW-]'['h'k7yQ-y([Q/X*OQ/e*ZQ/k*^Q0Y+QQ1Q+zW2^-^-a-f9kS3q/Y/ZS3z/f/qQ3}/jQ4P/lQ5`1RU6X2a2c2dQ6x3mQ6|3rS7Q3{4TQ7V4SQ8T5aU8n6Z6]6^S9R6y6zQ9V7RQ9X7UQ9c7mQ9r8US:S8p8rQ:^9SQ:_9WQ:a9ZQ:f9dQ:p9sQ:x:UQ:}:`Q;P:hQ;_;QQ;h;`Q;l;iQ<|<wQ=X=QR=Y=R%[aOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZS#sx!g!r<v$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`R<|=_%[bOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZQ%[j!`%gw!f!o%j%k%l&w'V'W'X'['i*Z+T+U,s-V-W-_-a/h0]2Q2X2`2d4Q6Y6^8o:TS%mx!gQ+Q%hQ+z&UW1R+{+|+},OU5a1S1T1US7m4x4|S8U5b5cW9d7n7s7x7yQ9s8VW:h9g9h9j9kS;Q:i:jS;`;R;SQ;i;a!r<w$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q=Q=^R=R=_%OeOPXYrstu!X!^!l#P#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&d&f&g&i&m&u'S'f'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZY#_WZ#T#W'v!U%x|}#d#f#i%Z%v(P(W(X(]+f+g+i,[,p-s-v-z-{-}1o2m2n5z6dQ,X&a!p<x$X$j)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`R<{&yS&}!c%wR2O,y%QdOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t+h,Y,^,c-S-[-o-x.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2}4y5]5o5q5r6U7w8R8`8l:Q:v;Z!r)T$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q,W&aQ0T*|Q2q.UQ6i2uR8x6j!l$Rc#V%a'u'{(g(n(})O)P)Q)V)Z+_-h-m-r-w.^.d.{/}2Z2j2|3_4Z4b6T6b6m8j:O:t;X;d;p!T;})S)e,t.j1v1y3R3Z3[3]3^3b3h5}6n6s6t7l8f8y8}9O:d:r=S!h$Tc#V%a'u'{(g(n)P)Q)V)Z+_-h-m-r-w.^.d.{/}2Z2j2|3_4Z4b6T6b6m8j:O:t;X;d;p!P<P)S)e,t.j1v1y3R3]3^3b3h5}6n6s6t7l8f8y8}9O:d:r=S!d$Xc#V%a'u'{(g(n)V)Z+_-h-m-r-w.^.d.{/}2Z2j2|3_4Z4b6T6b6m8j:O:t;X;d;pQ3l/Tz=`)S)e,t.j1v1y3R3b3h5}6n6s6t7l8f8y8}9O:d:r=SQ=e=gR=f=h'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`S$kh$lR3e.p'VgOPWXYZhrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j$l%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.p.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`T$gf$mQ$efS)^$h)bR)j$mT$ff$mT)`$h)b'VhOPWXYZhrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j$l%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.p.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`T$kh$lQ$nhR)i$l%[jOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;Z!s=^$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`#alOPXZr!X!^!l#P#a#k#x$j%]&]&`&a&d&f&g&i&m&u'S(s)g*|+h,Y,^,c-S.U.q/z0}1_1`1a1c1g1j1l2u3d4y5]5o5q5r6j7w8R8`v$zi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=f!z(j#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jQ*q%WQ.|)sg3a<U<V<[<^<`<g<i<k<o<q<uv$vi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=fQ*T$wS*^$y*aQ*r%XQ/l*_!z=O#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jf=P<U<V<[<^<`<g<i<k<o<q<uQ=T=aQ=U=bQ=V=cR=W=dv$zi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=f!z(j#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jg3a<U<V<[<^<`<g<i<k<o<q<ulnOXr!X#a%]&d&f&g&i,^,c1g1jQ*W$xQ,l&pQ,m&rR3u/_$Y${i#r#t$`$a$u$x%T%U%Y)n)w)y)z*R*X*g*h*{+O+m+p.T._/^/_/a/|0q0t0|2t3l3v4O4U4]4_5[6g6}7W8O8u9Q9o:X:n:{<U<V<Z<[<]<^<_<`<f<g<h<i<j<k<n<o<p<q<t<u=]=e=f=i=jQ+o&OQ0s+qQ4r0rR7i4sT*`$y*aS*`$y*aT5P0z5QS/j*]4yT4S/r7wQ+P%gQ/k*^Q0Y+QQ1Q+zQ5`1RQ8T5aQ9c7mQ9r8UQ:f9dQ:p9sQ;P:hQ;_;QQ;h;`R;l;in)w$s(l*s/]/t/u2z3s4Y6w7Y:]<}=Z=[!W<f(h)X)}*V.[.x/T/b0R0p0r2y3t3x4q4s6k6l7O7S7[7^9U9Y:|=g=h]<g3`6r8z:Z:[;fp)y$s(l*s/R/]/t/u2z3s4Y6w7Y:]<}=Z=[!Y<h(h)X)}*V.[.x/T/b0R0p0r2w2y3t3x4q4s6k6l7O7S7[7^9U9Y:|=g=h_<i3`6r8z8{:Z:[;fpmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jQ&W!SR,Y&apmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jR&W!SQ+s&PR0o+lqmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jQ0{+xS5Z1O1PU7}5X5Y5^S9n8P8QS:l9m9pQ;T:mR;b;UQ&_!TR,S&ZR5g1XS%oz%tR0e+]Q&d!UR,^&eR,d&jT1h,c1jR,h&kQ,g&kR1q,hQ'm!xR-i'mQrOQ#aXT%`r#aQ!{TR'o!{Q#OUR'q#OQ)p$rR.y)pQ#RVR's#RQ#UWU'y#U'z-pQ'z#VR-p'{Q,w&zR1},wQ.`(lR2{.`Q.c(nS3O.c3PR3P.dQ-O'QR2R-Or_OXr!T!X#a%]&Z&]&d&f&g&i,^,c1g1jU!mQ'Q-OS#dZ%ZY#n_!m#d-z4zQ-z(]T4z0z5QS#[W%vU(Q#[(R-qQ(R#]R-q'|Q,z&}R2P,zQ(^#gQ-t(VW.O(^-t2h6aQ2h-uR6a2iQ)b$hR.r)bQ$lhR)h$lQ$_cU)W$_-l<TQ-l;pR<T)eQ/W*OW3o/W3p6{9TU3p/X/Y/ZS6{3q3rR9T6|#m)u$s(h(l)X)}*V*n*o*s.Y.Z.[.x/R/S/T/]/b/t/u0R0p0r2w2x2y2z3`3s3t3x4Y4q4s6k6l6p6q6r6w7O7S7Y7[7^8z8{8|9U9Y:Z:[:]:|;f<}=Z=[=g=hQ/`*VU3w/`3y7PQ3y/bR7P3xQ*a$yR/n*aQ*j$}R/w*jQ4^0RR7]4^Q+j%yR0n+jQ4u0uS7k4u9bR9b7lQ+u&QR0x+uQ5Q0zR7u5QQ1W,PS5e1W8XR8X5gQ0`+XW4g0`4i7c9^Q4i0cQ7c4hR9^7dQ+^%oR0f+^Q1j,cR5u1jWqOXr#aQ&h!XQ*v%]Q,]&dQ,_&fQ,`&gQ,b&iQ1e,^S1h,c1jR5t1gQ%_oQ&l!]Q&o!_Q&q!`Q&s!aU'e!o4{4|Q+e%uQ+k%zQ,R&_Q,j&nY-Z'['g'h'k7yQ/m*`S1Z,S,VQ1r,iQ1s,lQ1t,m[2[-]-^-a-f-h9kQ4l0iQ4p0pQ5_1QQ5i1]Q5s1fY6S2Z2^2a2c2dQ7g4nQ7h4qQ7t5PQ8S5`Q8Y5hY8i6T6X6Z6]6^Q9_7eQ9q8TQ9v8ZW9}8j8n8p8rQ:c9`Q:e9cQ:o9rU:s:O:S:UQ;O:fQ;V:pS;W:t:xQ;^;PQ;c;XQ;g;_Q;j;dQ;k;hR;m;lQ%iwQ'U!fQ'c!oU+S%j%k%lQ,q&wU-U'V'W'XS-Y'['iQ/d*ZS0[+T+UQ1z,sS2W-V-WS2_-_-aQ3|/hQ4a0]Q6O2QQ6R2XS6W2`2dQ7T4QS8m6Y6^Q:R8oR:w:TS$ti=]R*k%OU$}i%O=]R/v*iQ$siS(h#r+OQ(l#tS)X$`$aQ)}$uQ*V$xQ*n%TQ*o%UQ*s%YQ.Y<ZQ.Z<]Q.[<_Q.x)nQ/R)wQ/S)yQ/T)zQ/]*RQ/b*XQ/t*gQ/u*hh0R*{.T0|2t5[6g8O8u9o:X:n:{Q0p+mQ0r+pQ2w<fQ2x<hQ2y<jQ2z._S3`<U<VQ3s/^Q3t/_Q3x/aQ4Y/|Q4q0qQ4s0tQ6k<nQ6l<pQ6p<[Q6q<^Q6r<`Q6w3lQ7O3vQ7S4OQ7Y4UQ7[4]Q7^4_Q8z<kQ8{<gQ8|<iQ9U6}Q9Y7WQ:Z<oQ:[<qQ:]9QQ:|<tQ;f<uQ<}=]Q=Z=eQ=[=fQ=g=iR=h=jloOXr!X#a%]&d&f&g&i,^,c1g1jQ!dPS#cZ#kQ&n!^U'Y!l4y7wQ'r#PQ(u#xQ)f$jS,V&]&`Q,Z&aQ,i&mQ,n&uQ-Q'SQ.f(sQ.v)gQ0U*|Q0l+hQ1b,YQ2U-SQ2r.UQ3g.qQ4W/zQ5Y0}Q5k1_Q5l1`Q5n1aQ5p1cQ5w1lQ6f2uQ6u3dQ8Q5]Q8_5oQ8a5qQ8b5rQ8w6jQ9p8RR9x8`#UcOPXZr!X!^!l#a#k#x%]&]&`&a&d&f&g&i&m&u'S(s*|+h,Y,^,c-S.U/z0}1_1`1a1c1g1j1l2u4y5]5o5q5r6j7w8R8`Q#VWQ#bYQ%asQ%btQ%duS'u#T'xQ'{#WQ(g#qQ(n#uQ(v#{Q(w#|Q(x#}Q(y$OQ(z$PQ({$QQ(|$RQ(}$SQ)O$TQ)P$UQ)Q$VQ)S$XQ)V$^Q)Z$bW)e$j)g.q3dQ*y%cQ+_%pS,t&y1{Q-h'fS-m'v-oQ-r(OQ-w(YQ.^(kQ.d(oQ.h;nQ.j;qQ.k;rQ.l;sQ.{)rQ/}*tQ1v,oQ1y,rQ2Z-[Q2j-xQ2|.bQ3R;vQ3S;wQ3T;xQ3U;yQ3V;zQ3W;{Q3X;|Q3Y;}Q3Z<OQ3[<PQ3]<QQ3^<RQ3_.iQ3b<WQ3c<aQ3h<SQ4Z0PQ4b0^Q5}<bQ6T2]Q6b2kQ6m2}Q6n<cQ6s<eQ6t<lQ7l4vQ8f5{Q8j6UQ8y<mQ8}<rQ9O<sQ:O8lQ:d9aQ:r9|Q:t:QQ;X:vQ;d;ZQ;p#PR=S=`R#XWR&{!cU!oQ'Q-OS&w!c,vY'[!m!s!t!u!vS'i!p!r['k!w4z5S5T5U5VS,s&x'PS-_']'^U-a'_'`'aY-f'b7p7q7r7|Q2Q,|S2`-`-bU2c-c9e9fS2d-d-eS4{0z5QS6Y2b2eS6]2f:gQ6^2gS8o6[6_Q8r6`R:T8qR(m#tR(p#uQ!dQT,}'Q-OQ#l]R'Z;oT#hZ%ZS#gZ%ZU%y|},[U(V#d#f#iS-u(W(XQ-|(]Q0m+iQ2i-vU2l-z-{-}S6c2m2nR8s6d`#ZW#T#W%v'v(P+f-st#eZ|}#d#f#i%Z(W(X(]+i-v-z-{-}2m2n6dQ1d,[Q1w,pQ5y1oQ8e5zT<z&y+gT#^W%vS#]W%vS'w#T(PS'|#W+fS,u&y+gT-n'v-sT'O!c%wQ$hfR)l$mT)a$h)bR3f.pT*Q$u*SR*Y$xQ0S*{Q2p.TQ5X0|Q6h2tQ8P5[Q8v6gQ9m8OQ:V8uQ:m9oQ:z:XQ;U:nR;]:{lpOXr!X#a%]&d&f&g&i,^,c1g1jQ&^!TR,R&ZV%z|},[R0v+rR,Q&XQ%szR+d%tR+Y%nT&b!U&eT&c!U&eT1i,c1j",nodeNames:"⚠ ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:362,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,198,202,205,206,208,211,214,225,227,233,235,237,239,242,248,254,256,258,260,262,264,265,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,102,103,112,113,130,133,135,136,137,138,140,141,161,162,164,"Expression",-23,24,26,30,34,36,38,165,167,169,170,172,173,174,176,177,178,180,181,182,192,194,196,197,"Type",-3,84,95,101,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",142,"JSXStartTag",154,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",143,"JSXSelfCloseEndTag JSXEndTag",159,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,268],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$c&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$c&j'y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$c&j'vpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'vpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$c&j'vp'y!b'l(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'w#S$c&j'm(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$c&j'vp'y!b'm(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$c&j!l$Ip'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#p$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#p$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'u$(n$c&j'y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$c&j'y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$c&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$^#t$c&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$^#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$^#t$c&j'y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$^#t'y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$c&j(_!L^'vp'y!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$c&j'vp'y!b(T!LY's&;d$V#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$c&j'vp'y!b$V#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$c&j'vp'y!b#h$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$c&j#z$Id'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(h%<v$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$c&j#t$Id'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'x$)`$c&j'vpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$c&j'vpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$c&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$^#t$c&j'vpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'vpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$^#t'vpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$c&j'vp'y!b't#)d#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$c&j'vp'y!b#f$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$c&j'vp'y!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$c&j'vp'y!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$c&j'vp'y!b#g$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$c&j'vp'y!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$c&j'y!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$c&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$c&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$c&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$c&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$c&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$c&j'y!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'y!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'y!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'y!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$c&j'y!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$c&j'vp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$c&j'vp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'vp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'vp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'vpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$c&j'vpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$c&j'vp'y!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'vp'y!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'vp'y!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'vp'y!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$c&j'vp'y!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$c&j'vp'y!b'n(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$c&j'vp'y!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$c&j'y!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$c&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'y!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$c&j'vpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'vpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'vp'y!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$c&j#z$Id'vp'y!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$S#t$c&j'vp'y!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$c&j#x%<f'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'|!*v!e'.r'vp'y!b$T)d(lSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$e&j'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#j$Id'vp'y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#z$Id'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#k$Id'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#W%?x$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#c$Ih$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#k$Id$`#|$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#k$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#j$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#j$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(`$Ip$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$c&j#u$Id'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$c&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$c&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$c&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$c&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$c&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$c&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#r$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$c&j'vp'y!b(Q&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$c&j'vp'y!b(T!LY's&;d$X#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$c&j'vp'y!b$X#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(g%<v$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$c&j'vp'y!b'l(;d(T!LY's&;d$V#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$c&j'vp'y!b'm(;d(T!LY's&;d$V#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(S~~",141,325),new LocalTokenGroup("j~RQYZXz{^~^O'p~~aP!P!Qd~iO'q~~",25,307)],topRules:{Script:[0,5],SingleExpression:[1,266],SingleClassItem:[2,267]},dialects:{jsx:13213,ts:13215},dynamicPrecedences:{76:1,78:1,162:1,190:1},specialized:[{term:311,get:o=>spec_identifier[o]||-1},{term:327,get:o=>spec_word[o]||-1},{term:67,get:o=>spec_LessThan[o]||-1}],tokenPrec:13238});function toSet(o){let e=Object.keys(o).join(""),a=/\w/.test(e);return a&&(e=e.replace(/\w/g,"")),`[${a?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(o){let e=Object.create(null),a=Object.create(null);for(let{label:u}of o){e[u[0]]=!0;for(let f=1;f<u.length;f++)a[u[f]]=!0}let l=toSet(e)+toSet(a)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function completeFromList(o){let e=o.map(u=>typeof u=="string"?{label:u}:u),[a,l]=e.every(u=>/^\w+$/.test(u.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return u=>{let f=u.matchBefore(l);return f||u.explicit?{from:f?f.from:u.pos,options:e,validFor:a}:null}}function ifNotIn(o,e){return a=>{for(let l=syntaxTree(a.state).resolveInner(a.pos,-1);l;l=l.parent){if(o.indexOf(l.name)>-1)return null;if(l.type.isTop)break}return e(a)}}const pickedCompletion=Annotation.define(),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,a,l,u){this.field=e,this.line=a,this.from=l,this.to=u}}class FieldRange{constructor(e,a,l){this.field=e,this.from=a,this.to=l}map(e){let a=e.mapPos(this.from,-1,MapMode.TrackDel),l=e.mapPos(this.to,1,MapMode.TrackDel);return a==null||l==null?null:new FieldRange(this.field,a,l)}}class Snippet{constructor(e,a){this.lines=e,this.fieldPositions=a}instantiate(e,a){let l=[],u=[a],f=e.doc.lineAt(a),d=/^\s*/.exec(f.text)[0];for(let g of this.lines){if(l.length){let b=d,O=/^\t*/.exec(g)[0].length;for(let A=0;A<O;A++)b+=e.facet(indentUnit);u.push(a+b.length-O),g=b+g.slice(O)}l.push(g),a+=g.length+1}let p=this.fieldPositions.map(g=>new FieldRange(g.field,u[g.line]+g.from,u[g.line]+g.to));return{text:l,ranges:p}}static parse(e){let a=[],l=[],u=[],f;for(let d of e.split(/\r\n?|\n/)){for(;f=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(d);){let p=f[1]?+f[1]:null,g=f[2]||f[3]||"",b=-1;for(let O=0;O<a.length;O++)(p!=null?a[O].seq==p:g&&a[O].name==g)&&(b=O);if(b<0){let O=0;for(;O<a.length&&(p==null||a[O].seq!=null&&a[O].seq<p);)O++;a.splice(O,0,{seq:p,name:g}),b=O;for(let A of u)A.field>=b&&A.field++}u.push(new FieldPos(b,l.length,f.index,f.index+g.length)),d=d.slice(0,f.index)+g+d.slice(f.index+f[0].length)}for(let p;p=/\\([{}])/.exec(d);){d=d.slice(0,p.index)+p[1]+d.slice(p.index+p[0].length);for(let g of u)g.line==l.length&&g.from>p.index&&(g.from--,g.to--)}l.push(d)}return new Snippet(l,u)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let o=document.createElement("span");return o.className="cm-snippetFieldPosition",o}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,a){this.ranges=e,this.active=a,this.deco=Decoration.set(e.map(l=>(l.from==l.to?fieldMarker:fieldRange).range(l.from,l.to)))}map(e){let a=[];for(let l of this.ranges){let u=l.map(e);if(!u)return null;a.push(u)}return new ActiveSnippet(a,this.active)}selectionInsideField(e){return e.ranges.every(a=>this.ranges.some(l=>l.field==this.active&&l.from<=a.from&&l.to>=a.to))}}const setActive=StateEffect.define({map(o,e){return o&&o.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(o,e){for(let a of e.effects){if(a.is(setActive))return a.value;if(a.is(moveToField)&&o)return new ActiveSnippet(o.ranges,a.value)}return o&&e.docChanged&&(o=o.map(e.changes)),o&&e.selection&&!o.selectionInsideField(e.selection)&&(o=null),o},provide:o=>EditorView.decorations.from(o,e=>e?e.deco:Decoration.none)});function fieldSelection(o,e){return EditorSelection.create(o.filter(a=>a.field==e).map(a=>EditorSelection.range(a.from,a.to)))}function snippet(o){let e=Snippet.parse(o);return(a,l,u,f)=>{let{text:d,ranges:p}=e.instantiate(a.state,u),g={changes:{from:u,to:f,insert:Text.of(d)},scrollIntoView:!0,annotations:l?pickedCompletion.of(l):void 0};if(p.length&&(g.selection=fieldSelection(p,0)),p.length>1){let b=new ActiveSnippet(p,0),O=g.effects=[setActive.of(b)];a.state.field(snippetState,!1)===void 0&&O.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}a.dispatch(a.state.update(g))}}function moveField(o){return({state:e,dispatch:a})=>{let l=e.field(snippetState,!1);if(!l||o<0&&l.active==0)return!1;let u=l.active+o,f=o>0&&!l.ranges.some(d=>d.field==u+o);return a(e.update({selection:fieldSelection(l.ranges,u),effects:setActive.of(f?null:new ActiveSnippet(l.ranges,u)),scrollIntoView:!0})),!0}}const clearSnippet=({state:o,dispatch:e})=>o.field(snippetState,!1)?(e(o.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(o){return o.length?o[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],o=>o.facet(snippetKeymap)));function snippetCompletion(o,e){return Object.assign(Object.assign({},e),{apply:snippet(o)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(o,e){let a=e.state.field(snippetState,!1),l;if(!a||(l=e.posAtCoords({x:o.clientX,y:o.clientY}))==null)return!1;let u=a.ranges.find(f=>f.from<=l&&f.to>=l);return!u||u.field==a.active?!1:(e.dispatch({selection:fieldSelection(a.ranges,u.field),effects:setActive.of(a.ranges.some(f=>f.field>u.field)?new ActiveSnippet(a.ranges,u.field):null),scrollIntoView:!0}),!0)}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const DefaultBufferLength=1024;let nextPropID=0;class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),a=>{let l=e(a);return l===void 0?null:[this,l]}}}NodeProp.closedBy=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.group=new NodeProp({deserialize:o=>o.split(" ")}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(e,a,l,u=0){this.name=e,this.props=a,this.id=l,this.flags=u}static define(e){let a=e.props&&e.props.length?Object.create(null):noProps,l=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),u=new NodeType(e.name||"",a,e.id,l);if(e.props){for(let f of e.props)if(Array.isArray(f)||(f=f(u)),f){if(f[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[f[0].id]=f[1]}}return u}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let a=this.prop(NodeProp.group);return a?a.indexOf(e)>-1:!1}return this.id==e}static match(e){let a=Object.create(null);for(let l in e)for(let u of l.split(" "))a[u]=e[l];return l=>{for(let u=l.prop(NodeProp.group),f=-1;f<(u?u.length:0);f++){let d=a[f<0?l.name:u[f]];if(d)return d}}}}NodeType.none=new NodeType("",Object.create(null),0,8);const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(o){o[o.ExcludeBuffers=1]="ExcludeBuffers",o[o.IncludeAnonymous=2]="IncludeAnonymous",o[o.IgnoreMounts=4]="IgnoreMounts",o[o.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,a,l,u,f){if(this.type=e,this.children=a,this.positions=l,this.length=u,this.props=null,f&&f.length){this.props=Object.create(null);for(let[d,p]of f)this.props[typeof d=="number"?d:d.id]=p}}toString(){let e=this.prop(NodeProp.mounted);if(e&&!e.overlay)return e.tree.toString();let a="";for(let l of this.children){let u=l.toString();u&&(a&&(a+=","),a+=u)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,a=0,l=0){let u=CachedNode.get(this)||this.topNode,f=new TreeCursor(u);return f.moveTo(e,a),CachedNode.set(this,f._tree),f}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,a=0){let l=resolveNode(CachedNode.get(this)||this.topNode,e,a,!1);return CachedNode.set(this,l),l}resolveInner(e,a=0){let l=resolveNode(CachedInnerNode.get(this)||this.topNode,e,a,!0);return CachedInnerNode.set(this,l),l}iterate(e){let{enter:a,leave:l,from:u=0,to:f=this.length}=e;for(let d=this.cursor((e.mode||0)|IterMode.IncludeAnonymous);;){let p=!1;if(d.from<=f&&d.to>=u&&(d.type.isAnonymous||a(d)!==!1)){if(d.firstChild())continue;p=!0}for(;p&&l&&!d.type.isAnonymous&&l(d),!d.nextSibling();){if(!d.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let a in this.props)e.push([+a,this.props[a]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(a,l,u)=>new Tree(this.type,a,l,u,this.propValues),e.makeTree||((a,l,u)=>new Tree(NodeType.none,a,l,u)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,a){this.buffer=e,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,a,l){this.buffer=e,this.length=a,this.set=l}get type(){return NodeType.none}toString(){let e=[];for(let a=0;a<this.buffer.length;)e.push(this.childString(a)),a=this.buffer[a+3];return e.join(",")}childString(e){let a=this.buffer[e],l=this.buffer[e+3],u=this.set.types[a],f=u.name;if(/\W/.test(f)&&!u.isError&&(f=JSON.stringify(f)),e+=4,l==e)return f;let d=[];for(;e<l;)d.push(this.childString(e)),e=this.buffer[e+3];return f+"("+d.join(",")+")"}findChild(e,a,l,u,f){let{buffer:d}=this,p=-1;for(let g=e;g!=a&&!(checkSide(f,u,d[g+1],d[g+2])&&(p=g,l>0));g=d[g+3]);return p}slice(e,a,l){let u=this.buffer,f=new Uint16Array(a-e),d=0;for(let p=e,g=0;p<a;){f[g++]=u[p++],f[g++]=u[p++]-l;let b=f[g++]=u[p++]-l;f[g++]=u[p++]-e,d=Math.max(d,b)}return new TreeBuffer(f,d,this.set)}}function checkSide(o,e,a,l){switch(o){case-2:return a<e;case-1:return l>=e&&a<e;case 0:return a<e&&l>e;case 1:return a<=e&&l>e;case 2:return l>e;case 4:return!0}}function enterUnfinishedNodesBefore(o,e){let a=o.childBefore(e);for(;a;){let l=a.lastChild;if(!l||l.to!=a.to)break;l.type.isError&&l.from==l.to?(o=a,a=l.prevSibling):a=l}return o}function resolveNode(o,e,a,l){for(var u;o.from==o.to||(a<1?o.from>=e:o.from>e)||(a>-1?o.to<=e:o.to<e);){let d=!l&&o instanceof TreeNode&&o.index<0?null:o.parent;if(!d)return o;o=d}let f=l?0:IterMode.IgnoreOverlays;if(l)for(let d=o,p=d.parent;p;d=p,p=d.parent)d instanceof TreeNode&&d.index<0&&((u=p.enter(e,a,f))===null||u===void 0?void 0:u.from)!=d.from&&(o=p);for(;;){let d=o.enter(e,a,f);if(!d)return o;o=d}}class TreeNode{constructor(e,a,l,u){this._tree=e,this.from=a,this.index=l,this._parent=u}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,a,l,u,f=0){for(let d=this;;){for(let{children:p,positions:g}=d._tree,b=a>0?p.length:-1;e!=b;e+=a){let O=p[e],A=g[e]+d.from;if(checkSide(u,l,A,A+O.length)){if(O instanceof TreeBuffer){if(f&IterMode.ExcludeBuffers)continue;let k=O.findChild(0,O.buffer.length,a,l-A,u);if(k>-1)return new BufferNode(new BufferContext(d,O,e,A),null,k)}else if(f&IterMode.IncludeAnonymous||!O.type.isAnonymous||hasChild(O)){let k;if(!(f&IterMode.IgnoreMounts)&&O.props&&(k=O.prop(NodeProp.mounted))&&!k.overlay)return new TreeNode(k.tree,A,e,d);let M=new TreeNode(O,A,e,d);return f&IterMode.IncludeAnonymous||!M.type.isAnonymous?M:M.nextChild(a<0?O.children.length-1:0,a,l,u)}}}if(f&IterMode.IncludeAnonymous||!d.type.isAnonymous||(d.index>=0?e=d.index+a:e=a<0?-1:d._parent._tree.children.length,d=d._parent,!d))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,a,l=0){let u;if(!(l&IterMode.IgnoreOverlays)&&(u=this._tree.prop(NodeProp.mounted))&&u.overlay){let f=e-this.from;for(let{from:d,to:p}of u.overlay)if((a>0?d<=f:d<f)&&(a<0?p>=f:p>f))return new TreeNode(u.tree,u.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,a,l)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new TreeCursor(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,a=0){return resolveNode(this,e,a,!1)}resolveInner(e,a=0){return resolveNode(this,e,a,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}getChild(e,a=null,l=null){let u=getChildren(this,e,a,l);return u.length?u[0]:null}getChildren(e,a=null,l=null){return getChildren(this,e,a,l)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}function getChildren(o,e,a,l){let u=o.cursor(),f=[];if(!u.firstChild())return f;if(a!=null){for(;!u.type.is(a);)if(!u.nextSibling())return f}for(;;){if(l!=null&&u.type.is(l))return f;if(u.type.is(e)&&f.push(u.node),!u.nextSibling())return l==null?f:[]}}function matchNodeContext(o,e,a=e.length-1){for(let l=o.parent;a>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(e[a]&&e[a]!=l.name)return!1;a--}}return!0}class BufferContext{constructor(e,a,l,u){this.parent=e,this.buffer=a,this.index=l,this.start=u}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,a,l){this.context=e,this._parent=a,this.index=l,this.type=e.buffer.set.types[e.buffer.buffer[l]]}child(e,a,l){let{buffer:u}=this.context,f=u.findChild(this.index+4,u.buffer[this.index+3],e,a-this.context.start,l);return f<0?null:new BufferNode(this.context,this,f)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,a,l=0){if(l&IterMode.ExcludeBuffers)return null;let{buffer:u}=this.context,f=u.findChild(this.index+4,u.buffer[this.index+3],a>0?1:-1,e-this.context.start,a);return f<0?null:new BufferNode(this.context,this,f)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,a=e.buffer[this.index+3];return a<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(a,this.index,-1,0,4))}cursor(e=0){return new TreeCursor(this,e)}get tree(){return null}toTree(){let e=[],a=[],{buffer:l}=this.context,u=this.index+4,f=l.buffer[this.index+3];if(f>u){let d=l.buffer[this.index+1];e.push(l.slice(u,f,d)),a.push(0)}return new Tree(this.type,e,a,this.to-this.from)}resolve(e,a=0){return resolveNode(this,e,a,!1)}resolveInner(e,a=0){return resolveNode(this,e,a,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,a=null,l=null){let u=getChildren(this,e,a,l);return u.length?u[0]:null}getChildren(e,a=null,l=null){return getChildren(this,e,a,l)}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}class TreeCursor{get name(){return this.type.name}constructor(e,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let l=e._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,a){this.index=e;let{start:l,buffer:u}=this.buffer;return this.type=a||u.set.types[u.buffer[e]],this.from=l+u.buffer[e+1],this.to=l+u.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,a,l){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,a,l,this.mode));let{buffer:u}=this.buffer,f=u.findChild(this.index+4,u.buffer[this.index+3],e,a-this.buffer.start,l);return f<0?!1:(this.stack.push(this.index),this.yieldBuf(f))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,a,l=this.mode){return this.buffer?l&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,a):this.yield(this._tree.enter(e,a,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:a}=this.buffer,l=this.stack.length-1;if(e<0){let u=l<0?0:this.stack[l]+4;if(this.index!=u)return this.yieldBuf(a.findChild(u,this.index,-1,0,4))}else{let u=a.buffer[this.index+3];if(u<(l<0?a.buffer.length:a.buffer[this.stack[l]+3]))return this.yieldBuf(u)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let a,l,{buffer:u}=this;if(u){if(e>0){if(this.index<u.buffer.buffer.length)return!1}else for(let f=0;f<this.index;f++)if(u.buffer.buffer[f+3]<this.index)return!1;({index:a,parent:l}=u)}else({index:a,_parent:l}=this._tree);for(;l;{index:a,_parent:l}=l)if(a>-1)for(let f=a+e,d=e<0?-1:l._tree.children.length;f!=d;f+=e){let p=l._tree.children[f];if(this.mode&IterMode.IncludeAnonymous||p instanceof TreeBuffer||!p.type.isAnonymous||hasChild(p))return!1}return!0}move(e,a){if(a&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,a=0){for(;(this.from==this.to||(a<1?this.from>=e:this.from>e)||(a>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,a););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,a=null,l=0;if(e&&e.context==this.buffer)e:for(let u=this.index,f=this.stack.length;f>=0;){for(let d=e;d;d=d._parent)if(d.index==u){if(u==this.index)return d;a=d,l=f+1;break e}u=this.stack[--f]}for(let u=l;u<this.stack.length;u++)a=new BufferNode(this.buffer,a,this.stack[u]);return this.bufferNode=new BufferNode(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,a){for(let l=0;;){let u=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(u=!0)}for(;u&&a&&a(this),u=this.type.isAnonymous,!this.nextSibling();){if(!l)return;this.parent(),l--,u=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:a}=this.buffer,{types:l}=a.set;for(let u=e.length-1,f=this.stack.length-1;u>=0;f--){if(f<0)return matchNodeContext(this.node,e,u);let d=l[a.buffer[this.stack[f]]];if(!d.isAnonymous){if(e[u]&&e[u]!=d.name)return!1;u--}}return!0}}function hasChild(o){return o.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(o){var e;let{buffer:a,nodeSet:l,maxBufferLength:u=DefaultBufferLength,reused:f=[],minRepeatType:d=l.types.length}=o,p=Array.isArray(a)?new FlatBufferCursor(a,a.length):a,g=l.types,b=0,O=0;function A(re,z,oe,de,_e){let{id:Ce,start:be,end:xe,size:Oe}=p,ke=O;for(;Oe<0;)if(p.next(),Oe==-1){let Ne=f[Ce];oe.push(Ne),de.push(be-re);return}else if(Oe==-3){b=Ce;return}else if(Oe==-4){O=Ce;return}else throw new RangeError(`Unrecognized record size: ${Oe}`);let Ie=g[Ce],Fe,Be,Ge=be-re;if(xe-be<=u&&(Be=N(p.pos-z,_e))){let Ne=new Uint16Array(Be.size-Be.skip),Ve=p.pos-Be.size,Ze=Ne.length;for(;p.pos>Ve;)Ze=L(Be.start,Ne,Ze);Fe=new TreeBuffer(Ne,xe-Be.start,l),Ge=Be.start-re}else{let Ne=p.pos-Oe;p.next();let Ve=[],Ze=[],Je=Ce>=d?Ce:-1,$e=0,ht=xe;for(;p.pos>Ne;)Je>=0&&p.id==Je&&p.size>=0?(p.end<=ht-u&&(M(Ve,Ze,be,$e,p.end,ht,Je,ke),$e=Ve.length,ht=p.end),p.next()):A(be,Ne,Ve,Ze,Je);if(Je>=0&&$e>0&&$e<Ve.length&&M(Ve,Ze,be,$e,be,ht,Je,ke),Ve.reverse(),Ze.reverse(),Je>-1&&$e>0){let xt=k(Ie);Fe=balanceRange(Ie,Ve,Ze,0,Ve.length,0,xe-be,xt,xt)}else Fe=B(Ie,Ve,Ze,xe-be,ke-xe)}oe.push(Fe),de.push(Ge)}function k(re){return(z,oe,de)=>{let _e=0,Ce=z.length-1,be,xe;if(Ce>=0&&(be=z[Ce])instanceof Tree){if(!Ce&&be.type==re&&be.length==de)return be;(xe=be.prop(NodeProp.lookAhead))&&(_e=oe[Ce]+be.length+xe)}return B(re,z,oe,de,_e)}}function M(re,z,oe,de,_e,Ce,be,xe){let Oe=[],ke=[];for(;re.length>de;)Oe.push(re.pop()),ke.push(z.pop()+oe-_e);re.push(B(l.types[be],Oe,ke,Ce-_e,xe-Ce)),z.push(_e-oe)}function B(re,z,oe,de,_e=0,Ce){if(b){let be=[NodeProp.contextHash,b];Ce=Ce?[be].concat(Ce):[be]}if(_e>25){let be=[NodeProp.lookAhead,_e];Ce=Ce?[be].concat(Ce):[be]}return new Tree(re,z,oe,de,Ce)}function N(re,z){let oe=p.fork(),de=0,_e=0,Ce=0,be=oe.end-u,xe={size:0,start:0,skip:0};e:for(let Oe=oe.pos-re;oe.pos>Oe;){let ke=oe.size;if(oe.id==z&&ke>=0){xe.size=de,xe.start=_e,xe.skip=Ce,Ce+=4,de+=4,oe.next();continue}let Ie=oe.pos-ke;if(ke<0||Ie<Oe||oe.start<be)break;let Fe=oe.id>=d?4:0,Be=oe.start;for(oe.next();oe.pos>Ie;){if(oe.size<0)if(oe.size==-3)Fe+=4;else break e;else oe.id>=d&&(Fe+=4);oe.next()}_e=Be,de+=ke,Ce+=Fe}return(z<0||de==re)&&(xe.size=de,xe.start=_e,xe.skip=Ce),xe.size>4?xe:void 0}function L(re,z,oe){let{id:de,start:_e,end:Ce,size:be}=p;if(p.next(),be>=0&&de<d){let xe=oe;if(be>4){let Oe=p.pos-(be-4);for(;p.pos>Oe;)oe=L(re,z,oe)}z[--oe]=xe,z[--oe]=Ce-re,z[--oe]=_e-re,z[--oe]=de}else be==-3?b=de:be==-4&&(O=de);return oe}let V=[],se=[];for(;p.pos>0;)A(o.start||0,o.bufferStart||0,V,se,-1);let pe=(e=o.length)!==null&&e!==void 0?e:V.length?se[0]+V[0].length:0;return new Tree(g[o.topID],V.reverse(),se.reverse(),pe)}const nodeSizeCache=new WeakMap;function nodeSize(o,e){if(!o.isAnonymous||e instanceof TreeBuffer||e.type!=o)return 1;let a=nodeSizeCache.get(e);if(a==null){a=1;for(let l of e.children){if(l.type!=o||!(l instanceof Tree)){a=1;break}a+=nodeSize(o,l)}nodeSizeCache.set(e,a)}return a}function balanceRange(o,e,a,l,u,f,d,p,g){let b=0;for(let B=l;B<u;B++)b+=nodeSize(o,e[B]);let O=Math.ceil(b*1.5/8),A=[],k=[];function M(B,N,L,V,se){for(let pe=L;pe<V;){let re=pe,z=N[pe],oe=nodeSize(o,B[pe]);for(pe++;pe<V;pe++){let de=nodeSize(o,B[pe]);if(oe+de>=O)break;oe+=de}if(pe==re+1){if(oe>O){let de=B[re];M(de.children,de.positions,0,de.children.length,N[re]+se);continue}A.push(B[re])}else{let de=N[pe-1]+B[pe-1].length-z;A.push(balanceRange(o,B,N,re,pe,z,de,null,g))}k.push(z+se-f)}}return M(e,a,l,u,0),(p||g)(A,k,d)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,a,l){let u=this.map.get(e);u||this.map.set(e,u=new Map),u.set(a,l)}getBuffer(e,a){let l=this.map.get(e);return l&&l.get(a)}set(e,a){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,a):e instanceof TreeNode&&this.map.set(e.tree,a)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,a){e.buffer?this.setBuffer(e.buffer.buffer,e.index,a):this.map.set(e.tree,a)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}new NodeProp({perNode:!0});const snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache$3=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(o){return(e,a)=>{let l=e.node.getChild("VariableDefinition");return l&&a(l,o),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(o,e){o.matchContext(functionContext)||e(o,"variable")},TypeDefinition(o,e){e(o,"type")},__proto__:null};function getScope(o,e){let a=cache$3.get(e);if(a)return a;let l=[],u=!0;function f(d,p){let g=o.sliceString(d.from,d.to);l.push({label:g,type:p})}return e.cursor(IterMode.IncludeAnonymous).iterate(d=>{if(u)u=!1;else if(d.name){let p=gatherCompletions[d.name];if(p&&p(d,f)||ScopeNodes.has(d.name))return!1}else if(d.to-d.from>8192){for(let p of getScope(o,d.node))l.push(p);return!1}}),cache$3.set(e,l),l}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(o){let e=syntaxTree(o.state).resolveInner(o.pos,-1);if(dontComplete.indexOf(e.name)>-1)return null;let a=e.name=="VariableName"||e.to-e.from<20&&Identifier.test(o.state.sliceDoc(e.from,e.to));if(!a&&!o.explicit)return null;let l=[];for(let u=e;u;u=u.parent)ScopeNodes.has(u.name)&&(l=l.concat(getScope(o.state.doc,u)));return{options:l,from:a?e.from:o.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser$1.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:o=>{let e=o.textAfter,a=/^\s*\}/.test(e),l=/^\s*(case|default)\b/.test(e);return o.baseIndent+(a?0:l?1:2)*o.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:o=>o.baseIndent+o.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(o){let e=/^\s*<\//.test(o.textAfter);return o.lineIndent(o.node.from)+(e?0:o.unit)},JSXEscape(o){let e=/\s*\}/.test(o.textAfter);return o.lineIndent(o.node.from)+(e?0:o.unit)},"JSXOpenTag JSXSelfClosingTag"(o){return o.column(o.node.from)+o.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(o){return{from:o.from+2,to:o.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:o=>/^JSX/.test(o.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(o=>o.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(o=>o.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=o=>({label:o,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(o={}){let e=o.jsx?o.typescript?tsxLanguage:jsxLanguage:o.typescript?typescriptLanguage:javascriptLanguage,a=o.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(e,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(a))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),o.jsx?autoCloseTags:[]])}function findOpenTag(o){for(;;){if(o.name=="JSXOpenTag"||o.name=="JSXSelfClosingTag"||o.name=="JSXFragmentTag")return o;if(o.name=="JSXEscape"||!o.parent)return null;o=o.parent}}function elementName(o,e,a=o.length){for(let l=e?.firstChild;l;l=l.nextSibling)if(l.name=="JSXIdentifier"||l.name=="JSXBuiltin"||l.name=="JSXNamespacedName"||l.name=="JSXMemberExpression")return o.sliceString(l.from,Math.min(l.to,a));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((o,e,a,l,u)=>{if((android?o.composing:o.compositionStarted)||o.state.readOnly||e!=a||l!=">"&&l!="/"||!javascriptLanguage.isActiveAt(o.state,e,-1))return!1;let f=u(),{state:d}=f,p=d.changeByRange(g=>{var b;let{head:O}=g,A=syntaxTree(d).resolveInner(O-1,-1),k;if(A.name=="JSXStartTag"&&(A=A.parent),!(d.doc.sliceString(O-1,O)!=l||A.name=="JSXAttributeValue"&&A.to>O)){if(l==">"&&A.name=="JSXFragmentTag")return{range:g,changes:{from:O,insert:"</>"}};if(l=="/"&&A.name=="JSXStartCloseTag"){let M=A.parent,B=M.parent;if(B&&M.from==O-2&&((k=elementName(d.doc,B.firstChild,O))||((b=B.firstChild)===null||b===void 0?void 0:b.name)=="JSXFragmentTag")){let N=`${k}>`;return{range:EditorSelection.cursor(O+N.length,-1),changes:{from:O,insert:N}}}}else if(l==">"){let M=findOpenTag(A);if(M&&!/^\/?>|^<\//.test(d.doc.sliceString(O,O+2))&&(k=elementName(d.doc,M,O)))return{range:g,changes:{from:O,insert:`</${k}>`}}}}return{range:g}});return p.changes.empty?!1:(o.dispatch([f,d.update(p,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),docs=[{comment:`/**
 * Displays a slider widget to allow the user manipulate a value
 *
 * @name slider
 * @param {number} value Initial value
 * @param {number} min Minimum value - optional, defaults to 0
 * @param {number} max Maximum value - optional, defaults to 1
 * @param {number} step Step size - optional
 */`,meta:{filename:"slider.mjs",lineno:116,columnno:0,path:"/Users/felix/projects/strudel/packages/codemirror",code:{}},description:"<p>Displays a slider widget to allow the user manipulate a value</p>",name:"slider",params:[{type:{names:["number"]},description:"<p>Initial value</p>",name:"value"},{type:{names:["number"]},description:"<p>Minimum value - optional, defaults to 0</p>",name:"min"},{type:{names:["number"]},description:"<p>Maximum value - optional, defaults to 1</p>",name:"max"},{type:{names:["number"]},description:"<p>Step size - optional</p>",name:"step"}],longname:"slider",kind:"member",scope:"global"},{comment:`/**
 * Select a sound / sample by name. When using mininotation, you can also optionally supply 'n' and 'gain' parameters
 * separated by ':'.
 *
 * @name s
 * @param {string | Pattern} sound The sound / pattern of sounds to pick
 * @synonyms sound
 * @example
 * s("bd hh")
 * @example
 * s("bd:0 bd:1 bd:0:0.3 bd:1:1.4")
 *
 */`,meta:{filename:"controls.mjs",lineno:61,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Select a sound / sample by name. When using mininotation, you can also optionally supply 'n' and 'gain' parameters
separated by ':'.</p>`,name:"s",params:[{type:{names:["string","Pattern"]},description:"<p>The sound / pattern of sounds to pick</p>",name:"sound"}],synonyms_text:"sound",synonyms:["sound"],examples:['s("bd hh")','s("bd:0 bd:1 bd:0:0.3 bd:1:1.4")'],longname:"s",kind:"member",scope:"global"},{comment:`/**
 * Define a custom webaudio node to use as a sound source.
 *
 * @name source
 * @param {function} getSource
 * @synonyms src
 *
 */`,meta:{filename:"controls.mjs",lineno:76,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Define a custom webaudio node to use as a sound source.</p>",name:"source",params:[{type:{names:["function"]},name:"getSource"}],synonyms_text:"src",synonyms:["src"],longname:"source",kind:"member",scope:"global"},{comment:`/**
 * Selects the given index from the sample map.
 * Numbers too high will wrap around.
 * \`n\` can also be used to play midi numbers, but it is recommended to use \`note\` instead.
 *
 * @name n
 * @param {number | Pattern} value sample index starting from 0
 * @example
 * s("bd sd [~ bd] sd,hh*6").n("<0 1>")
 */`,meta:{filename:"controls.mjs",lineno:85,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Selects the given index from the sample map.
Numbers too high will wrap around.
<code>n</code> can also be used to play midi numbers, but it is recommended to use <code>note</code> instead.</p>`,name:"n",params:[{type:{names:["number","Pattern"]},description:"<p>sample index starting from 0</p>",name:"value"}],examples:['s("bd sd [~ bd] sd,hh*6").n("<0 1>")'],longname:"n",kind:"member",scope:"global"},{comment:`/**
 * Plays the given note name or midi number. A note name consists of
 *
 * - a letter (a-g or A-G)
 * - optional accidentals (b or #)
 * - optional octave number (0-9). Defaults to 3
 *
 * Examples of valid note names: \`c\`, \`bb\`, \`Bb\`, \`f#\`, \`c3\`, \`A4\`, \`Eb2\`, \`c#5\`
 *
 * You can also use midi numbers instead of note names, where 69 is mapped to A4 440Hz in 12EDO.
 *
 * @name note
 * @example
 * note("c a f e")
 * @example
 * note("c4 a4 f4 e4")
 * @example
 * note("60 69 65 64")
 */`,meta:{filename:"controls.mjs",lineno:97,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Plays the given note name or midi number. A note name consists of</p>
<ul>
<li>a letter (a-g or A-G)</li>
<li>optional accidentals (b or #)</li>
<li>optional octave number (0-9). Defaults to 3</li>
</ul>
<p>Examples of valid note names: <code>c</code>, <code>bb</code>, <code>Bb</code>, <code>f#</code>, <code>c3</code>, <code>A4</code>, <code>Eb2</code>, <code>c#5</code></p>
<p>You can also use midi numbers instead of note names, where 69 is mapped to A4 440Hz in 12EDO.</p>`,name:"note",examples:['note("c a f e")','note("c4 a4 f4 e4")','note("60 69 65 64")'],longname:"note",kind:"member",scope:"global"},{comment:`/**
 * A pattern of numbers that speed up (or slow down) samples while they play. Currently only supported by osc / superdirt.
 *
 * @name accelerate
 * @param {number | Pattern} amount acceleration.
 * @superdirtOnly
 * @example
 * s("sax").accelerate("<0 1 2 4 8 16>").slow(2).osc()
 *
 */`,meta:{filename:"controls.mjs",lineno:118,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>A pattern of numbers that speed up (or slow down) samples while they play. Currently only supported by osc / superdirt.</p>",name:"accelerate",params:[{type:{names:["number","Pattern"]},description:"<p>acceleration.</p>",name:"amount"}],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],examples:['s("sax").accelerate("<0 1 2 4 8 16>").slow(2).osc()'],longname:"accelerate",kind:"member",scope:"global"},{comment:`/**
 *
 * Sets the velocity from 0 to 1. Is multiplied together with gain.
 * @name velocity
 * @example
 * s("hh*8")
 * .gain(".4!2 1 .4!2 1 .4 1")
 * .velocity(".4 1")
 */`,meta:{filename:"controls.mjs",lineno:129,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the velocity from 0 to 1. Is multiplied together with gain.</p>",name:"velocity",examples:[`s("hh*8")
.gain(".4!2 1 .4!2 1 .4 1")
.velocity(".4 1")`],longname:"velocity",kind:"member",scope:"global"},{comment:`/**
 * Controls the gain by an exponential amount.
 *
 * @name gain
 * @param {number | Pattern} amount gain.
 * @example
 * s("hh*8").gain(".4!2 1 .4!2 1 .4 1").fast(2)
 *
 */`,meta:{filename:"controls.mjs",lineno:139,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Controls the gain by an exponential amount.</p>",name:"gain",params:[{type:{names:["number","Pattern"]},description:"<p>gain.</p>",name:"amount"}],examples:['s("hh*8").gain(".4!2 1 .4!2 1 .4 1").fast(2)'],longname:"gain",kind:"member",scope:"global"},{comment:`/**
 * Gain applied after all effects have been processed.
 *
 * @name postgain
 * @example
 * s("bd sd [~ bd] sd,hh*8")
 * .compressor("-20:20:10:.002:.02").postgain(1.5)
 *
 */`,meta:{filename:"controls.mjs",lineno:149,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Gain applied after all effects have been processed.</p>",name:"postgain",examples:[`s("bd sd [~ bd] sd,hh*8")
.compressor("-20:20:10:.002:.02").postgain(1.5)`],longname:"postgain",kind:"member",scope:"global"},{comment:`/**
 * Like \`gain\`, but linear.
 *
 * @name amp
 * @param {number | Pattern} amount gain.
 * @superdirtOnly
 * @example
 * s("bd*8").amp(".1*2 .5 .1*2 .5 .1 .5").osc()
 *
 */`,meta:{filename:"controls.mjs",lineno:159,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Like <code>gain</code>, but linear.</p>",name:"amp",params:[{type:{names:["number","Pattern"]},description:"<p>gain.</p>",name:"amount"}],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],examples:['s("bd*8").amp(".1*2 .5 .1*2 .5 .1 .5").osc()'],longname:"amp",kind:"member",scope:"global"},{comment:`/**
 * Amplitude envelope attack time: Specifies how long it takes for the sound to reach its peak value, relative to the onset.
 *
 * @name attack
 * @param {number | Pattern} attack time in seconds.
 * @synonyms att
 * @example
 * note("c3 e3 f3 g3").attack("<0 .1 .5>")
 *
 */`,meta:{filename:"controls.mjs",lineno:170,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Amplitude envelope attack time: Specifies how long it takes for the sound to reach its peak value, relative to the onset.</p>",name:"attack",params:[{type:{names:["number","Pattern"]},description:"<p>time in seconds.</p>",name:"attack"}],synonyms_text:"att",synonyms:["att"],examples:['note("c3 e3 f3 g3").attack("<0 .1 .5>")'],longname:"attack",kind:"member",scope:"global"},{comment:`/**
 * Sets the Frequency Modulation Harmonicity Ratio.
 * Controls the timbre of the sound.
 * Whole numbers and simple ratios sound more natural,
 * while decimal numbers and complex ratios sound metallic.
 *
 * @name fmh
 * @param {number | Pattern} harmonicity
 * @example
 * note("c e g b g e")
 * .fm(4)
 * .fmh("<1 2 1.5 1.61>")
 * .scope()
 *
 */`,meta:{filename:"controls.mjs",lineno:182,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the Frequency Modulation Harmonicity Ratio.
Controls the timbre of the sound.
Whole numbers and simple ratios sound more natural,
while decimal numbers and complex ratios sound metallic.</p>`,name:"fmh",params:[{type:{names:["number","Pattern"]},name:"harmonicity"}],examples:[`note("c e g b g e")
.fm(4)
.fmh("<1 2 1.5 1.61>")
.scope()`],longname:"fmh",kind:"member",scope:"global"},{comment:`/**
 * Sets the Frequency Modulation of the synth.
 * Controls the modulation index, which defines the brightness of the sound.
 *
 * @name fm
 * @param {number | Pattern} brightness modulation index
 * @synonyms fmi
 * @example
 * note("c e g b g e")
 * .fm("<0 1 2 8 32>")
 * .scope()
 *
 */`,meta:{filename:"controls.mjs",lineno:198,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the Frequency Modulation of the synth.
Controls the modulation index, which defines the brightness of the sound.</p>`,name:"fm",params:[{type:{names:["number","Pattern"]},description:"<p>modulation index</p>",name:"brightness"}],synonyms_text:"fmi",synonyms:["fmi"],examples:[`note("c e g b g e")
.fm("<0 1 2 8 32>")
.scope()`],longname:"fm",kind:"member",scope:"global"},{comment:`/**
 * Ramp type of fm envelope. Exp might be a bit broken..
 *
 * @name fmenv
 * @param {number | Pattern} type lin | exp
 * @example
 * note("c e g b g e")
 * .fm(4)
 * .fmdecay(.2)
 * .fmsustain(0)
 * .fmenv("<exp lin>")
 * .scope()
 *
 */`,meta:{filename:"controls.mjs",lineno:213,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Ramp type of fm envelope. Exp might be a bit broken..</p>",name:"fmenv",params:[{type:{names:["number","Pattern"]},description:"<p>lin | exp</p>",name:"type"}],examples:[`note("c e g b g e")
.fm(4)
.fmdecay(.2)
.fmsustain(0)
.fmenv("<exp lin>")
.scope()`],longname:"fmenv",kind:"member",scope:"global"},{comment:`/**
 * Attack time for the FM envelope: time it takes to reach maximum modulation
 *
 * @name fmattack
 * @param {number | Pattern} time attack time
 * @example
 * note("c e g b g e")
 * .fm(4)
 * .fmattack("<0 .05 .1 .2>")
 * .scope()
 *
 */`,meta:{filename:"controls.mjs",lineno:228,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Attack time for the FM envelope: time it takes to reach maximum modulation</p>",name:"fmattack",params:[{type:{names:["number","Pattern"]},description:"<p>attack time</p>",name:"time"}],examples:[`note("c e g b g e")
.fm(4)
.fmattack("<0 .05 .1 .2>")
.scope()`],longname:"fmattack",kind:"member",scope:"global"},{comment:`/**
 * Decay time for the FM envelope: seconds until the sustain level is reached after the attack phase.
 *
 * @name fmdecay
 * @param {number | Pattern} time decay time
 * @example
 * note("c e g b g e")
 * .fm(4)
 * .fmdecay("<.01 .05 .1 .2>")
 * .fmsustain(.4)
 * .scope()
 *
 */`,meta:{filename:"controls.mjs",lineno:241,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Decay time for the FM envelope: seconds until the sustain level is reached after the attack phase.</p>",name:"fmdecay",params:[{type:{names:["number","Pattern"]},description:"<p>decay time</p>",name:"time"}],examples:[`note("c e g b g e")
.fm(4)
.fmdecay("<.01 .05 .1 .2>")
.fmsustain(.4)
.scope()`],longname:"fmdecay",kind:"member",scope:"global"},{comment:`/**
 * Sustain level for the FM envelope: how much modulation is applied after the decay phase
 *
 * @name fmsustain
 * @param {number | Pattern} level sustain level
 * @example
 * note("c e g b g e")
 * .fm(4)
 * .fmdecay(.1)
 * .fmsustain("<1 .75 .5 0>")
 * .scope()
 *
 */`,meta:{filename:"controls.mjs",lineno:255,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sustain level for the FM envelope: how much modulation is applied after the decay phase</p>",name:"fmsustain",params:[{type:{names:["number","Pattern"]},description:"<p>sustain level</p>",name:"level"}],examples:[`note("c e g b g e")
.fm(4)
.fmdecay(.1)
.fmsustain("<1 .75 .5 0>")
.scope()`],longname:"fmsustain",kind:"member",scope:"global"},{comment:`/**
 * Select the sound bank to use. To be used together with \`s\`. The bank name (+ "_") will be prepended to the value of \`s\`.
 *
 * @name bank
 * @param {string | Pattern} bank the name of the bank
 * @example
 * s("bd sd [~ bd] sd").bank('RolandTR909') // = s("RolandTR909_bd RolandTR909_sd")
 *
 */`,meta:{filename:"controls.mjs",lineno:273,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Select the sound bank to use. To be used together with <code>s</code>. The bank name (+ &quot;_&quot;) will be prepended to the value of <code>s</code>.</p>",name:"bank",params:[{type:{names:["string","Pattern"]},description:"<p>the name of the bank</p>",name:"bank"}],examples:[`s("bd sd [~ bd] sd").bank('RolandTR909') // = s("RolandTR909_bd RolandTR909_sd")`],longname:"bank",kind:"member",scope:"global"},{comment:`/**
 * Amplitude envelope decay time: the time it takes after the attack time to reach the sustain level.
 * Note that the decay is only audible if the sustain value is lower than 1.
 *
 * @name decay
 * @param {number | Pattern} time decay time in seconds
 * @example
 * note("c3 e3 f3 g3").decay("<.1 .2 .3 .4>").sustain(0)
 *
 */`,meta:{filename:"controls.mjs",lineno:289,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Amplitude envelope decay time: the time it takes after the attack time to reach the sustain level.
Note that the decay is only audible if the sustain value is lower than 1.</p>`,name:"decay",params:[{type:{names:["number","Pattern"]},description:"<p>decay time in seconds</p>",name:"time"}],examples:['note("c3 e3 f3 g3").decay("<.1 .2 .3 .4>").sustain(0)'],longname:"decay",kind:"member",scope:"global"},{comment:`/**
 * Amplitude envelope sustain level: The level which is reached after attack / decay, being sustained until the offset.
 *
 * @name sustain
 * @param {number | Pattern} gain sustain level between 0 and 1
 * @synonyms sus
 * @example
 * note("c3 e3 f3 g3").decay(.2).sustain("<0 .1 .4 .6 1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:300,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Amplitude envelope sustain level: The level which is reached after attack / decay, being sustained until the offset.</p>",name:"sustain",params:[{type:{names:["number","Pattern"]},description:"<p>sustain level between 0 and 1</p>",name:"gain"}],synonyms_text:"sus",synonyms:["sus"],examples:['note("c3 e3 f3 g3").decay(.2).sustain("<0 .1 .4 .6 1>")'],longname:"sustain",kind:"member",scope:"global"},{comment:`/**
 * Amplitude envelope release time: The time it takes after the offset to go from sustain level to zero.
 *
 * @name release
 * @param {number | Pattern} time release time in seconds
 * @synonyms rel
 * @example
 * note("c3 e3 g3 c4").release("<0 .1 .4 .6 1>/2")
 *
 */`,meta:{filename:"controls.mjs",lineno:311,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Amplitude envelope release time: The time it takes after the offset to go from sustain level to zero.</p>",name:"release",params:[{type:{names:["number","Pattern"]},description:"<p>release time in seconds</p>",name:"time"}],synonyms_text:"rel",synonyms:["rel"],examples:['note("c3 e3 g3 c4").release("<0 .1 .4 .6 1>/2")'],longname:"release",kind:"member",scope:"global"},{comment:`/**
 * Sets the center frequency of the **b**and-**p**ass **f**ilter. When using mininotation, you
 * can also optionally supply the 'bpq' parameter separated by ':'.
 *
 * @name bpf
 * @param {number | Pattern} frequency center frequency
 * @synonyms bandf, bp
 * @example
 * s("bd sd [~ bd] sd,hh*6").bpf("<1000 2000 4000 8000>")
 *
 */`,meta:{filename:"controls.mjs",lineno:324,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the center frequency of the <strong>b</strong>and-<strong>p</strong>ass <strong>f</strong>ilter. When using mininotation, you
can also optionally supply the 'bpq' parameter separated by ':'.</p>`,name:"bpf",params:[{type:{names:["number","Pattern"]},description:"<p>center frequency</p>",name:"frequency"}],synonyms_text:"bandf, bp",synonyms:["bandf","bp"],examples:['s("bd sd [~ bd] sd,hh*6").bpf("<1000 2000 4000 8000>")'],longname:"bpf",kind:"member",scope:"global"},{comment:`/**
 * Sets the **b**and-**p**ass **q**-factor (resonance).
 *
 * @name bpq
 * @param {number | Pattern} q q factor
 * @synonyms bandq
 * @example
 * s("bd sd [~ bd] sd").bpf(500).bpq("<0 1 2 3>")
 *
 */`,meta:{filename:"controls.mjs",lineno:337,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the <strong>b</strong>and-<strong>p</strong>ass <strong>q</strong>-factor (resonance).</p>",name:"bpq",params:[{type:{names:["number","Pattern"]},description:"<p>q factor</p>",name:"q"}],synonyms_text:"bandq",synonyms:["bandq"],examples:['s("bd sd [~ bd] sd").bpf(500).bpq("<0 1 2 3>")'],longname:"bpq",kind:"member",scope:"global"},{comment:`/**
 * a pattern of numbers from 0 to 1. Skips the beginning of each sample, e.g. \`0.25\` to cut off the first quarter from each sample.
 *
 * @memberof Pattern
 * @name begin
 * @param {number | Pattern} amount between 0 and 1, where 1 is the length of the sample
 * @example
 * samples({ rave: 'rave/AREUREADY.wav' }, 'github:tidalcycles/dirt-samples')
 * s("rave").begin("<0 .25 .5 .75>").fast(2)
 *
 */`,meta:{filename:"controls.mjs",lineno:350,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>a pattern of numbers from 0 to 1. Skips the beginning of each sample, e.g. <code>0.25</code> to cut off the first quarter from each sample.</p>",memberof:"Pattern",name:"begin",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1, where 1 is the length of the sample</p>",name:"amount"}],examples:[`samples({ rave: 'rave/AREUREADY.wav' }, 'github:tidalcycles/dirt-samples')
s("rave").begin("<0 .25 .5 .75>").fast(2)`],scope:"static",longname:"Pattern.begin",kind:"member"},{comment:`/**
 * The same as .begin, but cuts off the end off each sample.
 *
 * @memberof Pattern
 * @name end
 * @param {number | Pattern} length 1 = whole sample, .5 = half sample, .25 = quarter sample etc..
 * @example
 * s("bd*2,oh*4").end("<.1 .2 .5 1>").fast(2)
 *
 */`,meta:{filename:"controls.mjs",lineno:362,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>The same as .begin, but cuts off the end off each sample.</p>",memberof:"Pattern",name:"end",params:[{type:{names:["number","Pattern"]},description:"<p>1 = whole sample, .5 = half sample, .25 = quarter sample etc..</p>",name:"length"}],examples:['s("bd*2,oh*4").end("<.1 .2 .5 1>").fast(2)'],scope:"static",longname:"Pattern.end",kind:"member"},{comment:`/**
 * Loops the sample.
 * Note that the tempo of the loop is not synced with the cycle tempo.
 * To change the loop region, use loopBegin / loopEnd.
 *
 * @name loop
 * @param {number | Pattern} on If 1, the sample is looped
 * @example
 * s("casio").loop(1)
 *
 */`,meta:{filename:"controls.mjs",lineno:373,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Loops the sample.
Note that the tempo of the loop is not synced with the cycle tempo.
To change the loop region, use loopBegin / loopEnd.</p>`,name:"loop",params:[{type:{names:["number","Pattern"]},description:"<p>If 1, the sample is looped</p>",name:"on"}],examples:['s("casio").loop(1)'],longname:"loop",kind:"member",scope:"global"},{comment:`/**
 * Begin to loop at a specific point in the sample (inbetween \`begin\` and \`end\`).
 * Note that the loop point must be inbetween \`begin\` and \`end\`, and before \`loopEnd\`!
 * Note: Samples starting with wt_ will automatically loop! (wt = wavetable)
 *
 * @name loopBegin
 * @param {number | Pattern} time between 0 and 1, where 1 is the length of the sample
 * @synonyms loopb
 * @example
 * s("space").loop(1)
 * .loopBegin("<0 .125 .25>").scope()
 */`,meta:{filename:"controls.mjs",lineno:385,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Begin to loop at a specific point in the sample (inbetween <code>begin</code> and <code>end</code>).
Note that the loop point must be inbetween <code>begin</code> and <code>end</code>, and before <code>loopEnd</code>!
Note: Samples starting with wt_ will automatically loop! (wt = wavetable)</p>`,name:"loopBegin",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1, where 1 is the length of the sample</p>",name:"time"}],synonyms_text:"loopb",synonyms:["loopb"],examples:[`s("space").loop(1)
.loopBegin("<0 .125 .25>").scope()`],longname:"loopBegin",kind:"member",scope:"global"},{comment:`/**
 *
 * End the looping section at a specific point in the sample (inbetween \`begin\` and \`end\`).
 * Note that the loop point must be inbetween \`begin\` and \`end\`, and after \`loopBegin\`!
 *
 * @name loopEnd
 * @param {number | Pattern} time between 0 and 1, where 1 is the length of the sample
 * @synonyms loope
 * @example
 * s("space").loop(1)
 * .loopEnd("<1 .75 .5 .25>").scope()
 */`,meta:{filename:"controls.mjs",lineno:398,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>End the looping section at a specific point in the sample (inbetween <code>begin</code> and <code>end</code>).
Note that the loop point must be inbetween <code>begin</code> and <code>end</code>, and after <code>loopBegin</code>!</p>`,name:"loopEnd",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1, where 1 is the length of the sample</p>",name:"time"}],synonyms_text:"loope",synonyms:["loope"],examples:[`s("space").loop(1)
.loopEnd("<1 .75 .5 .25>").scope()`],longname:"loopEnd",kind:"member",scope:"global"},{comment:`/**
 * bit crusher effect.
 *
 * @name crush
 * @param {number | Pattern} depth between 1 (for drastic reduction in bit-depth) to 16 (for barely no reduction).
 * @example
 * s("<bd sd>,hh*3").fast(2).crush("<16 8 7 6 5 4 3 2>")
 *
 */`,meta:{filename:"controls.mjs",lineno:411,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>bit crusher effect.</p>",name:"crush",params:[{type:{names:["number","Pattern"]},description:"<p>between 1 (for drastic reduction in bit-depth) to 16 (for barely no reduction).</p>",name:"depth"}],examples:['s("<bd sd>,hh*3").fast(2).crush("<16 8 7 6 5 4 3 2>")'],longname:"crush",kind:"member",scope:"global"},{comment:`/**
 * fake-resampling for lowering the sample rate. Caution: This effect seems to only work in chromium based browsers
 *
 * @name coarse
 * @param {number | Pattern} factor 1 for original 2 for half, 3 for a third and so on.
 * @example
 * s("bd sd [~ bd] sd,hh*8").coarse("<1 4 8 16 32>")
 *
 */`,meta:{filename:"controls.mjs",lineno:422,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>fake-resampling for lowering the sample rate. Caution: This effect seems to only work in chromium based browsers</p>",name:"coarse",params:[{type:{names:["number","Pattern"]},description:"<p>1 for original 2 for half, 3 for a third and so on.</p>",name:"factor"}],examples:['s("bd sd [~ bd] sd,hh*8").coarse("<1 4 8 16 32>")'],longname:"coarse",kind:"member",scope:"global"},{comment:`/**
 * filter overdrive for supported filter types
 *
 * @name drive
 * @param {number | Pattern} amount
 * @example
 * note("{f g g c d a a#}%16".sub(17)).s("supersaw").lpenv(8).lpf(150).lpq(.8).ftype('ladder').drive("<.5 4>")
 *
 */`,meta:{filename:"controls.mjs",lineno:433,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>filter overdrive for supported filter types</p>",name:"drive",params:[{type:{names:["number","Pattern"]},name:"amount"}],examples:[`note("{f g g c d a a#}%16".sub(17)).s("supersaw").lpenv(8).lpf(150).lpq(.8).ftype('ladder').drive("<.5 4>")`],longname:"drive",kind:"member",scope:"global"},{comment:`/**
 * Allows you to set the output channels on the interface
 *
 * @name channels
 * @synonyms ch
 *
 * @param {number | Pattern} channels pattern the output channels
 * @example
 * note("e a d b g").channels("3:4")
 *
 */`,meta:{filename:"controls.mjs",lineno:444,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Allows you to set the output channels on the interface</p>",name:"channels",synonyms_text:"ch",synonyms:["ch"],params:[{type:{names:["number","Pattern"]},description:"<p>pattern the output channels</p>",name:"channels"}],examples:['note("e a d b g").channels("3:4")'],longname:"channels",kind:"member",scope:"global"},{comment:`/**
 * Phaser audio effect that approximates popular guitar pedals.
 *
 * @name phaser
 * @synonyms ph
 * @param {number | Pattern} speed speed of modulation
 * @example
 * n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
 * .phaser("<1 2 4 8>")
 *
 */`,meta:{filename:"controls.mjs",lineno:460,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Phaser audio effect that approximates popular guitar pedals.</p>",name:"phaser",synonyms_text:"ph",synonyms:["ph"],params:[{type:{names:["number","Pattern"]},description:"<p>speed of modulation</p>",name:"speed"}],examples:[`n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
.phaser("<1 2 4 8>")`],longname:"phaser",kind:"member",scope:"global"},{comment:`/**
 * The frequency sweep range of the lfo for the phaser effect. Defaults to 2000
 *
 * @name phasersweep
 * @synonyms phs
 * @param {number | Pattern} phasersweep most useful values are between 0 and 4000
 * @example
 * n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
 * .phaser(2).phasersweep("<800 2000 4000>")
 *
 */`,meta:{filename:"controls.mjs",lineno:473,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>The frequency sweep range of the lfo for the phaser effect. Defaults to 2000</p>",name:"phasersweep",synonyms_text:"phs",synonyms:["phs"],params:[{type:{names:["number","Pattern"]},description:"<p>most useful values are between 0 and 4000</p>",name:"phasersweep"}],examples:[`n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
.phaser(2).phasersweep("<800 2000 4000>")`],longname:"phasersweep",kind:"member",scope:"global"},{comment:`/**
 *  The center frequency of the phaser in HZ. Defaults to 1000
 *
 * @name phasercenter
 * @synonyms phc
 * @param {number | Pattern} centerfrequency in HZ
 * @example
 * n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
 * .phaser(2).phasercenter("<800 2000 4000>")
 *
 */`,meta:{filename:"controls.mjs",lineno:486,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>The center frequency of the phaser in HZ. Defaults to 1000</p>",name:"phasercenter",synonyms_text:"phc",synonyms:["phc"],params:[{type:{names:["number","Pattern"]},description:"<p>in HZ</p>",name:"centerfrequency"}],examples:[`n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
.phaser(2).phasercenter("<800 2000 4000>")`],longname:"phasercenter",kind:"member",scope:"global"},{comment:`/**
 * The amount the signal is affected by the phaser effect. Defaults to 0.75
 *
 * @name phaserdepth
 * @synonyms phd
 * @param {number | Pattern} depth number between 0 and 1
 * @example
 * n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
 * .phaser(2).phaserdepth("<0 .5 .75 1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:500,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>The amount the signal is affected by the phaser effect. Defaults to 0.75</p>",name:"phaserdepth",synonyms_text:"phd",synonyms:["phd"],params:[{type:{names:["number","Pattern"]},description:"<p>number between 0 and 1</p>",name:"depth"}],examples:[`n(run(8)).scale("D:pentatonic").s("sawtooth").release(0.5)
.phaser(2).phaserdepth("<0 .5 .75 1>")`],longname:"phaserdepth",kind:"member",scope:"global"},{comment:`/**
 * choose the channel the pattern is sent to in superdirt
 *
 * @name channel
 * @param {number | Pattern} channel channel number
 *
 */`,meta:{filename:"controls.mjs",lineno:514,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>choose the channel the pattern is sent to in superdirt</p>",name:"channel",params:[{type:{names:["number","Pattern"]},description:"<p>channel number</p>",name:"channel"}],longname:"channel",kind:"member",scope:"global"},{comment:`/**
 * In the style of classic drum-machines, \`cut\` will stop a playing sample as soon as another samples with in same cutgroup is to be played. An example would be an open hi-hat followed by a closed one, essentially muting the open.
 *
 * @name cut
 * @param {number | Pattern} group cut group number
 * @example
 * s("[oh hh]*4").cut(1)
 *
 */`,meta:{filename:"controls.mjs",lineno:522,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>In the style of classic drum-machines, <code>cut</code> will stop a playing sample as soon as another samples with in same cutgroup is to be played. An example would be an open hi-hat followed by a closed one, essentially muting the open.</p>",name:"cut",params:[{type:{names:["number","Pattern"]},description:"<p>cut group number</p>",name:"group"}],examples:['s("[oh hh]*4").cut(1)'],longname:"cut",kind:"member",scope:"global"},{comment:`/**
 * Applies the cutoff frequency of the **l**ow-**p**ass **f**ilter.
 *
 * When using mininotation, you can also optionally add the 'lpq' parameter, separated by ':'.
 *
 * @name lpf
 * @param {number | Pattern} frequency audible between 0 and 20000
 * @synonyms cutoff, ctf, lp
 * @example
 * s("bd sd [~ bd] sd,hh*6").lpf("<4000 2000 1000 500 200 100>")
 * @example
 * s("bd*16").lpf("1000:0 1000:10 1000:20 1000:30")
 *
 */`,meta:{filename:"controls.mjs",lineno:532,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Applies the cutoff frequency of the <strong>l</strong>ow-<strong>p</strong>ass <strong>f</strong>ilter.</p>
<p>When using mininotation, you can also optionally add the 'lpq' parameter, separated by ':'.</p>`,name:"lpf",params:[{type:{names:["number","Pattern"]},description:"<p>audible between 0 and 20000</p>",name:"frequency"}],synonyms_text:"cutoff, ctf, lp",synonyms:["cutoff","ctf","lp"],examples:['s("bd sd [~ bd] sd,hh*6").lpf("<4000 2000 1000 500 200 100>")','s("bd*16").lpf("1000:0 1000:10 1000:20 1000:30")'],longname:"lpf",kind:"member",scope:"global"},{comment:`/**
 * Sets the lowpass filter envelope modulation depth.
 * @name lpenv
 * @param {number | Pattern} modulation depth of the lowpass filter envelope between 0 and _n_
 * @synonyms lpe
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .lpf(300)
 * .lpa(.5)
 * .lpenv("<4 2 1 0 -1 -2 -4>/4")
 */`,meta:{filename:"controls.mjs",lineno:548,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the lowpass filter envelope modulation depth.</p>",name:"lpenv",params:[{type:{names:["number","Pattern"]},description:"<p>depth of the lowpass filter envelope between 0 and <em>n</em></p>",name:"modulation"}],synonyms_text:"lpe",synonyms:["lpe"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.lpf(300)
.lpa(.5)
.lpenv("<4 2 1 0 -1 -2 -4>/4")`],longname:"lpenv",kind:"member",scope:"global"},{comment:`/**
 * Sets the highpass filter envelope modulation depth.
 * @name hpenv
 * @param {number | Pattern} modulation depth of the highpass filter envelope between 0 and _n_
 * @synonyms hpe
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .hpf(500)
 * .hpa(.5)
 * .hpenv("<4 2 1 0 -1 -2 -4>/4")
 */`,meta:{filename:"controls.mjs",lineno:561,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the highpass filter envelope modulation depth.</p>",name:"hpenv",params:[{type:{names:["number","Pattern"]},description:"<p>depth of the highpass filter envelope between 0 and <em>n</em></p>",name:"modulation"}],synonyms_text:"hpe",synonyms:["hpe"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.hpf(500)
.hpa(.5)
.hpenv("<4 2 1 0 -1 -2 -4>/4")`],longname:"hpenv",kind:"member",scope:"global"},{comment:`/**
 * Sets the bandpass filter envelope modulation depth.
 * @name bpenv
 * @param {number | Pattern} modulation depth of the bandpass filter envelope between 0 and _n_
 * @synonyms bpe
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .bpf(500)
 * .bpa(.5)
 * .bpenv("<4 2 1 0 -1 -2 -4>/4")
 */`,meta:{filename:"controls.mjs",lineno:574,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the bandpass filter envelope modulation depth.</p>",name:"bpenv",params:[{type:{names:["number","Pattern"]},description:"<p>depth of the bandpass filter envelope between 0 and <em>n</em></p>",name:"modulation"}],synonyms_text:"bpe",synonyms:["bpe"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.bpf(500)
.bpa(.5)
.bpenv("<4 2 1 0 -1 -2 -4>/4")`],longname:"bpenv",kind:"member",scope:"global"},{comment:`/**
 * Sets the attack duration for the lowpass filter envelope.
 * @name lpattack
 * @param {number | Pattern} attack time of the filter envelope
 * @synonyms lpa
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .lpf(300)
 * .lpa("<.5 .25 .1 .01>/4")
 * .lpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:587,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the attack duration for the lowpass filter envelope.</p>",name:"lpattack",params:[{type:{names:["number","Pattern"]},description:"<p>time of the filter envelope</p>",name:"attack"}],synonyms_text:"lpa",synonyms:["lpa"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.lpf(300)
.lpa("<.5 .25 .1 .01>/4")
.lpenv(4)`],longname:"lpattack",kind:"member",scope:"global"},{comment:`/**
 * Sets the attack duration for the highpass filter envelope.
 * @name hpattack
 * @param {number | Pattern} attack time of the highpass filter envelope
 * @synonyms hpa
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .hpf(500)
 * .hpa("<.5 .25 .1 .01>/4")
 * .hpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:600,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the attack duration for the highpass filter envelope.</p>",name:"hpattack",params:[{type:{names:["number","Pattern"]},description:"<p>time of the highpass filter envelope</p>",name:"attack"}],synonyms_text:"hpa",synonyms:["hpa"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.hpf(500)
.hpa("<.5 .25 .1 .01>/4")
.hpenv(4)`],longname:"hpattack",kind:"member",scope:"global"},{comment:`/**
 * Sets the attack duration for the bandpass filter envelope.
 * @name bpattack
 * @param {number | Pattern} attack time of the bandpass filter envelope
 * @synonyms bpa
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .bpf(500)
 * .bpa("<.5 .25 .1 .01>/4")
 * .bpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:613,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the attack duration for the bandpass filter envelope.</p>",name:"bpattack",params:[{type:{names:["number","Pattern"]},description:"<p>time of the bandpass filter envelope</p>",name:"attack"}],synonyms_text:"bpa",synonyms:["bpa"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.bpf(500)
.bpa("<.5 .25 .1 .01>/4")
.bpenv(4)`],longname:"bpattack",kind:"member",scope:"global"},{comment:`/**
 * Sets the decay duration for the lowpass filter envelope.
 * @name lpdecay
 * @param {number | Pattern} decay time of the filter envelope
 * @synonyms lpd
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .lpf(300)
 * .lpd("<.5 .25 .1 0>/4")
 * .lpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:626,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the decay duration for the lowpass filter envelope.</p>",name:"lpdecay",params:[{type:{names:["number","Pattern"]},description:"<p>time of the filter envelope</p>",name:"decay"}],synonyms_text:"lpd",synonyms:["lpd"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.lpf(300)
.lpd("<.5 .25 .1 0>/4")
.lpenv(4)`],longname:"lpdecay",kind:"member",scope:"global"},{comment:`/**
 * Sets the decay duration for the highpass filter envelope.
 * @name hpdecay
 * @param {number | Pattern} decay time of the highpass filter envelope
 * @synonyms hpd
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .hpf(500)
 * .hpd("<.5 .25 .1 0>/4")
 * .hps(0.2)
 * .hpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:639,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the decay duration for the highpass filter envelope.</p>",name:"hpdecay",params:[{type:{names:["number","Pattern"]},description:"<p>time of the highpass filter envelope</p>",name:"decay"}],synonyms_text:"hpd",synonyms:["hpd"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.hpf(500)
.hpd("<.5 .25 .1 0>/4")
.hps(0.2)
.hpenv(4)`],longname:"hpdecay",kind:"member",scope:"global"},{comment:`/**
 * Sets the decay duration for the bandpass filter envelope.
 * @name bpdecay
 * @param {number | Pattern} decay time of the bandpass filter envelope
 * @synonyms bpd
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .bpf(500)
 * .bpd("<.5 .25 .1 0>/4")
 * .bps(0.2)
 * .bpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:653,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the decay duration for the bandpass filter envelope.</p>",name:"bpdecay",params:[{type:{names:["number","Pattern"]},description:"<p>time of the bandpass filter envelope</p>",name:"decay"}],synonyms_text:"bpd",synonyms:["bpd"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.bpf(500)
.bpd("<.5 .25 .1 0>/4")
.bps(0.2)
.bpenv(4)`],longname:"bpdecay",kind:"member",scope:"global"},{comment:`/**
 * Sets the sustain amplitude for the lowpass filter envelope.
 * @name lpsustain
 * @param {number | Pattern} sustain amplitude of the lowpass filter envelope
 * @synonyms lps
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .lpf(300)
 * .lpd(.5)
 * .lps("<0 .25 .5 1>/4")
 * .lpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:667,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the sustain amplitude for the lowpass filter envelope.</p>",name:"lpsustain",params:[{type:{names:["number","Pattern"]},description:"<p>amplitude of the lowpass filter envelope</p>",name:"sustain"}],synonyms_text:"lps",synonyms:["lps"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.lpf(300)
.lpd(.5)
.lps("<0 .25 .5 1>/4")
.lpenv(4)`],longname:"lpsustain",kind:"member",scope:"global"},{comment:`/**
 * Sets the sustain amplitude for the highpass filter envelope.
 * @name hpsustain
 * @param {number | Pattern} sustain amplitude of the highpass filter envelope
 * @synonyms hps
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .hpf(500)
 * .hpd(.5)
 * .hps("<0 .25 .5 1>/4")
 * .hpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:681,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the sustain amplitude for the highpass filter envelope.</p>",name:"hpsustain",params:[{type:{names:["number","Pattern"]},description:"<p>amplitude of the highpass filter envelope</p>",name:"sustain"}],synonyms_text:"hps",synonyms:["hps"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.hpf(500)
.hpd(.5)
.hps("<0 .25 .5 1>/4")
.hpenv(4)`],longname:"hpsustain",kind:"member",scope:"global"},{comment:`/**
 * Sets the sustain amplitude for the bandpass filter envelope.
 * @name bpsustain
 * @param {number | Pattern} sustain amplitude of the bandpass filter envelope
 * @synonyms bps
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .bpf(500)
 * .bpd(.5)
 * .bps("<0 .25 .5 1>/4")
 * .bpenv(4)
 */`,meta:{filename:"controls.mjs",lineno:695,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the sustain amplitude for the bandpass filter envelope.</p>",name:"bpsustain",params:[{type:{names:["number","Pattern"]},description:"<p>amplitude of the bandpass filter envelope</p>",name:"sustain"}],synonyms_text:"bps",synonyms:["bps"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.bpf(500)
.bpd(.5)
.bps("<0 .25 .5 1>/4")
.bpenv(4)`],longname:"bpsustain",kind:"member",scope:"global"},{comment:`/**
 * Sets the release time for the lowpass filter envelope.
 * @name lprelease
 * @param {number | Pattern} release time of the filter envelope
 * @synonyms lpr
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .clip(.5)
 * .lpf(300)
 * .lpenv(4)
 * .lpr("<.5 .25 .1 0>/4")
 * .release(.5)
 */`,meta:{filename:"controls.mjs",lineno:709,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the release time for the lowpass filter envelope.</p>",name:"lprelease",params:[{type:{names:["number","Pattern"]},description:"<p>time of the filter envelope</p>",name:"release"}],synonyms_text:"lpr",synonyms:["lpr"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.clip(.5)
.lpf(300)
.lpenv(4)
.lpr("<.5 .25 .1 0>/4")
.release(.5)`],longname:"lprelease",kind:"member",scope:"global"},{comment:`/**
 * Sets the release time for the highpass filter envelope.
 * @name hprelease
 * @param {number | Pattern} release time of the highpass filter envelope
 * @synonyms hpr
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .clip(.5)
 * .hpf(500)
 * .hpenv(4)
 * .hpr("<.5 .25 .1 0>/4")
 * .release(.5)
 */`,meta:{filename:"controls.mjs",lineno:724,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the release time for the highpass filter envelope.</p>",name:"hprelease",params:[{type:{names:["number","Pattern"]},description:"<p>time of the highpass filter envelope</p>",name:"release"}],synonyms_text:"hpr",synonyms:["hpr"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.clip(.5)
.hpf(500)
.hpenv(4)
.hpr("<.5 .25 .1 0>/4")
.release(.5)`],longname:"hprelease",kind:"member",scope:"global"},{comment:`/**
 * Sets the release time for the bandpass filter envelope.
 * @name bprelease
 * @param {number | Pattern} release time of the bandpass filter envelope
 * @synonyms bpr
 * @example
 * note("c2 e2 f2 g2")
 * .sound('sawtooth')
 * .clip(.5)
 * .bpf(500)
 * .bpenv(4)
 * .bpr("<.5 .25 .1 0>/4")
 * .release(.5)
 */`,meta:{filename:"controls.mjs",lineno:739,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the release time for the bandpass filter envelope.</p>",name:"bprelease",params:[{type:{names:["number","Pattern"]},description:"<p>time of the bandpass filter envelope</p>",name:"release"}],synonyms_text:"bpr",synonyms:["bpr"],examples:[`note("c2 e2 f2 g2")
.sound('sawtooth')
.clip(.5)
.bpf(500)
.bpenv(4)
.bpr("<.5 .25 .1 0>/4")
.release(.5)`],longname:"bprelease",kind:"member",scope:"global"},{comment:`/**
 * Sets the filter type. The ladder filter is more aggressive. More types might be added in the future.
 * @name ftype
 * @param {number | Pattern} type 12db (0), ladder (1), or 24db (2)
 * @example
 * note("{f g g c d a a#}%8").s("sawtooth").lpenv(4).lpf(500).ftype("<0 1 2>").lpq(1)
 * @example
 * note("c f g g a c d4").fast(2)
 * .sound('sawtooth')
 * .lpf(200).fanchor(0)
 * .lpenv(3).lpq(1)
 * .ftype("<ladder 12db 24db>")
 */`,meta:{filename:"controls.mjs",lineno:754,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the filter type. The ladder filter is more aggressive. More types might be added in the future.</p>",name:"ftype",params:[{type:{names:["number","Pattern"]},description:"<p>12db (0), ladder (1), or 24db (2)</p>",name:"type"}],examples:['note("{f g g c d a a#}%8").s("sawtooth").lpenv(4).lpf(500).ftype("<0 1 2>").lpq(1)',`note("c f g g a c d4").fast(2)
.sound('sawtooth')
.lpf(200).fanchor(0)
.lpenv(3).lpq(1)
.ftype("<ladder 12db 24db>")`],longname:"ftype",kind:"member",scope:"global"},{comment:`/**
 * controls the center of the filter envelope. 0 is unipolar positive, .5 is bipolar, 1 is unipolar negative
 * @name fanchor
 * @param {number | Pattern} center 0 to 1
 * @example
 * note("{f g g c d a a#}%8").s("sawtooth").lpf("{1000}%2")
 * .lpenv(8).fanchor("<0 .5 1>")
 */`,meta:{filename:"controls.mjs",lineno:769,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>controls the center of the filter envelope. 0 is unipolar positive, .5 is bipolar, 1 is unipolar negative</p>",name:"fanchor",params:[{type:{names:["number","Pattern"]},description:"<p>0 to 1</p>",name:"center"}],examples:[`note("{f g g c d a a#}%8").s("sawtooth").lpf("{1000}%2")
.lpenv(8).fanchor("<0 .5 1>")`],longname:"fanchor",kind:"member",scope:"global"},{comment:`/**
 * Applies the cutoff frequency of the **h**igh-**p**ass **f**ilter.
 *
 * When using mininotation, you can also optionally add the 'hpq' parameter, separated by ':'.
 *
 * @name hpf
 * @param {number | Pattern} frequency audible between 0 and 20000
 * @synonyms hp, hcutoff
 * @example
 * s("bd sd [~ bd] sd,hh*8").hpf("<4000 2000 1000 500 200 100>")
 * @example
 * s("bd sd [~ bd] sd,hh*8").hpf("<2000 2000:25>")
 *
 */`,meta:{filename:"controls.mjs",lineno:778,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Applies the cutoff frequency of the <strong>h</strong>igh-<strong>p</strong>ass <strong>f</strong>ilter.</p>
<p>When using mininotation, you can also optionally add the 'hpq' parameter, separated by ':'.</p>`,name:"hpf",params:[{type:{names:["number","Pattern"]},description:"<p>audible between 0 and 20000</p>",name:"frequency"}],synonyms_text:"hp, hcutoff",synonyms:["hp","hcutoff"],examples:['s("bd sd [~ bd] sd,hh*8").hpf("<4000 2000 1000 500 200 100>")','s("bd sd [~ bd] sd,hh*8").hpf("<2000 2000:25>")'],longname:"hpf",kind:"member",scope:"global"},{comment:`/**
 * Applies a vibrato to the frequency of the oscillator.
 *
 * @name vib
 * @synonyms vibrato, v
 * @param {number | Pattern} frequency of the vibrato in hertz
 * @example
 * note("a e")
 * .vib("<.5 1 2 4 8 16>")
 * @example
 * // change the modulation depth with ":"
 * note("a e")
 * .vib("<.5 1 2 4 8 16>:12")
 */`,meta:{filename:"controls.mjs",lineno:794,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Applies a vibrato to the frequency of the oscillator.</p>",name:"vib",synonyms_text:"vibrato, v",synonyms:["vibrato","v"],params:[{type:{names:["number","Pattern"]},description:"<p>of the vibrato in hertz</p>",name:"frequency"}],examples:[`note("a e")
.vib("<.5 1 2 4 8 16>")`,`// change the modulation depth with ":"
note("a e")
.vib("<.5 1 2 4 8 16>:12")`],longname:"vib",kind:"member",scope:"global"},{comment:`/**
 * Adds pink noise to the mix
 *
 * @name noise
 * @param {number | Pattern} wet wet amount
 * @example
 * sound("<white pink brown>/2")
 */`,meta:{filename:"controls.mjs",lineno:809,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Adds pink noise to the mix</p>",name:"noise",params:[{type:{names:["number","Pattern"]},description:"<p>wet amount</p>",name:"wet"}],examples:['sound("<white pink brown>/2")'],longname:"noise",kind:"member",scope:"global"},{comment:`/**
 * Sets the vibrato depth in semitones. Only has an effect if \`vibrato\` | \`vib\` | \`v\` is is also set
 *
 * @name vibmod
 * @synonyms vmod
 * @param {number | Pattern} depth of vibrato (in semitones)
 * @example
 * note("a e").vib(4)
 * .vibmod("<.25 .5 1 2 12>")
 * @example
 * // change the vibrato frequency with ":"
 * note("a e")
 * .vibmod("<.25 .5 1 2 12>:8")
 */`,meta:{filename:"controls.mjs",lineno:818,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the vibrato depth in semitones. Only has an effect if <code>vibrato</code> | <code>vib</code> | <code>v</code> is is also set</p>",name:"vibmod",synonyms_text:"vmod",synonyms:["vmod"],params:[{type:{names:["number","Pattern"]},description:"<p>of vibrato (in semitones)</p>",name:"depth"}],examples:[`note("a e").vib(4)
.vibmod("<.25 .5 1 2 12>")`,`// change the vibrato frequency with ":"
note("a e")
.vibmod("<.25 .5 1 2 12>:8")`],longname:"vibmod",kind:"member",scope:"global"},{comment:`/**
 * Controls the **h**igh-**p**ass **q**-value.
 *
 * @name hpq
 * @param {number | Pattern} q resonance factor between 0 and 50
 * @synonyms hresonance
 * @example
 * s("bd sd [~ bd] sd,hh*8").hpf(2000).hpq("<0 10 20 30>")
 *
 */`,meta:{filename:"controls.mjs",lineno:834,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Controls the <strong>h</strong>igh-<strong>p</strong>ass <strong>q</strong>-value.</p>",name:"hpq",params:[{type:{names:["number","Pattern"]},description:"<p>resonance factor between 0 and 50</p>",name:"q"}],synonyms_text:"hresonance",synonyms:["hresonance"],examples:['s("bd sd [~ bd] sd,hh*8").hpf(2000).hpq("<0 10 20 30>")'],longname:"hpq",kind:"member",scope:"global"},{comment:`/**
 * Controls the **l**ow-**p**ass **q**-value.
 *
 * @name lpq
 * @param {number | Pattern} q resonance factor between 0 and 50
 * @synonyms resonance
 * @example
 * s("bd sd [~ bd] sd,hh*8").lpf(2000).lpq("<0 10 20 30>")
 *
 */`,meta:{filename:"controls.mjs",lineno:845,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Controls the <strong>l</strong>ow-<strong>p</strong>ass <strong>q</strong>-value.</p>",name:"lpq",params:[{type:{names:["number","Pattern"]},description:"<p>resonance factor between 0 and 50</p>",name:"q"}],synonyms_text:"resonance",synonyms:["resonance"],examples:['s("bd sd [~ bd] sd,hh*8").lpf(2000).lpq("<0 10 20 30>")'],longname:"lpq",kind:"member",scope:"global"},{comment:`/**
 * DJ filter, below 0.5 is low pass filter, above is high pass filter.
 *
 * @name djf
 * @param {number | Pattern} cutoff below 0.5 is low pass filter, above is high pass filter
 * @example
 * n("0 3 7 [10,24]").s('superzow').octave(3).djf("<.5 .25 .5 .75>").osc()
 *
 */`,meta:{filename:"controls.mjs",lineno:857,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>DJ filter, below 0.5 is low pass filter, above is high pass filter.</p>",name:"djf",params:[{type:{names:["number","Pattern"]},description:"<p>below 0.5 is low pass filter, above is high pass filter</p>",name:"cutoff"}],examples:[`n("0 3 7 [10,24]").s('superzow').octave(3).djf("<.5 .25 .5 .75>").osc()`],longname:"djf",kind:"member",scope:"global"},{comment:`/**
 * Sets the level of the delay signal.
 *
 * When using mininotation, you can also optionally add the 'delaytime' and 'delayfeedback' parameter,
 * separated by ':'.
 *
 *
 * @name delay
 * @param {number | Pattern} level between 0 and 1
 * @example
 * s("bd bd").delay("<0 .25 .5 1>")
 * @example
 * s("bd bd").delay("0.65:0.25:0.9 0.65:0.125:0.7")
 *
 */`,meta:{filename:"controls.mjs",lineno:869,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the level of the delay signal.</p>
<p>When using mininotation, you can also optionally add the 'delaytime' and 'delayfeedback' parameter,
separated by ':'.</p>`,name:"delay",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1</p>",name:"level"}],examples:['s("bd bd").delay("<0 .25 .5 1>")','s("bd bd").delay("0.65:0.25:0.9 0.65:0.125:0.7")'],longname:"delay",kind:"member",scope:"global"},{comment:`/**
 * Sets the level of the signal that is fed back into the delay.
 * Caution: Values >= 1 will result in a signal that gets louder and louder! Don't do it
 *
 * @name delayfeedback
 * @param {number | Pattern} feedback between 0 and 1
 * @synonyms delayfb, dfb
 * @example
 * s("bd").delay(.25).delayfeedback("<.25 .5 .75 1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:885,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the level of the signal that is fed back into the delay.
Caution: Values &gt;= 1 will result in a signal that gets louder and louder! Don't do it</p>`,name:"delayfeedback",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1</p>",name:"feedback"}],synonyms_text:"delayfb, dfb",synonyms:["delayfb","dfb"],examples:['s("bd").delay(.25).delayfeedback("<.25 .5 .75 1>")'],longname:"delayfeedback",kind:"member",scope:"global"},{comment:`/**
 * Sets the time of the delay effect.
 *
 * @name delaytime
 * @param {number | Pattern} seconds between 0 and Infinity
 * @synonyms delayt, dt
 * @example
 * s("bd bd").delay(.25).delaytime("<.125 .25 .5 1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:897,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the time of the delay effect.</p>",name:"delaytime",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and Infinity</p>",name:"seconds"}],synonyms_text:"delayt, dt",synonyms:["delayt","dt"],examples:['s("bd bd").delay(.25).delaytime("<.125 .25 .5 1>")'],longname:"delaytime",kind:"member",scope:"global"},{comment:`/**
 * Set detune for stacked voices of supported oscillators
 *
 * @name detune
 * @param {number | Pattern} amount
 * @synonyms det
 * @example
 * note("d f a a# a d3").fast(2).s("supersaw").detune("<.1 .2 .5 24.1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:918,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Set detune for stacked voices of supported oscillators</p>",name:"detune",params:[{type:{names:["number","Pattern"]},name:"amount"}],synonyms_text:"det",synonyms:["det"],examples:['note("d f a a# a d3").fast(2).s("supersaw").detune("<.1 .2 .5 24.1>")'],longname:"detune",kind:"member",scope:"global"},{comment:`/**
 * Set number of stacked voices for supported oscillators
 *
 * @name unison
 * @param {number | Pattern} numvoices
 * @example
 * note("d f a a# a d3").fast(2).s("supersaw").unison("<1 2 7>")
 *
 */`,meta:{filename:"controls.mjs",lineno:929,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Set number of stacked voices for supported oscillators</p>",name:"unison",params:[{type:{names:["number","Pattern"]},name:"numvoices"}],examples:['note("d f a a# a d3").fast(2).s("supersaw").unison("<1 2 7>")'],longname:"unison",kind:"member",scope:"global"},{comment:`/**
 * Set the stereo pan spread for supported oscillators
 *
 * @name spread
 * @param {number | Pattern} spread between 0 and 1
 * @example
 * note("d f a a# a d3").fast(2).s("supersaw").spread("<0 .3 1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:940,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Set the stereo pan spread for supported oscillators</p>",name:"spread",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1</p>",name:"spread"}],examples:['note("d f a a# a d3").fast(2).s("supersaw").spread("<0 .3 1>")'],longname:"spread",kind:"member",scope:"global"},{comment:`/**
 * Set dryness of reverb. See \`room\` and \`size\` for more information about reverb.
 *
 * @name dry
 * @param {number | Pattern} dry 0 = wet, 1 = dry
 * @example
 * n("[0,3,7](3,8)").s("superpiano").room(.7).dry("<0 .5 .75 1>").osc()
 * @superdirtOnly
 *
 */`,meta:{filename:"controls.mjs",lineno:950,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Set dryness of reverb. See <code>room</code> and <code>size</code> for more information about reverb.</p>",name:"dry",params:[{type:{names:["number","Pattern"]},description:"<p>0 = wet, 1 = dry</p>",name:"dry"}],examples:['n("[0,3,7](3,8)").s("superpiano").room(.7).dry("<0 .5 .75 1>").osc()'],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],longname:"dry",kind:"member",scope:"global"},{comment:`/**
 * Set frequency of sound.
 *
 * @name freq
 * @param {number | Pattern} frequency in Hz. the audible range is between 20 and 20000 Hz
 * @example
 * freq("220 110 440 110").s("superzow").osc()
 * @example
 * freq("110".mul.out(".5 1.5 .6 [2 3]")).s("superzow").osc()
 *
 */`,meta:{filename:"controls.mjs",lineno:974,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Set frequency of sound.</p>",name:"freq",params:[{type:{names:["number","Pattern"]},description:"<p>in Hz. the audible range is between 20 and 20000 Hz</p>",name:"frequency"}],examples:['freq("220 110 440 110").s("superzow").osc()','freq("110".mul.out(".5 1.5 .6 [2 3]")).s("superzow").osc()'],longname:"freq",kind:"member",scope:"global"},{comment:`/**
 * Attack time of pitch envelope.
 *
 * @name pattack
 * @synonyms patt
 * @param {number | Pattern} time time in seconds
 * @example
 * note("c eb g bb").pattack("0 .1 .25 .5").slow(2)
 *
 */`,meta:{filename:"controls.mjs",lineno:987,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Attack time of pitch envelope.</p>",name:"pattack",synonyms_text:"patt",synonyms:["patt"],params:[{type:{names:["number","Pattern"]},description:"<p>time in seconds</p>",name:"time"}],examples:['note("c eb g bb").pattack("0 .1 .25 .5").slow(2)'],longname:"pattack",kind:"member",scope:"global"},{comment:`/**
 * Decay time of pitch envelope.
 *
 * @name pdecay
 * @synonyms pdec
 * @param {number | Pattern} time time in seconds
 * @example
 * note("<c eb g bb>").pdecay("<0 .1 .25 .5>")
 *
 */`,meta:{filename:"controls.mjs",lineno:998,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Decay time of pitch envelope.</p>",name:"pdecay",synonyms_text:"pdec",synonyms:["pdec"],params:[{type:{names:["number","Pattern"]},description:"<p>time in seconds</p>",name:"time"}],examples:['note("<c eb g bb>").pdecay("<0 .1 .25 .5>")'],longname:"pdecay",kind:"member",scope:"global"},{comment:`/**
 * Release time of pitch envelope
 *
 * @name prelease
 * @synonyms prel
 * @param {number | Pattern} time time in seconds
 * @example
 * note("<c eb g bb> ~")
 * .release(.5) // to hear the pitch release
 * .prelease("<0 .1 .25 .5>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1011,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Release time of pitch envelope</p>",name:"prelease",synonyms_text:"prel",synonyms:["prel"],params:[{type:{names:["number","Pattern"]},description:"<p>time in seconds</p>",name:"time"}],examples:[`note("<c eb g bb> ~")
.release(.5) // to hear the pitch release
.prelease("<0 .1 .25 .5>")`],longname:"prelease",kind:"member",scope:"global"},{comment:`/**
 * Amount of pitch envelope. Negative values will flip the envelope.
 * If you don't set other pitch envelope controls, \`pattack:.2\` will be the default.
 *
 * @name penv
 * @param {number | Pattern} semitones change in semitones
 * @example
 * note("c")
 * .penv("<12 7 1 .5 0 -1 -7 -12>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1024,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Amount of pitch envelope. Negative values will flip the envelope.
If you don't set other pitch envelope controls, <code>pattack:.2</code> will be the default.</p>`,name:"penv",params:[{type:{names:["number","Pattern"]},description:"<p>change in semitones</p>",name:"semitones"}],examples:[`note("c")
.penv("<12 7 1 .5 0 -1 -7 -12>")`],longname:"penv",kind:"member",scope:"global"},{comment:`/**
 * Curve of envelope. Defaults to linear. exponential is good for kicks
 *
 * @name pcurve
 * @param {number | Pattern} type 0 = linear, 1 = exponential
 * @example
 * note("g1*4")
 * .s("sine").pdec(.5)
 * .penv(32)
 * .pcurve("<0 1>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1036,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Curve of envelope. Defaults to linear. exponential is good for kicks</p>",name:"pcurve",params:[{type:{names:["number","Pattern"]},description:"<p>0 = linear, 1 = exponential</p>",name:"type"}],examples:[`note("g1*4")
.s("sine").pdec(.5)
.penv(32)
.pcurve("<0 1>")`],longname:"pcurve",kind:"member",scope:"global"},{comment:`/**
 * Sets the range anchor of the envelope:
 * - anchor 0: range = [note, note + penv]
 * - anchor 1: range = [note - penv, note]
 * If you don't set an anchor, the value will default to the psustain value.
 *
 * @name panchor
 * @param {number | Pattern} anchor anchor offset
 * @example
 * note("c c4").penv(12).panchor("<0 .5 1 .5>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1049,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the range anchor of the envelope:</p>
<ul>
<li>anchor 0: range = [note, note + penv]</li>
<li>anchor 1: range = [note - penv, note]
If you don't set an anchor, the value will default to the psustain value.</li>
</ul>`,name:"panchor",params:[{type:{names:["number","Pattern"]},description:"<p>anchor offset</p>",name:"anchor"}],examples:['note("c c4").penv(12).panchor("<0 .5 1 .5>")'],longname:"panchor",kind:"member",scope:"global"},{comment:`/**
 * Emulation of a Leslie speaker: speakers rotating in a wooden amplified cabinet.
 *
 * @name leslie
 * @param {number | Pattern} wet between 0 and 1
 * @example
 * n("0,4,7").s("supersquare").leslie("<0 .4 .6 1>").osc()
 * @superdirtOnly
 *
 */`,meta:{filename:"controls.mjs",lineno:1073,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Emulation of a Leslie speaker: speakers rotating in a wooden amplified cabinet.</p>",name:"leslie",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1</p>",name:"wet"}],examples:['n("0,4,7").s("supersquare").leslie("<0 .4 .6 1>").osc()'],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],longname:"leslie",kind:"member",scope:"global"},{comment:`/**
 * Rate of modulation / rotation for leslie effect
 *
 * @name lrate
 * @param {number | Pattern} rate 6.7 for fast, 0.7 for slow
 * @example
 * n("0,4,7").s("supersquare").leslie(1).lrate("<1 2 4 8>").osc()
 * @superdirtOnly
 *
 */`,meta:{filename:"controls.mjs",lineno:1084,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Rate of modulation / rotation for leslie effect</p>",name:"lrate",params:[{type:{names:["number","Pattern"]},description:"<p>6.7 for fast, 0.7 for slow</p>",name:"rate"}],examples:['n("0,4,7").s("supersquare").leslie(1).lrate("<1 2 4 8>").osc()'],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],longname:"lrate",kind:"member",scope:"global"},{comment:`/**
 * Physical size of the cabinet in meters. Be careful, it might be slightly larger than your computer. Affects the Doppler amount (pitch warble)
 *
 * @name lsize
 * @param {number | Pattern} meters somewhere between 0 and 1
 * @example
 * n("0,4,7").s("supersquare").leslie(1).lrate(2).lsize("<.1 .5 1>").osc()
 * @superdirtOnly
 *
 */`,meta:{filename:"controls.mjs",lineno:1096,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Physical size of the cabinet in meters. Be careful, it might be slightly larger than your computer. Affects the Doppler amount (pitch warble)</p>",name:"lsize",params:[{type:{names:["number","Pattern"]},description:"<p>somewhere between 0 and 1</p>",name:"meters"}],examples:['n("0,4,7").s("supersquare").leslie(1).lrate(2).lsize("<.1 .5 1>").osc()'],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],longname:"lsize",kind:"member",scope:"global"},{comment:`/**
 * Sets the displayed text for an event on the pianoroll
 *
 * @name label
 * @param {string} label text to display
 */`,meta:{filename:"controls.mjs",lineno:1107,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the displayed text for an event on the pianoroll</p>",name:"label",params:[{type:{names:["string"]},description:"<p>text to display</p>",name:"label"}],longname:"label",kind:"member",scope:"global"},{comment:`/**
 * Sets the default octave of a synth.
 *
 * @name octave
 * @param {number | Pattern} octave octave number
 * @example
 * n("0,4,7").s('supersquare').octave("<3 4 5 6>").osc()
 * @superDirtOnly
 */`,meta:{filename:"controls.mjs",lineno:1143,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the default octave of a synth.</p>",name:"octave",params:[{type:{names:["number","Pattern"]},description:"<p>octave number</p>",name:"octave"}],examples:[`n("0,4,7").s('supersquare').octave("<3 4 5 6>").osc()`],tags:[{originalTitle:"superDirtOnly",title:"superdirtonly",text:""}],longname:"octave",kind:"member",scope:"global"},{comment:`/**
 * An \`orbit\` is a global parameter context for patterns. Patterns with the same orbit will share the same global effects.
 *
 * @name orbit
 * @param {number | Pattern} number
 * @example
 * stack(
 *   s("hh*6").delay(.5).delaytime(.25).orbit(1),
 *   s("~ sd ~ sd").delay(.5).delaytime(.125).orbit(2)
 * )
 */`,meta:{filename:"controls.mjs",lineno:1156,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>An <code>orbit</code> is a global parameter context for patterns. Patterns with the same orbit will share the same global effects.</p>",name:"orbit",params:[{type:{names:["number","Pattern"]},name:"number"}],examples:[`stack(
  s("hh*6").delay(.5).delaytime(.25).orbit(1),
  s("~ sd ~ sd").delay(.5).delaytime(.125).orbit(2)
)`],longname:"orbit",kind:"member",scope:"global"},{comment:`/**
 * Sets position in stereo.
 *
 * @name pan
 * @param {number | Pattern} pan between 0 and 1, from left to right (assuming stereo), once round a circle (assuming multichannel)
 * @example
 * s("[bd hh]*2").pan("<.5 1 .5 0>")
 * @example
 * s("bd rim sd rim bd ~ cp rim").pan(sine.slow(2))
 *
 */`,meta:{filename:"controls.mjs",lineno:1172,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets position in stereo.</p>",name:"pan",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1, from left to right (assuming stereo), once round a circle (assuming multichannel)</p>",name:"pan"}],examples:['s("[bd hh]*2").pan("<.5 1 .5 0>")','s("bd rim sd rim bd ~ cp rim").pan(sine.slow(2))'],longname:"pan",kind:"member",scope:"global"},{comment:`/**
 * Sets the level of reverb.
 *
 * When using mininotation, you can also optionally add the 'size' parameter, separated by ':'.
 *
 * @name room
 * @param {number | Pattern} level between 0 and 1
 * @example
 * s("bd sd [~ bd] sd").room("<0 .2 .4 .6 .8 1>")
 * @example
 * s("bd sd [~ bd] sd").room("<0.9:1 0.9:4>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1235,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the level of reverb.</p>
<p>When using mininotation, you can also optionally add the 'size' parameter, separated by ':'.</p>`,name:"room",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1</p>",name:"level"}],examples:['s("bd sd [~ bd] sd").room("<0 .2 .4 .6 .8 1>")','s("bd sd [~ bd] sd").room("<0.9:1 0.9:4>")'],longname:"room",kind:"member",scope:"global"},{comment:`/**
 * Reverb lowpass starting frequency (in hertz).
 * When this property is changed, the reverb will be recaculated, so only change this sparsely..
 *
 * @name roomlp
 * @synonyms rlp
 * @param {number} frequency between 0 and 20000hz
 * @example
 * s("bd sd [~ bd] sd").room(0.5).rlp(10000)
 * @example
 * s("bd sd [~ bd] sd").room(0.5).rlp(5000)
 */`,meta:{filename:"controls.mjs",lineno:1249,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Reverb lowpass starting frequency (in hertz).
When this property is changed, the reverb will be recaculated, so only change this sparsely..</p>`,name:"roomlp",synonyms_text:"rlp",synonyms:["rlp"],params:[{type:{names:["number"]},description:"<p>between 0 and 20000hz</p>",name:"frequency"}],examples:['s("bd sd [~ bd] sd").room(0.5).rlp(10000)','s("bd sd [~ bd] sd").room(0.5).rlp(5000)'],longname:"roomlp",kind:"member",scope:"global"},{comment:`/**
 * Reverb lowpass frequency at -60dB (in hertz).
 * When this property is changed, the reverb will be recaculated, so only change this sparsely..
 *
 * @name roomdim
 * @synonyms rdim
 * @param {number} frequency between 0 and 20000hz
 * @example
 * s("bd sd [~ bd] sd").room(0.5).rlp(10000).rdim(8000)
 * @example
 * s("bd sd [~ bd] sd").room(0.5).rlp(5000).rdim(400)
 *
 */`,meta:{filename:"controls.mjs",lineno:1262,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Reverb lowpass frequency at -60dB (in hertz).
When this property is changed, the reverb will be recaculated, so only change this sparsely..</p>`,name:"roomdim",synonyms_text:"rdim",synonyms:["rdim"],params:[{type:{names:["number"]},description:"<p>between 0 and 20000hz</p>",name:"frequency"}],examples:['s("bd sd [~ bd] sd").room(0.5).rlp(10000).rdim(8000)','s("bd sd [~ bd] sd").room(0.5).rlp(5000).rdim(400)'],longname:"roomdim",kind:"member",scope:"global"},{comment:`/**
 * Reverb fade time (in seconds).
 * When this property is changed, the reverb will be recaculated, so only change this sparsely..
 *
 * @name roomfade
 * @synonyms rfade
 * @param {number} seconds for the reverb to fade
 * @example
 * s("bd sd [~ bd] sd").room(0.5).rlp(10000).rfade(0.5)
 * @example
 * s("bd sd [~ bd] sd").room(0.5).rlp(5000).rfade(4)
 *
 */`,meta:{filename:"controls.mjs",lineno:1276,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Reverb fade time (in seconds).
When this property is changed, the reverb will be recaculated, so only change this sparsely..</p>`,name:"roomfade",synonyms_text:"rfade",synonyms:["rfade"],params:[{type:{names:["number"]},description:"<p>for the reverb to fade</p>",name:"seconds"}],examples:['s("bd sd [~ bd] sd").room(0.5).rlp(10000).rfade(0.5)','s("bd sd [~ bd] sd").room(0.5).rlp(5000).rfade(4)'],longname:"roomfade",kind:"member",scope:"global"},{comment:`/**
 * Sets the sample to use as an impulse response for the reverb.
 * @name iresponse
 * @param {string | Pattern} sample to use as an impulse response
 * @synonyms ir
 * @example
 * s("bd sd [~ bd] sd").room(.8).ir("<shaker_large:0 shaker_large:2>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1290,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the sample to use as an impulse response for the reverb.</p>",name:"iresponse",params:[{type:{names:["string","Pattern"]},description:"<p>to use as an impulse response</p>",name:"sample"}],synonyms_text:"ir",synonyms:["ir"],examples:['s("bd sd [~ bd] sd").room(.8).ir("<shaker_large:0 shaker_large:2>")'],longname:"iresponse",kind:"member",scope:"global"},{comment:`/**
 * Sets the room size of the reverb, see \`room\`.
 * When this property is changed, the reverb will be recaculated, so only change this sparsely..
 *
 * @name roomsize
 * @param {number | Pattern} size between 0 and 10
 * @synonyms rsize, sz, size
 * @example
 * s("bd sd [~ bd] sd").room(.8).rsize(1)
 * @example
 * s("bd sd [~ bd] sd").room(.8).rsize(4)
 *
 */`,meta:{filename:"controls.mjs",lineno:1300,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Sets the room size of the reverb, see <code>room</code>.
When this property is changed, the reverb will be recaculated, so only change this sparsely..</p>`,name:"roomsize",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 10</p>",name:"size"}],synonyms_text:"rsize, sz, size",synonyms:["rsize","sz","size"],examples:['s("bd sd [~ bd] sd").room(.8).rsize(1)','s("bd sd [~ bd] sd").room(.8).rsize(4)'],longname:"roomsize",kind:"member",scope:"global"},{comment:`/**
 * (Deprecated) Wave shaping distortion. WARNING: can suddenly get unpredictably loud.
 * Please use distort instead, which has a more predictable response curve
 * second option in optional array syntax (ex: ".9:.5") applies a postgain to the output
 *
 *
 * @name shape
 * @param {number | Pattern} distortion between 0 and 1
 * @example
 * s("bd sd [~ bd] sd,hh*8").shape("<0 .2 .4 .6 .8>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1321,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>(Deprecated) Wave shaping distortion. WARNING: can suddenly get unpredictably loud.
Please use distort instead, which has a more predictable response curve
second option in optional array syntax (ex: &quot;.9:.5&quot;) applies a postgain to the output</p>`,name:"shape",params:[{type:{names:["number","Pattern"]},description:"<p>between 0 and 1</p>",name:"distortion"}],examples:['s("bd sd [~ bd] sd,hh*8").shape("<0 .2 .4 .6 .8>")'],longname:"shape",kind:"member",scope:"global"},{comment:`/**
 * Wave shaping distortion. CAUTION: it can get loud.
 * Second option in optional array syntax (ex: ".9:.5") applies a postgain to the output.
 * Most useful values are usually between 0 and 10 (depending on source gain). If you are feeling adventurous, you can turn it up to 11 and beyond ;)
 *
 * @name distort
 * @synonyms dist
 * @param {number | Pattern} distortion
 * @example
 * s("bd sd [~ bd] sd,hh*8").distort("<0 2 3 10:.5>")
 * @example
 * note("d1!8").s("sine").penv(36).pdecay(.12).decay(.23).distort("8:.4")
 *
 */`,meta:{filename:"controls.mjs",lineno:1334,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Wave shaping distortion. CAUTION: it can get loud.
Second option in optional array syntax (ex: &quot;.9:.5&quot;) applies a postgain to the output.
Most useful values are usually between 0 and 10 (depending on source gain). If you are feeling adventurous, you can turn it up to 11 and beyond ;)</p>`,name:"distort",synonyms_text:"dist",synonyms:["dist"],params:[{type:{names:["number","Pattern"]},name:"distortion"}],examples:['s("bd sd [~ bd] sd,hh*8").distort("<0 2 3 10:.5>")','note("d1!8").s("sine").penv(36).pdecay(.12).decay(.23).distort("8:.4")'],longname:"distort",kind:"member",scope:"global"},{comment:`/**
 * Dynamics Compressor. The params are \`compressor("threshold:ratio:knee:attack:release")\`
 * More info [here](https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode?retiredLocale=de#instance_properties)
 *
 * @name compressor
 * @example
 * s("bd sd [~ bd] sd,hh*8")
 * .compressor("-20:20:10:.002:.02")
 *
 */`,meta:{filename:"controls.mjs",lineno:1349,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Dynamics Compressor. The params are <code>compressor(&quot;threshold:ratio:knee:attack:release&quot;)</code>
More info <a href="https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode?retiredLocale=de#instance_properties">here</a></p>`,name:"compressor",examples:[`s("bd sd [~ bd] sd,hh*8")
.compressor("-20:20:10:.002:.02")`],longname:"compressor",kind:"member",scope:"global"},{comment:`/**
 * Changes the speed of sample playback, i.e. a cheap way of changing pitch.
 *
 * @name speed
 * @param {number | Pattern} speed -inf to inf, negative numbers play the sample backwards.
 * @example
 * s("bd*6").speed("1 2 4 1 -2 -4")
 * @example
 * speed("1 1.5*2 [2 1.1]").s("piano").clip(1)
 *
 */`,meta:{filename:"controls.mjs",lineno:1370,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Changes the speed of sample playback, i.e. a cheap way of changing pitch.</p>",name:"speed",params:[{type:{names:["number","Pattern"]},description:"<p>inf to inf, negative numbers play the sample backwards.</p>",name:"speed"}],examples:['s("bd*6").speed("1 2 4 1 -2 -4")','speed("1 1.5*2 [2 1.1]").s("piano").clip(1)'],longname:"speed",kind:"member",scope:"global"},{comment:'/**\n * Used in conjunction with `speed`, accepts values of "r" (rate, default behavior), "c" (cycles), or "s" (seconds). Using `unit "c"` means `speed` will be interpreted in units of cycles, e.g. `speed "1"` means samples will be stretched to fill a cycle. Using `unit "s"` means the playback speed will be adjusted so that the duration is the number of seconds specified by `speed`.\n *\n * @name unit\n * @param {number | string | Pattern} unit see description above\n * @example\n * speed("1 2 .5 3").s("bd").unit("c").osc()\n * @superdirtOnly\n *\n */',meta:{filename:"controls.mjs",lineno:1382,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Used in conjunction with <code>speed</code>, accepts values of &quot;r&quot; (rate, default behavior), &quot;c&quot; (cycles), or &quot;s&quot; (seconds). Using <code>unit &quot;c&quot;</code> means <code>speed</code> will be interpreted in units of cycles, e.g. <code>speed &quot;1&quot;</code> means samples will be stretched to fill a cycle. Using <code>unit &quot;s&quot;</code> means the playback speed will be adjusted so that the duration is the number of seconds specified by <code>speed</code>.</p>",name:"unit",params:[{type:{names:["number","string","Pattern"]},description:"<p>see description above</p>",name:"unit"}],examples:['speed("1 2 .5 3").s("bd").unit("c").osc()'],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],longname:"unit",kind:"member",scope:"global"},{comment:`/**
 * Made by Calum Gunn. Reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter. The SuperCollider manual defines Squiz as:
 *
 * "A simplistic pitch-raising algorithm. It's not meant to sound natural; its sound is reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter, depending on the input. The algorithm works by cutting the signal into fragments (delimited by upwards-going zero-crossings) and squeezing those fragments in the time domain (i.e. simply playing them back faster than they came in), leaving silences inbetween. All the parameters apart from memlen can be modulated."
 *
 * @name squiz
 * @param {number | Pattern} squiz Try passing multiples of 2 to it - 2, 4, 8 etc.
 * @example
 * squiz("2 4/2 6 [8 16]").s("bd").osc()
 * @superdirtOnly
 *
 */`,meta:{filename:"controls.mjs",lineno:1393,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Made by Calum Gunn. Reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter. The SuperCollider manual defines Squiz as:</p>
<p>&quot;A simplistic pitch-raising algorithm. It's not meant to sound natural; its sound is reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter, depending on the input. The algorithm works by cutting the signal into fragments (delimited by upwards-going zero-crossings) and squeezing those fragments in the time domain (i.e. simply playing them back faster than they came in), leaving silences inbetween. All the parameters apart from memlen can be modulated.&quot;</p>`,name:"squiz",params:[{type:{names:["number","Pattern"]},description:"<p>Try passing multiples of 2 to it - 2, 4, 8 etc.</p>",name:"squiz"}],examples:['squiz("2 4/2 6 [8 16]").s("bd").osc()'],tags:[{originalTitle:"superdirtOnly",title:"superdirtonly",text:""}],longname:"squiz",kind:"member",scope:"global"},{comment:`/**
 *
 * Formant filter to make things sound like vowels.
 *
 * @name vowel
 * @param {string | Pattern} vowel You can use a e i o u ae aa oe ue y uh un en an on, corresponding to [a] [e] [i] [o] [u] [æ] [ɑ] [ø] [y] [ɯ] [ʌ] [œ̃] [ɛ̃] [ɑ̃] [ɔ̃]. Aliases: aa = å = ɑ, oe = ø = ö, y = ı, ae = æ.
 * @example
 * note("[c2 <eb2 <g2 g1>>]*2").s('sawtooth')
 * .vowel("<a e i <o u>>")
 * @example
 * s("bd sd mt ht bd [~ cp] ht lt").vowel("[a|e|i|o|u]")
 *
 */`,meta:{filename:"controls.mjs",lineno:1418,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Formant filter to make things sound like vowels.</p>",name:"vowel",params:[{type:{names:["string","Pattern"]},description:"<p>You can use a e i o u ae aa oe ue y uh un en an on, corresponding to [a] [e] [i] [o] [u] [æ] [ɑ] [ø] [y] [ɯ] [ʌ] [œ̃] [ɛ̃] [ɑ̃] [ɔ̃]. Aliases: aa = å = ɑ, oe = ø = ö, y = ı, ae = æ.</p>",name:"vowel"}],examples:[`note("[c2 <eb2 <g2 g1>>]*2").s('sawtooth')
.vowel("<a e i <o u>>")`,'s("bd sd mt ht bd [~ cp] ht lt").vowel("[a|e|i|o|u]")'],longname:"vowel",kind:"member",scope:"global"},{comment:`/**
 * Multiplies the duration with the given number. Also cuts samples off at the end if they exceed the duration.
 *
 * @name clip
 * @synonyms legato
 * @param {number | Pattern} factor >= 0
 * @example
 * note("c a f e").s("piano").clip("<.5 1 2>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1514,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Multiplies the duration with the given number. Also cuts samples off at the end if they exceed the duration.</p>",name:"clip",synonyms_text:"legato",synonyms:["legato"],params:[{type:{names:["number","Pattern"]},description:`<blockquote>
<p>= 0</p>
</blockquote>`,name:"factor"}],examples:['note("c a f e").s("piano").clip("<.5 1 2>")'],longname:"clip",kind:"member",scope:"global"},{comment:`/**
 * Sets the duration of the event in cycles. Similar to clip / legato, it also cuts samples off at the end if they exceed the duration.
 *
 * @name duration
 * @synonyms dur
 * @param {number | Pattern} seconds >= 0
 * @example
 * note("c a f e").s("piano").dur("<.5 1 2>")
 *
 */`,meta:{filename:"controls.mjs",lineno:1526,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the duration of the event in cycles. Similar to clip / legato, it also cuts samples off at the end if they exceed the duration.</p>",name:"duration",synonyms_text:"dur",synonyms:["dur"],params:[{type:{names:["number","Pattern"]},description:`<blockquote>
<p>= 0</p>
</blockquote>`,name:"seconds"}],examples:['note("c a f e").s("piano").dur("<.5 1 2>")'],longname:"duration",kind:"member",scope:"global"},{comment:`/**
 * Sets the color of the hap in visualizations like pianoroll or highlighting.
 * @name color
 * @synonyms colour
 * @param {string} color Hexadecimal or CSS color name
 */`,meta:{filename:"controls.mjs",lineno:1556,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Sets the color of the hap in visualizations like pianoroll or highlighting.</p>",name:"color",synonyms_text:"colour",synonyms:["colour"],params:[{type:{names:["string"]},description:"<p>Hexadecimal or CSS color name</p>",name:"color"}],longname:"color",kind:"member",scope:"global"},{comment:`/**
 * ADSR envelope: Combination of Attack, Decay, Sustain, and Release.
 *
 * @name adsr
 * @param {number | Pattern} time attack time in seconds
 * @param {number | Pattern} time decay time in seconds
 * @param {number | Pattern} gain sustain level (0 to 1)
 * @param {number | Pattern} time release time in seconds
 * @example
 * note("[c3 bb2 f3 eb3]*2").sound("sawtooth").lpf(600).adsr(".1:.1:.5:.2")
 */`,meta:{filename:"controls.mjs",lineno:1569,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>ADSR envelope: Combination of Attack, Decay, Sustain, and Release.</p>",name:"adsr",params:[{type:{names:["number","Pattern"]},description:"<p>attack time in seconds</p>",name:"time"},{type:{names:["number","Pattern"]},description:"<p>decay time in seconds</p>",name:"time"},{type:{names:["number","Pattern"]},description:"<p>sustain level (0 to 1)</p>",name:"gain"},{type:{names:["number","Pattern"]},description:"<p>release time in seconds</p>",name:"time"}],examples:['note("[c3 bb2 f3 eb3]*2").sound("sawtooth").lpf(600).adsr(".1:.1:.5:.2")'],longname:"adsr",kind:"member",scope:"global"},{comment:`/**
 * Intended for a debugging, drawLine renders the pattern as a string, where each character represents the same time span.
 * Should only be used with single characters as values, otherwise the character slots will be messed up.
 * Character legend:
 *
 * - "|" cycle separator
 * - "-" hold previous value
 * - "." silence
 *
 * @param {Pattern} pattern the pattern to use
 * @param {number} chars max number of characters (approximately)
 * @returns string
 * @example
 * const line = drawLine("0 [1 2 3]", 10); // |0--123|0--123
 * console.log(line);
 * silence;
 */`,meta:{range:[1426,2796],filename:"drawLine.mjs",lineno:26,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100010638",name:"drawLine",type:"FunctionDeclaration",paramnames:["pat","chars"]},vars:{cycle:"drawLine~cycle",pos:"drawLine~pos",lines:"drawLine~lines",emptyLine:"drawLine~emptyLine",haps:"drawLine~haps",durations:"drawLine~durations","":null,charFraction:"drawLine~charFraction",totalSlots:"drawLine~totalSlots",i:"drawLine~i",undefined:null,matches:"drawLine~matches",missingLines:"drawLine~missingLines"}},description:`<p>Intended for a debugging, drawLine renders the pattern as a string, where each character represents the same time span.
Should only be used with single characters as values, otherwise the character slots will be messed up.
Character legend:</p>
<ul>
<li>&quot;|&quot; cycle separator</li>
<li>&quot;-&quot; hold previous value</li>
<li>&quot;.&quot; silence</li>
</ul>`,params:[{type:{names:["Pattern"]},description:"<p>the pattern to use</p>",name:"pattern"},{type:{names:["number"]},description:"<p>max number of characters (approximately)</p>",name:"chars"}],returns:[{description:"<p>string</p>"}],examples:[`const line = drawLine("0 [1 2 3]", 10); // |0--123|0--123
console.log(line);
silence;`],name:"drawLine",longname:"drawLine",kind:"function",scope:"global"},{comment:`/**
 * Changes the structure of the pattern to form an euclidean rhythm.
 * Euclidian rhythms are rhythms obtained using the greatest common
 * divisor of two numbers.  They were described in 2004 by Godfried
 * Toussaint, a canadian computer scientist.  Euclidian rhythms are
 * really useful for computer/algorithmic music because they can
 * describe a large number of rhythms with a couple of numbers.
 *
 * @memberof Pattern
 * @name euclid
 * @param {number} pulses the number of onsets / beats
 * @param {number} steps the number of steps to fill
 * @returns Pattern
 * @example
 * // The Cuban tresillo pattern.
 * note("c3").euclid(3,8)
 */`,meta:{filename:"euclid.mjs",lineno:57,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Changes the structure of the pattern to form an euclidean rhythm.
Euclidian rhythms are rhythms obtained using the greatest common
divisor of two numbers.  They were described in 2004 by Godfried
Toussaint, a canadian computer scientist.  Euclidian rhythms are
really useful for computer/algorithmic music because they can
describe a large number of rhythms with a couple of numbers.</p>`,memberof:"Pattern",name:"euclid",params:[{type:{names:["number"]},description:"<p>the number of onsets / beats</p>",name:"pulses"},{type:{names:["number"]},description:"<p>the number of steps to fill</p>",name:"steps"}],returns:[{description:"<p>Pattern</p>"}],examples:[`// The Cuban tresillo pattern.
note("c3").euclid(3,8)`],scope:"static",longname:"Pattern.euclid",kind:"member"},{comment:`/**
 * Like \`euclid\`, but has an additional parameter for 'rotating' the resulting sequence.
 * @memberof Pattern
 * @name euclidRot
 * @param {number} pulses the number of onsets / beats
 * @param {number} steps the number of steps to fill
 * @param {number} rotation offset in steps
 * @returns Pattern
 * @example
 * // A Samba rhythm necklace from Brazil
 * note("c3").euclidRot(3,16,14)
 */`,meta:{filename:"euclid.mjs",lineno:75,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Like <code>euclid</code>, but has an additional parameter for 'rotating' the resulting sequence.</p>",memberof:"Pattern",name:"euclidRot",params:[{type:{names:["number"]},description:"<p>the number of onsets / beats</p>",name:"pulses"},{type:{names:["number"]},description:"<p>the number of steps to fill</p>",name:"steps"},{type:{names:["number"]},description:"<p>offset in steps</p>",name:"rotation"}],returns:[{description:"<p>Pattern</p>"}],examples:[`// A Samba rhythm necklace from Brazil
note("c3").euclidRot(3,16,14)`],scope:"static",longname:"Pattern.euclidRot",kind:"member"},{comment:`/**
 * @example // A thirteenth century Persian rhythm called Khafif-e-ramal.
 * note("c3").euclid(2,5)
 * @example // The archetypal pattern of the Cumbia from Colombia, as well as a Calypso rhythm from Trinidad.
 * note("c3").euclid(3,4)
 * @example // Another thirteenth century Persian rhythm by the name of Khafif-e-ramal, as well as a Rumanian folk-dance rhythm.
 * note("c3").euclidRot(3,5,2)
 * @example // A Ruchenitza rhythm used in a Bulgarian folk-dance.
 * note("c3").euclid(3,7)
 * @example // The Cuban tresillo pattern.
 * note("c3").euclid(3,8)
 * @example // Another Ruchenitza Bulgarian folk-dance rhythm.
 * note("c3").euclid(4,7)
 * @example // The Aksak rhythm of Turkey.
 * note("c3").euclid(4,9)
 * @example // The metric pattern used by Frank Zappa in his piece titled Outside Now.
 * note("c3").euclid(4,11)
 * @example // Yields the York-Samai pattern, a popular Arab rhythm.
 * note("c3").euclid(5,6)
 * @example // The Nawakhat pattern, another popular Arab rhythm.
 * note("c3").euclid(5,7)
 * @example // The Cuban cinquillo pattern.
 * note("c3").euclid(5,8)
 * @example // A popular Arab rhythm called Agsag-Samai.
 * note("c3").euclid(5,9)
 * @example // The metric pattern used by Moussorgsky in Pictures at an Exhibition.
 * note("c3").euclid(5,11)
 * @example // The Venda clapping pattern of a South African children’s song.
 * note("c3").euclid(5,12)
 * @example // The Bossa-Nova rhythm necklace of Brazil.
 * note("c3").euclid(5,16)
 * @example // A typical rhythm played on the Bendir (frame drum).
 * note("c3").euclid(7,8)
 * @example // A common West African bell pattern.
 * note("c3").euclid(7,12)
 * @example // A Samba rhythm necklace from Brazil.
 * note("c3").euclidRot(7,16,14)
 * @example // A rhythm necklace used in the Central African Republic.
 * note("c3").euclid(9,16)
 * @example // A rhythm necklace of the Aka Pygmies of Central Africa.
 * note("c3").euclidRot(11,24,14)
 * @example // Another rhythm necklace of the Aka Pygmies of the upper Sangha.
 * note("c3").euclidRot(13,24,5)
 */`,meta:{range:[5273,5425],filename:"euclid.mjs",lineno:133,columnno:6,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100011142",name:"_euclidRot",type:"FunctionExpression"},vars:{b:"_euclidRot~b"}},examples:[`// A thirteenth century Persian rhythm called Khafif-e-ramal.
note("c3").euclid(2,5)`,`// The archetypal pattern of the Cumbia from Colombia, as well as a Calypso rhythm from Trinidad.
note("c3").euclid(3,4)`,`// Another thirteenth century Persian rhythm by the name of Khafif-e-ramal, as well as a Rumanian folk-dance rhythm.
note("c3").euclidRot(3,5,2)`,`// A Ruchenitza rhythm used in a Bulgarian folk-dance.
note("c3").euclid(3,7)`,`// The Cuban tresillo pattern.
note("c3").euclid(3,8)`,`// Another Ruchenitza Bulgarian folk-dance rhythm.
note("c3").euclid(4,7)`,`// The Aksak rhythm of Turkey.
note("c3").euclid(4,9)`,`// The metric pattern used by Frank Zappa in his piece titled Outside Now.
note("c3").euclid(4,11)`,`// Yields the York-Samai pattern, a popular Arab rhythm.
note("c3").euclid(5,6)`,`// The Nawakhat pattern, another popular Arab rhythm.
note("c3").euclid(5,7)`,`// The Cuban cinquillo pattern.
note("c3").euclid(5,8)`,`// A popular Arab rhythm called Agsag-Samai.
note("c3").euclid(5,9)`,`// The metric pattern used by Moussorgsky in Pictures at an Exhibition.
note("c3").euclid(5,11)`,`// The Venda clapping pattern of a South African children’s song.
note("c3").euclid(5,12)`,`// The Bossa-Nova rhythm necklace of Brazil.
note("c3").euclid(5,16)`,`// A typical rhythm played on the Bendir (frame drum).
note("c3").euclid(7,8)`,`// A common West African bell pattern.
note("c3").euclid(7,12)`,`// A Samba rhythm necklace from Brazil.
note("c3").euclidRot(7,16,14)`,`// A rhythm necklace used in the Central African Republic.
note("c3").euclid(9,16)`,`// A rhythm necklace of the Aka Pygmies of Central Africa.
note("c3").euclidRot(11,24,14)`,`// Another rhythm necklace of the Aka Pygmies of the upper Sangha.
note("c3").euclidRot(13,24,5)`],name:"_euclidRot",longname:"_euclidRot",kind:"function",scope:"global",params:[]},{comment:`/**
 * Similar to \`euclid\`, but each pulse is held until the next pulse,
 * so there will be no gaps.
 * @name euclidLegato
 * @memberof Pattern
 * @param {number} pulses the number of onsets / beats
 * @param {number} steps the number of steps to fill
 * @example
 * note("c3").euclidLegato(3,8)
 */`,meta:{filename:"euclid.mjs",lineno:149,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Similar to <code>euclid</code>, but each pulse is held until the next pulse,
so there will be no gaps.</p>`,name:"euclidLegato",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>the number of onsets / beats</p>",name:"pulses"},{type:{names:["number"]},description:"<p>the number of steps to fill</p>",name:"steps"}],examples:['note("c3").euclidLegato(3,8)'],scope:"static",longname:"Pattern.euclidLegato",kind:"member"},{comment:`/**
 * Similar to \`euclid\`, but each pulse is held until the next pulse,
 * so there will be no gaps, and has an additional parameter for 'rotating'
 * the resulting sequence
 * @name euclidLegatoRot
 * @memberof Pattern
 * @param {number} pulses the number of onsets / beats
 * @param {number} steps the number of steps to fill
 * @param {number} rotation offset in steps
 * @example
 * note("c3").euclidLegatoRot(3,5,2)
 */`,meta:{filename:"euclid.mjs",lineno:177,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Similar to <code>euclid</code>, but each pulse is held until the next pulse,
so there will be no gaps, and has an additional parameter for 'rotating'
the resulting sequence</p>`,name:"euclidLegatoRot",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>the number of onsets / beats</p>",name:"pulses"},{type:{names:["number"]},description:"<p>the number of steps to fill</p>",name:"steps"},{type:{names:["number"]},description:"<p>offset in steps</p>",name:"rotation"}],examples:['note("c3").euclidLegatoRot(3,5,2)'],scope:"static",longname:"Pattern.euclidLegatoRot",kind:"member"},{comment:"/** @class Class representing a pattern. */",meta:{range:[1674,26574],filename:"pattern.mjs",lineno:42,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100013715",name:"exports.Pattern",type:"ClassDeclaration"}},name:"Pattern",longname:"Pattern",kind:"class",classdesc:"<p>Class representing a pattern.</p>",scope:"global",description:"<p>Create a pattern. As an end user, you will most likely not create a Pattern directly.</p>",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],memberof:"Pattern",params:[{type:{names:["function"]},description:"<p>The function that maps a <code>State</code> to an array of <code>Hap</code>.</p>",name:"query"}]},{comment:`/**
   * Returns a new pattern, with the function applied to the value of
   * each hap. It has the alias \`fmap\`.
   * @synonyms fmap
   * @param {Function} func to to apply to the value
   * @returns Pattern
   * @example
   * "0 1 2".withValue(v => v + 10).log()
   */`,meta:{range:[2994,3163],filename:"pattern.mjs",lineno:91,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100013823",name:"Pattern#withValue",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:`<p>Returns a new pattern, with the function applied to the value of
each hap. It has the alias <code>fmap</code>.</p>`,synonyms_text:"fmap",synonyms:["fmap"],params:[{type:{names:["function"]},description:"<p>to to apply to the value</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],examples:['"0 1 2".withValue(v => v + 10).log()'],name:"withValue",longname:"Pattern#withValue",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * see \`withValue\`
   * @noAutocomplete
   */`,meta:{range:[3221,3270],filename:"pattern.mjs",lineno:101,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100013860",name:"Pattern#fmap",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:"<p>see <code>withValue</code></p>",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"fmap",longname:"Pattern#fmap",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Assumes 'this' is a pattern of functions, and given a function to
   * resolve wholes, applies a given pattern of values to that
   * pattern of functions.
   * @param {Function} whole_func
   * @param {Function} func
   * @noAutocomplete
   * @returns Pattern
   */`,meta:{range:[3552,4294],filename:"pattern.mjs",lineno:114,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100013871",name:"Pattern#appWhole",type:"MethodDefinition",paramnames:["whole_func","pat_val"]},vars:{"":null}},description:`<p>Assumes 'this' is a pattern of functions, and given a function to
resolve wholes, applies a given pattern of values to that
pattern of functions.</p>`,params:[{type:{names:["function"]},name:"whole_func"},{type:{names:["function"]},name:"func"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],returns:[{description:"<p>Pattern</p>"}],name:"appWhole",longname:"Pattern#appWhole",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * When this method is called on a pattern of functions, it matches its haps
   * with those in the given pattern of values.  A new pattern is returned, with
   * each matching value applied to the corresponding function.
   *
   * In this \`_appBoth\` variant, where timespans of the function and value haps
   * are not the same but do intersect, the resulting hap has a timespan of the
   * intersection. This applies to both the part and the whole timespan.
   * @param {Pattern} pat_val
   * @noAutocomplete
   * @returns Pattern
   */`,meta:{range:[4845,5270],filename:"pattern.mjs",lineno:150,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100013978",name:"Pattern#appBoth",type:"MethodDefinition",paramnames:["pat_val"]},vars:{"":null}},description:`<p>When this method is called on a pattern of functions, it matches its haps
with those in the given pattern of values.  A new pattern is returned, with
each matching value applied to the corresponding function.</p>
<p>In this <code>_appBoth</code> variant, where timespans of the function and value haps
are not the same but do intersect, the resulting hap has a timespan of the
intersection. This applies to both the part and the whole timespan.</p>`,params:[{type:{names:["Pattern"]},name:"pat_val"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],returns:[{description:"<p>Pattern</p>"}],name:"appBoth",longname:"Pattern#appBoth",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * As with \`appBoth\`, but the \`whole\` timespan is not the intersection,
   * but the timespan from the function of patterns that this method is called
   * on. In practice, this means that the pattern structure, including onsets,
   * are preserved from the pattern of functions (often referred to as the left
   * hand or inner pattern).
   * @param {Pattern} pat_val
   * @noAutocomplete
   * @returns Pattern
   */`,meta:{range:[5700,6504],filename:"pattern.mjs",lineno:177,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014038",name:"Pattern#appLeft",type:"MethodDefinition",paramnames:["pat_val"]},vars:{"":null}},description:`<p>As with <code>appBoth</code>, but the <code>whole</code> timespan is not the intersection,
but the timespan from the function of patterns that this method is called
on. In practice, this means that the pattern structure, including onsets,
are preserved from the pattern of functions (often referred to as the left
hand or inner pattern).</p>`,params:[{type:{names:["Pattern"]},name:"pat_val"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],returns:[{description:"<p>Pattern</p>"}],name:"appLeft",longname:"Pattern#appLeft",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * As with \`appLeft\`, but \`whole\` timespans are instead taken from the
   * pattern of values, i.e. structure is preserved from the right hand/outer
   * pattern.
   * @param {Pattern} pat_val
   * @noAutocomplete
   * @returns Pattern
   */`,meta:{range:[6758,7566],filename:"pattern.mjs",lineno:210,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014160",name:"Pattern#appRight",type:"MethodDefinition",paramnames:["pat_val"]},vars:{"":null}},description:`<p>As with <code>appLeft</code>, but <code>whole</code> timespans are instead taken from the
pattern of values, i.e. structure is preserved from the right hand/outer
pattern.</p>`,params:[{type:{names:["Pattern"]},name:"pat_val"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],returns:[{description:"<p>Pattern</p>"}],name:"appRight",longname:"Pattern#appRight",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Query haps inside the given time span.
   *
   * @param {Fraction | number} begin from time
   * @param {Fraction | number} end to time
   * @returns Hap[]
   * @example
   * const pattern = sequence('a', ['b', 'c'])
   * const haps = pattern.queryArc(0, 1)
   * console.log(haps)
   * silence
   * @noAutocomplete
   */`,meta:{range:[13012,13228],filename:"pattern.mjs",lineno:397,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014796",name:"Pattern#queryArc",type:"MethodDefinition",paramnames:["begin","end","controls"]},vars:{"":null}},description:"<p>Query haps inside the given time span.</p>",params:[{type:{names:["Fraction","number"]},description:"<p>from time</p>",name:"begin"},{type:{names:["Fraction","number"]},description:"<p>to time</p>",name:"end"}],returns:[{description:"<p>Hap[]</p>"}],examples:[`const pattern = sequence('a', ['b', 'c'])
const haps = pattern.queryArc(0, 1)
console.log(haps)
silence`],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"queryArc",longname:"Pattern#queryArc",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new pattern, with queries split at cycle boundaries. This makes
   * some calculations easier to express, as all haps are then constrained to
   * happen within a cycle.
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[13472,13672],filename:"pattern.mjs",lineno:413,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014832",name:"Pattern#splitQueries",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:`<p>Returns a new pattern, with queries split at cycle boundaries. This makes
some calculations easier to express, as all haps are then constrained to
happen within a cycle.</p>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"splitQueries",longname:"Pattern#splitQueries",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Returns a new pattern, where the given function is applied to the query
   * timespan before passing it to the original pattern.
   * @param {Function} func the function to apply
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[13915,14009],filename:"pattern.mjs",lineno:428,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014872",name:"Pattern#withQuerySpan",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:`<p>Returns a new pattern, where the given function is applied to the query
timespan before passing it to the original pattern.</p>`,params:[{type:{names:["function"]},description:"<p>the function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withQuerySpan",longname:"Pattern#withQuerySpan",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * As with \`withQuerySpan\`, but the function is applied to both the
   * begin and end time of the query timespan.
   * @param {Function} func the function to apply
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[14469,14588],filename:"pattern.mjs",lineno:450,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014928",name:"Pattern#withQueryTime",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:`<p>As with <code>withQuerySpan</code>, but the function is applied to both the
begin and end time of the query timespan.</p>`,params:[{type:{names:["function"]},description:"<p>the function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withQueryTime",longname:"Pattern#withQueryTime",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Similar to \`withQuerySpan\`, but the function is applied to the timespans
   * of all haps returned by pattern queries (both \`part\` timespans, and where
   * present, \`whole\` timespans).
   * @param {Function} func
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[14866,14976],filename:"pattern.mjs",lineno:462,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014953",name:"Pattern#withHapSpan",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:`<p>Similar to <code>withQuerySpan</code>, but the function is applied to the timespans
of all haps returned by pattern queries (both <code>part</code> timespans, and where
present, <code>whole</code> timespans).</p>`,params:[{type:{names:["function"]},name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withHapSpan",longname:"Pattern#withHapSpan",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * As with \`withHapSpan\`, but the function is applied to both the
   * begin and end time of the hap timespans.
   * @param {Function} func the function to apply
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[15199,15282],filename:"pattern.mjs",lineno:473,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014978",name:"Pattern#withHapTime",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:`<p>As with <code>withHapSpan</code>, but the function is applied to both the
begin and end time of the hap timespans.</p>`,params:[{type:{names:["function"]},description:"<p>the function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withHapTime",longname:"Pattern#withHapTime",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new pattern with the given function applied to the list of haps returned by every query.
   * @param {Function} func
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[15473,15620],filename:"pattern.mjs",lineno:483,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100014995",name:"Pattern#withHaps",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:"<p>Returns a new pattern with the given function applied to the list of haps returned by every query.</p>",params:[{type:{names:["function"]},name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withHaps",longname:"Pattern#withHaps",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * As with \`withHaps\`, but applies the function to every hap, rather than every list of haps.
   * @param {Function} func
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[15803,15874],filename:"pattern.mjs",lineno:495,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015025",name:"Pattern#withHap",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:"<p>As with <code>withHaps</code>, but applies the function to every hap, rather than every list of haps.</p>",params:[{type:{names:["function"]},name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withHap",longname:"Pattern#withHap",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new pattern with the context field set to every hap set to the given value.
   * @param {*} context
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[16048,16132],filename:"pattern.mjs",lineno:505,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015042",name:"Pattern#setContext",type:"MethodDefinition",paramnames:["context"]},vars:{"":null}},description:"<p>Returns a new pattern with the context field set to every hap set to the given value.</p>",params:[{type:{names:["*"]},name:"context"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"setContext",longname:"Pattern#setContext",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new pattern with the given function applied to the context field of every hap.
   * @param {Function} func
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[16313,16553],filename:"pattern.mjs",lineno:515,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015059",name:"Pattern#withContext",type:"MethodDefinition",paramnames:["func"]},vars:{"":null}},description:"<p>Returns a new pattern with the given function applied to the context field of every hap.</p>",params:[{type:{names:["function"]},name:"func"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withContext",longname:"Pattern#withContext",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new pattern with the context field of every hap set to an empty object.
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[16699,16773],filename:"pattern.mjs",lineno:529,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015107",name:"Pattern#stripContext",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:"<p>Returns a new pattern with the context field of every hap set to an empty object.</p>",returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"stripContext",longname:"Pattern#stripContext",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Returns a new pattern with the given location information added to the
   * context of every hap.
   * @param {Number} start start offset
   * @param {Number} end end offset
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[17011,17378],filename:"pattern.mjs",lineno:541,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015123",name:"Pattern#withLoc",type:"MethodDefinition",paramnames:["start","end"]},vars:{"":null}},description:`<p>Returns a new pattern with the given location information added to the
context of every hap.</p>`,params:[{type:{names:["Number"]},description:"<p>start offset</p>",name:"start"},{type:{names:["Number"]},description:"<p>end offset</p>",name:"end"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"withLoc",longname:"Pattern#withLoc",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new Pattern, which only returns haps that meet the given test.
   * @param {Function} hap_test - a function which returns false for haps to be removed from the pattern
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[17620,17717],filename:"pattern.mjs",lineno:563,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015187",name:"Pattern#filterHaps",type:"MethodDefinition",paramnames:["hap_test"]},vars:{"":null}},description:"<p>Returns a new Pattern, which only returns haps that meet the given test.</p>",params:[{type:{names:["function"]},description:"<p>a function which returns false for haps to be removed from the pattern</p>",name:"hap_test"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"filterHaps",longname:"Pattern#filterHaps",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * As with \`filterHaps\`, but the function is applied to values
   * inside haps.
   * @param {Function} value_test
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[17893,18039],filename:"pattern.mjs",lineno:574,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015206",name:"Pattern#filterValues",type:"MethodDefinition",paramnames:["value_test"]},vars:{"":null}},description:`<p>As with <code>filterHaps</code>, but the function is applied to values
inside haps.</p>`,params:[{type:{names:["function"]},name:"value_test"}],returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"filterValues",longname:"Pattern#filterValues",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns a new pattern, with haps containing undefined values removed from
   * query results.
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[18197,18278],filename:"pattern.mjs",lineno:584,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015237",name:"Pattern#removeUndefineds",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:`<p>Returns a new pattern, with haps containing undefined values removed from
query results.</p>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"removeUndefineds",longname:"Pattern#removeUndefineds",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Returns a new pattern, with all haps without onsets filtered out. A hap
   * with an onset is one with a \`whole\` timespan that begins at the same time
   * as its \`part\` timespan.
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[18522,18787],filename:"pattern.mjs",lineno:595,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015251",name:"Pattern#onsetsOnly",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:`<p>Returns a new pattern, with all haps without onsets filtered out. A hap
with an onset is one with a <code>whole</code> timespan that begins at the same time
as its <code>part</code> timespan.</p>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"onsetsOnly",longname:"Pattern#onsetsOnly",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Returns a new pattern, with 'continuous' haps (those without 'whole'
   * timespans) removed from query results.
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[18964,19098],filename:"pattern.mjs",lineno:608,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015266",name:"Pattern#discreteOnly",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:`<p>Returns a new pattern, with 'continuous' haps (those without 'whole'
timespans) removed from query results.</p>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"discreteOnly",longname:"Pattern#discreteOnly",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Combines adjacent haps with the same value and whole.  Only
   * intended for use in tests.
   * @noAutocomplete
   */`,meta:{range:[19232,20677],filename:"pattern.mjs",lineno:618,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015280",name:"Pattern#defragmentHaps",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:`<p>Combines adjacent haps with the same value and whole.  Only
intended for use in tests.</p>`,tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"defragmentHaps",longname:"Pattern#defragmentHaps",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Queries the pattern for the first cycle, returning Haps. Mainly of use when
   * debugging a pattern.
   * @param {Boolean} with_context - set to true, otherwise the context field
   * will be stripped from the resulting haps.
   * @returns [Hap]
   * @noAutocomplete
   */`,meta:{range:[20966,21164],filename:"pattern.mjs",lineno:673,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015511",name:"Pattern#firstCycle",type:"MethodDefinition",paramnames:["with_context"]},vars:{"":null}},description:`<p>Queries the pattern for the first cycle, returning Haps. Mainly of use when
debugging a pattern.</p>`,params:[{type:{names:["Boolean"]},description:`<p>set to true, otherwise the context field
will be stripped from the resulting haps.</p>`,name:"with_context",defaultvalue:!1}],returns:[{description:"<p>[Hap]</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"firstCycle",longname:"Pattern#firstCycle",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Accessor for a list of values returned by querying the first cycle.
   * @noAutocomplete
   */`,meta:{range:[21274,21356],filename:"pattern.mjs",lineno:685,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015548",name:"Pattern#firstCycleValues",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:"<p>Accessor for a list of values returned by querying the first cycle.</p>",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"firstCycleValues",longname:"Pattern#firstCycleValues",kind:"member",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * More human-readable version of the \`firstCycleValues\` accessor.
   * @noAutocomplete
   */`,meta:{range:[21462,21625],filename:"pattern.mjs",lineno:693,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015565",name:"Pattern#showFirstCycle",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:"<p>More human-readable version of the <code>firstCycleValues</code> accessor.</p>",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"showFirstCycle",longname:"Pattern#showFirstCycle",kind:"member",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Returns a new pattern, which returns haps sorted in temporal order. Mainly
   * of use when comparing two patterns for equality, in tests.
   * @returns Pattern
   * @noAutocomplete
   */`,meta:{range:[21828,22101],filename:"pattern.mjs",lineno:705,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100015603",name:"Pattern#sortHapsByPart",type:"MethodDefinition",paramnames:[]},vars:{"":null}},description:`<p>Returns a new pattern, which returns haps sorted in temporal order. Mainly
of use when comparing two patterns for equality, in tests.</p>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"sortHapsByPart",longname:"Pattern#sortHapsByPart",kind:"function",memberof:"Pattern",scope:"instance",params:[]},{comment:`/**
   * Layers the result of the given function(s). Like \`superimpose\`, but without the original pattern:
   * @name layer
   * @memberof Pattern
   * @synonyms apply
   * @returns Pattern
   * @example
   * "<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8"
   *   .layer(x=>x.add("0,2"))
   *   .scale('C minor').note()
   */`,meta:{filename:"pattern.mjs",lineno:759,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Layers the result of the given function(s). Like <code>superimpose</code>, but without the original pattern:</p>",name:"layer",memberof:"Pattern",synonyms_text:"apply",synonyms:["apply"],returns:[{description:"<p>Pattern</p>"}],examples:[`"<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8"
  .layer(x=>x.add("0,2"))
  .scale('C minor').note()`],scope:"static",longname:"Pattern.layer",kind:"member"},{comment:`/**
   * Superimposes the result of the given function(s) on top of the original pattern:
   * @name superimpose
   * @memberof Pattern
   * @returns Pattern
   * @example
   * "<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8"
   *   .superimpose(x=>x.add(2))
   *   .scale('C minor').note()
   */`,meta:{filename:"pattern.mjs",lineno:774,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Superimposes the result of the given function(s) on top of the original pattern:</p>",name:"superimpose",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`"<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8"
  .superimpose(x=>x.add(2))
  .scale('C minor').note()`],scope:"static",longname:"Pattern.superimpose",kind:"member"},{comment:`/**
   * Stacks the given pattern(s) to the current pattern.
   * @name stack
   * @memberof Pattern
   * @example
   * s("hh*4").stack(
   *   note("c4(5,8)")
   * )
   */`,meta:{filename:"pattern.mjs",lineno:791,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Stacks the given pattern(s) to the current pattern.</p>",name:"stack",memberof:"Pattern",examples:[`s("hh*4").stack(
  note("c4(5,8)")
)`],scope:"static",longname:"Pattern.stack",kind:"member"},{comment:`/**
   * Appends the given pattern(s) to the current pattern.
   * @name seq
   * @memberof Pattern
   * @synonyms sequence, fastcat
   * @example
   * s("hh*4").seq(
   *   note("c4(5,8)")
   * )
   */`,meta:{filename:"pattern.mjs",lineno:808,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Appends the given pattern(s) to the current pattern.</p>",name:"seq",memberof:"Pattern",synonyms_text:"sequence, fastcat",synonyms:["sequence","fastcat"],examples:[`s("hh*4").seq(
  note("c4(5,8)")
)`],scope:"static",longname:"Pattern.seq",kind:"member"},{comment:`/**
   * Appends the given pattern(s) to the next cycle.
   * @name cat
   * @memberof Pattern
   * @synonyms slowcat
   * @example
   * s("hh*4").cat(
   *   note("c4(5,8)")
   * )
   */`,meta:{filename:"pattern.mjs",lineno:822,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Appends the given pattern(s) to the next cycle.</p>",name:"cat",memberof:"Pattern",synonyms_text:"slowcat",synonyms:["slowcat"],examples:[`s("hh*4").cat(
  note("c4(5,8)")
)`],scope:"static",longname:"Pattern.cat",kind:"member"},{comment:`/**
 * Selects indices in in stacked notes.
 * @example
 * note("<[c,eb,g]!2 [c,f,ab] [d,f,ab]>")
 * .arpWith(haps => haps[2])
 * */`,meta:{range:[27544,27754],filename:"pattern.mjs",lineno:916,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100016224",name:"Pattern.prototype.arpWith",type:"FunctionExpression",paramnames:["func"]},vars:{"":null}},description:"<p>Selects indices in in stacked notes.</p>",examples:[`note("<[c,eb,g]!2 [c,f,ab] [d,f,ab]>")
.arpWith(haps => haps[2])`],name:"arpWith",longname:"Pattern#arpWith",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * Selects indices in in stacked notes.
 * @example
 * note("<[c,eb,g]!2 [c,f,ab] [d,f,ab]>")
 * .arp("0 [0,2] 1 [0,2]")
 * */`,meta:{range:[27888,28003],filename:"pattern.mjs",lineno:929,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100016277",name:"Pattern.prototype.arp",type:"FunctionExpression",paramnames:["pat"]},vars:{"":null}},description:"<p>Selects indices in in stacked notes.</p>",examples:[`note("<[c,eb,g]!2 [c,f,ab] [d,f,ab]>")
.arp("0 [0,2] 1 [0,2]")`],name:"arp",longname:"Pattern#arp",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
     *
     * Assumes a pattern of numbers. Adds the given number to each item in the pattern.
     * @name add
     * @memberof Pattern
     * @example
     * // Here, the triad 0, 2, 4 is shifted by different amounts
     * n("0 2 4".add("<0 3 4 0>")).scale("C:major")
     * // Without add, the equivalent would be:
     * // n("<[0 2 4] [3 5 7] [4 6 8] [0 2 4]>").scale("C:major")
     * @example
     * // You can also use add with notes:
     * note("c3 e3 g3".add("<0 5 7 0>"))
     * // Behind the scenes, the notes are converted to midi numbers:
     * // note("48 52 55".add("<0 5 7 0>"))
     */`,meta:{filename:"pattern.mjs",lineno:990,columnno:4,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Assumes a pattern of numbers. Adds the given number to each item in the pattern.</p>",name:"add",memberof:"Pattern",examples:[`// Here, the triad 0, 2, 4 is shifted by different amounts
n("0 2 4".add("<0 3 4 0>")).scale("C:major")
// Without add, the equivalent would be:
// n("<[0 2 4] [3 5 7] [4 6 8] [0 2 4]>").scale("C:major")`,`// You can also use add with notes:
note("c3 e3 g3".add("<0 5 7 0>"))
// Behind the scenes, the notes are converted to midi numbers:
// note("48 52 55".add("<0 5 7 0>"))`],scope:"static",longname:"Pattern.add",kind:"member"},{comment:`/**
     *
     * Like add, but the given numbers are subtracted.
     * @name sub
     * @memberof Pattern
     * @example
     * n("0 2 4".sub("<0 1 2 3>")).scale("C4:minor")
     * // See add for more information.
     */`,meta:{filename:"pattern.mjs",lineno:1007,columnno:4,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Like add, but the given numbers are subtracted.</p>",name:"sub",memberof:"Pattern",examples:[`n("0 2 4".sub("<0 1 2 3>")).scale("C4:minor")
// See add for more information.`],scope:"static",longname:"Pattern.sub",kind:"member"},{comment:`/**
     *
     * Multiplies each number by the given factor.
     * @name mul
     * @memberof Pattern
     * @example
     * "<1 1.5 [1.66, <2 2.33>]>*4".mul(150).freq()
     */`,meta:{filename:"pattern.mjs",lineno:1017,columnno:4,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Multiplies each number by the given factor.</p>",name:"mul",memberof:"Pattern",examples:['"<1 1.5 [1.66, <2 2.33>]>*4".mul(150).freq()'],scope:"static",longname:"Pattern.mul",kind:"member"},{comment:`/**
     *
     * Divides each number by the given factor.
     * @name div
     * @memberof Pattern
     */`,meta:{filename:"pattern.mjs",lineno:1026,columnno:4,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Divides each number by the given factor.</p>",name:"div",memberof:"Pattern",scope:"static",longname:"Pattern.div",kind:"member"},{comment:`/**
   * Applies the given structure to the pattern:
   *
   * @example
   * note("c,eb,g")
   *   .struct("x ~ x ~ ~ x ~ x ~ ~ ~ x ~ x ~ ~")
   *   .slow(2)
   */`,meta:{range:[33828,33916],filename:"pattern.mjs",lineno:1121,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100016806",name:"Pattern.prototype.struct",type:"FunctionExpression",paramnames:["args"]}},description:"<p>Applies the given structure to the pattern:</p>",examples:[`note("c,eb,g")
  .struct("x ~ x ~ ~ x ~ x ~ ~ ~ x ~ x ~ ~")
  .slow(2)`],name:"struct",longname:"Pattern#struct",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Returns silence when mask is 0 or "~"
   *
   * @example
   * note("c [eb,g] d [eb,g]").mask("<1 [0 1]>")
   */`,meta:{range:[34136,34221],filename:"pattern.mjs",lineno:1133,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100016846",name:"Pattern.prototype.mask",type:"FunctionExpression",paramnames:["args"]}},description:"<p>Returns silence when mask is 0 or &quot;~&quot;</p>",examples:['note("c [eb,g] d [eb,g]").mask("<1 [0 1]>")'],name:"mask",longname:"Pattern#mask",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Resets the pattern to the start of the cycle for each onset of the reset pattern.
   *
   * @example
   * s("[<bd lt> sd]*2, hh*8").reset("<x@3 x(5,8)>")
   */`,meta:{range:[34486,34575],filename:"pattern.mjs",lineno:1145,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100016886",name:"Pattern.prototype.reset",type:"FunctionExpression",paramnames:["args"]}},description:"<p>Resets the pattern to the start of the cycle for each onset of the reset pattern.</p>",examples:['s("[<bd lt> sd]*2, hh*8").reset("<x@3 x(5,8)>")'],name:"reset",longname:"Pattern#reset",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
   * Restarts the pattern for each onset of the restart pattern.
   * While reset will only reset the current cycle, restart will start from cycle 0.
   *
   * @example
   * s("[<bd lt> sd]*2, hh*8").restart("<x@3 x(5,8)>")
   */`,meta:{range:[34909,35002],filename:"pattern.mjs",lineno:1158,columnno:2,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100016926",name:"Pattern.prototype.restart",type:"FunctionExpression",paramnames:["args"]}},description:`<p>Restarts the pattern for each onset of the restart pattern.
While reset will only reset the current cycle, restart will start from cycle 0.</p>`,examples:['s("[<bd lt> sd]*2, hh*8").restart("<x@3 x(5,8)>")'],name:"restart",longname:"Pattern#restart",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * Does absolutely nothing, but with a given metrical 'tactus'
 * @name gap
 * @param  {number} tactus
 * @example
 * gap(3) // "~@3"
 */`,meta:{filename:"pattern.mjs",lineno:1192,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Does absolutely nothing, but with a given metrical 'tactus'</p>",name:"gap",params:[{type:{names:["number"]},name:"tactus"}],examples:['gap(3) // "~@3"'],longname:"gap",kind:"member",scope:"global"},{comment:`/**
 * Does absolutely nothing..
 * @name silence
 * @example
 * silence // "~"
 */`,meta:{filename:"pattern.mjs",lineno:1201,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Does absolutely nothing..</p>",name:"silence",examples:['silence // "~"'],longname:"silence",kind:"member",scope:"global"},{comment:`/** A discrete value that repeats once per cycle.
 *
 * @returns {Pattern}
 * @example
 * pure('e4') // "e4"
 * @noAutocomplete
 */`,meta:{range:[36257,36514],filename:"pattern.mjs",lineno:1219,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017005",name:"exports.pure",type:"FunctionDeclaration",paramnames:["value"]}},description:"<p>A discrete value that repeats once per cycle.</p>",returns:[{type:{names:["Pattern"]}}],examples:[`pure('e4') // "e4"`],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"pure",longname:"pure",kind:"function",scope:"global"},{comment:`/** The given items are played at the same time at the same length.
 *
 * @return {Pattern}
 * @synonyms polyrhythm, pr
 * @example
 * stack("g3", "b3", ["e4", "d4"]).note()
 * // "g3,b3,[e4,d4]".note()
 */`,meta:{range:[37660,38039],filename:"pattern.mjs",lineno:1263,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017095",name:"exports.stack",type:"FunctionDeclaration",paramnames:["pats"]}},description:"<p>The given items are played at the same time at the same length.</p>",returns:[{type:{names:["Pattern"]}}],synonyms_text:"polyrhythm, pr",synonyms:["polyrhythm","pr"],examples:[`stack("g3", "b3", ["e4", "d4"]).note()
// "g3,b3,[e4,d4]".note()`],name:"stack",longname:"stack",kind:"function",scope:"global"},{comment:`/** Concatenation: combines a list of patterns, switching between them successively, one per cycle:
 *
 * synonyms: \`cat\`
 *
 * @return {Pattern}
 * @example
 * slowcat("e5", "b4", ["d5", "c5"])
 *
 */`,meta:{range:[39720,40774],filename:"pattern.mjs",lineno:1341,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017456",name:"exports.slowcat",type:"FunctionDeclaration",paramnames:["pats"]}},description:`<p>Concatenation: combines a list of patterns, switching between them successively, one per cycle:</p>
<p>synonyms: <code>cat</code></p>`,returns:[{type:{names:["Pattern"]}}],examples:['slowcat("e5", "b4", ["d5", "c5"])'],name:"slowcat",longname:"slowcat",kind:"function",scope:"global"},{comment:`/** Concatenation: combines a list of patterns, switching between them successively, one per cycle. Unlike slowcat, this version will skip cycles.
 * @param {...any} items - The items to concatenate
 * @return {Pattern}
 */`,meta:{range:[41e3,41373],filename:"pattern.mjs",lineno:1371,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017616",name:"exports.slowcatPrime",type:"FunctionDeclaration",paramnames:["pats"]}},description:"<p>Concatenation: combines a list of patterns, switching between them successively, one per cycle. Unlike slowcat, this version will skip cycles.</p>",params:[{type:{names:["any"]},variable:!0,description:"<p>The items to concatenate</p>",name:"items"}],returns:[{type:{names:["Pattern"]}}],name:"slowcatPrime",longname:"slowcatPrime",kind:"function",scope:"global"},{comment:`/** The given items are con**cat**enated, where each one takes one cycle.
 *
 * @param {...any} items - The items to concatenate
 * @synonyms slowcat
 * @return {Pattern}
 * @example
 * cat("e5", "b4", ["d5", "c5"]).note()
 * // "<e5 b4 [d5 c5]>".note()
 *
 */`,meta:{range:[41636,41695],filename:"pattern.mjs",lineno:1391,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017669",name:"exports.cat",type:"FunctionDeclaration",paramnames:["pats"]}},description:"<p>The given items are con<strong>cat</strong>enated, where each one takes one cycle.</p>",params:[{type:{names:["any"]},variable:!0,description:"<p>The items to concatenate</p>",name:"items"}],synonyms_text:"slowcat",synonyms:["slowcat"],returns:[{type:{names:["Pattern"]}}],examples:[`cat("e5", "b4", ["d5", "c5"]).note()
// "<e5 b4 [d5 c5]>".note()`],name:"cat",longname:"cat",kind:"function",scope:"global"},{comment:`/**
 * Allows to arrange multiple patterns together over multiple cycles.
 * Takes a variable number of arrays with two elements specifying the number of cycles and the pattern to use.
 *
 * @return {Pattern}
 * @example
 * arrange(
 *   [4, "<c a f e>(3,8)"],
 *   [2, "<g a>(5,8)"]
 * ).note()
 */`,meta:{range:[41997,42229],filename:"pattern.mjs",lineno:1406,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017680",name:"exports.arrange",type:"FunctionDeclaration",paramnames:["sections"]}},description:`<p>Allows to arrange multiple patterns together over multiple cycles.
Takes a variable number of arrays with two elements specifying the number of cycles and the pattern to use.</p>`,returns:[{type:{names:["Pattern"]}}],examples:[`arrange(
  [4, "<c a f e>(3,8)"],
  [2, "<g a>(5,8)"]
).note()`],name:"arrange",longname:"arrange",kind:"function",scope:"global"},{comment:"/** See `fastcat` */",meta:{range:[42442,42506],filename:"pattern.mjs",lineno:1422,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017765",name:"exports.sequence",type:"FunctionDeclaration",paramnames:["pats"]}},description:"<p>See <code>fastcat</code></p>",name:"sequence",longname:"sequence",kind:"function",scope:"global"},{comment:`/** Like **cat**, but the items are crammed into one cycle.
 * @synonyms fastcat, sequence
 * @example
 * seq("e5", "b4", ["d5", "c5"]).note()
 * // "e5 b4 [d5 c5]".note()
 *
 */`,meta:{range:[42687,42746],filename:"pattern.mjs",lineno:1433,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100017776",name:"exports.seq",type:"FunctionDeclaration",paramnames:["pats"]}},description:"<p>Like <strong>cat</strong>, but the items are crammed into one cycle.</p>",synonyms_text:"fastcat, sequence",synonyms:["fastcat","sequence"],examples:[`seq("e5", "b4", ["d5", "c5"]).note()
// "e5 b4 [d5 c5]".note()`],name:"seq",longname:"seq",kind:"function",scope:"global"},{comment:`/**
 * Registers a new pattern method. The method is added to the Pattern class + the standalone function is returned from register.
 *
 * @param {string} name name of the function
 * @param {function} func function with 1 or more params, where last is the current pattern
 * @noAutocomplete
 *
 */`,meta:{range:[44874,47430],filename:"pattern.mjs",lineno:1489,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100018296",name:"exports.register",type:"FunctionDeclaration",paramnames:["name","func","patternify","preserveTactus","join"]}},description:"<p>Registers a new pattern method. The method is added to the Pattern class + the standalone function is returned from register.</p>",params:[{type:{names:["string"]},description:"<p>name of the function</p>",name:"name"},{type:{names:["function"]},description:"<p>function with 1 or more params, where last is the current pattern</p>",name:"func"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"register",longname:"register",kind:"function",scope:"global"},{comment:`/**
 * Assumes a numerical pattern. Returns a new pattern with all values rounded
 * to the nearest integer.
 * @name round
 * @memberof Pattern
 * @returns Pattern
 * @example
 * n("0.5 1.5 2.5".round()).scale("C:major")
 */`,meta:{filename:"pattern.mjs",lineno:1578,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Assumes a numerical pattern. Returns a new pattern with all values rounded
to the nearest integer.</p>`,name:"round",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['n("0.5 1.5 2.5".round()).scale("C:major")'],scope:"static",longname:"Pattern.round",kind:"member"},{comment:`/**
 * Assumes a numerical pattern. Returns a new pattern with all values set to
 * their mathematical floor. E.g. \`3.7\` replaced with to \`3\`, and \`-4.2\`
 * replaced with \`-5\`.
 * @name floor
 * @memberof Pattern
 * @returns Pattern
 * @example
 * note("42 42.1 42.5 43".floor())
 */`,meta:{filename:"pattern.mjs",lineno:1591,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Assumes a numerical pattern. Returns a new pattern with all values set to
their mathematical floor. E.g. <code>3.7</code> replaced with to <code>3</code>, and <code>-4.2</code>
replaced with <code>-5</code>.</p>`,name:"floor",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['note("42 42.1 42.5 43".floor())'],scope:"static",longname:"Pattern.floor",kind:"member"},{comment:`/**
 * Assumes a numerical pattern. Returns a new pattern with all values set to
 * their mathematical ceiling. E.g. \`3.2\` replaced with \`4\`, and \`-4.2\`
 * replaced with \`-4\`.
 * @name ceil
 * @memberof Pattern
 * @returns Pattern
 * @example
 * note("42 42.1 42.5 43".ceil())
 */`,meta:{filename:"pattern.mjs",lineno:1605,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Assumes a numerical pattern. Returns a new pattern with all values set to
their mathematical ceiling. E.g. <code>3.2</code> replaced with <code>4</code>, and <code>-4.2</code>
replaced with <code>-4</code>.</p>`,name:"ceil",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['note("42 42.1 42.5 43".ceil())'],scope:"static",longname:"Pattern.ceil",kind:"member"},{comment:`/**
 * Assumes a numerical pattern, containing unipolar values in the range 0 ..
 * 1. Returns a new pattern with values scaled to the bipolar range -1 .. 1
 * @returns Pattern
 * @noAutocomplete
 */`,meta:{range:[49077,49181],filename:"pattern.mjs",lineno:1624,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100018795",name:"exports.toBipolar",type:"VariableDeclaration"}},description:`<p>Assumes a numerical pattern, containing unipolar values in the range 0 ..</p>
<ol>
<li>Returns a new pattern with values scaled to the bipolar range -1 .. 1</li>
</ol>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"toBipolar",longname:"toBipolar",kind:"constant",scope:"global"},{comment:`/**
 * Assumes a numerical pattern, containing bipolar values in the range -1 .. 1
 * Returns a new pattern with values scaled to the unipolar range 0 .. 1
 * @returns Pattern
 * @noAutocomplete
 */`,meta:{range:[49382,49492],filename:"pattern.mjs",lineno:1634,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100018817",name:"exports.fromBipolar",type:"VariableDeclaration"}},description:`<p>Assumes a numerical pattern, containing bipolar values in the range -1 .. 1
Returns a new pattern with values scaled to the unipolar range 0 .. 1</p>`,returns:[{description:"<p>Pattern</p>"}],tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"fromBipolar",longname:"fromBipolar",kind:"constant",scope:"global"},{comment:`/**
 * Assumes a numerical pattern, containing unipolar values in the range 0 .. 1.
 * Returns a new pattern with values scaled to the given min/max range.
 * Most useful in combination with continuous patterns.
 * @name range
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("[bd sd]*2,hh*8")
 * .cutoff(sine.range(500,4000))
 */`,meta:{filename:"pattern.mjs",lineno:1638,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Assumes a numerical pattern, containing unipolar values in the range 0 .. 1.
Returns a new pattern with values scaled to the given min/max range.
Most useful in combination with continuous patterns.</p>`,name:"range",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`s("[bd sd]*2,hh*8")
.cutoff(sine.range(500,4000))`],scope:"static",longname:"Pattern.range",kind:"member"},{comment:`/**
 * Assumes a numerical pattern, containing unipolar values in the range 0 .. 1
 * Returns a new pattern with values scaled to the given min/max range,
 * following an exponential curve.
 * @name rangex
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("[bd sd]*2,hh*8")
 * .cutoff(sine.rangex(500,4000))
 */`,meta:{filename:"pattern.mjs",lineno:1653,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Assumes a numerical pattern, containing unipolar values in the range 0 .. 1
Returns a new pattern with values scaled to the given min/max range,
following an exponential curve.</p>`,name:"rangex",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`s("[bd sd]*2,hh*8")
.cutoff(sine.rangex(500,4000))`],scope:"static",longname:"Pattern.rangex",kind:"member"},{comment:`/**
 * Assumes a numerical pattern, containing bipolar values in the range -1 .. 1
 * Returns a new pattern with values scaled to the given min/max range.
 * @name range2
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("[bd sd]*2,hh*8")
 * .cutoff(sine2.range2(500,4000))
 */`,meta:{filename:"pattern.mjs",lineno:1668,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Assumes a numerical pattern, containing bipolar values in the range -1 .. 1
Returns a new pattern with values scaled to the given min/max range.</p>`,name:"range2",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`s("[bd sd]*2,hh*8")
.cutoff(sine2.range2(500,4000))`],scope:"static",longname:"Pattern.range2",kind:"member"},{comment:`/**
 * Allows dividing numbers via list notation using ":".
 * Returns a new pattern with just numbers.
 * @name ratio
 * @memberof Pattern
 * @returns Pattern
 * @example
 * ratio("1, 5:4, 3:2").mul(110)
 * .freq().s("piano")
 */`,meta:{filename:"pattern.mjs",lineno:1682,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Allows dividing numbers via list notation using &quot;:&quot;.
Returns a new pattern with just numbers.</p>`,name:"ratio",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`ratio("1, 5:4, 3:2").mul(110)
.freq().s("piano")`],scope:"static",longname:"Pattern.ratio",kind:"member"},{comment:`/** Compress each cycle into the given timespan, leaving a gap
 * @example
 * cat(
 *   s("bd sd").compress(.25,.75),
 *   s("~ bd sd ~")
 * )
 */`,meta:{range:[51485,51738],filename:"pattern.mjs",lineno:1711,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100018962",name:"exports.compress",type:"VariableDeclaration"}},description:"<p>Compress each cycle into the given timespan, leaving a gap</p>",examples:[`cat(
  s("bd sd").compress(.25,.75),
  s("~ bd sd ~")
)`],name:"compress",longname:"compress",kind:"constant",scope:"global"},{comment:`/**
 * speeds up a pattern like fast, but rather than it playing multiple times as fast would it instead leaves a gap in the remaining space of the cycle. For example, the following will play the sound pattern "bd sn" only once but compressed into the first half of the cycle, i.e. twice as fast.
 * @name fastGap
 * @synonyms fastgap
 * @example
 * s("bd sd").fastGap(2)
 */`,meta:{filename:"pattern.mjs",lineno:1724,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>speeds up a pattern like fast, but rather than it playing multiple times as fast would it instead leaves a gap in the remaining space of the cycle. For example, the following will play the sound pattern &quot;bd sn&quot; only once but compressed into the first half of the cycle, i.e. twice as fast.</p>",name:"fastGap",synonyms_text:"fastgap",synonyms:["fastgap"],examples:['s("bd sd").fastGap(2)'],longname:"fastGap",kind:"member",scope:"global"},{comment:`/**
 * Similar to \`compress\`, but doesn't leave gaps, and the 'focus' can be bigger than a cycle
 * @example
 * s("bd hh sd hh").focus(1/4, 3/4)
 */`,meta:{range:[53629,53798],filename:"pattern.mjs",lineno:1766,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019304",name:"exports.focus",type:"VariableDeclaration"}},description:"<p>Similar to <code>compress</code>, but doesn't leave gaps, and the 'focus' can be bigger than a cycle</p>",examples:['s("bd hh sd hh").focus(1/4, 3/4)'],name:"focus",longname:"focus",kind:"constant",scope:"global"},{comment:`/** The ply function repeats each event the given number of times.
 * @example
 * s("bd ~ sd cp").ply("<1 2 3>")
 */`,meta:{range:[54065,54297],filename:"pattern.mjs",lineno:1780,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019379",name:"exports.ply",type:"VariableDeclaration"}},description:"<p>The ply function repeats each event the given number of times.</p>",examples:['s("bd ~ sd cp").ply("<1 2 3>")'],name:"ply",longname:"ply",kind:"constant",scope:"global"},{comment:`/**
 * Speed up a pattern by the given factor. Used by "*" in mini notation.
 *
 * @name fast
 * @synonyms density
 * @memberof Pattern
 * @param {number | Pattern} factor speed up factor
 * @returns Pattern
 * @example
 * s("bd hh sd hh").fast(2) // s("[bd hh sd hh]*2")
 */`,meta:{filename:"pattern.mjs",lineno:1788,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Speed up a pattern by the given factor. Used by &quot;*&quot; in mini notation.</p>",name:"fast",synonyms_text:"density",synonyms:["density"],memberof:"Pattern",params:[{type:{names:["number","Pattern"]},description:"<p>speed up factor</p>",name:"factor"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("bd hh sd hh").fast(2) // s("[bd hh sd hh]*2")'],scope:"static",longname:"Pattern.fast",kind:"member"},{comment:`/**
 * Both speeds up the pattern (like 'fast') and the sample playback (like 'speed').
 * @example
 * s("bd sd:2").hurry("<1 2 4 3>").slow(1.5)
 */`,meta:{range:[55066,55175],filename:"pattern.mjs",lineno:1818,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019492",name:"exports.hurry",type:"VariableDeclaration"}},description:"<p>Both speeds up the pattern (like 'fast') and the sample playback (like 'speed').</p>",examples:['s("bd sd:2").hurry("<1 2 4 3>").slow(1.5)'],name:"hurry",longname:"hurry",kind:"constant",scope:"global"},{comment:`/**
 * Slow down a pattern over the given number of cycles. Like the "/" operator in mini notation.
 *
 * @name slow
 * @synonyms sparsity
 * @memberof Pattern
 * @param {number | Pattern} factor slow down factor
 * @returns Pattern
 * @example
 * s("bd hh sd hh").slow(2) // s("[bd hh sd hh]/2")
 */`,meta:{filename:"pattern.mjs",lineno:1822,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Slow down a pattern over the given number of cycles. Like the &quot;/&quot; operator in mini notation.</p>",name:"slow",synonyms_text:"sparsity",synonyms:["sparsity"],memberof:"Pattern",params:[{type:{names:["number","Pattern"]},description:"<p>slow down factor</p>",name:"factor"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("bd hh sd hh").slow(2) // s("[bd hh sd hh]/2")'],scope:"static",longname:"Pattern.slow",kind:"member"},{comment:`/**
 * Carries out an operation 'inside' a cycle.
 * @example
 * "0 1 2 3 4 3 2 1".inside(4, rev).scale('C major').note()
 * // "0 1 2 3 4 3 2 1".slow(4).rev().fast(4).scale('C major').note()
 */`,meta:{range:[55860,55977],filename:"pattern.mjs",lineno:1846,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019553",name:"exports.inside",type:"VariableDeclaration"}},description:"<p>Carries out an operation 'inside' a cycle.</p>",examples:[`"0 1 2 3 4 3 2 1".inside(4, rev).scale('C major').note()
// "0 1 2 3 4 3 2 1".slow(4).rev().fast(4).scale('C major').note()`],name:"inside",longname:"inside",kind:"constant",scope:"global"},{comment:`/**
 * Carries out an operation 'outside' a cycle.
 * @example
 * "<[0 1] 2 [3 4] 5>".outside(4, rev).scale('C major').note()
 * // "<[0 1] 2 [3 4] 5>".fast(4).rev().slow(4).scale('C major').note()
 */`,meta:{range:[56181,56300],filename:"pattern.mjs",lineno:1856,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019577",name:"exports.outside",type:"VariableDeclaration"}},description:"<p>Carries out an operation 'outside' a cycle.</p>",examples:[`"<[0 1] 2 [3 4] 5>".outside(4, rev).scale('C major').note()
// "<[0 1] 2 [3 4] 5>".fast(4).rev().slow(4).scale('C major').note()`],name:"outside",longname:"outside",kind:"constant",scope:"global"},{comment:`/**
 * Applies the given function every n cycles, starting from the last cycle.
 * @name lastOf
 * @memberof Pattern
 * @param {number} n how many cycles
 * @param {function} func function to apply
 * @returns Pattern
 * @example
 * note("c3 d3 e3 g3").lastOf(4, x=>x.rev())
 */`,meta:{filename:"pattern.mjs",lineno:1860,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Applies the given function every n cycles, starting from the last cycle.</p>",name:"lastOf",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>how many cycles</p>",name:"n"},{type:{names:["function"]},description:"<p>function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],examples:['note("c3 d3 e3 g3").lastOf(4, x=>x.rev())'],scope:"static",longname:"Pattern.lastOf",kind:"member"},{comment:`/**
 * Applies the given function every n cycles, starting from the first cycle.
 * @name firstOf
 * @memberof Pattern
 * @param {number} n how many cycles
 * @param {function} func function to apply
 * @returns Pattern
 * @example
 * note("c3 d3 e3 g3").firstOf(4, x=>x.rev())
 */`,meta:{filename:"pattern.mjs",lineno:1876,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Applies the given function every n cycles, starting from the first cycle.</p>",name:"firstOf",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>how many cycles</p>",name:"n"},{type:{names:["function"]},description:"<p>function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],examples:['note("c3 d3 e3 g3").firstOf(4, x=>x.rev())'],scope:"static",longname:"Pattern.firstOf",kind:"member"},{comment:`/**
 * An alias for \`firstOf\`
 * @name every
 * @memberof Pattern
 * @param {number} n how many cycles
 * @param {function} func function to apply
 * @returns Pattern
 * @example
 * note("c3 d3 e3 g3").every(4, x=>x.rev())
 */`,meta:{filename:"pattern.mjs",lineno:1887,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>An alias for <code>firstOf</code></p>",name:"every",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>how many cycles</p>",name:"n"},{type:{names:["function"]},description:"<p>function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],examples:['note("c3 d3 e3 g3").every(4, x=>x.rev())'],scope:"static",longname:"Pattern.every",kind:"member"},{comment:`/**
 * Like layer, but with a single function:
 * @name apply
 * @memberof Pattern
 * @example
 * "<c3 eb3 g3>".scale('C minor').apply(scaleTranspose("0,2,4")).note()
 */`,meta:{filename:"pattern.mjs",lineno:1903,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Like layer, but with a single function:</p>",name:"apply",memberof:"Pattern",examples:[`"<c3 eb3 g3>".scale('C minor').apply(scaleTranspose("0,2,4")).note()`],scope:"static",longname:"Pattern.apply",kind:"member"},{comment:`/**
 * Plays the pattern at the given cycles per minute.
 * @example
 * s("<bd sd>,hh*2").cpm(90) // = 90 bpm
 */`,meta:{range:[57929,58023],filename:"pattern.mjs",lineno:1921,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019696",name:"exports.cpm",type:"VariableDeclaration"}},description:"<p>Plays the pattern at the given cycles per minute.</p>",examples:['s("<bd sd>,hh*2").cpm(90) // = 90 bpm'],name:"cpm",longname:"cpm",kind:"constant",scope:"global"},{comment:`/**
 * Nudge a pattern to start earlier in time. Equivalent of Tidal's <~ operator
 *
 * @name early
 * @memberof Pattern
 * @param {number | Pattern} cycles number of cycles to nudge left
 * @returns Pattern
 * @example
 * "bd ~".stack("hh ~".early(.1)).s()
 */`,meta:{filename:"pattern.mjs",lineno:1925,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Nudge a pattern to start earlier in time. Equivalent of Tidal's &lt;~ operator</p>",name:"early",memberof:"Pattern",params:[{type:{names:["number","Pattern"]},description:"<p>number of cycles to nudge left</p>",name:"cycles"}],returns:[{description:"<p>Pattern</p>"}],examples:['"bd ~".stack("hh ~".early(.1)).s()'],scope:"static",longname:"Pattern.early",kind:"member"},{comment:`/**
 * Nudge a pattern to start later in time. Equivalent of Tidal's ~> operator
 *
 * @name late
 * @memberof Pattern
 * @param {number | Pattern} cycles number of cycles to nudge right
 * @returns Pattern
 * @example
 * "bd ~".stack("hh ~".late(.1)).s()
 */`,meta:{filename:"pattern.mjs",lineno:1945,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Nudge a pattern to start later in time. Equivalent of Tidal's ~&gt; operator</p>",name:"late",memberof:"Pattern",params:[{type:{names:["number","Pattern"]},description:"<p>number of cycles to nudge right</p>",name:"cycles"}],returns:[{description:"<p>Pattern</p>"}],examples:['"bd ~".stack("hh ~".late(.1)).s()'],scope:"static",longname:"Pattern.late",kind:"member"},{comment:`/**
 * Plays a portion of a pattern, specified by the beginning and end of a time span. The new resulting pattern is played over the time period of the original pattern:
 *
 * @example
 * s("bd*2 hh*3 [sd bd]*2 perc").zoom(0.25, 0.75)
 * // s("hh*3 [sd bd]*2") // equivalent
 */`,meta:{range:[59209,59631],filename:"pattern.mjs",lineno:1972,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019789",name:"exports.zoom",type:"VariableDeclaration"}},description:"<p>Plays a portion of a pattern, specified by the beginning and end of a time span. The new resulting pattern is played over the time period of the original pattern:</p>",examples:[`s("bd*2 hh*3 [sd bd]*2 perc").zoom(0.25, 0.75)
// s("hh*3 [sd bd]*2") // equivalent`],name:"zoom",longname:"zoom",kind:"constant",scope:"global"},{comment:`/**
 * Selects the given fraction of the pattern and repeats that part to fill the remainder of the cycle.
 * @param {number} fraction fraction to select
 * @example
 * s("lt ht mt cp, [hh oh]*2").linger("<1 .5 .25 .125>")
 */`,meta:{range:[59989,60231],filename:"pattern.mjs",lineno:1997,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019920",name:"exports.linger",type:"VariableDeclaration"}},description:"<p>Selects the given fraction of the pattern and repeats that part to fill the remainder of the cycle.</p>",params:[{type:{names:["number"]},description:"<p>fraction to select</p>",name:"fraction"}],examples:['s("lt ht mt cp, [hh oh]*2").linger("<1 .5 .25 .125>")'],name:"linger",longname:"linger",kind:"constant",scope:"global"},{comment:`/**
 * Samples the pattern at a rate of n events per cycle. Useful for turning a continuous pattern into a discrete one.
 * @param {number} segments number of segments per cycle
 * @example
 * note(saw.range(40,52).segment(24))
 */`,meta:{range:[60465,60595],filename:"pattern.mjs",lineno:2017,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019971",name:"exports.segment",type:"VariableDeclaration"}},description:"<p>Samples the pattern at a rate of n events per cycle. Useful for turning a continuous pattern into a discrete one.</p>",params:[{type:{names:["number"]},description:"<p>number of segments per cycle</p>",name:"segments"}],examples:["note(saw.range(40,52).segment(24))"],name:"segment",longname:"segment",kind:"constant",scope:"global"},{comment:'/**\n * The function `swingBy x n` breaks each cycle into `n` slices, and then delays events in the second half of each slice by the amount `x`, which is relative to the size of the (half) slice. So if `x` is 0 it does nothing, `0.5` delays for half the note duration, and 1 will wrap around to doing nothing again. The end result is a shuffle or swing-like rhythm\n * @param {number} subdivision\n * @param {number} offset\n * @example\n * s("hh*8").swingBy(1/3, 4)\n */',meta:{range:[61063,61165],filename:"pattern.mjs",lineno:2028,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100019998",name:"exports.swingBy",type:"VariableDeclaration"}},description:"<p>The function <code>swingBy x n</code> breaks each cycle into <code>n</code> slices, and then delays events in the second half of each slice by the amount <code>x</code>, which is relative to the size of the (half) slice. So if <code>x</code> is 0 it does nothing, <code>0.5</code> delays for half the note duration, and 1 will wrap around to doing nothing again. The end result is a shuffle or swing-like rhythm</p>",params:[{type:{names:["number"]},name:"subdivision"},{type:{names:["number"]},name:"offset"}],examples:['s("hh*8").swingBy(1/3, 4)'],name:"swingBy",longname:"swingBy",kind:"constant",scope:"global"},{comment:`/**
 * Shorthand for swingBy with 1/3:
 * @param {number} subdivision
 * @example
 * s("hh*8").swing(4)
 * // s("hh*8").swingBy(1/3, 4)
 */`,meta:{range:[61307,61381],filename:"pattern.mjs",lineno:2037,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020022",name:"exports.swing",type:"VariableDeclaration"}},description:"<p>Shorthand for swingBy with 1/3:</p>",params:[{type:{names:["number"]},name:"subdivision"}],examples:[`s("hh*8").swing(4)
// s("hh*8").swingBy(1/3, 4)`],name:"swing",longname:"swing",kind:"constant",scope:"global"},{comment:`/**
 * Swaps 1s and 0s in a binary pattern.
 * @name invert
 * @synonyms inv
 * @example
 * s("bd").struct("1 0 0 1 0 0 1 0".lastOf(4, invert))
 */`,meta:{filename:"pattern.mjs",lineno:2039,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Swaps 1s and 0s in a binary pattern.</p>",name:"invert",synonyms_text:"inv",synonyms:["inv"],examples:['s("bd").struct("1 0 0 1 0 0 1 0".lastOf(4, invert))'],longname:"invert",kind:"member",scope:"global"},{comment:`/**
 * Applies the given function whenever the given pattern is in a true state.
 * @name when
 * @memberof Pattern
 * @param {Pattern} binary_pat
 * @param {function} func
 * @returns Pattern
 * @example
 * "c3 eb3 g3".when("<0 1>/2", x=>x.sub("5")).note()
 */`,meta:{filename:"pattern.mjs",lineno:2056,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Applies the given function whenever the given pattern is in a true state.</p>",name:"when",memberof:"Pattern",params:[{type:{names:["Pattern"]},name:"binary_pat"},{type:{names:["function"]},name:"func"}],returns:[{description:"<p>Pattern</p>"}],examples:['"c3 eb3 g3".when("<0 1>/2", x=>x.sub("5")).note()'],scope:"static",longname:"Pattern.when",kind:"member"},{comment:`/**
 * Superimposes the function result on top of the original pattern, delayed by the given time.
 * @name off
 * @memberof Pattern
 * @param {Pattern | number} time offset time
 * @param {function} func function to apply
 * @returns Pattern
 * @example
 * "c3 eb3 g3".off(1/8, x=>x.add(7)).note()
 */`,meta:{filename:"pattern.mjs",lineno:2070,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Superimposes the function result on top of the original pattern, delayed by the given time.</p>",name:"off",memberof:"Pattern",params:[{type:{names:["Pattern","number"]},description:"<p>offset time</p>",name:"time"},{type:{names:["function"]},description:"<p>function to apply</p>",name:"func"}],returns:[{description:"<p>Pattern</p>"}],examples:['"c3 eb3 g3".off(1/8, x=>x.add(7)).note()'],scope:"static",longname:"Pattern.off",kind:"member"},{comment:`/**
 * Returns a new pattern where every other cycle is played once, twice as
 * fast, and offset in time by one quarter of a cycle. Creates a kind of
 * breakbeat feel.
 * @returns Pattern
 */`,meta:{range:[62691,62829],filename:"pattern.mjs",lineno:2090,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020109",name:"exports.brak",type:"VariableDeclaration"}},description:`<p>Returns a new pattern where every other cycle is played once, twice as
fast, and offset in time by one quarter of a cycle. Creates a kind of
breakbeat feel.</p>`,returns:[{description:"<p>Pattern</p>"}],name:"brak",longname:"brak",kind:"constant",scope:"global"},{comment:`/**
 * Reverse all haps in a pattern
 *
 * @name rev
 * @memberof Pattern
 * @returns Pattern
 * @example
 * note("c d e g").rev()
 */`,meta:{filename:"pattern.mjs",lineno:2094,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Reverse all haps in a pattern</p>",name:"rev",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['note("c d e g").rev()'],scope:"static",longname:"Pattern.rev",kind:"member"},{comment:`/** Like press, but allows you to specify the amount by which each
 * event is shifted. pressBy(0.5) is the same as press, while
 * pressBy(1/3) shifts each event by a third of its timespan.
 * @example
 * stack(s("hh*4"),
 *       s("bd mt sd ht").pressBy("<0 0.5 0.25>")
 *      ).slow(2)
 */`,meta:{range:[64037,64167],filename:"pattern.mjs",lineno:2135,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020259",name:"exports.pressBy",type:"VariableDeclaration"}},description:`<p>Like press, but allows you to specify the amount by which each
event is shifted. pressBy(0.5) is the same as press, while
pressBy(1/3) shifts each event by a third of its timespan.</p>`,examples:[`stack(s("hh*4"),
      s("bd mt sd ht").pressBy("<0 0.5 0.25>")
     ).slow(2)`],name:"pressBy",longname:"pressBy",kind:"constant",scope:"global"},{comment:`/**
 * Syncopates a rhythm, by shifting each event halfway into its timespan.
 * @example
 * stack(s("hh*4"),
 *       s("bd mt sd ht").every(4, press)
 *      ).slow(2)
 */`,meta:{range:[64343,64430],filename:"pattern.mjs",lineno:2146,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020288",name:"exports.press",type:"VariableDeclaration"}},description:"<p>Syncopates a rhythm, by shifting each event halfway into its timespan.</p>",examples:[`stack(s("hh*4"),
      s("bd mt sd ht").every(4, press)
     ).slow(2)`],name:"press",longname:"press",kind:"constant",scope:"global"},{comment:`/**
 * Silences a pattern.
 * @example
 * stack(
 *   s("bd").hush(),
 *   s("hh*3")
 * )
 */`,meta:{range:[64526,64584],filename:"pattern.mjs",lineno:2158,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020305",name:"Pattern.prototype.hush",type:"FunctionExpression",paramnames:[]}},description:"<p>Silences a pattern.</p>",examples:[`stack(
  s("bd").hush(),
  s("hh*3")
)`],name:"hush",longname:"Pattern#hush",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * Applies \`rev\` to a pattern every other cycle, so that the pattern alternates between forwards and backwards.
 * @example
 * note("c d e g").palindrome()
 */`,meta:{range:[64751,64876],filename:"pattern.mjs",lineno:2167,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020315",name:"exports.palindrome",type:"VariableDeclaration"}},description:"<p>Applies <code>rev</code> to a pattern every other cycle, so that the pattern alternates between forwards and backwards.</p>",examples:['note("c d e g").palindrome()'],name:"palindrome",longname:"palindrome",kind:"constant",scope:"global"},{comment:`/**
 * Jux with adjustable stereo width. 0 = mono, 1 = full stereo.
 * @name juxBy
 * @synonyms juxby
 * @example
 * s("bd lt [~ ht] mt cp ~ bd hh").juxBy("<0 .5 1>/2", rev)
 */`,meta:{filename:"pattern.mjs",lineno:2176,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Jux with adjustable stereo width. 0 = mono, 1 = full stereo.</p>",name:"juxBy",synonyms_text:"juxby",synonyms:["juxby"],examples:['s("bd lt [~ ht] mt cp ~ bd hh").juxBy("<0 .5 1>/2", rev)'],longname:"juxBy",kind:"member",scope:"global"},{comment:`/**
 * The jux function creates strange stereo effects, by applying a function to a pattern, but only in the right-hand channel.
 * @example
 * s("bd lt [~ ht] mt cp ~ bd hh").jux(rev)
 * @example
 * s("bd lt [~ ht] mt cp ~ bd hh").jux(press)
 * @example
 * s("bd lt [~ ht] mt cp ~ bd hh").jux(iter(4))
 */`,meta:{range:[65897,65993],filename:"pattern.mjs",lineno:2206,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020444",name:"exports.jux",type:"VariableDeclaration"}},description:"<p>The jux function creates strange stereo effects, by applying a function to a pattern, but only in the right-hand channel.</p>",examples:['s("bd lt [~ ht] mt cp ~ bd hh").jux(rev)','s("bd lt [~ ht] mt cp ~ bd hh").jux(press)','s("bd lt [~ ht] mt cp ~ bd hh").jux(iter(4))'],name:"jux",longname:"jux",kind:"constant",scope:"global"},{comment:`/**
 * Superimpose and offset multiple times, applying the given function each time.
 * @name echoWith
 * @synonyms echowith, stutWith, stutwith
 * @param {number} times how many times to repeat
 * @param {number} time cycle offset between iterations
 * @param {function} func function to apply, given the pattern and the iteration index
 * @example
 * "<0 [2 4]>"
 * .echoWith(4, 1/8, (p,n) => p.add(n*2))
 * .scale("C:minor").note()
 */`,meta:{filename:"pattern.mjs",lineno:2210,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Superimpose and offset multiple times, applying the given function each time.</p>",name:"echoWith",synonyms_text:"echowith, stutWith, stutwith",synonyms:["echowith","stutWith","stutwith"],params:[{type:{names:["number"]},description:"<p>how many times to repeat</p>",name:"times"},{type:{names:["number"]},description:"<p>cycle offset between iterations</p>",name:"time"},{type:{names:["function"]},description:"<p>function to apply, given the pattern and the iteration index</p>",name:"func"}],examples:[`"<0 [2 4]>"
.echoWith(4, 1/8, (p,n) => p.add(n*2))
.scale("C:minor").note()`],longname:"echoWith",kind:"member",scope:"global"},{comment:`/**
 * Superimpose and offset multiple times, gradually decreasing the velocity
 * @name echo
 * @memberof Pattern
 * @returns Pattern
 * @param {number} times how many times to repeat
 * @param {number} time cycle offset between iterations
 * @param {number} feedback velocity multiplicator for each iteration
 * @example
 * s("bd sd").echo(3, 1/6, .8)
 */`,meta:{filename:"pattern.mjs",lineno:2229,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Superimpose and offset multiple times, gradually decreasing the velocity</p>",name:"echo",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],params:[{type:{names:["number"]},description:"<p>how many times to repeat</p>",name:"times"},{type:{names:["number"]},description:"<p>cycle offset between iterations</p>",name:"time"},{type:{names:["number"]},description:"<p>velocity multiplicator for each iteration</p>",name:"feedback"}],examples:['s("bd sd").echo(3, 1/6, .8)'],scope:"static",longname:"Pattern.echo",kind:"member"},{comment:`/**
 * Deprecated. Like echo, but the last 2 parameters are flipped.
 * @name stut
 * @param {number} times how many times to repeat
 * @param {number} feedback velocity multiplicator for each iteration
 * @param {number} time cycle offset between iterations
 * @example
 * s("bd sd").stut(3, .8, 1/6)
 */`,meta:{filename:"pattern.mjs",lineno:2244,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Deprecated. Like echo, but the last 2 parameters are flipped.</p>",name:"stut",params:[{type:{names:["number"]},description:"<p>how many times to repeat</p>",name:"times"},{type:{names:["number"]},description:"<p>velocity multiplicator for each iteration</p>",name:"feedback"},{type:{names:["number"]},description:"<p>cycle offset between iterations</p>",name:"time"}],examples:['s("bd sd").stut(3, .8, 1/6)'],longname:"stut",kind:"member",scope:"global"},{comment:`/**
 * Divides a pattern into a given number of subdivisions, plays the subdivisions in order, but increments the starting subdivision each cycle. The pattern wraps to the first subdivision after the last subdivision is played.
 * @name iter
 * @memberof Pattern
 * @returns Pattern
 * @example
 * note("0 1 2 3".scale('A minor')).iter(4)
 */`,meta:{filename:"pattern.mjs",lineno:2257,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Divides a pattern into a given number of subdivisions, plays the subdivisions in order, but increments the starting subdivision each cycle. The pattern wraps to the first subdivision after the last subdivision is played.</p>",name:"iter",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`note("0 1 2 3".scale('A minor')).iter(4)`],scope:"static",longname:"Pattern.iter",kind:"member"},{comment:`/**
 * Like \`iter\`, but plays the subdivisions in reverse order. Known as iter' in tidalcycles
 * @name iterBack
 * @synonyms iterback
 * @memberof Pattern
 * @returns Pattern
 * @example
 * note("0 1 2 3".scale('A minor')).iterBack(4)
 */`,meta:{filename:"pattern.mjs",lineno:2284,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Like <code>iter</code>, but plays the subdivisions in reverse order. Known as iter' in tidalcycles</p>",name:"iterBack",synonyms_text:"iterback",synonyms:["iterback"],memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`note("0 1 2 3".scale('A minor')).iterBack(4)`],scope:"static",longname:"Pattern.iterBack",kind:"member"},{comment:`/**
 * Repeats each cycle the given number of times.
 * @name repeatCycles
 * @memberof Pattern
 * @returns Pattern
 * @example
 * note(irand(12).add(34)).segment(4).repeatCycles(2).s("gm_acoustic_guitar_nylon")
 */`,meta:{filename:"pattern.mjs",lineno:2302,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Repeats each cycle the given number of times.</p>",name:"repeatCycles",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['note(irand(12).add(34)).segment(4).repeatCycles(2).s("gm_acoustic_guitar_nylon")'],scope:"static",longname:"Pattern.repeatCycles",kind:"member"},{comment:`/**
 * Divides a pattern into a given number of parts, then cycles through those parts in turn, applying the given function to each part in turn (one part per cycle).
 * @name chunk
 * @synonyms slowChunk, slowchunk
 * @memberof Pattern
 * @returns Pattern
 * @example
 * "0 1 2 3".chunk(4, x=>x.add(7))
 * .scale("A:minor").note()
 */`,meta:{filename:"pattern.mjs",lineno:2325,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Divides a pattern into a given number of parts, then cycles through those parts in turn, applying the given function to each part in turn (one part per cycle).</p>",name:"chunk",synonyms_text:"slowChunk, slowchunk",synonyms:["slowChunk","slowchunk"],memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`"0 1 2 3".chunk(4, x=>x.add(7))
.scale("A:minor").note()`],scope:"static",longname:"Pattern.chunk",kind:"member"},{comment:`/**
 * Like \`chunk\`, but cycles through the parts in reverse order. Known as chunk' in tidalcycles
 * @name chunkBack
 * @synonyms chunkback
 * @memberof Pattern
 * @returns Pattern
 * @example
 * "0 1 2 3".chunkBack(4, x=>x.add(7))
 * .scale("A:minor").note()
 */`,meta:{filename:"pattern.mjs",lineno:2351,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Like <code>chunk</code>, but cycles through the parts in reverse order. Known as chunk' in tidalcycles</p>",name:"chunkBack",synonyms_text:"chunkback",synonyms:["chunkback"],memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`"0 1 2 3".chunkBack(4, x=>x.add(7))
.scale("A:minor").note()`],scope:"static",longname:"Pattern.chunkBack",kind:"member"},{comment:`/**
 * Like \`chunk\`, but the cycles of the source pattern aren't repeated
 * for each set of chunks.
 * @name fastChunk
 * @synonyms fastchunk
 * @memberof Pattern
 * @returns Pattern
 * @example
 * "<0 8> 1 2 3 4 5 6 7"
 * .fastChunk(4, x => x.color('red')).slow(2)
 * .scale("C2:major").note()
 */`,meta:{filename:"pattern.mjs",lineno:2365,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Like <code>chunk</code>, but the cycles of the source pattern aren't repeated
for each set of chunks.</p>`,name:"fastChunk",synonyms_text:"fastchunk",synonyms:["fastchunk"],memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`"<0 8> 1 2 3 4 5 6 7"
.fastChunk(4, x => x.color('red')).slow(2)
.scale("C2:major").note()`],scope:"static",longname:"Pattern.fastChunk",kind:"member"},{comment:`/**
 * Loops the pattern inside at \`offset\` for \`cycles\`.
 * @param {number} offset start point of loop in cycles
 * @param {number} cycles loop length in cycles
 * @example
 * note("<c d e f>").ribbon(1, 2).fast(2)
 * @example
 * // Looping a portion of randomness
 * note(irand(8).segment(4).scale('C3 minor')).ribbon(1337, 2)
 */`,meta:{range:[71812,71927],filename:"pattern.mjs",lineno:2402,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100020955",name:"exports.ribbon",type:"VariableDeclaration"}},description:"<p>Loops the pattern inside at <code>offset</code> for <code>cycles</code>.</p>",params:[{type:{names:["number"]},description:"<p>start point of loop in cycles</p>",name:"offset"},{type:{names:["number"]},description:"<p>loop length in cycles</p>",name:"cycles"}],examples:['note("<c d e f>").ribbon(1, 2).fast(2)',`// Looping a portion of randomness
note(irand(8).segment(4).scale('C3 minor')).ribbon(1337, 2)`],name:"ribbon",longname:"ribbon",kind:"constant",scope:"global"},{comment:`/**
 * Tags each Hap with an identifier. Good for filtering. The function populates Hap.context.tags (Array).
 * @name tag
 * @noAutocomplete
 * @param {string} tag anything unique
 */`,meta:{filename:"pattern.mjs",lineno:2412,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Tags each Hap with an identifier. Good for filtering. The function populates Hap.context.tags (Array).</p>",name:"tag",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],params:[{type:{names:["string"]},description:"<p>anything unique</p>",name:"tag"}],longname:"tag",kind:"member",scope:"global"},{comment:`/**
 * *EXPERIMENTAL* - Speeds a pattern up or down, to fit to the given number of steps per cycle (aka tactus).
 * @example
 * s("bd sd cp").steps(4)
 * // The same as s("{bd sd cp}%4")
 */`,meta:{range:[74741,75017],filename:"pattern.mjs",lineno:2484,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100021432",name:"exports.steps",type:"VariableDeclaration"}},description:"<p><em>EXPERIMENTAL</em> - Speeds a pattern up or down, to fit to the given number of steps per cycle (aka tactus).</p>",examples:[`s("bd sd cp").steps(4)
// The same as s("{bd sd cp}%4")`],name:"steps",longname:"steps",kind:"constant",scope:"global"},{comment:`/**
 * Aligns one or more given patterns to the given number of steps per cycle.
 * This relies on patterns having coherent number of steps per cycle,
 *
 * @name s_polymeterSteps
 * @param  {number} steps how many items are placed in one cycle
 * @param  {any[]} patterns one or more patterns
 * @example
 * // the same as "{c d, e f g}%4"
 * s_polymeterSteps(4, "c d", "e f g")
 */`,meta:{filename:"pattern.mjs",lineno:2517,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Aligns one or more given patterns to the given number of steps per cycle.
This relies on patterns having coherent number of steps per cycle,</p>`,name:"s_polymeterSteps",params:[{type:{names:["number"]},description:"<p>how many items are placed in one cycle</p>",name:"steps"},{type:{names:["Array.<any>"]},description:"<p>one or more patterns</p>",name:"patterns"}],examples:[`// the same as "{c d, e f g}%4"
s_polymeterSteps(4, "c d", "e f g")`],longname:"s_polymeterSteps",kind:"member",scope:"global"},{comment:`/**
 * *EXPERIMENTAL* - Combines the given lists of patterns with the same pulse, creating polymeters when different sized sequences are used.
 * @synonyms pm
 * @example
 * // The same as "{c eb g, c2 g2}"
 * s_polymeter("c eb g", "c2 g2")
 *
 */`,meta:{range:[76381,76937],filename:"pattern.mjs",lineno:2548,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100021621",name:"exports.s_polymeter",type:"FunctionDeclaration",paramnames:["args"]}},description:"<p><em>EXPERIMENTAL</em> - Combines the given lists of patterns with the same pulse, creating polymeters when different sized sequences are used.</p>",synonyms_text:"pm",synonyms:["pm"],examples:[`// The same as "{c eb g, c2 g2}"
s_polymeter("c eb g", "c2 g2")`],name:"s_polymeter",longname:"s_polymeter",kind:"function",scope:"global"},{comment:`/** Sequences patterns like \`seq\`, but each pattern has a length, relative to the whole.
 * This length can either be provided as a [length, pattern] pair, or inferred from
 * the pattern's 'tactus', generally inferred by the mininotation. Has the alias \`timecat\`.
 * @return {Pattern}
 * @example
 * s_cat([3,"e3"],[1, "g3"]).note()
 * // the same as "e3@3 g3".note()
 * @example
 * s_cat("bd sd cp","hh hh").sound()
 * // the same as "bd sd cp hh hh".sound()
 */`,meta:{range:[77404,78644],filename:"pattern.mjs",lineno:2582,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100021720",name:"exports.s_cat",type:"FunctionDeclaration",paramnames:["timepats"]}},description:`<p>Sequences patterns like <code>seq</code>, but each pattern has a length, relative to the whole.
This length can either be provided as a [length, pattern] pair, or inferred from
the pattern's 'tactus', generally inferred by the mininotation. Has the alias <code>timecat</code>.</p>`,returns:[{type:{names:["Pattern"]}}],examples:[`s_cat([3,"e3"],[1, "g3"]).note()
// the same as "e3@3 g3".note()`,`s_cat("bd sd cp","hh hh").sound()
// the same as "bd sd cp hh hh".sound()`],name:"s_cat",longname:"s_cat",kind:"function",scope:"global"},{comment:"/** Aliases for `s_cat` */",meta:{range:[78673,78702],filename:"pattern.mjs",lineno:2626,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100021996",name:"exports.timecat",type:"VariableDeclaration"}},description:"<p>Aliases for <code>s_cat</code></p>",name:"timecat",longname:"timecat",kind:"constant",scope:"global"},{comment:`/**
 * *EXPERIMENTAL* - Concatenates patterns stepwise, according to their 'tactus'.
 * Similar to \`s_cat\`, but if an argument is a list, the whole pattern will alternate between the elements in the list.
 *
 * @return {Pattern}
 * @example
 * s_alt(["bd cp", "mt"], "bd").sound()
 */`,meta:{range:[79019,79565],filename:"pattern.mjs",lineno:2637,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100022006",name:"exports.s_alt",type:"FunctionDeclaration",paramnames:["groups"]}},description:`<p><em>EXPERIMENTAL</em> - Concatenates patterns stepwise, according to their 'tactus'.
Similar to <code>s_cat</code>, but if an argument is a list, the whole pattern will alternate between the elements in the list.</p>`,returns:[{type:{names:["Pattern"]}}],examples:['s_alt(["bd cp", "mt"], "bd").sound()'],name:"s_alt",longname:"s_alt",kind:"function",scope:"global"},{comment:`/**
 * *EXPERIMENTAL* - Retains the given number of steps in a pattern (and dropping the rest), according to its 'tactus'.
 */`,meta:{range:[79694,80189],filename:"pattern.mjs",lineno:2656,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100022147",name:"exports.s_add",type:"VariableDeclaration"}},description:"<p><em>EXPERIMENTAL</em> - Retains the given number of steps in a pattern (and dropping the rest), according to its 'tactus'.</p>",name:"s_add",longname:"s_add",kind:"constant",scope:"global"},{comment:`/**
 * *EXPERIMENTAL* - Removes the given number of steps from a pattern, according to its 'tactus'.
 */`,meta:{range:[80296,80548],filename:"pattern.mjs",lineno:2687,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100022259",name:"exports.s_sub",type:"VariableDeclaration"}},description:"<p><em>EXPERIMENTAL</em> - Removes the given number of steps from a pattern, according to its 'tactus'.</p>",name:"s_sub",longname:"s_sub",kind:"constant",scope:"global"},{comment:`/**
 * *EXPERIMENTAL*
 */`,meta:{range:[80852,81407],filename:"pattern.mjs",lineno:2710,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100022372",name:"Pattern.prototype.s_taperlist",type:"FunctionExpression",paramnames:["amount","times"]},vars:{pat:"Pattern#s_taperlist~pat",times:"Pattern#s_taperlist~times",list:"Pattern#s_taperlist~list",reverse:"Pattern#s_taperlist~reverse",amount:"Pattern#s_taperlist~amount",start:"Pattern#s_taperlist~start",i:"Pattern#s_taperlist~i"}},description:"<p><em>EXPERIMENTAL</em></p>",name:"s_taperlist",longname:"Pattern#s_taperlist",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * *EXPERIMENTAL*
 */`,meta:{range:[81519,81877],filename:"pattern.mjs",lineno:2742,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100022519",name:"exports.s_taper",type:"VariableDeclaration"}},description:"<p><em>EXPERIMENTAL</em></p>",name:"s_taper",longname:"s_taper",kind:"constant",scope:"global"},{comment:`/**
 * *EXPERIMENTAL*
 */`,meta:{range:[81905,82131],filename:"pattern.mjs",lineno:2762,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100022588",name:"Pattern.prototype.s_tour",type:"FunctionExpression",paramnames:["many"]},vars:{"":null}},description:"<p><em>EXPERIMENTAL</em></p>",name:"s_tour",longname:"Pattern#s_tour",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * Cuts each sample into the given number of parts, allowing you to explore a technique known as 'granular synthesis'.
 * It turns a pattern of samples into a pattern of parts of samples.
 * @name chop
 * @memberof Pattern
 * @returns Pattern
 * @example
 * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
 * s("rhodes")
 *  .chop(4)
 *  .rev() // reverse order of chops
 *  .loopAt(2) // fit sample into 2 cycles
 *
 */`,meta:{filename:"pattern.mjs",lineno:2780,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Cuts each sample into the given number of parts, allowing you to explore a technique known as 'granular synthesis'.
It turns a pattern of samples into a pattern of parts of samples.</p>`,name:"chop",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
s("rhodes")
 .chop(4)
 .rev() // reverse order of chops
 .loopAt(2) // fit sample into 2 cycles`],scope:"static",longname:"Pattern.chop",kind:"member"},{comment:`/**
 * Cuts each sample into the given number of parts, triggering progressive portions of each sample at each loop.
 * @name striate
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("numbers:0 numbers:1 numbers:2").striate(6).slow(3)
 */`,meta:{filename:"pattern.mjs",lineno:2803,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Cuts each sample into the given number of parts, triggering progressive portions of each sample at each loop.</p>",name:"striate",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("numbers:0 numbers:1 numbers:2").striate(6).slow(3)'],scope:"static",longname:"Pattern.striate",kind:"member"},{comment:`/**
 * Makes the sample fit the given number of cycles by changing the speed.
 * @name loopAt
 * @memberof Pattern
 * @returns Pattern
 * @example
 * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
 * s("rhodes").loopAt(2)
 */`,meta:{filename:"pattern.mjs",lineno:2821,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Makes the sample fit the given number of cycles by changing the speed.</p>",name:"loopAt",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
s("rhodes").loopAt(2)`],scope:"static",longname:"Pattern.loopAt",kind:"member"},{comment:`/**
 * Chops samples into the given number of slices, triggering those slices with a given pattern of slice numbers.
 * Instead of a number, it also accepts a list of numbers from 0 to 1 to slice at specific points.
 * @name slice
 * @memberof Pattern
 * @returns Pattern
 * @example
 * samples('github:tidalcycles/dirt-samples')
 * s("breaks165").slice(8, "0 1 <2 2*2> 3 [4 0] 5 6 7".every(3, rev)).slow(0.75)
 * @example
 * samples('github:tidalcycles/dirt-samples')
 * s("breaks125").fit().slice([0,.25,.5,.75], "0 1 1 <2 3>")
 */`,meta:{filename:"pattern.mjs",lineno:2838,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Chops samples into the given number of slices, triggering those slices with a given pattern of slice numbers.
Instead of a number, it also accepts a list of numbers from 0 to 1 to slice at specific points.</p>`,name:"slice",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`samples('github:tidalcycles/dirt-samples')
s("breaks165").slice(8, "0 1 <2 2*2> 3 [4 0] 5 6 7".every(3, rev)).slow(0.75)`,`samples('github:tidalcycles/dirt-samples')
s("breaks125").fit().slice([0,.25,.5,.75], "0 1 1 <2 3>")`],scope:"static",longname:"Pattern.slice",kind:"member"},{comment:`/**
 * Works the same as slice, but changes the playback speed of each slice to match the duration of its step.
 * @name splice
 * @example
 * samples('github:tidalcycles/dirt-samples')
 * s("breaks165")
 * .splice(8,  "0 1 [2 3 0]@2 3 0@2 7")
 */`,meta:{filename:"pattern.mjs",lineno:2872,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Works the same as slice, but changes the playback speed of each slice to match the duration of its step.</p>",name:"splice",examples:[`samples('github:tidalcycles/dirt-samples')
s("breaks165")
.splice(8,  "0 1 [2 3 0]@2 3 0@2 7")`],longname:"splice",kind:"member",scope:"global"},{comment:`/**
 * Makes the sample fit its event duration. Good for rhythmical loops like drum breaks.
 * Similar to \`loopAt\`.
 * @name fit
 * @example
 * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
 * s("rhodes/2").fit()
 */`,meta:{filename:"pattern.mjs",lineno:2907,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Makes the sample fit its event duration. Good for rhythmical loops like drum breaks.
Similar to <code>loopAt</code>.</p>`,name:"fit",examples:[`samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
s("rhodes/2").fit()`],longname:"fit",kind:"member",scope:"global"},{comment:`/**
 * Makes the sample fit the given number of cycles and cps value, by
 * changing the speed. Please note that at some point cps will be
 * given by a global clock and this function will be
 * deprecated/removed.
 * @name loopAtCps
 * @memberof Pattern
 * @returns Pattern
 * @example
 * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
 * s("rhodes").loopAtCps(4,1.5).cps(1.5)
 */`,meta:{filename:"pattern.mjs",lineno:2927,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Makes the sample fit the given number of cycles and cps value, by
changing the speed. Please note that at some point cps will be
given by a global clock and this function will be
deprecated/removed.</p>`,name:"loopAtCps",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:[`samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
s("rhodes").loopAtCps(4,1.5).cps(1.5)`],scope:"static",longname:"Pattern.loopAtCps",kind:"member"},{comment:"/** exposes a custom value at query time. basically allows mutating state without evaluation */",meta:{range:[87664,87764],filename:"pattern.mjs",lineno:2945,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100023140",name:"exports.ref",type:"VariableDeclaration"}},description:"<p>exposes a custom value at query time. basically allows mutating state without evaluation</p>",name:"ref",longname:"ref",kind:"constant",scope:"global"},{comment:`/**
 * Cross-fades between left and right from 0 to 1:
 * - 0 = (full left, no right)
 * - .5 = (both equal)
 * - 1 = (no left, full right)
 *
 * @name xfade
 * @example
 * xfade(s("bd*2"), "<0 .25 .5 .75 1>", s("hh*8"))
 */`,meta:{filename:"pattern.mjs",lineno:2952,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Cross-fades between left and right from 0 to 1:</p>
<ul>
<li>0 = (full left, no right)</li>
<li>.5 = (both equal)</li>
<li>1 = (no left, full right)</li>
</ul>`,name:"xfade",examples:['xfade(s("bd*2"), "<0 .25 .5 .75 1>", s("hh*8"))'],longname:"xfade",kind:"member",scope:"global"},{comment:`/**
 *  A sawtooth signal between 0 and 1.
 *
 * @return {Pattern}
 * @example
 * note("<c3 [eb3,g3] g2 [g3,bb3]>*8")
 * .clip(saw.slow(2))
 * @example
 * n(saw.range(0,8).segment(8))
 * .scale('C major')
 *
 */`,meta:{range:[1602,1642],filename:"signal.mjs",lineno:37,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024137",name:"exports.saw",type:"VariableDeclaration"}},description:"<p>A sawtooth signal between 0 and 1.</p>",returns:[{type:{names:["Pattern"]}}],examples:[`note("<c3 [eb3,g3] g2 [g3,bb3]>*8")
.clip(saw.slow(2))`,`n(saw.range(0,8).segment(8))
.scale('C major')`],name:"saw",longname:"saw",kind:"constant",scope:"global"},{comment:`/**
 *  A sine signal between 0 and 1.
 *
 * @return {Pattern}
 * @example
 * n(sine.segment(16).range(0,15))
 * .scale("C:minor")
 *
 */`,meta:{range:[1883,1923],filename:"signal.mjs",lineno:51,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024175",name:"exports.sine",type:"VariableDeclaration"}},description:"<p>A sine signal between 0 and 1.</p>",returns:[{type:{names:["Pattern"]}}],examples:[`n(sine.segment(16).range(0,15))
.scale("C:minor")`],name:"sine",longname:"sine",kind:"constant",scope:"global"},{comment:`/**
 *  A cosine signal between 0 and 1.
 *
 * @return {Pattern}
 * @example
 * n(stack(sine,cosine).segment(16).range(0,15))
 * .scale("C:minor")
 *
 */`,meta:{range:[2079,2133],filename:"signal.mjs",lineno:62,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024183",name:"exports.cosine",type:"VariableDeclaration"}},description:"<p>A cosine signal between 0 and 1.</p>",returns:[{type:{names:["Pattern"]}}],examples:[`n(stack(sine,cosine).segment(16).range(0,15))
.scale("C:minor")`],name:"cosine",longname:"cosine",kind:"constant",scope:"global"},{comment:`/**
 *  A square signal between 0 and 1.
 *
 * @return {Pattern}
 * @example
 * n(square.segment(4).range(0,7)).scale("C:minor")
 *
 */`,meta:{range:[2328,2389],filename:"signal.mjs",lineno:73,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024213",name:"exports.square",type:"VariableDeclaration"}},description:"<p>A square signal between 0 and 1.</p>",returns:[{type:{names:["Pattern"]}}],examples:['n(square.segment(4).range(0,7)).scale("C:minor")'],name:"square",longname:"square",kind:"constant",scope:"global"},{comment:`/**
 *  A triangle signal between 0 and 1.
 *
 * @return {Pattern}
 * @example
 * n(tri.segment(8).range(0,7)).scale("C:minor")
 *
 */`,meta:{range:[2569,2607],filename:"signal.mjs",lineno:84,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024238",name:"exports.tri",type:"VariableDeclaration"}},description:"<p>A triangle signal between 0 and 1.</p>",returns:[{type:{names:["Pattern"]}}],examples:['n(tri.segment(8).range(0,7)).scale("C:minor")'],name:"tri",longname:"tri",kind:"constant",scope:"global"},{comment:`/**
 *  The mouse's x position value ranges from 0 to 1.
 * @name mousex
 * @return {Pattern}
 * @example
 * n(mousex.segment(4).range(0,7)).scale("C:minor")
 *
 */`,meta:{filename:"signal.mjs",lineno:89,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>The mouse's x position value ranges from 0 to 1.</p>",name:"mousex",returns:[{type:{names:["Pattern"]}}],examples:['n(mousex.segment(4).range(0,7)).scale("C:minor")'],longname:"mousex",kind:"member",scope:"global"},{comment:`/**
 *  The mouse's y position value ranges from 0 to 1.
 * @name mousey
 * @return {Pattern}
 * @example
 * n(mousey.segment(4).range(0,7)).scale("C:minor")
 *
 */`,meta:{filename:"signal.mjs",lineno:98,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>The mouse's y position value ranges from 0 to 1.</p>",name:"mousey",returns:[{type:{names:["Pattern"]}}],examples:['n(mousey.segment(4).range(0,7)).scale("C:minor")'],longname:"mousey",kind:"member",scope:"global"},{comment:`/**
 * A discrete pattern of numbers from 0 to n-1
 * @example
 * n(run(4)).scale("C4:pentatonic")
 * // n("0 1 2 3").scale("C4:pentatonic")
 */`,meta:{range:[4377,4438],filename:"signal.mjs",lineno:160,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024471",name:"exports.run",type:"VariableDeclaration"}},description:"<p>A discrete pattern of numbers from 0 to n-1</p>",examples:[`n(run(4)).scale("C4:pentatonic")
// n("0 1 2 3").scale("C4:pentatonic")`],name:"run",longname:"run",kind:"constant",scope:"global"},{comment:`/**
 * A continuous pattern of random numbers, between 0 and 1.
 *
 * @name rand
 * @example
 * // randomly change the cutoff
 * s("bd*4,hh*8").cutoff(rand.range(500,8000))
 *
 */`,meta:{filename:"signal.mjs",lineno:162,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>A continuous pattern of random numbers, between 0 and 1.</p>",name:"rand",examples:[`// randomly change the cutoff
s("bd*4,hh*8").cutoff(rand.range(500,8000))`],longname:"rand",kind:"member",scope:"global"},{comment:`/**
 * A continuous pattern of random numbers, between -1 and 1
 */`,meta:{range:[4728,4766],filename:"signal.mjs",lineno:175,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024497",name:"exports.rand2",type:"VariableDeclaration"}},description:"<p>A continuous pattern of random numbers, between -1 and 1</p>",name:"rand2",longname:"rand2",kind:"constant",scope:"global"},{comment:`/**
 * A continuous pattern of 0 or 1 (binary random), with a probability for the value being 1
 *
 * @name brandBy
 * @param {number} probability - a number between 0 and 1
 * @example
 * s("hh*10").pan(brandBy(0.2))
 */`,meta:{filename:"signal.mjs",lineno:179,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>A continuous pattern of 0 or 1 (binary random), with a probability for the value being 1</p>",name:"brandBy",params:[{type:{names:["number"]},description:"<p>a number between 0 and 1</p>",name:"probability"}],examples:['s("hh*10").pan(brandBy(0.2))'],longname:"brandBy",kind:"member",scope:"global"},{comment:`/**
 * A continuous pattern of 0 or 1 (binary random)
 *
 * @name brand
 * @example
 * s("hh*10").pan(brand)
 */`,meta:{filename:"signal.mjs",lineno:189,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>A continuous pattern of 0 or 1 (binary random)</p>",name:"brand",examples:['s("hh*10").pan(brand)'],longname:"brand",kind:"member",scope:"global"},{comment:`/**
 * A continuous pattern of random integers, between 0 and n-1.
 *
 * @name irand
 * @param {number} n max value (exclusive)
 * @example
 * // randomly select scale notes from 0 - 7 (= C to C)
 * n(irand(8)).struct("x x*2 x x*3").scale("C:minor")
 *
 */`,meta:{filename:"signal.mjs",lineno:200,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>A continuous pattern of random integers, between 0 and n-1.</p>",name:"irand",params:[{type:{names:["number"]},description:"<p>max value (exclusive)</p>",name:"n"}],examples:[`// randomly select scale notes from 0 - 7 (= C to C)
n(irand(8)).struct("x x*2 x x*3").scale("C:minor")`],longname:"irand",kind:"member",scope:"global"},{comment:`/** * Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).
 * Similar to \`inhabit\`, but maintains the structure of the original patterns.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 * @example
 * note("<0 1 2!2 3>".pick(["g a", "e f", "f g f g" , "g c d"]))
 * @example
 * sound("<0 1 [2,0]>".pick(["bd sd", "cp cp", "hh hh"]))
 * @example
 * sound("<0!2 [0,1] 1>".pick(["bd(3,8)", "sd sd"]))
 * @example
 * s("<a!2 [a,b] b>".pick({a: "bd(3,8)", b: "sd sd"}))
 */`,meta:{range:[6598,6800],filename:"signal.mjs",lineno:245,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024664",name:"exports.pick",type:"VariableDeclaration"}},description:`<p>Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).
Similar to <code>inhabit</code>, but maintains the structure of the original patterns.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],examples:['note("<0 1 2!2 3>".pick(["g a", "e f", "f g f g" , "g c d"]))','sound("<0 1 [2,0]>".pick(["bd sd", "cp cp", "hh hh"]))','sound("<0!2 [0,1] 1>".pick(["bd(3,8)", "sd sd"]))','s("<a!2 [a,b] b>".pick({a: "bd(3,8)", b: "sd sd"}))'],name:"pick",longname:"pick",kind:"constant",scope:"global"},{comment:`/** * The same as \`pick\`, but if you pick a number greater than the size of the list,
 * it wraps around, rather than sticking at the maximum value.
 * For example, if you pick the fifth pattern of a list of three, you'll get the
 * second one.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[7225,7343],filename:"signal.mjs",lineno:266,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024709",name:"exports.pickmod",type:"VariableDeclaration"}},description:`<p>The same as <code>pick</code>, but if you pick a number greater than the size of the list,
it wraps around, rather than sticking at the maximum value.
For example, if you pick the fifth pattern of a list of three, you'll get the
second one.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickmod",longname:"pickmod",kind:"constant",scope:"global"},{comment:`/** * pickF lets you use a pattern of numbers to pick which function to apply to another pattern.
 * @param {Pattern} pat
 * @param {Pattern} lookup a pattern of indices
 * @param {function[]} funcs the array of functions from which to pull
 * @returns {Pattern}
 * @example
 * s("bd [rim hh]").pickF("<0 1 2>", [rev,jux(rev),fast(2)])
 * @example
 * note("<c2 d2>(3,8)").s("square")
 *     .pickF("<0 2> 1", [jux(rev),fast(2),x=>x.lpf(800)])
 */`,meta:{range:[7792,7907],filename:"signal.mjs",lineno:281,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024729",name:"exports.pickF",type:"VariableDeclaration"}},description:"<p>pickF lets you use a pattern of numbers to pick which function to apply to another pattern.</p>",params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["Pattern"]},description:"<p>a pattern of indices</p>",name:"lookup"},{type:{names:["Array.<function()>"]},description:"<p>the array of functions from which to pull</p>",name:"funcs"}],returns:[{type:{names:["Pattern"]}}],examples:['s("bd [rim hh]").pickF("<0 1 2>", [rev,jux(rev),fast(2)])',`note("<c2 d2>(3,8)").s("square")
    .pickF("<0 2> 1", [jux(rev),fast(2),x=>x.lpf(800)])`],name:"pickF",longname:"pickF",kind:"constant",scope:"global"},{comment:`/** * The same as \`pickF\`, but if you pick a number greater than the size of the functions list,
 * it wraps around, rather than sticking at the maximum value.
 * @param {Pattern} pat
 * @param {Pattern} lookup a pattern of indices
 * @param {function[]} funcs the array of functions from which to pull
 * @returns {Pattern}
 */`,meta:{range:[8238,8362],filename:"signal.mjs",lineno:292,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024750",name:"exports.pickmodF",type:"VariableDeclaration"}},description:`<p>The same as <code>pickF</code>, but if you pick a number greater than the size of the functions list,
it wraps around, rather than sticking at the maximum value.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["Pattern"]},description:"<p>a pattern of indices</p>",name:"lookup"},{type:{names:["Array.<function()>"]},description:"<p>the array of functions from which to pull</p>",name:"funcs"}],returns:[{type:{names:["Pattern"]}}],name:"pickmodF",longname:"pickmodF",kind:"constant",scope:"global"},{comment:`/** * Similar to \`pick\`, but it applies an outerJoin instead of an innerJoin.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[8509,8628],filename:"signal.mjs",lineno:301,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024771",name:"exports.pickOut",type:"VariableDeclaration"}},description:"<p>Similar to <code>pick</code>, but it applies an outerJoin instead of an innerJoin.</p>",params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickOut",longname:"pickOut",kind:"constant",scope:"global"},{comment:`/** * The same as \`pickOut\`, but if you pick a number greater than the size of the list,
 * it wraps around, rather than sticking at the maximum value.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[8849,8973],filename:"signal.mjs",lineno:311,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024791",name:"exports.pickmodOut",type:"VariableDeclaration"}},description:`<p>The same as <code>pickOut</code>, but if you pick a number greater than the size of the list,
it wraps around, rather than sticking at the maximum value.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickmodOut",longname:"pickmodOut",kind:"constant",scope:"global"},{comment:`/** * Similar to \`pick\`, but the choosen pattern is restarted when its index is triggered.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[9133,9262],filename:"signal.mjs",lineno:320,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024811",name:"exports.pickRestart",type:"VariableDeclaration"}},description:"<p>Similar to <code>pick</code>, but the choosen pattern is restarted when its index is triggered.</p>",params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickRestart",longname:"pickRestart",kind:"constant",scope:"global"},{comment:`/** * The same as \`pickRestart\`, but if you pick a number greater than the size of the list,
 * it wraps around, rather than sticking at the maximum value.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[9487,9621],filename:"signal.mjs",lineno:330,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024831",name:"exports.pickmodRestart",type:"VariableDeclaration"}},description:`<p>The same as <code>pickRestart</code>, but if you pick a number greater than the size of the list,
it wraps around, rather than sticking at the maximum value.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickmodRestart",longname:"pickmodRestart",kind:"constant",scope:"global"},{comment:`/** * Similar to \`pick\`, but the choosen pattern is reset when its index is triggered.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[9777,9900],filename:"signal.mjs",lineno:339,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024851",name:"exports.pickReset",type:"VariableDeclaration"}},description:"<p>Similar to <code>pick</code>, but the choosen pattern is reset when its index is triggered.</p>",params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickReset",longname:"pickReset",kind:"constant",scope:"global"},{comment:`/** * The same as \`pickReset\`, but if you pick a number greater than the size of the list,
 * it wraps around, rather than sticking at the maximum value.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[10123,10251],filename:"signal.mjs",lineno:349,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024871",name:"exports.pickmodReset",type:"VariableDeclaration"}},description:`<p>The same as <code>pickReset</code>, but if you pick a number greater than the size of the list,
it wraps around, rather than sticking at the maximum value.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"pickmodReset",longname:"pickmodReset",kind:"constant",scope:"global"},{comment:`/**
/** * Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).
 * Similar to \`pick\`, but cycles are squeezed into the target ('inhabited') pattern.
 * @name inhabit
 * @synonyms pickSqueeze
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 * @example
 * "<a b [a,b]>".inhabit({a: s("bd(3,8)"),
                          b: s("cp sd")
                         })
 * @example
 * s("a@2 [a b] a".inhabit({a: "bd(3,8)", b: "sd sd"})).slow(4)
 */`,meta:{filename:"signal.mjs",lineno:353,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>/** * Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).
Similar to <code>pick</code>, but cycles are squeezed into the target ('inhabited') pattern.</p>`,name:"inhabit",synonyms_text:"pickSqueeze",synonyms:["pickSqueeze"],params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],examples:[`"<a b [a,b]>".inhabit({a: s("bd(3,8)"),
                          b: s("cp sd")
                         })`,'s("a@2 [a b] a".inhabit({a: "bd(3,8)", b: "sd sd"})).slow(4)'],longname:"inhabit",kind:"member",scope:"global"},{comment:`/** * The same as \`inhabit\`, but if you pick a number greater than the size of the list,
 * it wraps around, rather than sticking at the maximum value.
 * For example, if you pick the fifth pattern of a list of three, you'll get the
 * second one.
 * @name inhabitmod
 * @synonyms pickmodSqueeze
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{filename:"signal.mjs",lineno:372,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>The same as <code>inhabit</code>, but if you pick a number greater than the size of the list,
it wraps around, rather than sticking at the maximum value.
For example, if you pick the fifth pattern of a list of three, you'll get the
second one.</p>`,name:"inhabitmod",synonyms_text:"pickmodSqueeze",synonyms:["pickmodSqueeze"],params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],longname:"inhabitmod",kind:"member",scope:"global"},{comment:`/**
 * Pick from the list of values (or patterns of values) via the index using the given
 * pattern of integers. The selected pattern will be compressed to fit the duration of the selecting event
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 * @example
 * note(squeeze("<0@2 [1!2] 2>", ["g a", "f g f g" , "g a c d"]))
 */`,meta:{range:[11780,12021],filename:"signal.mjs",lineno:397,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100024943",name:"exports.squeeze",type:"VariableDeclaration"}},description:`<p>Pick from the list of values (or patterns of values) via the index using the given
pattern of integers. The selected pattern will be compressed to fit the duration of the selecting event</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],examples:['note(squeeze("<0@2 [1!2] 2>", ["g a", "f g f g" , "g a c d"]))'],name:"squeeze",longname:"squeeze",kind:"constant",scope:"global"},{comment:`/**
 * Choose from the list of values (or patterns of values) using the given
 * pattern of numbers, which should be in the range of 0..1
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 * @example
 * note("c2 g2!2 d2 f1").s(chooseWith(sine.fast(2), ["sawtooth", "triangle", "bd:6"]))
 */`,meta:{range:[12586,12673],filename:"signal.mjs",lineno:430,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025062",name:"exports.chooseWith",type:"VariableDeclaration"}},description:`<p>Choose from the list of values (or patterns of values) using the given
pattern of numbers, which should be in the range of 0..1</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],examples:['note("c2 g2!2 d2 f1").s(chooseWith(sine.fast(2), ["sawtooth", "triangle", "bd:6"]))'],name:"chooseWith",longname:"chooseWith",kind:"constant",scope:"global"},{comment:`/**
 * As with {chooseWith}, but the structure comes from the chosen values, rather
 * than the pattern you're using to choose with.
 * @param {Pattern} pat
 * @param {*} xs
 * @returns {Pattern}
 */`,meta:{range:[12875,12964],filename:"signal.mjs",lineno:441,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025078",name:"exports.chooseInWith",type:"VariableDeclaration"}},description:`<p>As with {chooseWith}, but the structure comes from the chosen values, rather
than the pattern you're using to choose with.</p>`,params:[{type:{names:["Pattern"]},name:"pat"},{type:{names:["*"]},name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"chooseInWith",longname:"chooseInWith",kind:"constant",scope:"global"},{comment:`/**
 * Chooses randomly from the given list of elements.
 * @param  {...any} xs values / patterns to choose from.
 * @returns {Pattern} - a continuous pattern.
 * @example
 * note("c2 g2!2 d2 f1").s(choose("sine", "triangle", "bd:6"))
 */`,meta:{range:[13205,13259],filename:"signal.mjs",lineno:452,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025094",name:"exports.choose",type:"VariableDeclaration"}},description:"<p>Chooses randomly from the given list of elements.</p>",params:[{type:{names:["any"]},variable:!0,description:"<p>values / patterns to choose from.</p>",name:"xs"}],returns:[{type:{names:["Pattern"]},description:`<ul>
<li>a continuous pattern.</li>
</ul>`}],examples:['note("c2 g2!2 d2 f1").s(choose("sine", "triangle", "bd:6"))'],name:"choose",longname:"choose",kind:"constant",scope:"global"},{comment:`/**
 * Chooses from the given list of values (or patterns of values), according
 * to the pattern that the method is called on. The pattern should be in
 * the range 0 .. 1.
 * @param  {...any} xs
 * @returns {Pattern}
 */`,meta:{range:[13484,13562],filename:"signal.mjs",lineno:461,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025106",name:"Pattern.prototype.choose",type:"FunctionExpression",paramnames:["xs"]}},description:`<p>Chooses from the given list of values (or patterns of values), according
to the pattern that the method is called on. The pattern should be in
the range 0 .. 1.</p>`,params:[{type:{names:["any"]},variable:!0,name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"choose",longname:"Pattern#choose",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * As with choose, but the pattern that this method is called on should be
 * in the range -1 .. 1
 * @param  {...any} xs
 * @returns {Pattern}
 */`,meta:{range:[13717,13810],filename:"signal.mjs",lineno:471,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025122",name:"Pattern.prototype.choose2",type:"FunctionExpression",paramnames:["xs"]}},description:`<p>As with choose, but the pattern that this method is called on should be
in the range -1 .. 1</p>`,params:[{type:{names:["any"]},variable:!0,name:"xs"}],returns:[{type:{names:["Pattern"]}}],name:"choose2",longname:"Pattern#choose2",kind:"function",memberof:"Pattern",scope:"instance"},{comment:`/**
 * Picks one of the elements at random each cycle.
 * @synonyms randcat
 * @returns {Pattern}
 * @example
 * chooseCycles("bd", "hh", "sd").s().fast(8)
 * @example
 * s("bd | hh | sd").fast(8)
 */`,meta:{range:[14014,14087],filename:"signal.mjs",lineno:484,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025140",name:"exports.chooseCycles",type:"VariableDeclaration"}},description:"<p>Picks one of the elements at random each cycle.</p>",synonyms_text:"randcat",synonyms:["randcat"],returns:[{type:{names:["Pattern"]}}],examples:['chooseCycles("bd", "hh", "sd").s().fast(8)','s("bd | hh | sd").fast(8)'],name:"chooseCycles",longname:"chooseCycles",kind:"constant",scope:"global"},{comment:`/**
 * Chooses randomly from the given list of elements by giving a probability to each element
 * @param {...any} pairs arrays of value and weight
 * @returns {Pattern} - a continuous pattern.
 * @example
 * note("c2 g2!2 d2 f1").s(wchoose(["sine",10], ["triangle",1], ["bd:6",1]))
 */`,meta:{range:[14886,14951],filename:"signal.mjs",lineno:513,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025256",name:"exports.wchoose",type:"VariableDeclaration"}},description:"<p>Chooses randomly from the given list of elements by giving a probability to each element</p>",params:[{type:{names:["any"]},variable:!0,description:"<p>arrays of value and weight</p>",name:"pairs"}],returns:[{type:{names:["Pattern"]},description:`<ul>
<li>a continuous pattern.</li>
</ul>`}],examples:['note("c2 g2!2 d2 f1").s(wchoose(["sine",10], ["triangle",1], ["bd:6",1]))'],name:"wchoose",longname:"wchoose",kind:"constant",scope:"global"},{comment:`/**
 * Picks one of the elements at random each cycle by giving a probability to each element
 * @synonyms wrandcat
 * @returns {Pattern}
 * @example
 * wchooseCycles(["bd",10], ["hh",1], ["sd",1]).s().fast(8)
 * @example
 * wchooseCycles(["bd bd bd",5], ["hh hh hh",3], ["sd sd sd",1]).fast(4).s()
 */`,meta:{range:[15256,15351],filename:"signal.mjs",lineno:524,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100025268",name:"exports.wchooseCycles",type:"VariableDeclaration"}},description:"<p>Picks one of the elements at random each cycle by giving a probability to each element</p>",synonyms_text:"wrandcat",synonyms:["wrandcat"],returns:[{type:{names:["Pattern"]}}],examples:['wchooseCycles(["bd",10], ["hh",1], ["sd",1]).s().fast(8)','wchooseCycles(["bd bd bd",5], ["hh hh hh",3], ["sd sd sd",1]).fast(4).s()'],name:"wchooseCycles",longname:"wchooseCycles",kind:"constant",scope:"global"},{comment:`/**
 * Generates a continuous pattern of [perlin noise](https://en.wikipedia.org/wiki/Perlin_noise), in the range 0..1.
 *
 * @name perlin
 * @example
 * // randomly change the cutoff
 * s("bd*4,hh*8").cutoff(perlin.range(500,8000))
 *
 */`,meta:{filename:"signal.mjs",lineno:537,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:'<p>Generates a continuous pattern of <a href="https://en.wikipedia.org/wiki/Perlin_noise">perlin noise</a>, in the range 0..1.</p>',name:"perlin",examples:[`// randomly change the cutoff
s("bd*4,hh*8").cutoff(perlin.range(500,8000))`],longname:"perlin",kind:"member",scope:"global"},{comment:`/**
 * Randomly removes events from the pattern by a given amount.
 * 0 = 0% chance of removal
 * 1 = 100% chance of removal
 *
 * @name degradeBy
 * @memberof Pattern
 * @param {number} amount - a number between 0 and 1
 * @returns Pattern
 * @example
 * s("hh*8").degradeBy(0.2)
 * @example
 * s("[hh?0.2]*8")
 */`,meta:{filename:"signal.mjs",lineno:552,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Randomly removes events from the pattern by a given amount.
0 = 0% chance of removal
1 = 100% chance of removal</p>`,name:"degradeBy",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>a number between 0 and 1</p>",name:"amount"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").degradeBy(0.2)','s("[hh?0.2]*8")'],scope:"static",longname:"Pattern.degradeBy",kind:"member"},{comment:`/**
 *
 * Randomly removes 50% of events from the pattern. Shorthand for \`.degradeBy(0.5)\`
 *
 * @name degrade
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").degrade()
 * @example
 * s("[hh?]*8")
 */`,meta:{filename:"signal.mjs",lineno:570,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Randomly removes 50% of events from the pattern. Shorthand for <code>.degradeBy(0.5)</code></p>",name:"degrade",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").degrade()','s("[hh?]*8")'],scope:"static",longname:"Pattern.degrade",kind:"member"},{comment:`/**
 * Inverse of \`degradeBy\`: Randomly removes events from the pattern by a given amount.
 * 0 = 100% chance of removal
 * 1 = 0% chance of removal
 * Events that would be removed by degradeBy are let through by undegradeBy and vice versa (see second example).
 *
 * @name undegradeBy
 * @memberof Pattern
 * @param {number} amount - a number between 0 and 1
 * @returns Pattern
 * @example
 * s("hh*8").undegradeBy(0.2)
 * @example
 * s("hh*10").layer(
 *   x => x.degradeBy(0.2).pan(0),
 *   x => x.undegradeBy(0.8).pan(1)
 * )
 */`,meta:{filename:"signal.mjs",lineno:584,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Inverse of <code>degradeBy</code>: Randomly removes events from the pattern by a given amount.
0 = 100% chance of removal
1 = 0% chance of removal
Events that would be removed by degradeBy are let through by undegradeBy and vice versa (see second example).</p>`,name:"undegradeBy",memberof:"Pattern",params:[{type:{names:["number"]},description:"<p>a number between 0 and 1</p>",name:"amount"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").undegradeBy(0.2)',`s("hh*10").layer(
  x => x.degradeBy(0.2).pan(0),
  x => x.undegradeBy(0.8).pan(1)
)`],scope:"static",longname:"Pattern.undegradeBy",kind:"member"},{comment:`/**
 * Inverse of \`degrade\`: Randomly removes 50% of events from the pattern. Shorthand for \`.undegradeBy(0.5)\`
 * Events that would be removed by degrade are let through by undegrade and vice versa (see second example).
 *
 * @name undegrade
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").undegrade()
 * @example
 * s("hh*10").layer(
 *   x => x.degrade().pan(0),
 *   x => x.undegrade().pan(1)
 * )
 */`,meta:{filename:"signal.mjs",lineno:609,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Inverse of <code>degrade</code>: Randomly removes 50% of events from the pattern. Shorthand for <code>.undegradeBy(0.5)</code>
Events that would be removed by degrade are let through by undegrade and vice versa (see second example).</p>`,name:"undegrade",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").undegrade()',`s("hh*10").layer(
  x => x.degrade().pan(0),
  x => x.undegrade().pan(1)
)`],scope:"static",longname:"Pattern.undegrade",kind:"member"},{comment:`/**
 *
 * Randomly applies the given function by the given probability.
 * Similar to \`someCyclesBy\`
 *
 * @name sometimesBy
 * @memberof Pattern
 * @param {number | Pattern} probability - a number between 0 and 1
 * @param {function} function - the transformation to apply
 * @returns Pattern
 * @example
 * s("hh*8").sometimesBy(.4, x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:626,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Randomly applies the given function by the given probability.
Similar to <code>someCyclesBy</code></p>`,name:"sometimesBy",memberof:"Pattern",params:[{type:{names:["number","Pattern"]},description:"<p>a number between 0 and 1</p>",name:"probability"},{type:{names:["function"]},description:"<p>the transformation to apply</p>",name:"function"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").sometimesBy(.4, x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.sometimesBy",kind:"member"},{comment:`/**
 *
 * Applies the given function with a 50% chance
 *
 * @name sometimes
 * @memberof Pattern
 * @param {function} function - the transformation to apply
 * @returns Pattern
 * @example
 * s("hh*8").sometimes(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:646,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Applies the given function with a 50% chance</p>",name:"sometimes",memberof:"Pattern",params:[{type:{names:["function"]},description:"<p>the transformation to apply</p>",name:"function"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").sometimes(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.sometimes",kind:"member"},{comment:`/**
 *
 * Randomly applies the given function by the given probability on a cycle by cycle basis.
 * Similar to \`sometimesBy\`
 *
 * @name someCyclesBy
 * @memberof Pattern
 * @param {number | Pattern} probability - a number between 0 and 1
 * @param {function} function - the transformation to apply
 * @returns Pattern
 * @example
 * s("bd,hh*8").someCyclesBy(.3, x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:661,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:`<p>Randomly applies the given function by the given probability on a cycle by cycle basis.
Similar to <code>sometimesBy</code></p>`,name:"someCyclesBy",memberof:"Pattern",params:[{type:{names:["number","Pattern"]},description:"<p>a number between 0 and 1</p>",name:"probability"},{type:{names:["function"]},description:"<p>the transformation to apply</p>",name:"function"}],returns:[{description:"<p>Pattern</p>"}],examples:['s("bd,hh*8").someCyclesBy(.3, x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.someCyclesBy",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.someCyclesBy(0.5, fn)\`
 *
 * @name someCycles
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("bd,hh*8").someCycles(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:686,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.someCyclesBy(0.5, fn)</code></p>",name:"someCycles",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("bd,hh*8").someCycles(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.someCycles",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.sometimesBy(0.75, fn)\`
 *
 * @name often
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").often(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:700,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.sometimesBy(0.75, fn)</code></p>",name:"often",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").often(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.often",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.sometimesBy(0.25, fn)\`
 *
 * @name rarely
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").rarely(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:714,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.sometimesBy(0.25, fn)</code></p>",name:"rarely",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").rarely(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.rarely",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.sometimesBy(0.1, fn)\`
 *
 * @name almostNever
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").almostNever(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:728,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.sometimesBy(0.1, fn)</code></p>",name:"almostNever",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").almostNever(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.almostNever",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.sometimesBy(0.9, fn)\`
 *
 * @name almostAlways
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").almostAlways(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:742,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.sometimesBy(0.9, fn)</code></p>",name:"almostAlways",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").almostAlways(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.almostAlways",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.sometimesBy(0, fn)\` (never calls fn)
 *
 * @name never
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").never(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:756,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.sometimesBy(0, fn)</code> (never calls fn)</p>",name:"never",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").never(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.never",kind:"member"},{comment:`/**
 *
 * Shorthand for \`.sometimesBy(1, fn)\` (always calls fn)
 *
 * @name always
 * @memberof Pattern
 * @returns Pattern
 * @example
 * s("hh*8").always(x=>x.speed("0.5"))
 */`,meta:{filename:"signal.mjs",lineno:770,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{}},description:"<p>Shorthand for <code>.sometimesBy(1, fn)</code> (always calls fn)</p>",name:"always",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],examples:['s("hh*8").always(x=>x.speed("0.5"))'],scope:"static",longname:"Pattern.always",kind:"member"},{comment:`/**
 * @deprecated does not appear to be referenced or invoked anywhere in the codebase
 * @noAutocomplete
 */`,meta:{range:[2812,2979],filename:"util.mjs",lineno:73,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100037042",name:"exports.getFreq",type:"VariableDeclaration"}},deprecated:"does not appear to be referenced or invoked anywhere in the codebase",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"getFreq",longname:"getFreq",kind:"constant",scope:"global"},{comment:`/**
 * @deprecated only used in workshop (first-notes)
 * @noAutocomplete
 */`,meta:{range:[3138,3257],filename:"util.mjs",lineno:85,columnno:0,path:"/Users/felix/projects/strudel/packages/core",code:{id:"astnode100037081",name:"exports.midi2note",type:"VariableDeclaration"}},deprecated:"only used in workshop (first-notes)",tags:[{originalTitle:"noAutocomplete",title:"noautocomplete",text:""}],name:"midi2note",longname:"midi2note",kind:"constant",scope:"global"},{comment:`/**
 * Sends notes to Csound for rendering with MIDI semantics. The hap value is
 * translated to these Csound pfields:
 *
 *  p1 -- Csound instrument either as a number (1-based, can be a fraction),
 *        or as a string name.
 *  p2 -- time in beats (usually seconds) from start of performance.
 *  p3 -- duration in beats (usually seconds).
 *  p4 -- MIDI key number (as a real number, not an integer but in [0, 127].
 *  p5 -- MIDI velocity (as a real number, not an integer but in [0, 127].
 *  p6 -- Strudel controls, as a string.
 */`,meta:{range:[4695,6078],filename:"index.mjs",lineno:139,columnno:0,path:"/Users/felix/projects/strudel/packages/csound",code:{id:"astnode100039257",name:"exports.csoundm",type:"VariableDeclaration"}},description:`<p>Sends notes to Csound for rendering with MIDI semantics. The hap value is
translated to these Csound pfields:</p>
<p>p1 -- Csound instrument either as a number (1-based, can be a fraction),
or as a string name.
p2 -- time in beats (usually seconds) from start of performance.
p3 -- duration in beats (usually seconds).
p4 -- MIDI key number (as a real number, not an integer but in [0, 127].
p5 -- MIDI velocity (as a real number, not an integer but in [0, 127].
p6 -- Strudel controls, as a string.</p>`,name:"csoundm",longname:"csoundm",kind:"constant",scope:"global"},{comment:`/**
 * Displays a midi-style piano roll
 *
 * @name pianoroll
 * @param {Object} options Object containing all the optional following parameters as key value pairs:
 * @param {integer} cycles number of cycles to be displayed at the same time - defaults to 4
 * @param {number} playhead location of the active notes on the time axis - 0 to 1, defaults to 0.5
 * @param {boolean} vertical displays the roll vertically - 0 by default
 * @param {boolean} labels displays labels on individual notes (see the label function) - 0 by default
 * @param {boolean} flipTime reverse the direction of the roll - 0 by default
 * @param {boolean} flipValues reverse the relative location of notes on the value axis - 0 by default
 * @param {number} overscan lookup X cycles outside of the cycles window to display notes in advance - 1 by default
 * @param {boolean} hideNegative hide notes with negative time (before starting playing the pattern) - 0 by default
 * @param {boolean} smear notes leave a solid trace - 0 by default
 * @param {boolean} fold notes takes the full value axis width - 0 by default
 * @param {string} active hexadecimal or CSS color of the active notes - defaults to #FFCA28
 * @param {string} inactive hexadecimal or CSS color of the inactive notes - defaults to #7491D2
 * @param {string} background hexadecimal or CSS color of the background - defaults to transparent
 * @param {string} playheadColor hexadecimal or CSS color of the line representing the play head - defaults to white
 * @param {boolean} fill notes are filled with color (otherwise only the label is displayed) - 0 by default
 * @param {boolean} fillActive active notes are filled with color - 0 by default
 * @param {boolean} stroke notes are shown with colored borders - 0 by default
 * @param {boolean} strokeActive active notes are shown with colored borders - 0 by default
 * @param {boolean} hideInactive only active notes are shown - 0 by default
 * @param {boolean} colorizeInactive use note color for inactive notes - 1 by default
 * @param {string} fontFamily define the font used by notes labels - defaults to 'monospace'
 * @param {integer} minMidi minimum note value to display on the value axis - defaults to 10
 * @param {integer} maxMidi maximum note value to display on the value axis - defaults to 90
 * @param {boolean} autorange automatically calculate the minMidi and maxMidi parameters - 0 by default
 *
 * @example
 * note("C2 A2 G2").euclid(5,8).s('piano').clip(1).color('salmon').pianoroll({vertical:1, labels:1})
 */`,meta:{filename:"pianoroll.mjs",lineno:66,columnno:0,path:"/Users/felix/projects/strudel/packages/draw",code:{}},description:"<p>Displays a midi-style piano roll</p>",name:"pianoroll",params:[{type:{names:["Object"]},description:"<p>Object containing all the optional following parameters as key value pairs:</p>",name:"options"},{type:{names:["integer"]},description:"<p>number of cycles to be displayed at the same time - defaults to 4</p>",name:"cycles"},{type:{names:["number"]},description:"<p>location of the active notes on the time axis - 0 to 1, defaults to 0.5</p>",name:"playhead"},{type:{names:["boolean"]},description:"<p>displays the roll vertically - 0 by default</p>",name:"vertical"},{type:{names:["boolean"]},description:"<p>displays labels on individual notes (see the label function) - 0 by default</p>",name:"labels"},{type:{names:["boolean"]},description:"<p>reverse the direction of the roll - 0 by default</p>",name:"flipTime"},{type:{names:["boolean"]},description:"<p>reverse the relative location of notes on the value axis - 0 by default</p>",name:"flipValues"},{type:{names:["number"]},description:"<p>lookup X cycles outside of the cycles window to display notes in advance - 1 by default</p>",name:"overscan"},{type:{names:["boolean"]},description:"<p>hide notes with negative time (before starting playing the pattern) - 0 by default</p>",name:"hideNegative"},{type:{names:["boolean"]},description:"<p>notes leave a solid trace - 0 by default</p>",name:"smear"},{type:{names:["boolean"]},description:"<p>notes takes the full value axis width - 0 by default</p>",name:"fold"},{type:{names:["string"]},description:"<p>hexadecimal or CSS color of the active notes - defaults to #FFCA28</p>",name:"active"},{type:{names:["string"]},description:"<p>hexadecimal or CSS color of the inactive notes - defaults to #7491D2</p>",name:"inactive"},{type:{names:["string"]},description:"<p>hexadecimal or CSS color of the background - defaults to transparent</p>",name:"background"},{type:{names:["string"]},description:"<p>hexadecimal or CSS color of the line representing the play head - defaults to white</p>",name:"playheadColor"},{type:{names:["boolean"]},description:"<p>notes are filled with color (otherwise only the label is displayed) - 0 by default</p>",name:"fill"},{type:{names:["boolean"]},description:"<p>active notes are filled with color - 0 by default</p>",name:"fillActive"},{type:{names:["boolean"]},description:"<p>notes are shown with colored borders - 0 by default</p>",name:"stroke"},{type:{names:["boolean"]},description:"<p>active notes are shown with colored borders - 0 by default</p>",name:"strokeActive"},{type:{names:["boolean"]},description:"<p>only active notes are shown - 0 by default</p>",name:"hideInactive"},{type:{names:["boolean"]},description:"<p>use note color for inactive notes - 1 by default</p>",name:"colorizeInactive"},{type:{names:["string"]},description:"<p>define the font used by notes labels - defaults to 'monospace'</p>",name:"fontFamily"},{type:{names:["integer"]},description:"<p>minimum note value to display on the value axis - defaults to 10</p>",name:"minMidi"},{type:{names:["integer"]},description:"<p>maximum note value to display on the value axis - defaults to 90</p>",name:"maxMidi"},{type:{names:["boolean"]},description:"<p>automatically calculate the minMidi and maxMidi parameters - 0 by default</p>",name:"autorange"}],examples:[`note("C2 A2 G2").euclid(5,8).s('piano').clip(1).color('salmon').pianoroll({vertical:1, labels:1})`],longname:"pianoroll",kind:"member",scope:"global"},{comment:`/**
 * Displays a vertical pianoroll with event labels.
 * Supports all the same options as pianoroll.
 *
 * @name wordfall
 */`,meta:{filename:"pianoroll.mjs",lineno:282,columnno:0,path:"/Users/felix/projects/strudel/packages/draw",code:{}},description:`<p>Displays a vertical pianoroll with event labels.
Supports all the same options as pianoroll.</p>`,name:"wordfall",longname:"wordfall",kind:"member",scope:"global"},{comment:`/**
 *
 * Sends each hap as an OSC message, which can be picked up by SuperCollider or any other OSC-enabled software.
 * For more info, read [MIDI & OSC in the docs](https://strudel.cc/learn/input-output/)
 *
 * @name osc
 * @memberof Pattern
 * @returns Pattern
 */`,meta:{filename:"osc.mjs",lineno:37,columnno:0,path:"/Users/felix/projects/strudel/packages/osc",code:{}},description:`<p>Sends each hap as an OSC message, which can be picked up by SuperCollider or any other OSC-enabled software.
For more info, read <a href="https://strudel.cc/learn/input-output/">MIDI &amp; OSC in the docs</a></p>`,name:"osc",memberof:"Pattern",returns:[{description:"<p>Pattern</p>"}],scope:"static",longname:"Pattern.osc",kind:"member"},{comment:`/** Generates a reverb impulse response.

 @param {!Object} params TODO: Document the properties.
 @param {!function(!AudioBuffer)} callback Function to call when
  the impulse response has been generated. The impulse response
  is passed to this function as its parameter. May be called
  immediately within the current execution context, or later. */`,meta:{range:[969,2138],filename:"reverbGen.mjs",lineno:24,columnno:0,path:"/Users/felix/projects/strudel/packages/superdough",code:{id:"astnode100070097",name:"reverbGen.generateReverb",type:"FunctionExpression",paramnames:["params","callback"]},vars:{audioContext:"reverbGen.generateReverb~audioContext",sampleRate:"reverbGen.generateReverb~sampleRate",numChannels:"reverbGen.generateReverb~numChannels",totalTime:"reverbGen.generateReverb~totalTime",decaySampleFrames:"reverbGen.generateReverb~decaySampleFrames",numSampleFrames:"reverbGen.generateReverb~numSampleFrames",fadeInSampleFrames:"reverbGen.generateReverb~fadeInSampleFrames",decayBase:"reverbGen.generateReverb~decayBase",reverbIR:"reverbGen.generateReverb~reverbIR",i:"reverbGen.generateReverb~i",chan:"reverbGen.generateReverb~chan",j:"reverbGen.generateReverb~j","chan[undefined]":"reverbGen.generateReverb~chan.undefined]"}},description:"<p>Generates a reverb impulse response.</p>",params:[{type:{names:["Object"]},nullable:!1,description:"<p>TODO: Document the properties.</p>",name:"params"},{type:{names:["function"]},nullable:!1,description:`<p>Function to call when
the impulse response has been generated. The impulse response
is passed to this function as its parameter. May be called
immediately within the current execution context, or later.</p>`,name:"callback"}],name:"generateReverb",longname:"reverbGen.generateReverb",kind:"function",memberof:"reverbGen",scope:"static"},{comment:`/** Creates a canvas element showing a graph of the given data.


 @param {!Float32Array} data An array of numbers, or a Float32Array.
 @param {number} width Width in pixels of the canvas.
 @param {number} height Height in pixels of the canvas.
 @param {number} min Minimum value of data for the graph (lower edge).
 @param {number} max Maximum value of data in the graph (upper edge).
 @return {!CanvasElement} The generated canvas element. */`,meta:{range:[2586,3097],filename:"reverbGen.mjs",lineno:58,columnno:0,path:"/Users/felix/projects/strudel/packages/superdough",code:{id:"astnode100070277",name:"reverbGen.generateGraph",type:"FunctionExpression",paramnames:["data","width","height","min","max"]},vars:{canvas:"reverbGen.generateGraph~canvas","canvas.width":"reverbGen.generateGraph~canvas.width","canvas.height":"reverbGen.generateGraph~canvas.height",gc:"reverbGen.generateGraph~gc","gc.fillStyle":"reverbGen.generateGraph~gc.fillStyle",xscale:"reverbGen.generateGraph~xscale",yscale:"reverbGen.generateGraph~yscale",i:"reverbGen.generateGraph~i"}},description:"<p>Creates a canvas element showing a graph of the given data.</p>",params:[{type:{names:["Float32Array"]},nullable:!1,description:"<p>An array of numbers, or a Float32Array.</p>",name:"data"},{type:{names:["number"]},description:"<p>Width in pixels of the canvas.</p>",name:"width"},{type:{names:["number"]},description:"<p>Height in pixels of the canvas.</p>",name:"height"},{type:{names:["number"]},description:"<p>Minimum value of data for the graph (lower edge).</p>",name:"min"},{type:{names:["number"]},description:"<p>Maximum value of data in the graph (upper edge).</p>",name:"max"}],returns:[{type:{names:["CanvasElement"]},nullable:!1,description:"<p>The generated canvas element.</p>"}],name:"generateGraph",longname:"reverbGen.generateGraph",kind:"function",memberof:"reverbGen",scope:"static"},{comment:`/** Applies a constantly changing lowpass filter to the given sound.

 @private
 @param {!AudioBuffer} input
 @param {number} lpFreqStart
 @param {number} lpFreqEnd
 @param {number} lpFreqEndAt
 @param {!function(!AudioBuffer)} callback May be called
  immediately within the current execution context, or later.*/`,meta:{range:[3419,4357],filename:"reverbGen.mjs",lineno:83,columnno:4,path:"/Users/felix/projects/strudel/packages/superdough",code:{id:"astnode100070392",name:"applyGradualLowpass",type:"FunctionExpression"},vars:{channelData:"applyGradualLowpass~channelData",context:"applyGradualLowpass~context",player:"applyGradualLowpass~player","player.buffer":"applyGradualLowpass~player.buffer",filter:"applyGradualLowpass~filter",lpFreqStart:"applyGradualLowpass~lpFreqStart",lpFreqEnd:"applyGradualLowpass~lpFreqEnd","filter.type":"applyGradualLowpass~filter.type","filter.Q.value":"applyGradualLowpass~filter.Q.value","context.oncomplete":"applyGradualLowpass~context.oncomplete","":null,"window.filterNode":"window.filterNode"}},description:"<p>Applies a constantly changing lowpass filter to the given sound.</p>",access:"private",params:[{type:{names:["AudioBuffer"]},nullable:!1,name:"input"},{type:{names:["number"]},name:"lpFreqStart"},{type:{names:["number"]},name:"lpFreqEnd"},{type:{names:["number"]},name:"lpFreqEndAt"},{type:{names:["function"]},nullable:!1,description:`<p>May be called
immediately within the current execution context, or later.</p>`,name:"callback"}],name:"applyGradualLowpass",longname:"applyGradualLowpass",kind:"function",scope:"global"},{comment:`/** @private
 @param {!AudioBuffer} buffer
 @return {!Array.<!Float32Array>} An array containing the Float32Array of each channel's samples. */`,meta:{range:[4508,4691],filename:"reverbGen.mjs",lineno:116,columnno:4,path:"/Users/felix/projects/strudel/packages/superdough",code:{id:"astnode100070556",name:"getAllChannelData",type:"FunctionExpression"},vars:{channels:"getAllChannelData~channels",i:"getAllChannelData~i","channels[undefined]":"getAllChannelData~channels.undefined]"}},access:"private",params:[{type:{names:["AudioBuffer"]},nullable:!1,name:"buffer"}],returns:[{type:{names:["Array.<!Float32Array>"]},nullable:!1,description:"<p>An array containing the Float32Array of each channel's samples.</p>"}],name:"getAllChannelData",longname:"getAllChannelData",kind:"function",scope:"global"},{comment:`/** @private
 @return {number} A random number from -1 to 1. */`,meta:{range:[4762,4824],filename:"reverbGen.mjs",lineno:126,columnno:4,path:"/Users/felix/projects/strudel/packages/superdough",code:{id:"astnode100070591",name:"randomSample",type:"FunctionExpression"}},access:"private",returns:[{type:{names:["number"]},description:"<p>A random number from -1 to 1.</p>"}],name:"randomSample",longname:"randomSample",kind:"function",scope:"global",params:[]},{comment:`/**
 * Loads a collection of samples to use with \`s\`
 * @example
 * samples('github:tidalcycles/dirt-samples');
 * s("[bd ~]*2, [~ hh]*2, ~ sd")
 * @example
 * samples({
 *  bd: '808bd/BD0000.WAV',
 *  sd: '808sd/SD0010.WAV'
 *  }, 'https://raw.githubusercontent.com/tidalcycles/Dirt-Samples/master/');
 * s("[bd ~]*2, [~ hh]*2, ~ sd")
 * @example
 * samples('shabda:noise,chimp:2')
 * s("noise <chimp:0*2 chimp:1>")
 * @example
 * samples('shabda/speech/fr-FR/f:chocolat')
 * s("chocolat*4")
 */`,meta:{range:[6005,7989],filename:"sampler.mjs",lineno:186,columnno:0,path:"/Users/felix/projects/strudel/packages/superdough",code:{id:"astnode100071442",name:"exports.samples",type:"VariableDeclaration"}},description:"<p>Loads a collection of samples to use with <code>s</code></p>",examples:[`samples('github:tidalcycles/dirt-samples');
s("[bd ~]*2, [~ hh]*2, ~ sd")`,`samples({
 bd: '808bd/BD0000.WAV',
 sd: '808sd/SD0010.WAV'
 }, 'https://raw.githubusercontent.com/tidalcycles/Dirt-Samples/master/');
s("[bd ~]*2, [~ hh]*2, ~ sd")`,`samples('shabda:noise,chimp:2')
s("noise <chimp:0*2 chimp:1>")`,`samples('shabda/speech/fr-FR/f:chocolat')
s("chocolat*4")`],name:"samples",longname:"samples",kind:"constant",scope:"global"},{comment:`/**
 * Change the pitch of each value by the given amount. Expects numbers or note strings as values.
 * The amount can be given as a number of semitones or as a string in interval short notation.
 * If you don't care about enharmonic correctness, just use numbers. Otherwise, pass the interval of
 * the form: ST where S is the degree number and T the type of interval with
 *
 * - M = major
 * - m = minor
 * - P = perfect
 * - A = augmented
 * - d = diminished
 *
 * Examples intervals:
 *
 * - 1P = unison
 * - 3M = major third
 * - 3m = minor third
 * - 4P = perfect fourth
 * - 4A = augmented fourth
 * - 5P = perfect fifth
 * - 5d = diminished fifth
 *
 * @param {string | number} amount Either number of semitones or interval string.
 * @returns Pattern
 * @memberof Pattern
 * @name transpose
 * @example
 * "c2 c3".fast(2).transpose("<0 -2 5 3>".slow(2)).note()
 * @example
 * "c2 c3".fast(2).transpose("<1P -2M 4P 3m>".slow(2)).note()
 */`,meta:{filename:"tonal.mjs",lineno:65,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:`<p>Change the pitch of each value by the given amount. Expects numbers or note strings as values.
The amount can be given as a number of semitones or as a string in interval short notation.
If you don't care about enharmonic correctness, just use numbers. Otherwise, pass the interval of
the form: ST where S is the degree number and T the type of interval with</p>
<ul>
<li>M = major</li>
<li>m = minor</li>
<li>P = perfect</li>
<li>A = augmented</li>
<li>d = diminished</li>
</ul>
<p>Examples intervals:</p>
<ul>
<li>1P = unison</li>
<li>3M = major third</li>
<li>3m = minor third</li>
<li>4P = perfect fourth</li>
<li>4A = augmented fourth</li>
<li>5P = perfect fifth</li>
<li>5d = diminished fifth</li>
</ul>`,params:[{type:{names:["string","number"]},description:"<p>Either number of semitones or interval string.</p>",name:"amount"}],returns:[{description:"<p>Pattern</p>"}],memberof:"Pattern",name:"transpose",examples:['"c2 c3".fast(2).transpose("<0 -2 5 3>".slow(2)).note()','"c2 c3".fast(2).transpose("<1P -2M 4P 3m>".slow(2)).note()'],scope:"static",longname:"Pattern.transpose",kind:"member"},{comment:`/**
 * Transposes notes inside the scale by the number of steps.
 * Expected to be called on a Pattern which already has a {@link Pattern#scale}
 *
 * @memberof Pattern
 * @name scaleTranspose
 * @param {offset} offset number of steps inside the scale
 * @returns Pattern
 * @example
 * "-8 [2,4,6]"
 * .scale('C4 bebop major')
 * .scaleTranspose("<0 -1 -2 -3 -4 -5 -6 -4>")
 * .note()
 */`,meta:{filename:"tonal.mjs",lineno:137,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:`<p>Transposes notes inside the scale by the number of steps.
Expected to be called on a Pattern which already has a {@link Pattern#scale}</p>`,memberof:"Pattern",name:"scaleTranspose",params:[{type:{names:["offset"]},description:"<p>number of steps inside the scale</p>",name:"offset"}],returns:[{description:"<p>Pattern</p>"}],examples:[`"-8 [2,4,6]"
.scale('C4 bebop major')
.scaleTranspose("<0 -1 -2 -3 -4 -5 -6 -4>")
.note()`],scope:"static",longname:"Pattern.scaleTranspose",kind:"member"},{comment:`/**
 * Turns numbers into notes in the scale (zero indexed). Also sets scale for other scale operations, like {@link Pattern#scaleTranspose}.
 *
 * A scale consists of a root note (e.g. \`c4\`, \`c\`, \`f#\`, \`bb4\`) followed by semicolon (':') and then a [scale type](https://github.com/tonaljs/tonal/blob/main/packages/scale-type/data.ts).
 *
 * The root note defaults to octave 3, if no octave number is given.
 *
 * @name scale
 * @param {string} scale Name of scale
 * @returns Pattern
 * @example
 * n("0 2 4 6 4 2").scale("C:major")
 * @example
 * n("[0,7] 4 [2,7] 4")
 * .scale("C:<major minor>/2")
 * .s("piano")
 * @example
 * n(rand.range(0,12).segment(8))
 * .scale("C:ritusen")
 * .s("piano")
 */`,meta:{filename:"tonal.mjs",lineno:169,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:`<p>Turns numbers into notes in the scale (zero indexed). Also sets scale for other scale operations, like {@link Pattern#scaleTranspose}.</p>
<p>A scale consists of a root note (e.g. <code>c4</code>, <code>c</code>, <code>f#</code>, <code>bb4</code>) followed by semicolon (':') and then a <a href="https://github.com/tonaljs/tonal/blob/main/packages/scale-type/data.ts">scale type</a>.</p>
<p>The root note defaults to octave 3, if no octave number is given.</p>`,name:"scale",params:[{type:{names:["string"]},description:"<p>Name of scale</p>",name:"scale"}],returns:[{description:"<p>Pattern</p>"}],examples:['n("0 2 4 6 4 2").scale("C:major")',`n("[0,7] 4 [2,7] 4")
.scale("C:<major minor>/2")
.s("piano")`,`n(rand.range(0,12).segment(8))
.scale("C:ritusen")
.s("piano")`],longname:"scale",kind:"member",scope:"global"},{comment:`/**
 * Adds a new custom voicing dictionary.
 *
 * @name addVoicings
 * @memberof Pattern
 * @param {string} name identifier for the voicing dictionary
 * @param {Object} dictionary maps chord symbol to possible voicings
 * @param {Array} range min, max note
 * @returns Pattern
 * @example
 * addVoicings('cookie', {
 *   7: ['3M 7m 9M 12P 15P', '7m 10M 13M 16M 19P'],
 *   '^7': ['3M 6M 9M 12P 14M', '7M 10M 13M 16M 19P'],
 *   m7: ['8P 11P 14m 17m 19P', '5P 8P 11P 14m 17m'],
 *   m7b5: ['3m 5d 8P 11P 14m', '5d 8P 11P 14m 17m'],
 *   o7: ['3m 6M 9M 11A 15P'],
 *   '7alt': ['3M 7m 10m 13m 15P'],
 *   '7#11': ['7m 10m 13m 15P 17m'],
 * }, ['C3', 'C6'])
 * "<C^7 A7 Dm7 G7>".voicings('cookie').note()
 */`,meta:{filename:"voicings.mjs",lineno:89,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:"<p>Adds a new custom voicing dictionary.</p>",name:"addVoicings",memberof:"Pattern",params:[{type:{names:["string"]},description:"<p>identifier for the voicing dictionary</p>",name:"name"},{type:{names:["Object"]},description:"<p>maps chord symbol to possible voicings</p>",name:"dictionary"},{type:{names:["Array"]},description:"<p>min, max note</p>",name:"range"}],returns:[{description:"<p>Pattern</p>"}],examples:[`addVoicings('cookie', {
  7: ['3M 7m 9M 12P 15P', '7m 10M 13M 16M 19P'],
  '^7': ['3M 6M 9M 12P 14M', '7M 10M 13M 16M 19P'],
  m7: ['8P 11P 14m 17m 19P', '5P 8P 11P 14m 17m'],
  m7b5: ['3m 5d 8P 11P 14m', '5d 8P 11P 14m 17m'],
  o7: ['3m 6M 9M 11A 15P'],
  '7alt': ['3M 7m 10m 13m 15P'],
  '7#11': ['7m 10m 13m 15P 17m'],
}, ['C3', 'C6'])
"<C^7 A7 Dm7 G7>".voicings('cookie').note()`],scope:"static",longname:"Pattern.addVoicings",kind:"member"},{comment:`/**
 * DEPRECATED: still works, but it is recommended you use .voicing instead (without s).
 * Turns chord symbols into voicings, using the smoothest voice leading possible.
 * Uses [chord-voicings package](https://github.com/felixroos/chord-voicings#chord-voicings).
 *
 * @name voicings
 * @memberof Pattern
 * @param {string} dictionary which voicing dictionary to use.
 * @returns Pattern
 * @example
 * stack("<C^7 A7 Dm7 G7>".voicings('lefthand'), "<C3 A2 D3 G2>").note()
 */`,meta:{filename:"voicings.mjs",lineno:130,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:`<p>DEPRECATED: still works, but it is recommended you use .voicing instead (without s).
Turns chord symbols into voicings, using the smoothest voice leading possible.
Uses <a href="https://github.com/felixroos/chord-voicings#chord-voicings">chord-voicings package</a>.</p>`,name:"voicings",memberof:"Pattern",params:[{type:{names:["string"]},description:"<p>which voicing dictionary to use.</p>",name:"dictionary"}],returns:[{description:"<p>Pattern</p>"}],examples:[`stack("<C^7 A7 Dm7 G7>".voicings('lefthand'), "<C3 A2 D3 G2>").note()`],scope:"static",longname:"Pattern.voicings",kind:"member"},{comment:`/**
 * Maps the chords of the incoming pattern to root notes in the given octave.
 *
 * @name rootNotes
 * @memberof Pattern
 * @param {octave} octave octave to use
 * @returns Pattern
 * @example
 * "<C^7 A7 Dm7 G7>".rootNotes(2).note()
 */`,meta:{filename:"voicings.mjs",lineno:156,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:"<p>Maps the chords of the incoming pattern to root notes in the given octave.</p>",name:"rootNotes",memberof:"Pattern",params:[{type:{names:["octave"]},description:"<p>octave to use</p>",name:"octave"}],returns:[{description:"<p>Pattern</p>"}],examples:['"<C^7 A7 Dm7 G7>".rootNotes(2).note()'],scope:"static",longname:"Pattern.rootNotes",kind:"member"},{comment:'/**\n * Turns chord symbols into voicings. You can use the following control params:\n *\n * - `chord`: Note, followed by chord symbol, e.g. C Am G7 Bb^7\n * - `dict`: voicing dictionary to use, falls back to default dictionary\n * - `anchor`: the note that is used to align the chord\n * - `mode`: how the voicing is aligned to the anchor\n *   - `below`: top note <= anchor\n *   - `duck`: top note <= anchor, anchor excluded\n *   - `above`: bottom note >= anchor\n * - `offset`: whole number that shifts the voicing up or down to the next voicing\n * - `n`: if set, the voicing is played like a scale. Overshooting numbers will be octaved\n *\n * All of the above controls are optional, except `chord`.\n * If you pass a pattern of strings to voicing, they will be interpreted as chords.\n *\n * @name voicing\n * @returns Pattern\n * @example\n * n("0 1 2 3").chord("<C Am F G>").voicing()\n */',meta:{filename:"voicings.mjs",lineno:175,columnno:0,path:"/Users/felix/projects/strudel/packages/tonal",code:{}},description:`<p>Turns chord symbols into voicings. You can use the following control params:</p>
<ul>
<li><code>chord</code>: Note, followed by chord symbol, e.g. C Am G7 Bb^7</li>
<li><code>dict</code>: voicing dictionary to use, falls back to default dictionary</li>
<li><code>anchor</code>: the note that is used to align the chord</li>
<li><code>mode</code>: how the voicing is aligned to the anchor
<ul>
<li><code>below</code>: top note &lt;= anchor</li>
<li><code>duck</code>: top note &lt;= anchor, anchor excluded</li>
<li><code>above</code>: bottom note &gt;= anchor</li>
</ul>
</li>
<li><code>offset</code>: whole number that shifts the voicing up or down to the next voicing</li>
<li><code>n</code>: if set, the voicing is played like a scale. Overshooting numbers will be octaved</li>
</ul>
<p>All of the above controls are optional, except <code>chord</code>.
If you pass a pattern of strings to voicing, they will be interpreted as chords.</p>`,name:"voicing",returns:[{description:"<p>Pattern</p>"}],examples:['n("0 1 2 3").chord("<C Am F G>").voicing()'],longname:"voicing",kind:"member",scope:"global"},{comment:`/**
 * Renders an oscilloscope for the frequency domain of the audio signal.
 * @name fscope
 * @param {string} color line color as hex or color name. defaults to white.
 * @param {number} scale scales the y-axis. Defaults to 0.25
 * @param {number} pos y-position relative to screen height. 0 = top, 1 = bottom of screen
 * @param {number} lean y-axis alignment where 0 = top and 1 = bottom
 * @param {number} min min value
 * @param {number} max max value
 * @example
 * s("sawtooth").fscope()
 */`,meta:{filename:"scope.mjs",lineno:98,columnno:0,path:"/Users/felix/projects/strudel/packages/webaudio",code:{}},description:"<p>Renders an oscilloscope for the frequency domain of the audio signal.</p>",name:"fscope",params:[{type:{names:["string"]},description:"<p>line color as hex or color name. defaults to white.</p>",name:"color"},{type:{names:["number"]},description:"<p>scales the y-axis. Defaults to 0.25</p>",name:"scale"},{type:{names:["number"]},description:"<p>y-position relative to screen height. 0 = top, 1 = bottom of screen</p>",name:"pos"},{type:{names:["number"]},description:"<p>y-axis alignment where 0 = top and 1 = bottom</p>",name:"lean"},{type:{names:["number"]},description:"<p>min value</p>",name:"min"},{type:{names:["number"]},description:"<p>max value</p>",name:"max"}],examples:['s("sawtooth").fscope()'],longname:"fscope",kind:"member",scope:"global"},{comment:`/**
 * Renders an oscilloscope for the time domain of the audio signal.
 * @name scope
 * @synonyms tscope
 * @param {object} config optional config with options:
 * @param {boolean} align if 1, the scope will be aligned to the first zero crossing. defaults to 1
 * @param {string} color line color as hex or color name. defaults to white.
 * @param {number} thickness line thickness. defaults to 3
 * @param {number} scale scales the y-axis. Defaults to 0.25
 * @param {number} pos y-position relative to screen height. 0 = top, 1 = bottom of screen
 * @param {number} trigger amplitude value that is used to align the scope. defaults to 0.
 * @example
 * s("sawtooth").scope()
 */`,meta:{filename:"scope.mjs",lineno:121,columnno:0,path:"/Users/felix/projects/strudel/packages/webaudio",code:{}},description:"<p>Renders an oscilloscope for the time domain of the audio signal.</p>",name:"scope",synonyms_text:"tscope",synonyms:["tscope"],params:[{type:{names:["object"]},description:"<p>optional config with options:</p>",name:"config"},{type:{names:["boolean"]},description:"<p>if 1, the scope will be aligned to the first zero crossing. defaults to 1</p>",name:"align"},{type:{names:["string"]},description:"<p>line color as hex or color name. defaults to white.</p>",name:"color"},{type:{names:["number"]},description:"<p>line thickness. defaults to 3</p>",name:"thickness"},{type:{names:["number"]},description:"<p>scales the y-axis. Defaults to 0.25</p>",name:"scale"},{type:{names:["number"]},description:"<p>y-position relative to screen height. 0 = top, 1 = bottom of screen</p>",name:"pos"},{type:{names:["number"]},description:"<p>amplitude value that is used to align the scope. defaults to 0.</p>",name:"trigger"}],examples:['s("sawtooth").scope()'],longname:"scope",kind:"member",scope:"global"},{kind:"package",longname:"package:undefined",files:["/Users/felix/projects/strudel/packages/codemirror/autocomplete.mjs","/Users/felix/projects/strudel/packages/codemirror/codemirror.mjs","/Users/felix/projects/strudel/packages/codemirror/flash.mjs","/Users/felix/projects/strudel/packages/codemirror/highlight.mjs","/Users/felix/projects/strudel/packages/codemirror/html.mjs","/Users/felix/projects/strudel/packages/codemirror/index.mjs","/Users/felix/projects/strudel/packages/codemirror/keybindings.mjs","/Users/felix/projects/strudel/packages/codemirror/slider.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/algoboy.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/blackscreen.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/bluescreen.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/strudel-theme.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/teletext.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/terminal.mjs","/Users/felix/projects/strudel/packages/codemirror/themes/whitescreen.mjs","/Users/felix/projects/strudel/packages/codemirror/themes.mjs","/Users/felix/projects/strudel/packages/codemirror/tooltip.mjs","/Users/felix/projects/strudel/packages/codemirror/vite.config.js","/Users/felix/projects/strudel/packages/codemirror/widget.mjs","/Users/felix/projects/strudel/packages/core/bench/pattern.bench.mjs","/Users/felix/projects/strudel/packages/core/clockworker.js","/Users/felix/projects/strudel/packages/core/controls.mjs","/Users/felix/projects/strudel/packages/core/cyclist.mjs","/Users/felix/projects/strudel/packages/core/drawLine.mjs","/Users/felix/projects/strudel/packages/core/euclid.mjs","/Users/felix/projects/strudel/packages/core/evaluate.mjs","/Users/felix/projects/strudel/packages/core/fraction.mjs","/Users/felix/projects/strudel/packages/core/hap.mjs","/Users/felix/projects/strudel/packages/core/index.mjs","/Users/felix/projects/strudel/packages/core/logger.mjs","/Users/felix/projects/strudel/packages/core/neocyclist.mjs","/Users/felix/projects/strudel/packages/core/pattern.mjs","/Users/felix/projects/strudel/packages/core/repl.mjs","/Users/felix/projects/strudel/packages/core/signal.mjs","/Users/felix/projects/strudel/packages/core/speak.mjs","/Users/felix/projects/strudel/packages/core/state.mjs","/Users/felix/projects/strudel/packages/core/test/controls.test.mjs","/Users/felix/projects/strudel/packages/core/test/drawLine.test.mjs","/Users/felix/projects/strudel/packages/core/test/fraction.test.mjs","/Users/felix/projects/strudel/packages/core/test/pattern.test.mjs","/Users/felix/projects/strudel/packages/core/test/solmization.test.js","/Users/felix/projects/strudel/packages/core/test/util.test.mjs","/Users/felix/projects/strudel/packages/core/test/value.test.mjs","/Users/felix/projects/strudel/packages/core/time.mjs","/Users/felix/projects/strudel/packages/core/timespan.mjs","/Users/felix/projects/strudel/packages/core/ui.mjs","/Users/felix/projects/strudel/packages/core/util.mjs","/Users/felix/projects/strudel/packages/core/value.mjs","/Users/felix/projects/strudel/packages/core/vite.config.js","/Users/felix/projects/strudel/packages/core/zyklus.mjs","/Users/felix/projects/strudel/packages/csound/index.mjs","/Users/felix/projects/strudel/packages/csound/vite.config.js","/Users/felix/projects/strudel/packages/desktopbridge/index.mjs","/Users/felix/projects/strudel/packages/desktopbridge/loggerbridge.mjs","/Users/felix/projects/strudel/packages/desktopbridge/midibridge.mjs","/Users/felix/projects/strudel/packages/desktopbridge/oscbridge.mjs","/Users/felix/projects/strudel/packages/desktopbridge/utils.mjs","/Users/felix/projects/strudel/packages/draw/animate.mjs","/Users/felix/projects/strudel/packages/draw/color.mjs","/Users/felix/projects/strudel/packages/draw/draw.mjs","/Users/felix/projects/strudel/packages/draw/index.mjs","/Users/felix/projects/strudel/packages/draw/pianoroll.mjs","/Users/felix/projects/strudel/packages/draw/pitchwheel.mjs","/Users/felix/projects/strudel/packages/draw/spiral.mjs","/Users/felix/projects/strudel/packages/draw/vite.config.js","/Users/felix/projects/strudel/packages/embed/embed.js","/Users/felix/projects/strudel/packages/hs2js/src/hs2js.mjs","/Users/felix/projects/strudel/packages/hs2js/src/index.mjs","/Users/felix/projects/strudel/packages/hs2js/src/parser.mjs","/Users/felix/projects/strudel/packages/hs2js/vite.config.js","/Users/felix/projects/strudel/packages/hydra/hydra.mjs","/Users/felix/projects/strudel/packages/hydra/vite.config.js","/Users/felix/projects/strudel/packages/midi/index.mjs","/Users/felix/projects/strudel/packages/midi/midi.mjs","/Users/felix/projects/strudel/packages/midi/vite.config.js","/Users/felix/projects/strudel/packages/mini/bench/mini.bench.mjs","/Users/felix/projects/strudel/packages/mini/index.mjs","/Users/felix/projects/strudel/packages/mini/krill-parser.js","/Users/felix/projects/strudel/packages/mini/mini.mjs","/Users/felix/projects/strudel/packages/mini/test/mini.test.mjs","/Users/felix/projects/strudel/packages/mini/vite.config.js","/Users/felix/projects/strudel/packages/osc/osc.mjs","/Users/felix/projects/strudel/packages/osc/server.js","/Users/felix/projects/strudel/packages/osc/tidal-sniffer.js","/Users/felix/projects/strudel/packages/osc/vite.config.js","/Users/felix/projects/strudel/packages/repl/index.mjs","/Users/felix/projects/strudel/packages/repl/prebake.mjs","/Users/felix/projects/strudel/packages/repl/repl-component.mjs","/Users/felix/projects/strudel/packages/repl/vite.config.js","/Users/felix/projects/strudel/packages/sampler/sample-server.mjs","/Users/felix/projects/strudel/packages/serial/serial.mjs","/Users/felix/projects/strudel/packages/serial/vite.config.js","/Users/felix/projects/strudel/packages/soundfonts/convert.js","/Users/felix/projects/strudel/packages/soundfonts/fontloader.mjs","/Users/felix/projects/strudel/packages/soundfonts/gm.mjs","/Users/felix/projects/strudel/packages/soundfonts/index.mjs","/Users/felix/projects/strudel/packages/soundfonts/list.mjs","/Users/felix/projects/strudel/packages/soundfonts/sfumato.mjs","/Users/felix/projects/strudel/packages/soundfonts/vite.config.js","/Users/felix/projects/strudel/packages/superdough/dspworklet.mjs","/Users/felix/projects/strudel/packages/superdough/feedbackdelay.mjs","/Users/felix/projects/strudel/packages/superdough/helpers.mjs","/Users/felix/projects/strudel/packages/superdough/index.mjs","/Users/felix/projects/strudel/packages/superdough/logger.mjs","/Users/felix/projects/strudel/packages/superdough/noise.mjs","/Users/felix/projects/strudel/packages/superdough/reverb.mjs","/Users/felix/projects/strudel/packages/superdough/reverbGen.mjs","/Users/felix/projects/strudel/packages/superdough/sampler.mjs","/Users/felix/projects/strudel/packages/superdough/superdough.mjs","/Users/felix/projects/strudel/packages/superdough/synth.mjs","/Users/felix/projects/strudel/packages/superdough/util.mjs","/Users/felix/projects/strudel/packages/superdough/vite.config.js","/Users/felix/projects/strudel/packages/superdough/vowel.mjs","/Users/felix/projects/strudel/packages/superdough/worklets.mjs","/Users/felix/projects/strudel/packages/superdough/zzfx.mjs","/Users/felix/projects/strudel/packages/superdough/zzfx_fork.mjs","/Users/felix/projects/strudel/packages/tidal/tidal.mjs","/Users/felix/projects/strudel/packages/tonal/index.mjs","/Users/felix/projects/strudel/packages/tonal/ireal.mjs","/Users/felix/projects/strudel/packages/tonal/test/tonal.test.mjs","/Users/felix/projects/strudel/packages/tonal/test/tonleiter.test.mjs","/Users/felix/projects/strudel/packages/tonal/tonal.mjs","/Users/felix/projects/strudel/packages/tonal/tonleiter.mjs","/Users/felix/projects/strudel/packages/tonal/vite.config.js","/Users/felix/projects/strudel/packages/tonal/voicings.mjs","/Users/felix/projects/strudel/packages/transpiler/index.mjs","/Users/felix/projects/strudel/packages/transpiler/test/transpiler.test.mjs","/Users/felix/projects/strudel/packages/transpiler/transpiler.mjs","/Users/felix/projects/strudel/packages/transpiler/vite.config.js","/Users/felix/projects/strudel/packages/web/vite.config.js","/Users/felix/projects/strudel/packages/web/web.mjs","/Users/felix/projects/strudel/packages/webaudio/index.mjs","/Users/felix/projects/strudel/packages/webaudio/scope.mjs","/Users/felix/projects/strudel/packages/webaudio/vite.config.js","/Users/felix/projects/strudel/packages/webaudio/webaudio.mjs","/Users/felix/projects/strudel/packages/xen/index.mjs","/Users/felix/projects/strudel/packages/xen/test/xen.test.mjs","/Users/felix/projects/strudel/packages/xen/tune.mjs","/Users/felix/projects/strudel/packages/xen/tunejs.js","/Users/felix/projects/strudel/packages/xen/vite.config.js","/Users/felix/projects/strudel/packages/xen/xen.mjs"]}],jsdoc={docs},parser=typeof DOMParser<"u"?new DOMParser:null;let html=o=>parser?.parseFromString(o,"text/html").querySelectorAll("*"),parseChunk=o=>Array.isArray(o)?o.flat().join(""):o===void 0?"":o,h=(o,...e)=>{let a="";for(let l in o)a+=parseChunk(o[l]),a+=parseChunk(e[l]);return html(a)};function plaintext(o){const e=document.createElement("div");return e.innerText=o,e.innerHTML}const getDocLabel$1=o=>o.name||o.longname,getInnerText=o=>{var e=document.createElement("div");return e.innerHTML=o,e.textContent||e.innerText||""};function Autocomplete({doc:o,label:e}){return h`<div class="prose dark:prose-invert max-h-[400px] overflow-auto p-2">
<h1 class="pt-0 mt-0">${e||getDocLabel$1(o)}</h1>
${o.description}
<ul>
  ${o.params?.map(({name:a,type:l,description:u})=>`<li>${a} : ${l.names?.join(" | ")} ${u?` - ${getInnerText(u)}`:""}</li>`)}
</ul>
<div>
  ${o.examples?.map(a=>`<div><pre>${plaintext(a)}</pre></div>`)}
</div>
</div>`[0]}const jsdocCompletions=jsdoc.docs.filter(o=>getDocLabel$1(o)&&!getDocLabel$1(o).startsWith("_")&&!["package"].includes(o.kind)&&!["superdirtOnly","noAutocomplete"].some(e=>o.tags?.find(a=>a.originalTitle===e))).map(o=>({label:getDocLabel$1(o),info:()=>Autocomplete({doc:o}),type:"function"})),strudelAutocomplete=o=>{let e=o.matchBefore(/\w*/);return e.from==e.to&&!o.explicit?null:{from:e.from,options:jsdocCompletions}};function isAutoCompletionEnabled(o){return o?[autocompletion({override:[strudelAutocomplete]})]:[]}const getDocLabel=o=>o.name||o.longname;let ctrlDown=!1;typeof window<"u"&&(window.addEventListener("keyup",function(o){o.key=="Control"&&(ctrlDown=!1)},!0),window.addEventListener("keydown",function(o){o.key=="Control"&&(ctrlDown=!0)},!0));const strudelTooltip=hoverTooltip((o,e,a)=>{if(!ctrlDown)return null;let{from:l,to:u,text:f}=o.state.doc.lineAt(e),d=e,p=e;for(;d>l&&/\w/.test(f[d-l-1]);)d--;for(;p<u&&/\w/.test(f[p-l]);)p++;if(d==e&&a<0||p==e&&a>0)return null;let g=f.slice(d-l,p-l),b=jsdoc.docs.filter(O=>getDocLabel(O)===g)[0];return!b&&(b=jsdoc.docs.filter(O=>O.synonyms&&O.synonyms.includes(g))[0],!b)?null:{pos:d,end:p,above:!1,arrow:!0,create(O){let A=document.createElement("div");A.className="strudel-tooltip";const k=Autocomplete({doc:b,label:g});return A.appendChild(k),{dom:A}}}},{hoverTime:10}),isTooltipEnabled=o=>o?strudelTooltip:[],setFlash=StateEffect.define(),flashField=StateField.define({create(){return Decoration.none},update(o,e){try{for(let a of e.effects)if(a.is(setFlash))if(a.value&&e.newDoc.length>0){const l=Decoration.mark({attributes:{style:"background-color: #FFCA2880"}});o=Decoration.set([l.range(0,e.newDoc.length)])}else o=Decoration.set([]);return o}catch(a){return console.warn("flash error",a),o}},provide:o=>EditorView.decorations.from(o)}),flash=(o,e=200)=>{o.dispatch({effects:setFlash.of(!0)}),setTimeout(()=>{o.dispatch({effects:setFlash.of(!1)})},e)},isFlashEnabled=o=>o?flashField:[],setMiniLocations=StateEffect.define(),showMiniLocations=StateEffect.define(),updateMiniLocations=(o,e)=>{o.dispatch({effects:setMiniLocations.of(e)})},highlightMiniLocations=(o,e,a)=>{o.dispatch({effects:showMiniLocations.of({atTime:e,haps:a})})},miniLocations=StateField.define({create(){return Decoration.none},update(o,e){e.docChanged&&(o=o.map(e.changes));for(let a of e.effects)if(a.is(setMiniLocations)){const l=a.value.filter(([u])=>u<e.newDoc.length).map(([u,f])=>[u,Math.min(f,e.newDoc.length)]).map(u=>Decoration.mark({id:u.join(":"),attributes:{style:"background-color: #00CA2880"}}).range(...u));o=Decoration.set(l,!0)}return o}}),visibleMiniLocations=StateField.define({create(){return{atTime:0,haps:new Map}},update(o,e){for(let a of e.effects)if(a.is(showMiniLocations)){const l=new Map;for(let u of a.value.haps)if(!(!u.context?.locations||!u.whole))for(let{start:f,end:d}of u.context.locations){let p=`${f}:${d}`;(!l.has(p)||l.get(p).whole.begin.lt(u.whole.begin))&&l.set(p,u)}o={atTime:a.value.atTime,haps:l}}return o}}),miniLocationHighlights=EditorView.decorations.compute([miniLocations,visibleMiniLocations],o=>{const e=o.field(miniLocations).iter(),{haps:a}=o.field(visibleMiniLocations),l=new RangeSetBuilder;for(;e.value;){const{from:u,to:f,value:{spec:{id:d}}}=e;if(a.has(d)){const g=a.get(d).value?.color??"var(--foreground)";l.add(u,f,Decoration.mark({attributes:{style:`outline: solid 2px ${g}`}}))}e.next()}return l.finish()}),highlightExtension=[miniLocations,visibleMiniLocations,miniLocationHighlights],isPatternHighlightingEnabled=(o,e)=>(o&&e&&setTimeout(()=>{updateMiniLocations(e.editor,e.miniLocations)},100),o?highlightExtension:[]);function crelt$1(){var o=arguments[0];typeof o=="string"&&(o=document.createElement(o));var e=1,a=arguments[1];if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){var u=a[l];typeof u=="string"?o.setAttribute(l,u):u!=null&&(o[l]=u)}e++}for(;e<arguments.length;e++)add$5(o,arguments[e]);return o}function add$5(o,e){if(typeof e=="string")o.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)o.appendChild(e);else if(Array.isArray(e))for(var a=0;a<e.length;a++)add$5(o,e[a]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?o=>o.normalize("NFKD"):o=>o;class SearchCursor{constructor(e,a,l=0,u=e.length,f,d){this.test=d,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(l,u),this.bufferStart=l,this.normalize=f?p=>f(basicNormalize(p)):basicNormalize,this.query=this.normalize(a)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let a=fromCodePoint(e),l=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let u=this.normalize(a);for(let f=0,d=l;;f++){let p=u.charCodeAt(f),g=this.match(p,d);if(f==u.length-1){if(g)return this.value=g,this;break}d==l&&f<a.length&&a.charCodeAt(f)==p&&d++}}}match(e,a){let l=null;for(let u=0;u<this.matches.length;u+=2){let f=this.matches[u],d=!1;this.query.charCodeAt(f)==e&&(f==this.query.length-1?l={from:this.matches[u+1],to:a+1}:(this.matches[u]++,d=!0)),d||(this.matches.splice(u,2),u-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?l={from:a,to:a+1}:this.matches.push(1,a)),l&&this.test&&!this.test(l.from,l.to,this.buffer,this.bufferStart)&&(l=null),l}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,a,l,u=0,f=e.length){if(this.text=e,this.to=f,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(a))return new MultilineRegExpCursor(e,a,l,u,f);this.re=new RegExp(a,baseFlags+(l?.ignoreCase?"i":"")),this.test=l?.test,this.iter=e.iter();let d=e.lineAt(u);this.curLineStart=d.from,this.matchPos=toCharEnd(e,u),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let a=this.matchPos<=this.to&&this.re.exec(this.curLine);if(a){let l=this.curLineStart+a.index,u=l+a[0].length;if(this.matchPos=toCharEnd(this.text,u+(l==u?1:0)),l==this.curLineStart+this.curLine.length&&this.nextLine(),(l<u||l>this.value.to)&&(!this.test||this.test(l,u,a)))return this.value={from:l,to:u,match:a},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,a){this.from=e,this.text=a}get to(){return this.from+this.text.length}static get(e,a,l){let u=flattened.get(e);if(!u||u.from>=l||u.to<=a){let p=new FlattenedDoc(a,e.sliceString(a,l));return flattened.set(e,p),p}if(u.from==a&&u.to==l)return u;let{text:f,from:d}=u;return d>a&&(f=e.sliceString(a,d)+f,d=a),u.to<l&&(f+=e.sliceString(u.to,l)),flattened.set(e,new FlattenedDoc(d,f)),new FlattenedDoc(a,f.slice(a-d,l-d))}}class MultilineRegExpCursor{constructor(e,a,l,u,f){this.text=e,this.to=f,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,u),this.re=new RegExp(a,baseFlags+(l?.ignoreCase?"i":"")),this.test=l?.test,this.flat=FlattenedDoc.get(e,u,this.chunkEnd(u+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,a=this.re.exec(this.flat.text);if(a&&!a[0]&&a.index==e&&(this.re.lastIndex=e+1,a=this.re.exec(this.flat.text)),a){let l=this.flat.from+a.index,u=l+a[0].length;if((this.flat.to>=this.to||a.index+a[0].length<=this.flat.text.length-10)&&(!this.test||this.test(l,u,a)))return this.value={from:l,to:u,match:a},this.matchPos=toCharEnd(this.text,u+(l==u?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(o){try{return new RegExp(o,baseFlags),!0}catch{return!1}}function toCharEnd(o,e){if(e>=o.length)return e;let a=o.lineAt(e),l;for(;e<a.to&&(l=a.text.charCodeAt(e-a.from))>=56320&&l<57344;)e++;return e}function createLineDialog(o){let e=String(o.state.doc.lineAt(o.state.selection.main.head).number),a=crelt$1("input",{class:"cm-textfield",name:"line",value:e}),l=crelt$1("form",{class:"cm-gotoLine",onkeydown:f=>{f.keyCode==27?(f.preventDefault(),o.dispatch({effects:dialogEffect.of(!1)}),o.focus()):f.keyCode==13&&(f.preventDefault(),u())},onsubmit:f=>{f.preventDefault(),u()}},crelt$1("label",o.state.phrase("Go to line"),": ",a)," ",crelt$1("button",{class:"cm-button",type:"submit"},o.state.phrase("go")));function u(){let f=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(a.value);if(!f)return;let{state:d}=o,p=d.doc.lineAt(d.selection.main.head),[,g,b,O,A]=f,k=O?+O.slice(1):0,M=b?+b:p.number;if(b&&A){let L=M/100;g&&(L=L*(g=="-"?-1:1)+p.number/d.doc.lines),M=Math.round(d.doc.lines*L)}else b&&g&&(M=M*(g=="-"?-1:1)+p.number);let B=d.doc.line(Math.max(1,Math.min(d.doc.lines,M))),N=EditorSelection.cursor(B.from+Math.max(0,Math.min(k,B.length)));o.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(N.from,{y:"center"})],selection:N}),o.focus()}return{dom:l}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(o,e){for(let a of e.effects)a.is(dialogEffect)&&(o=a.value);return o},provide:o=>showPanel.from(o,e=>e?createLineDialog:null)}),gotoLine=o=>{let e=getPanel(o,createLineDialog);if(!e){let a=[dialogEffect.of(!0)];o.state.field(dialogField,!1)==null&&a.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),o.dispatch({effects:a}),e=getPanel(o,createLineDialog)}return e&&e.dom.querySelector("input").select(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),selectWord=({state:o,dispatch:e})=>{let{selection:a}=o,l=EditorSelection.create(a.ranges.map(u=>o.wordAt(u.head)||EditorSelection.cursor(u.head)),a.mainIndex);return l.eq(a)?!1:(e(o.update({selection:l})),!0)};function findNextOccurrence(o,e){let{main:a,ranges:l}=o.selection,u=o.wordAt(a.head),f=u&&u.from==a.from&&u.to==a.to;for(let d=!1,p=new SearchCursor(o.doc,e,l[l.length-1].to);;)if(p.next(),p.done){if(d)return null;p=new SearchCursor(o.doc,e,0,Math.max(0,l[l.length-1].from-1)),d=!0}else{if(d&&l.some(g=>g.from==p.value.from))continue;if(f){let g=o.wordAt(p.value.from);if(!g||g.from!=p.value.from||g.to!=p.value.to)continue}return p.value}}const selectNextOccurrence=({state:o,dispatch:e})=>{let{ranges:a}=o.selection;if(a.some(f=>f.from===f.to))return selectWord({state:o,dispatch:e});let l=o.sliceDoc(a[0].from,a[0].to);if(o.selection.ranges.some(f=>o.sliceDoc(f.from,f.to)!=l))return!1;let u=findNextOccurrence(o,l);return u?(e(o.update({selection:o.selection.addRange(EditorSelection.range(u.from,u.to),!1),effects:EditorView.scrollIntoView(u.to)})),!0):!1},searchConfigFacet=Facet.define({combine(o){return combineConfig(o,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e),scrollToMatch:e=>EditorView.scrollIntoView(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(a,l)=>l=="n"?`
`:l=="r"?"\r":l=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,a=0,l){let u=e.doc?e:EditorState.create({doc:e});return l==null&&(l=u.doc.length),this.regexp?regexpCursor(this,u,a,l):stringCursor(this,u,a,l)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(o,e,a,l){return new SearchCursor(e.doc,o.unquoted,a,l,o.caseSensitive?void 0:u=>u.toLowerCase(),o.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(o,e){return(a,l,u,f)=>((f>a||f+u.length<l)&&(f=Math.max(0,a-2),u=o.sliceString(f,Math.min(o.length,l+2))),(e(charBefore(u,a-f))!=CharCategory.Word||e(charAfter(u,a-f))!=CharCategory.Word)&&(e(charAfter(u,l-f))!=CharCategory.Word||e(charBefore(u,l-f))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,a,l){let u=stringCursor(this.spec,e,l,e.doc.length).nextOverlapping();return u.done&&(u=stringCursor(this.spec,e,0,a).nextOverlapping()),u.done?null:u.value}prevMatchInRange(e,a,l){for(let u=l;;){let f=Math.max(a,u-1e4-this.spec.unquoted.length),d=stringCursor(this.spec,e,f,u),p=null;for(;!d.nextOverlapping().done;)p=d.value;if(p)return p;if(f==a)return null;u-=1e4}}prevMatch(e,a,l){return this.prevMatchInRange(e,0,a)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,a){let l=stringCursor(this.spec,e,0,e.doc.length),u=[];for(;!l.next().done;){if(u.length>=a)return null;u.push(l.value)}return u}highlight(e,a,l,u){let f=stringCursor(this.spec,e,Math.max(0,a-this.spec.unquoted.length),Math.min(l+this.spec.unquoted.length,e.doc.length));for(;!f.next().done;)u(f.value.from,f.value.to)}}function regexpCursor(o,e,a,l){return new RegExpCursor(e.doc,o.search,{ignoreCase:!o.caseSensitive,test:o.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},a,l)}function charBefore(o,e){return o.slice(findClusterBreak(o,e,!1),e)}function charAfter(o,e){return o.slice(e,findClusterBreak(o,e))}function regexpWordTest(o){return(e,a,l)=>!l[0].length||(o(charBefore(l.input,l.index))!=CharCategory.Word||o(charAfter(l.input,l.index))!=CharCategory.Word)&&(o(charAfter(l.input,l.index+l[0].length))!=CharCategory.Word||o(charBefore(l.input,l.index+l[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,a,l){let u=regexpCursor(this.spec,e,l,e.doc.length).next();return u.done&&(u=regexpCursor(this.spec,e,0,a).next()),u.done?null:u.value}prevMatchInRange(e,a,l){for(let u=1;;u++){let f=Math.max(a,l-u*1e4),d=regexpCursor(this.spec,e,f,l),p=null;for(;!d.next().done;)p=d.value;if(p&&(f==a||p.from>f+10))return p;if(f==a)return null}}prevMatch(e,a,l){return this.prevMatchInRange(e,0,a)||this.prevMatchInRange(e,l,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(a,l)=>l=="$"?"$":l=="&"?e.match[0]:l!="0"&&+l<e.match.length?e.match[l]:a)}matchAll(e,a){let l=regexpCursor(this.spec,e,0,e.doc.length),u=[];for(;!l.next().done;){if(u.length>=a)return null;u.push(l.value)}return u}highlight(e,a,l,u){let f=regexpCursor(this.spec,e,Math.max(0,a-250),Math.min(l+250,e.doc.length));for(;!f.next().done;)u(f.value.from,f.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(o){return new SearchState(defaultQuery(o).create(),null)},update(o,e){for(let a of e.effects)a.is(setSearchQuery)?o=new SearchState(a.value.create(),o.panel):a.is(togglePanel$1)&&(o=new SearchState(o.query,a.value?createSearchPanel:null));return o},provide:o=>showPanel.from(o,e=>e.panel)});class SearchState{constructor(e,a){this.query=e,this.panel=a}}const matchMark$1=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(o){this.view=o,this.decorations=this.highlight(o.state.field(searchState))}update(o){let e=o.state.field(searchState);(e!=o.startState.field(searchState)||o.docChanged||o.selectionSet||o.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:o,panel:e}){if(!e||!o.spec.valid)return Decoration.none;let{view:a}=this,l=new RangeSetBuilder;for(let u=0,f=a.visibleRanges,d=f.length;u<d;u++){let{from:p,to:g}=f[u];for(;u<d-1&&g>f[u+1].from-2*250;)g=f[++u].to;o.highlight(a.state,p,g,(b,O)=>{let A=a.state.selection.ranges.some(k=>k.from==b&&k.to==O);l.add(b,O,A?selectedMatchMark:matchMark$1)})}return l.finish()}},{decorations:o=>o.decorations});function searchCommand(o){return e=>{let a=e.state.field(searchState,!1);return a&&a.query.spec.valid?o(e,a):openSearchPanel(e)}}const findNext=searchCommand((o,{query:e})=>{let{to:a}=o.state.selection.main,l=e.nextMatch(o.state,a,a);if(!l)return!1;let u=EditorSelection.single(l.from,l.to),f=o.state.facet(searchConfigFacet);return o.dispatch({selection:u,effects:[announceMatch(o,l),f.scrollToMatch(u.main,o)],userEvent:"select.search"}),selectSearchInput(o),!0}),findPrevious=searchCommand((o,{query:e})=>{let{state:a}=o,{from:l}=a.selection.main,u=e.prevMatch(a,l,l);if(!u)return!1;let f=EditorSelection.single(u.from,u.to),d=o.state.facet(searchConfigFacet);return o.dispatch({selection:f,effects:[announceMatch(o,u),d.scrollToMatch(f.main,o)],userEvent:"select.search"}),selectSearchInput(o),!0}),selectMatches=searchCommand((o,{query:e})=>{let a=e.matchAll(o.state,1e3);return!a||!a.length?!1:(o.dispatch({selection:EditorSelection.create(a.map(l=>EditorSelection.range(l.from,l.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:o,dispatch:e})=>{let a=o.selection;if(a.ranges.length>1||a.main.empty)return!1;let{from:l,to:u}=a.main,f=[],d=0;for(let p=new SearchCursor(o.doc,o.sliceDoc(l,u));!p.next().done;){if(f.length>1e3)return!1;p.value.from==l&&(d=f.length),f.push(EditorSelection.range(p.value.from,p.value.to))}return e(o.update({selection:EditorSelection.create(f,d),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((o,{query:e})=>{let{state:a}=o,{from:l,to:u}=a.selection.main;if(a.readOnly)return!1;let f=e.nextMatch(a,l,l);if(!f)return!1;let d=[],p,g,b=[];if(f.from==l&&f.to==u&&(g=a.toText(e.getReplacement(f)),d.push({from:f.from,to:f.to,insert:g}),f=e.nextMatch(a,f.from,f.to),b.push(EditorView.announce.of(a.phrase("replaced match on line $",a.doc.lineAt(l).number)+"."))),f){let O=d.length==0||d[0].from>=f.to?0:f.to-f.from-g.length;p=EditorSelection.single(f.from-O,f.to-O),b.push(announceMatch(o,f)),b.push(a.facet(searchConfigFacet).scrollToMatch(p.main,o))}return o.dispatch({changes:d,selection:p,effects:b,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((o,{query:e})=>{if(o.state.readOnly)return!1;let a=e.matchAll(o.state,1e9).map(u=>{let{from:f,to:d}=u;return{from:f,to:d,insert:e.getReplacement(u)}});if(!a.length)return!1;let l=o.state.phrase("replaced $ matches",a.length)+".";return o.dispatch({changes:a,effects:EditorView.announce.of(l),userEvent:"input.replace.all"}),!0});function createSearchPanel(o){return o.state.facet(searchConfigFacet).createPanel(o)}function defaultQuery(o,e){var a,l,u,f,d;let p=o.selection.main,g=p.empty||p.to>p.from+100?"":o.sliceDoc(p.from,p.to);if(e&&!g)return e;let b=o.facet(searchConfigFacet);return new SearchQuery({search:((a=e?.literal)!==null&&a!==void 0?a:b.literal)?g:g.replace(/\n/g,"\\n"),caseSensitive:(l=e?.caseSensitive)!==null&&l!==void 0?l:b.caseSensitive,literal:(u=e?.literal)!==null&&u!==void 0?u:b.literal,regexp:(f=e?.regexp)!==null&&f!==void 0?f:b.regexp,wholeWord:(d=e?.wholeWord)!==null&&d!==void 0?d:b.wholeWord})}function getSearchInput(o){let e=getPanel(o,createSearchPanel);return e&&e.dom.querySelector("[main-field]")}function selectSearchInput(o){let e=getSearchInput(o);e&&e==o.root.activeElement&&e.select()}const openSearchPanel=o=>{let e=o.state.field(searchState,!1);if(e&&e.panel){let a=getSearchInput(o);if(a&&a!=o.root.activeElement){let l=defaultQuery(o.state,e.query.spec);l.valid&&o.dispatch({effects:setSearchQuery.of(l)}),a.focus(),a.select()}}else o.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(o.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=o=>{let e=o.state.field(searchState,!1);if(!e||!e.panel)return!1;let a=getPanel(o,createSearchPanel);return a&&a.dom.contains(o.root.activeElement)&&o.focus(),o.dispatch({effects:togglePanel$1.of(!1)}),!0};class SearchPanel{constructor(e){this.view=e;let a=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt$1("input",{value:a.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt$1("input",{value:a.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt$1("input",{type:"checkbox",name:"case",form:"",checked:a.caseSensitive,onchange:this.commit}),this.reField=crelt$1("input",{type:"checkbox",name:"re",form:"",checked:a.regexp,onchange:this.commit}),this.wordField=crelt$1("input",{type:"checkbox",name:"word",form:"",checked:a.wholeWord,onchange:this.commit});function l(u,f,d){return crelt$1("button",{class:"cm-button",name:u,onclick:f,type:"button"},d)}this.dom=crelt$1("div",{onkeydown:u=>this.keydown(u),class:"cm-search"},[this.searchField,l("next",()=>findNext(e),[phrase(e,"next")]),l("prev",()=>findPrevious(e),[phrase(e,"previous")]),l("select",()=>selectMatches(e),[phrase(e,"all")]),crelt$1("label",null,[this.caseField,phrase(e,"match case")]),crelt$1("label",null,[this.reField,phrase(e,"regexp")]),crelt$1("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt$1("br"),this.replaceField,l("replace",()=>replaceNext(e),[phrase(e,"replace")]),l("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt$1("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let a of e.transactions)for(let l of a.effects)l.is(setSearchQuery)&&!l.value.eq(this.query)&&this.setQuery(l.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(o,e){return o.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(o,{from:e,to:a}){let l=o.state.doc.lineAt(e),u=o.state.doc.lineAt(a).to,f=Math.max(l.from,e-AnnounceMargin),d=Math.min(u,a+AnnounceMargin),p=o.state.sliceDoc(f,d);if(f!=l.from){for(let g=0;g<AnnounceMargin;g++)if(!Break.test(p[g+1])&&Break.test(p[g])){p=p.slice(g);break}}if(d!=u){for(let g=p.length-1;g>p.length-AnnounceMargin;g--)if(!Break.test(p[g-1])&&Break.test(p[g])){p=p.slice(0,g);break}}return EditorView.announce.of(`${o.state.phrase("current match")}. ${p} ${o.state.phrase("on line")} ${l.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];let Piece$1=class{constructor(e,a,l,u,f,d){this.left=e,this.top=a,this.height=l,this.className=u,this.letter=f,this.partial=d}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.color=this.partial?"transparent":"",e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.letter==e.letter&&this.height==e.height&&this.className==e.className}},BlockCursorPlugin$1=class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration="1200ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,a=[];for(let l of e.selection.ranges){let u=l==e.selection.main,f=measureCursor$1(null,this.view,l,u);f&&a.push(f)}return{cursors:a}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((a,l)=>!a.eq(this.cursors[l]))){let a=this.cursorLayer.children;if(a.length!==e.length){this.cursorLayer.textContent="";for(const l of e)this.cursorLayer.appendChild(l.draw())}else e.forEach((l,u)=>l.adjust(a[u]));this.cursors=e}}destroy(){this.cursorLayer.remove()}};const themeSpec$1={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696"}},hideNativeSelection$1=Prec.highest(EditorView.theme(themeSpec$1));function getBase$1(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==Direction.LTR?e.left:e.right-o.scrollDOM.clientWidth)-o.scrollDOM.scrollLeft,top:e.top-o.scrollDOM.scrollTop}}function measureCursor$1(o,e,a,l){let u=a.head;var f=1;let d=e.coordsAtPos(u,1);if(!d)return null;let p=getBase$1(e),g=u<e.state.doc.length&&e.state.sliceDoc(u,u+1);(!g||g==`
`||g=="\r")&&(g=" ");let b=d.bottom-d.top;return new Piece$1(d.left-p.left,d.top-p.top+b*(1-f),b*f,l?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",g,f!=1)}const emacsStyle=EditorView.theme({".cm-emacsMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"5px 10px",backgroundColor:"#fffa8f",fontFamily:"monospace"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"#fffa8f"}}),emacsPlugin=ViewPlugin.fromClass(class{constructor(o){this.status="",this.view=o,this.em=new EmacsHandler(o),this.blockCursor=new BlockCursorPlugin$1(o),this.view.scrollDOM.classList.add("cm-emacsMode")}update(o){o.docChanged&&(this.em.$emacsMark=null,this.em.updateMarksOnChange(o.changes)),this.blockCursor.update(o)}destroy(){this.view.scrollDOM.classList.remove("cm-emacsMode"),this.blockCursor.destroy()}},{eventHandlers:{mousedown:function(){this.em.$emacsMark=null}},provide:o=>keymap.of([{any:function(e,a){var l;return!!(!((l=e.plugin(o))===null||l===void 0)&&l.em.handleKeyboard(a))}}])}),showVimPanel$1=StateEffect.define(),vimPanelState$1=StateField.define({create:()=>!1,update(o,e){for(let a of e.effects)a.is(showVimPanel$1)&&(o=a.value);return o},provide:o=>showPanel.from(o,e=>e?createVimPanel$1:null)});function createVimPanel$1(o){let e=document.createElement("div");return e.className="cm-vim-panel",{top:!1,dom:e}}function emacs(o={}){return[emacsStyle,emacsPlugin,hideNativeSelection$1,vimPanelState$1]}var specialKey$1={Return:"Return",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Return",Divide:"/",Slash:"/",Multiply:"*",Subtract:"-",Minus:"-",Equal:"="},ignoredKeys$1={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1};const commandKeyBinding={};class EmacsHandler{constructor(e){this.view=e,this.$data={count:0,keyChain:"",lastCommand:""},this.$emacsMarkRing=[],this.$emacsMark=null}static bindKey(e,a){e.split("|").forEach(function(l){let u="",f=l.split(/\s+/);f.forEach(function(d,p){let g=d.split(/-(?=.)/),b=g.pop();g.length&&(u+=g.sort().join("-")+"-"),u+=b,p===f.length-1?commandKeyBinding[u]=a:(commandKeyBinding[u]="null",u+=" ")})})}static getKey(e){var a=e.code,l=e.key;if(ignoredKeys$1[l])return["","",""];a.length>1&&(a[0]=="N"&&(a=a.replace(/^Numpad/,"")),a[0]=="K"&&(a=a.replace(/^Key/,""))),a=specialKey$1[a]||a,a.length==1&&(a=a.toLowerCase());var u="";return e.ctrlKey&&(u+="C-"),e.metaKey&&(u+="CMD-"),e.altKey&&(u+="M-"),e.shiftKey&&(u+="S-"),[a,u,l]}static addCommands(e){Object.keys(e).forEach(function(a){var l=e[a];typeof l=="function"&&(l={exec:l}),EmacsHandler.commands[a]=l})}static execCommand(e,a,l,u=1){var f=void 0;if(typeof e=="function")for(var d=0;d<u;d++)e(a.view);else if(e!=="null")if(e.exec){u>1&&e.handlesCount&&(l||(l={}),typeof l=="object"&&(l.count=u),u=1);for(var d=0;d<u;d++)f=e.exec(a,l||{})}else throw new Error("missformed command");return f}handleKeyboard(e){var a=EmacsHandler.getKey(e),l=this.findCommand(a);if(l&&l.command){var u=EmacsHandler.execCommand(l.command,this,l.args,l.count);if(u===!1)return}return l}findCommand([e,a,l]){if(e){var u=this,f=this.$data;if(!a&&e.length==1&&(u.pushEmacsMark(),f.count)){var d=new Array(f.count+1).join(l);return f.count=null,{command:"insertstring",args:d}}if(a=="C-"||f.count){var b=parseInt(e[e.length-1]);if(typeof b=="number"&&!isNaN(b))return f.count=Math.max(f.count||0,0),f.count=10*f.count+b,{command:"null"}}a&&(e=a+e),f.keyChain&&(e=f.keyChain+=" "+e);var p=commandKeyBinding[e];if(f.keyChain=p=="null"?e:"",!!p){if(p==="null")return{command:"null"};if(p==="universalArgument")return f.count=-4,{command:"null"};var g;if(typeof p!="string"&&(g=p.args,p.command&&(p=p.command)),(p==="insertstring"||p===splitLine||p===toggleComment)&&u.pushEmacsMark(),!(typeof p=="string"&&(p=EmacsHandler.commands[p],!p))){!p.readOnly&&!p.isYank&&(f.lastCommand=null);var b=f.count||1;return f.count&&(f.count=0),{command:p,args:g,count:b}}}}}showCommandLine(e){console.error("TODO")}updateMarksOnChange(e){this.$emacsMark&&(this.$emacsMark=this.updateMark(this.$emacsMark,e)),this.$emacsMarkRing=this.$emacsMarkRing.map(a=>this.updateMark(a,e)).filter(Boolean)}updateMark(e,a){if(e){var l=e.map(function(u){return a.mapPos(u,1,MapMode.TrackDel)}).filter(u=>u!=null);return l.length==0?null:l}}emacsMark(){return this.$emacsMark}setEmacsMark(e){this.$emacsMark=e}pushEmacsMark(e,a){var l=this.$emacsMark;l&&this.$emacsMarkRing.push(l),!e||a?this.setEmacsMark(e):this.$emacsMarkRing.push(e)}popEmacsMark(){var e=this.emacsMark();return e?(this.setEmacsMark(null),e):this.$emacsMarkRing.pop()}getLastEmacsMark(){return this.$emacsMark||this.$emacsMarkRing.slice(-1)[0]}getCopyText(){var e=this.view.state;return e.selection.ranges.map(a=>e.sliceDoc(a.from,a.to)).join(`
`)}clearSelection(){var e=this.view,a=e.state.selection,l=!a.ranges.some(f=>f.from!=f.to);if(l)return!1;var u=a.ranges.map(f=>EditorSelection.range(f.head,f.head));return e.dispatch({selection:EditorSelection.create(u,a.mainIndex)}),!0}onPaste(e){var a=this.view,l=a.state.selection,u;if(l.ranges.length>1){var f=e.split(`
`);f.length==l.ranges.length&&(u=f)}var d=0,p=a.state.changeByRange(g=>{var b=u?u[d]:e;return d++,{changes:{from:g.from,to:g.to,insert:b},range:EditorSelection.cursor(g.from+b.length)}});a.dispatch(p)}}EmacsHandler.commands={};function initVim(o){var e=o.Pos;function a(S,E){var F=S.state.vim;if(!F||F.insertMode)return E.head;var $=F.sel.head;if(!$)return E.head;if(!(F.visualBlock&&E.head.line!=$.line))return E.from()==E.anchor&&!E.empty()&&E.head.line==$.line&&E.head.ch!=$.ch?new e(E.head.line,E.head.ch-1):E.head}function l(S,E,F){if(E.line===F.line&&E.ch>=F.ch-1){var $=S.getLine(E.line),U=$.charCodeAt(E.ch);55296<=U&&U<=55551&&(F.ch+=1)}return{start:E,end:F}}var u=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h"},{keys:"<Del>",type:"keyToKey",toKeys:"x"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"gq",type:"operator",operator:"hardWrap"},{keys:"gw",type:"operator",operator:"hardWrap",operatorArgs:{keepCursor:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"<C-r><character>",type:"action",action:"insertRegister",context:"insert",isEdit:!0},{keys:"<C-o>",type:"action",action:"oneNormalCommand",context:"insert"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],f=u.length,d=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"omap",shortName:"om"},{name:"noremap",shortName:"no"},{name:"nnoremap",shortName:"nn"},{name:"vnoremap",shortName:"vn"},{name:"inoremap",shortName:"ino"},{name:"onoremap",shortName:"ono"},{name:"unmap"},{name:"mapclear",shortName:"mapc"},{name:"nmapclear",shortName:"nmapc"},{name:"vmapclear",shortName:"vmapc"},{name:"imapclear",shortName:"imapc"},{name:"omapclear",shortName:"omapc"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"startinsert",shortName:"start"},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"delete",shortName:"d"},{name:"join",shortName:"j"},{name:"normal",shortName:"norm"},{name:"global",shortName:"g"}];function p(S){S.setOption("disableInput",!0),S.setOption("showCursorWhenSelecting",!1),o.signal(S,"vim-mode-change",{mode:"normal"}),S.on("cursorActivity",Kn),et(S),o.on(S.getInputField(),"paste",L(S))}function g(S){S.setOption("disableInput",!1),S.off("cursorActivity",Kn),o.off(S.getInputField(),"paste",L(S)),S.state.vim=null,Cn&&clearTimeout(Cn)}function b(S,E){this==o.keyMap.vim&&(S.options.$customCursor=null,o.rmClass(S.getWrapperElement(),"cm-fat-cursor")),(!E||E.attach!=O)&&g(S)}function O(S,E){this==o.keyMap.vim&&(S.curOp&&(S.curOp.selectionChanged=!0),S.options.$customCursor=a,o.addClass(S.getWrapperElement(),"cm-fat-cursor")),(!E||E.attach!=O)&&p(S)}o.defineOption("vimMode",!1,function(S,E,F){E&&S.getOption("keyMap")!="vim"?S.setOption("keyMap","vim"):!E&&F!=o.Init&&/^vim/.test(S.getOption("keyMap"))&&S.setOption("keyMap","default")});function A(S,E){if(E){if(this[S])return this[S];var F=N(S);if(!F)return!1;var $=vt.findKey(E,F);return typeof $=="function"&&o.signal(E,"vim-keypress",F),$}}var k={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},M={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"},B={};"Left|Right|Up|Down|End|Home".split("|").concat(Object.keys(M)).forEach(function(S){B[(M[S]||"").toLowerCase()]=B[S.toLowerCase()]=S});function N(S){if(S.charAt(0)=="'")return S.charAt(1);var E=S.split(/-(?!$)/),F=E[E.length-1];if(E.length==1&&E[0].length==1)return!1;if(E.length==2&&E[0]=="Shift"&&F.length==1)return!1;for(var $=!1,U=0;U<E.length;U++){var j=E[U];j in k?E[U]=k[j]:$=!0,j in M&&(E[U]=M[j])}return $?(Fe(F)&&(E[E.length-1]=F.toLowerCase()),"<"+E.join("-")+">"):!1}function L(S){var E=S.state.vim;return E.onPasteFn||(E.onPasteFn=function(){E.insertMode||(S.setCursor(Ct(S.getCursor(),0,1)),Xe.enterInsertMode(S,{},E))}),E.onPasteFn}var V=/[\d]/,se=[o.isWordChar,function(S){return S&&!o.isWordChar(S)&&!/\s/.test(S)}],pe=[function(S){return/\S/.test(S)}];function re(S,E){for(var F=[],$=S;$<S+E;$++)F.push(String.fromCharCode($));return F}var z=re(65,26),oe=re(97,26),de=re(48,10),_e=[].concat(z,oe,de,["<",">"]),Ce=[].concat(z,oe,de,["-",'"',".",":","_","/","+"]),be;try{be=new RegExp("^[\\p{Lu}]$","u")}catch{be=/^[A-Z]$/}function xe(S,E){return E>=S.firstLine()&&E<=S.lastLine()}function Oe(S){return/^[a-z]$/.test(S)}function ke(S){return"()[]{}".indexOf(S)!=-1}function Ie(S){return V.test(S)}function Fe(S){return be.test(S)}function Be(S){return/^\s*$/.test(S)}function Ge(S){return".?!".indexOf(S)!=-1}function Ne(S,E){for(var F=0;F<E.length;F++)if(E[F]==S)return!0;return!1}var Ve={};function Ze(S,E,F,$,U){if(E===void 0&&!U)throw Error("defaultValue is required unless callback is provided");if(F||(F="string"),Ve[S]={type:F,defaultValue:E,callback:U},$)for(var j=0;j<$.length;j++)Ve[$[j]]=Ve[S];E&&Je(S,E)}function Je(S,E,F,$){var U=Ve[S];$=$||{};var j=$.scope;if(!U)return new Error("Unknown option: "+S);if(U.type=="boolean"){if(E&&E!==!0)return new Error("Invalid argument: "+S+"="+E);E!==!1&&(E=!0)}U.callback?(j!=="local"&&U.callback(E,void 0),j!=="global"&&F&&U.callback(E,F)):(j!=="local"&&(U.value=U.type=="boolean"?!!E:E),j!=="global"&&F&&(F.state.vim.options[S]={value:E}))}function $e(S,E,F){var $=Ve[S];F=F||{};var U=F.scope;if(!$)return new Error("Unknown option: "+S);if($.callback){var j=E&&$.callback(void 0,E);return U!=="global"&&j!==void 0?j:U!=="local"?$.callback():void 0}else{var j=U!=="global"&&E&&E.state.vim.options[S];return(j||U!=="local"&&$||{}).value}}Ze("filetype",void 0,"string",["ft"],function(S,E){if(E!==void 0)if(S===void 0){var F=E.getOption("mode");return F=="null"?"":F}else{var F=S==""?"null":S;E.setOption("mode",F)}}),Ze("textwidth",80,"number",["tw"],function(S,E){if(E!==void 0)if(S===void 0){var F=E.getOption("textwidth");return F}else{var $=Math.round(S);$>1&&E.setOption("textwidth",$)}});var ht=function(){var S=100,E=-1,F=0,$=0,U=new Array(S);function j(le,ge,ye){var we=E%S,Pe=U[we];function Se(Re){var Me=++E%S,He=U[Me];He&&He.clear(),U[Me]=le.setBookmark(Re)}if(Pe){var ve=Pe.find();ve&&!Rt(ve,ge)&&Se(ge)}else Se(ge);Se(ye),F=E,$=E-S+1,$<0&&($=0)}function te(le,ge){E+=ge,E>F?E=F:E<$&&(E=$);var ye=U[(S+E)%S];if(ye&&!ye.find()){var we=ge>0?1:-1,Pe,Se=le.getCursor();do if(E+=we,ye=U[(S+E)%S],ye&&(Pe=ye.find())&&!Rt(Se,Pe))break;while(E<F&&E>$)}return ye}function ee(le,ge){var ye=E,we=te(le,ge);return E=ye,we&&we.find()}return{cachedCursor:void 0,add:j,find:ee,move:te}},xt=function(S){return S?{changes:S.changes,expectCursorActivityForChange:S.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function Et(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=xt()}Et.prototype={exitMacroRecordMode:function(){var S=Le.macroModeState;S.onRecordingDone&&S.onRecordingDone(),S.onRecordingDone=void 0,S.isRecording=!1},enterMacroRecordMode:function(S,E){var F=Le.registerController.getRegister(E);if(F){if(F.clear(),this.latestRegister=E,S.openDialog){var $=fn("span",{class:"cm-vim-message"},"recording @"+E);this.onRecordingDone=S.openDialog($,null,{bottom:!0})}this.isRecording=!0}}};function et(S){return S.state.vim||(S.state.vim={inputState:new yt,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeReturn:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),S.state.vim}var Le;function ot(){Le={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:ht(),macroModeState:new Et,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new Kt({}),searchHistoryController:new Ht,exCommandHistoryController:new Ht};for(var S in Ve){var E=Ve[S];E.value=E.defaultValue}}var St,vt={enterVimMode:p,leaveVimMode:g,buildKeyMap:function(){},getRegisterController:function(){return Le.registerController},resetVimGlobalState_:ot,getVimGlobalState_:function(){return Le},maybeInitVimState_:et,suppressErrorLogging:!1,InsertModeKey:Ke,map:function(S,E,F){Yt.map(S,E,F)},unmap:function(S,E){return Yt.unmap(S,E)},noremap:function(S,E,F){Yt.map(S,E,F,!0)},mapclear:function(S){var E=u.length,F=f,$=u.slice(0,E-F);if(u=u.slice(E-F),S)for(var U=$.length-1;U>=0;U--){var j=$[U];if(S!==j.context)if(j.context)this._mapCommand(j);else{var te=["normal","insert","visual"];for(var ee in te)if(te[ee]!==S){var le={};for(var ge in j)le[ge]=j[ge];le.context=te[ee],this._mapCommand(le)}}}},setOption:Je,getOption:$e,defineOption:Ze,defineEx:function(S,E,F){if(!E)E=S;else if(S.indexOf(E)!==0)throw new Error('(Vim.defineEx) "'+E+'" is not a prefix of "'+S+'", command not registered');zn[S]=F,Yt.commandMap_[E]={name:S,shortName:E,type:"api"}},handleKey:function(S,E,F){var $=this.findKey(S,E,F);if(typeof $=="function")return $()},multiSelectHandleKey:Mr,findKey:function(S,E,F){var $=et(S);function U(){var ge=Le.macroModeState;if(ge.isRecording){if(E=="q")return ge.exitMacroRecordMode(),wt(S),!0;F!="mapping"&&kr(ge,E)}}function j(){if(E=="<Esc>"){if($.visualMode)mt(S);else if($.insertMode)an(S);else return;return wt(S),!0}}function te(){if(j())return!0;$.inputState.keyBuffer.push(E);var ge=$.inputState.keyBuffer.join(""),ye=E.length==1,we=Ut.matchCommand(ge,u,$.inputState,"insert"),Pe=$.inputState.changeQueue;if(we.type=="none")return wt(S),!1;if(we.type=="partial"){if(St&&window.clearTimeout(St),St=ye&&window.setTimeout(function(){$.insertMode&&$.inputState.keyBuffer.length&&wt(S)},$e("insertModeEscKeysTimeout")),ye){var Se=S.listSelections();(!Pe||Pe.removed.length!=Se.length)&&(Pe=$.inputState.changeQueue=new Wt),Pe.inserted+=E;for(var ve=0;ve<Se.length;ve++){var Re=st(Se[ve].anchor,Se[ve].head),Me=Bt(Se[ve].anchor,Se[ve].head),He=S.getRange(Re,S.state.overwrite?Ct(Me,0,1):Me);Pe.removed[ve]=(Pe.removed[ve]||"")+He}}return!ye}if(St&&window.clearTimeout(St),we.command&&Pe){for(var Se=S.listSelections(),ve=0;ve<Se.length;ve++){var Ye=Se[ve].head;S.replaceRange(Pe.removed[ve]||"",Ct(Ye,0,-Pe.inserted.length),Ye,"+input")}Le.macroModeState.lastInsertModeChanges.changes.pop()}return we.command||wt(S),we.command}function ee(){if(U()||j())return!0;$.inputState.keyBuffer.push(E);var ge=$.inputState.keyBuffer.join("");if(/^[1-9]\d*$/.test(ge))return!0;var ye=/^(\d*)(.*)$/.exec(ge);if(!ye)return wt(S),!1;var we=$.visualMode?"visual":"normal",Pe=ye[2]||ye[1];$.inputState.operatorShortcut&&$.inputState.operatorShortcut.slice(-1)==Pe&&(Pe=$.inputState.operatorShortcut);var Se=Ut.matchCommand(Pe,u,$.inputState,we);return Se.type=="none"?(wt(S),!1):Se.type=="partial"?!0:Se.type=="clear"?(wt(S),!0):($.inputState.keyBuffer.length=0,ye=/^(\d*)(.*)$/.exec(ge),ye[1]&&ye[1]!="0"&&$.inputState.pushRepeatDigit(ye[1]),Se.command)}var le;return $.insertMode?le=te():le=ee(),le===!1?!$.insertMode&&E.length===1?function(){return!0}:void 0:le===!0?function(){return!0}:function(){return S.operation(function(){S.curOp.isVimOp=!0;try{le.type=="keyToKey"?qt(S,le.toKeys,le):Ut.processCommand(S,$,le)}catch(ge){throw S.state.vim=void 0,et(S),vt.suppressErrorLogging||console.log(ge),ge}return!0})}},handleEx:function(S,E){Yt.processCommand(S,E)},defineMotion:zt,defineAction:Pt,defineOperator:kt,mapCommand:wr,_mapCommand:Yn,defineRegister:tn,exitVisualMode:mt,exitInsertMode:an},Lt=[],pt=!1;function qt(S,E,F){var $=pt;if(F){if(Lt.indexOf(F)!=-1)return;Lt.push(F),pt=F.noremap!=!1}try{for(var U=et(S),j=/<(?:[CSMA]-)*\w+>|./gi,te;te=j.exec(E);){var ee=te[0],le=U.insertMode,ge=vt.handleKey(S,ee,"mapping");if(!ge&&le&&U.insertMode){if(ee[0]=="<"){var ye=ee.toLowerCase().slice(1,-1),we=ye.split("-");if(ye=we.pop()||"",ye=="lt")ee="<";else if(ye=="space")ee=" ";else if(ye=="cr")ee=`
`;else if(B.hasOwnProperty(ye)){ee=B[ye],Sn(S,ee);continue}else ee=ee[0],j.lastIndex=te.index+1}S.replaceSelection(ee)}}}finally{Lt.pop(),pt=Lt.length?$:!1}}function yt(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null,this.changeQueue=null}yt.prototype.pushRepeatDigit=function(S){this.operator?this.motionRepeat=this.motionRepeat.concat(S):this.prefixRepeat=this.prefixRepeat.concat(S)},yt.prototype.getRepeat=function(){var S=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(S=1,this.prefixRepeat.length>0&&(S*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(S*=parseInt(this.motionRepeat.join(""),10))),S};function wt(S,E){S.state.vim.inputState=new yt,o.signal(S,"vim-command-done",E)}function Wt(){this.removed=[],this.inserted=""}function Mt(S,E,F){this.clear(),this.keyBuffer=[S||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!E,this.blockwise=!!F}Mt.prototype={setText:function(S,E,F){this.keyBuffer=[S||""],this.linewise=!!E,this.blockwise=!!F},pushText:function(S,E){E&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(S)},pushInsertModeChanges:function(S){this.insertModeChanges.push(xt(S))},pushSearchQuery:function(S){this.searchQueries.push(S)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function tn(S,E){var F=Le.registerController.registers;if(!S||S.length!=1)throw Error("Register name must be 1 character");if(F[S])throw Error("Register already defined "+S);F[S]=E,Ce.push(S)}function Kt(S){this.registers=S,this.unnamedRegister=S['"']=new Mt,S["."]=new Mt,S[":"]=new Mt,S["/"]=new Mt,S["+"]=new Mt}Kt.prototype={pushText:function(S,E,F,$,U){if(S!=="_"){$&&F.charAt(F.length-1)!==`
`&&(F+=`
`);var j=this.isValidRegister(S)?this.getRegister(S):null;if(!j){switch(E){case"yank":this.registers[0]=new Mt(F,$,U);break;case"delete":case"change":F.indexOf(`
`)==-1?this.registers["-"]=new Mt(F,$):(this.shiftNumericRegisters_(),this.registers[1]=new Mt(F,$));break}this.unnamedRegister.setText(F,$,U);return}var te=Fe(S);te?j.pushText(F,$):j.setText(F,$,U),S==="+"&&navigator.clipboard.writeText(F),this.unnamedRegister.setText(j.toString(),$)}},getRegister:function(S){return this.isValidRegister(S)?(S=S.toLowerCase(),this.registers[S]||(this.registers[S]=new Mt),this.registers[S]):this.unnamedRegister},isValidRegister:function(S){return S&&Ne(S,Ce)},shiftNumericRegisters_:function(){for(var S=9;S>=2;S--)this.registers[S]=this.getRegister(""+(S-1))}};function Ht(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}Ht.prototype={nextMatch:function(S,E){var F=this.historyBuffer,$=E?-1:1;this.initialPrefix===null&&(this.initialPrefix=S);for(var U=this.iterator+$;E?U>=0:U<F.length;U+=$)for(var j=F[U],te=0;te<=j.length;te++)if(this.initialPrefix==j.substring(0,te))return this.iterator=U,j;if(U>=F.length)return this.iterator=F.length,this.initialPrefix;if(U<0)return S},pushInput:function(S){var E=this.historyBuffer.indexOf(S);E>-1&&this.historyBuffer.splice(E,1),S.length&&this.historyBuffer.push(S)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Ut={matchCommand:function(S,E,F,$){var U=ut(S,E,$,F);if(!U.full&&!U.partial)return{type:"none"};if(!U.full&&U.partial)return{type:"partial"};for(var j,te=0;te<U.full.length;te++){var ee=U.full[te];j||(j=ee)}if(j.keys.slice(-11)=="<character>"){var le=jt(S);if(!le||le.length>1)return{type:"clear"};F.selectedCharacter=le}return{type:"full",command:j}},processCommand:function(S,E,F){switch(E.inputState.repeatOverride=F.repeatOverride,F.type){case"motion":this.processMotion(S,E,F);break;case"operator":this.processOperator(S,E,F);break;case"operatorMotion":this.processOperatorMotion(S,E,F);break;case"action":this.processAction(S,E,F);break;case"search":this.processSearch(S,E,F);break;case"ex":case"keyToEx":this.processEx(S,E,F);break}},processMotion:function(S,E,F){E.inputState.motion=F.motion,E.inputState.motionArgs=un(F.motionArgs),this.evalInput(S,E)},processOperator:function(S,E,F){var $=E.inputState;if($.operator)if($.operator==F.operator){$.motion="expandToLine",$.motionArgs={linewise:!0},this.evalInput(S,E);return}else wt(S);$.operator=F.operator,$.operatorArgs=un(F.operatorArgs),F.keys.length>1&&($.operatorShortcut=F.keys),F.exitVisualBlock&&(E.visualBlock=!1,Te(S)),E.visualMode&&this.evalInput(S,E)},processOperatorMotion:function(S,E,F){var $=E.visualMode,U=un(F.operatorMotionArgs);U&&$&&U.visualLine&&(E.visualLine=!0),this.processOperator(S,E,F),$||this.processMotion(S,E,F)},processAction:function(S,E,F){var $=E.inputState,U=$.getRepeat(),j=!!U,te=un(F.actionArgs)||{};$.selectedCharacter&&(te.selectedCharacter=$.selectedCharacter),F.operator&&this.processOperator(S,E,F),F.motion&&this.processMotion(S,E,F),(F.motion||F.operator)&&this.evalInput(S,E),te.repeat=U||1,te.repeatIsExplicit=j,te.registerName=$.registerName,wt(S),E.lastMotion=null,F.isEdit&&this.recordLastEdit(E,$,F),Xe[F.action](S,te,E)},processSearch:function(S,E,F){if(!S.getSearchCursor)return;var $=F.searchArgs.forward,U=F.searchArgs.wholeWordOnly;en(S).setReversed(!$);var j=$?"/":"?",te=en(S).getQuery(),ee=S.getScrollInfo();function le(Me,He,Ye){Le.searchHistoryController.pushInput(Me),Le.searchHistoryController.reset();try{bn(S,Me,He,Ye)}catch{bt(S,"Invalid regex: "+Me),wt(S);return}Ut.processMotion(S,E,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:F.searchArgs.toJumplist}})}function ge(Me){S.scrollTo(ee.left,ee.top),le(Me,!0,!0);var He=Le.macroModeState;He.isRecording&&Er(He,Me)}function ye(Me,He,Ye){var qe=o.keyName(Me),ft,We;qe=="Up"||qe=="Down"?(ft=qe=="Up",We=Me.target?Me.target.selectionEnd:0,He=Le.searchHistoryController.nextMatch(He,ft)||"",Ye(He),We&&Me.target&&(Me.target.selectionEnd=Me.target.selectionStart=Math.min(We,Me.target.value.length))):qe!="Left"&&qe!="Right"&&qe!="Ctrl"&&qe!="Alt"&&qe!="Shift"&&Le.searchHistoryController.reset();var _t;try{_t=bn(S,He,!0,!0)}catch{}_t?S.scrollIntoView(Xn(S,!$,_t),30):(Pn(S),S.scrollTo(ee.left,ee.top))}function we(Me,He,Ye){var qe=o.keyName(Me);qe=="Esc"||qe=="Ctrl-C"||qe=="Ctrl-["||qe=="Backspace"&&He==""?(Le.searchHistoryController.pushInput(He),Le.searchHistoryController.reset(),bn(S,te),Pn(S),S.scrollTo(ee.left,ee.top),o.e_stop(Me),wt(S),Ye(),S.focus()):qe=="Up"||qe=="Down"?o.e_stop(Me):qe=="Ctrl-U"&&(o.e_stop(Me),Ye(""))}switch(F.searchArgs.querySrc){case"prompt":var Pe=Le.macroModeState;if(Pe.isPlaying){var Re=Pe.replaySearchQueries.shift();le(Re,!0,!1)}else vn(S,{onClose:ge,prefix:j,desc:"(JavaScript regexp)",onKeyUp:ye,onKeyDown:we});break;case"wordUnderCursor":var Se=mn(S,{noSymbol:!0}),ve=!0;if(Se||(Se=mn(S,{noSymbol:!1}),ve=!1),!Se){bt(S,"No word under cursor"),wt(S);return}var Re=S.getLine(Se.start.line).substring(Se.start.ch,Se.end.ch);ve&&U?Re="\\b"+Re+"\\b":Re=xn(Re),Le.jumpList.cachedCursor=S.getCursor(),S.setCursor(Se.start),le(Re,!0,!1);break}},processEx:function(S,E,F){function $(j){Le.exCommandHistoryController.pushInput(j),Le.exCommandHistoryController.reset(),Yt.processCommand(S,j),S.state.vim&&wt(S)}function U(j,te,ee){var le=o.keyName(j),ge,ye;(le=="Esc"||le=="Ctrl-C"||le=="Ctrl-["||le=="Backspace"&&te=="")&&(Le.exCommandHistoryController.pushInput(te),Le.exCommandHistoryController.reset(),o.e_stop(j),wt(S),ee(),S.focus()),le=="Up"||le=="Down"?(o.e_stop(j),ge=le=="Up",ye=j.target?j.target.selectionEnd:0,te=Le.exCommandHistoryController.nextMatch(te,ge)||"",ee(te),ye&&j.target&&(j.target.selectionEnd=j.target.selectionStart=Math.min(ye,j.target.value.length))):le=="Ctrl-U"?(o.e_stop(j),ee("")):le!="Left"&&le!="Right"&&le!="Ctrl"&&le!="Alt"&&le!="Shift"&&Le.exCommandHistoryController.reset()}F.type=="keyToEx"?Yt.processCommand(S,F.exArgs.input):E.visualMode?vn(S,{onClose:$,prefix:":",value:"'<,'>",onKeyDown:U,selectValueOnOpen:!1}):vn(S,{onClose:$,prefix:":",onKeyDown:U})},evalInput:function(S,E){var F=E.inputState,$=F.motion,U=F.motionArgs||{},j=F.operator,te=F.operatorArgs||{},ee=F.registerName,le=E.sel,ge=ct(E.visualMode?tt(S,le.head):S.getCursor("head")),ye=ct(E.visualMode?tt(S,le.anchor):S.getCursor("anchor")),we=ct(ge),Pe=ct(ye),Se,ve,Re;if(j&&this.recordLastEdit(E,F),F.repeatOverride!==void 0?Re=F.repeatOverride:Re=F.getRepeat(),Re>0&&U.explicitRepeat?U.repeatIsExplicit=!0:(U.noRepeat||!U.explicitRepeat&&Re===0)&&(Re=1,U.repeatIsExplicit=!1),F.selectedCharacter&&(U.selectedCharacter=te.selectedCharacter=F.selectedCharacter),U.repeat=Re,wt(S),$){var Me=Nt[$](S,ge,U,E,F);if(E.lastMotion=Nt[$],!Me)return;if(U.toJumplist){var He=Le.jumpList,Ye=He.cachedCursor;Ye?(Fn(S,Ye,Me),delete He.cachedCursor):Fn(S,ge,Me)}Me instanceof Array?(ve=Me[0],Se=Me[1]):Se=Me,Se||(Se=ct(ge)),E.visualMode?(E.visualBlock&&Se.ch===1/0||(Se=tt(S,Se,we)),ve&&(ve=tt(S,ve)),ve=ve||Pe,le.anchor=ve,le.head=Se,Te(S),sn(S,E,"<",Qe(ve,Se)?ve:Se),sn(S,E,">",Qe(ve,Se)?Se:ve)):j||(Se=tt(S,Se,we),S.setCursor(Se.line,Se.ch))}if(j){if(te.lastSel){ve=Pe;var qe=te.lastSel,ft=Math.abs(qe.head.line-qe.anchor.line),We=Math.abs(qe.head.ch-qe.anchor.ch);qe.visualLine?Se=new e(Pe.line+ft,Pe.ch):qe.visualBlock?Se=new e(Pe.line+ft,Pe.ch+We):qe.head.line==qe.anchor.line?Se=new e(Pe.line,Pe.ch+We):Se=new e(Pe.line+ft,Pe.ch),E.visualMode=!0,E.visualLine=qe.visualLine,E.visualBlock=qe.visualBlock,le=E.sel={anchor:ve,head:Se},Te(S)}else E.visualMode&&(te.lastSel={anchor:ct(le.anchor),head:ct(le.head),visualBlock:E.visualBlock,visualLine:E.visualLine});var _t,$t,at,rt,It;if(E.visualMode){_t=st(le.head,le.anchor),$t=Bt(le.head,le.anchor),at=E.visualLine||te.linewise,rt=E.visualBlock?"block":at?"line":"char";var Ft=l(S,_t,$t);if(It=je(S,{anchor:Ft.start,head:Ft.end},rt),at){var Tt=It.ranges;if(rt=="block")for(var hn=0;hn<Tt.length;hn++)Tt[hn].head.ch=Dt(S,Tt[hn].head.line);else rt=="line"&&(Tt[0].head=new e(Tt[0].head.line+1,0))}}else{if(_t=ct(ve||Pe),$t=ct(Se||we),Qe($t,_t)){var Dr=_t;_t=$t,$t=Dr}at=U.linewise||te.linewise,at?cn(S,_t,$t):U.forward&&rn(S,_t,$t),rt="char";var Fr=!U.inclusive||at,Ft=l(S,_t,$t);It=je(S,{anchor:Ft.start,head:Ft.end},rt,Fr)}S.setSelections(It.ranges,It.primary),E.lastMotion=null,te.repeat=Re,te.registerName=ee,te.linewise=at;var dn=nt[j](S,te,It.ranges,Pe,Se);E.visualMode&&mt(S,dn!=null),dn&&S.setCursor(dn)}},recordLastEdit:function(S,E,F){var $=Le.macroModeState;$.isPlaying||(S.lastEditInputState=E,S.lastEditActionCommand=F,$.lastInsertModeChanges.changes=[],$.lastInsertModeChanges.expectCursorActivityForChange=!1,$.lastInsertModeChanges.visualBlock=S.visualBlock?S.sel.head.line-S.sel.anchor.line:0)}},Nt={moveToTopLine:function(S,E,F){var $=En(S).top+F.repeat-1;return new e($,Vt(S.getLine($)))},moveToMiddleLine:function(S){var E=En(S),F=Math.floor((E.top+E.bottom)*.5);return new e(F,Vt(S.getLine(F)))},moveToBottomLine:function(S,E,F){var $=En(S).bottom-F.repeat+1;return new e($,Vt(S.getLine($)))},expandToLine:function(S,E,F){var $=E;return new e($.line+F.repeat-1,1/0)},findNext:function(S,E,F){var $=en(S),U=$.getQuery();if(U){var j=!F.forward;return j=$.isReversed()?!j:j,Zn(S,U),Xn(S,j,U,F.repeat)}},findAndSelectNextInclusive:function(S,E,F,$,U){var j=en(S),te=j.getQuery();if(te){var ee=!F.forward;ee=j.isReversed()?!ee:ee;var le=Or(S,ee,te,F.repeat,$);if(le){if(U.operator)return le;var ge=le[0],ye=new e(le[1].line,le[1].ch-1);if($.visualMode){($.visualLine||$.visualBlock)&&($.visualLine=!1,$.visualBlock=!1,o.signal(S,"vim-mode-change",{mode:"visual",subMode:""}));var we=$.sel.anchor;if(we)return j.isReversed()?F.forward?[we,ge]:[we,ye]:F.forward?[we,ye]:[we,ge]}else $.visualMode=!0,$.visualLine=!1,$.visualBlock=!1,o.signal(S,"vim-mode-change",{mode:"visual",subMode:""});return ee?[ye,ge]:[ge,ye]}}},goToMark:function(S,E,F,$){var U=On(S,$,F.selectedCharacter);return U?F.linewise?{line:U.line,ch:Vt(S.getLine(U.line))}:U:null},moveToOtherHighlightedEnd:function(S,E,F,$){if($.visualBlock&&F.sameLine){var U=$.sel;return[tt(S,new e(U.anchor.line,U.head.ch)),tt(S,new e(U.head.line,U.anchor.ch))]}else return[$.sel.head,$.sel.anchor]},jumpToMark:function(S,E,F,$){for(var U=E,j=0;j<F.repeat;j++){var te=U;for(var ee in $.marks)if(Oe(ee)){var le=$.marks[ee].find(),ge=F.forward?Qe(le,te):Qe(te,le);if(!ge&&!(F.linewise&&le.line==te.line)){var ye=Rt(te,U),we=F.forward?Gt(te,le,U):Gt(U,le,te);(ye||we)&&(U=le)}}}return F.linewise&&(U=new e(U.line,Vt(S.getLine(U.line)))),U},moveByCharacters:function(S,E,F){var $=E,U=F.repeat,j=F.forward?$.ch+U:$.ch-U;return new e($.line,j)},moveByLines:function(S,E,F,$){var U=E,j=U.ch;switch($.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:j=$.lastHPos;break;default:$.lastHPos=j}var te=F.repeat+(F.repeatOffset||0),ee=F.forward?U.line+te:U.line-te,le=S.firstLine(),ge=S.lastLine(),ye=S.findPosV(U,F.forward?te:-te,"line",$.lastHSPos),we=F.forward?ye.line>ee:ye.line<ee;return we&&(ee=ye.line,j=ye.ch),ee<le&&U.line==le?this.moveToStartOfLine(S,E,F,$):ee>ge&&U.line==ge?Nn(S,E,F,$,!0):(F.toFirstChar&&(j=Vt(S.getLine(ee)),$.lastHPos=j),$.lastHSPos=S.charCoords(new e(ee,j),"div").left,new e(ee,j))},moveByDisplayLines:function(S,E,F,$){var U=E;switch($.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:$.lastHSPos=S.charCoords(U,"div").left}var j=F.repeat,te=S.findPosV(U,F.forward?j:-j,"line",$.lastHSPos);if(te.hitSide)if(F.forward)var ee=S.charCoords(te,"div"),le={top:ee.top+8,left:$.lastHSPos},te=S.coordsChar(le,"div");else{var ge=S.charCoords(new e(S.firstLine(),0),"div");ge.left=$.lastHSPos,te=S.coordsChar(ge,"div")}return $.lastHPos=te.ch,te},moveByPage:function(S,E,F){var $=E,U=F.repeat;return S.findPosV($,F.forward?U:-U,"page")},moveByParagraph:function(S,E,F){var $=F.forward?1:-1;return Rn(S,E,F.repeat,$)},moveBySentence:function(S,E,F){var $=F.forward?1:-1;return cr(S,E,F.repeat,$)},moveByScroll:function(S,E,F,$){var U=S.getScrollInfo(),j=null,te=F.repeat;te||(te=U.clientHeight/(2*S.defaultTextHeight()));var ee=S.charCoords(E,"local");if(F.repeat=te,j=Nt.moveByDisplayLines(S,E,F,$),!j)return null;var le=S.charCoords(j,"local");return S.scrollTo(null,U.top+le.top-ee.top),j},moveByWords:function(S,E,F){return In(S,E,F.repeat,!!F.forward,!!F.wordEnd,!!F.bigWord)},moveTillCharacter:function(S,E,F){var $=F.repeat,U=kn(S,$,F.forward,F.selectedCharacter,E),j=F.forward?-1:1;return Bn(j,F),U?(U.ch+=j,U):null},moveToCharacter:function(S,E,F){var $=F.repeat;return Bn(0,F),kn(S,$,F.forward,F.selectedCharacter,E)||E},moveToSymbol:function(S,E,F){var $=F.repeat;return sr(S,$,F.forward,F.selectedCharacter)||E},moveToColumn:function(S,E,F,$){var U=F.repeat;return $.lastHPos=U-1,$.lastHSPos=S.charCoords(E,"div").left,lr(S,U)},moveToEol:function(S,E,F,$){return Nn(S,E,F,$,!1)},moveToFirstNonWhiteSpaceCharacter:function(S,E){var F=E;return new e(F.line,Vt(S.getLine(F.line)))},moveToMatchedSymbol:function(S,E){for(var F=E,$=F.line,U=F.ch,j=S.getLine($),te;U<j.length;U++)if(te=j.charAt(U),te&&ke(te)){var ee=S.getTokenTypeAt(new e($,U+1));if(ee!=="string"&&ee!=="comment")break}if(U<j.length){var le=U==="<"||U===">"?/[(){}[\]<>]/:/[(){}[\]]/,ge=S.findMatchingBracket(new e($,U),{bracketRegex:le});return ge.to}else return F},moveToStartOfLine:function(S,E){return new e(E.line,0)},moveToLineOrEdgeOfDocument:function(S,E,F){var $=F.forward?S.lastLine():S.firstLine();return F.repeatIsExplicit&&($=F.repeat-S.getOption("firstLineNumber")),new e($,Vt(S.getLine($)))},moveToStartOfDisplayLine:function(S){return S.execCommand("goLineLeft"),S.getCursor()},moveToEndOfDisplayLine:function(S){S.execCommand("goLineRight");var E=S.getCursor();return E.sticky=="before"&&E.ch--,E},textObjectManipulation:function(S,E,F,$){var U={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},j={"'":!0,'"':!0,"`":!0},te=F.selectedCharacter;te=="b"?te="(":te=="B"&&(te="{");var ee=!F.textObjectInner,le,ge;if(U[te]){if(ge=!0,le=Gn(S,E,te,ee),!le){var ye=S.getSearchCursor(new RegExp("\\"+te,"g"),E);ye.find()&&(le=Gn(S,ye.from(),te,ee))}}else if(j[te])ge=!0,le=fr(S,E,te,ee);else if(te==="W"||te==="w")for(var we=F.repeat||1;we-- >0;){var Pe=mn(S,{inclusive:ee,innerWord:!ee,bigWord:te==="W",noSymbol:te==="W",multiline:!0},le&&le.end);Pe&&(le||(le=Pe),le.end=Pe.end)}else if(te==="p")if(le=Rn(S,E,F.repeat,0,ee),F.linewise=!0,$.visualMode)$.visualLine||($.visualLine=!0);else{var Se=$.inputState.operatorArgs;Se&&(Se.linewise=!0),le.end.line--}else if(te==="t")le=Xt(S,E,ee);else if(te==="s"){var ve=S.getLine(E.line);E.ch>0&&Ge(ve[E.ch])&&(E.ch-=1);var Re=Ln(S,E,F.repeat,1,ee),Me=Ln(S,E,F.repeat,-1,ee);Be(S.getLine(Me.line)[Me.ch])&&Be(S.getLine(Re.line)[Re.ch-1])&&(Me={line:Me.line,ch:Me.ch+1}),le={start:Me,end:Re}}return le?S.state.vim.visualMode?Ee(S,le.start,le.end,ge):[le.start,le.end]:null},repeatLastCharacterSearch:function(S,E,F){var $=Le.lastCharacterSearch,U=F.repeat,j=F.forward===$.forward,te=($.increment?1:0)*(j?-1:1);S.moveH(-te,"char"),F.inclusive=!!j;var ee=kn(S,U,j,$.selectedCharacter);return ee?(ee.ch+=te,ee):(S.moveH(te,"char"),E)}};function zt(S,E){Nt[S]=E}function Zt(S,E){for(var F=[],$=0;$<E;$++)F.push(S);return F}var nt={change:function(S,E,F){var $,U,j=S.state.vim,te=F[0].anchor,ee=F[0].head;if(j.visualMode)if(E.fullLine)ee.ch=Number.MAX_VALUE,ee.line--,S.setSelection(te,ee),U=S.getSelection(),S.replaceSelection(""),$=te;else{U=S.getSelection();var ye=Zt("",F.length);S.replaceSelections(ye),$=st(F[0].head,F[0].anchor)}else{U=S.getRange(te,ee);var le=j.lastEditInputState||{};if(le.motion=="moveByWords"&&!Be(U)){var ge=/\s+$/.exec(U);ge&&le.motionArgs&&le.motionArgs.forward&&(ee=Ct(ee,0,-ge[0].length),U=U.slice(0,-ge[0].length))}E.linewise&&(te=new e(te.line,Vt(S.getLine(te.line))),ee.line>te.line&&(ee=new e(ee.line-1,Number.MAX_VALUE))),S.replaceRange("",te,ee),$=te}Le.registerController.pushText(E.registerName,"change",U,E.linewise,F.length>1),Xe.enterInsertMode(S,{head:$},S.state.vim)},delete:function(S,E,F){var $,U,j=S.state.vim;if(j.visualBlock){U=S.getSelection();var le=Zt("",F.length);S.replaceSelections(le),$=st(F[0].head,F[0].anchor)}else{var te=F[0].anchor,ee=F[0].head;E.linewise&&ee.line!=S.firstLine()&&te.line==S.lastLine()&&te.line==ee.line-1&&(te.line==S.firstLine()?te.ch=0:te=new e(te.line-1,Dt(S,te.line-1))),U=S.getRange(te,ee),S.replaceRange("",te,ee),$=te,E.linewise&&($=Nt.moveToFirstNonWhiteSpaceCharacter(S,te))}return Le.registerController.pushText(E.registerName,"delete",U,E.linewise,j.visualBlock),tt(S,$)},indent:function(S,E,F){var $=S.state.vim;if(S.indentMore)for(var U=$.visualMode?E.repeat:1,j=0;j<U;j++)E.indentRight?S.indentMore():S.indentLess();else{var te=F[0].anchor.line,ee=$.visualBlock?F[F.length-1].anchor.line:F[0].head.line,U=$.visualMode?E.repeat:1;E.linewise&&ee--;for(var le=te;le<=ee;le++)for(var j=0;j<U;j++)S.indentLine(le,E.indentRight)}return Nt.moveToFirstNonWhiteSpaceCharacter(S,F[0].anchor)},indentAuto:function(S,E,F){return S.execCommand("indentAuto"),Nt.moveToFirstNonWhiteSpaceCharacter(S,F[0].anchor)},hardWrap:function(S,E,F,$,U){if(S.hardWrap){var j=F[0].anchor.line,te=F[0].head.line;E.linewise&&te--;var ee=S.hardWrap({from:j,to:te});return ee>j&&E.linewise&&ee--,E.keepCursor?$:new e(ee,0)}},changeCase:function(S,E,F,$,U){for(var j=S.getSelections(),te=[],ee=E.toLower,le=0;le<j.length;le++){var ge=j[le],ye="";if(ee===!0)ye=ge.toLowerCase();else if(ee===!1)ye=ge.toUpperCase();else for(var we=0;we<ge.length;we++){var Pe=ge.charAt(we);ye+=Fe(Pe)?Pe.toLowerCase():Pe.toUpperCase()}te.push(ye)}return S.replaceSelections(te),E.shouldMoveCursor?U:!S.state.vim.visualMode&&E.linewise&&F[0].anchor.line+1==F[0].head.line?Nt.moveToFirstNonWhiteSpaceCharacter(S,$):E.linewise?$:st(F[0].anchor,F[0].head)},yank:function(S,E,F,$){var U=S.state.vim,j=S.getSelection(),te=U.visualMode?st(U.sel.anchor,U.sel.head,F[0].head,F[0].anchor):$;return Le.registerController.pushText(E.registerName,"yank",j,E.linewise,U.visualBlock),te}};function kt(S,E){nt[S]=E}var Xe={jumpListWalk:function(S,E,F){if(!F.visualMode){var $=E.repeat,U=E.forward,j=Le.jumpList,te=j.move(S,U?$:-$),ee=te?te.find():void 0;ee=ee||S.getCursor(),S.setCursor(ee)}},scroll:function(S,E,F){if(!F.visualMode){var $=E.repeat||1,U=S.defaultTextHeight(),j=S.getScrollInfo().top,te=U*$,ee=E.forward?j+te:j-te,le=ct(S.getCursor()),ge=S.charCoords(le,"local");if(E.forward)ee>ge.top?(le.line+=(ee-ge.top)/U,le.line=Math.ceil(le.line),S.setCursor(le),ge=S.charCoords(le,"local"),S.scrollTo(null,ge.top)):S.scrollTo(null,ee);else{var ye=ee+S.getScrollInfo().clientHeight;ye<ge.bottom?(le.line-=(ge.bottom-ye)/U,le.line=Math.floor(le.line),S.setCursor(le),ge=S.charCoords(le,"local"),S.scrollTo(null,ge.bottom-S.getScrollInfo().clientHeight)):S.scrollTo(null,ee)}}},scrollToCursor:function(S,E){var F=S.getCursor().line,$=S.charCoords(new e(F,0),"local"),U=S.getScrollInfo().clientHeight,j=$.top;switch(E.position){case"center":j=$.bottom-U/2;break;case"bottom":var te=new e(F,S.getLine(F).length-1),ee=S.charCoords(te,"local"),le=ee.bottom-j;j=j-U+le;break}S.scrollTo(null,j)},replayMacro:function(S,E,F){var $=E.selectedCharacter,U=E.repeat,j=Le.macroModeState;for($=="@"?$=j.latestRegister:j.latestRegister=$;U--;)xr(S,F,j,$)},enterMacroRecordMode:function(S,E){var F=Le.macroModeState,$=E.selectedCharacter;Le.registerController.isValidRegister($)&&F.enterMacroRecordMode(S,$)},toggleOverwrite:function(S){S.state.overwrite?(S.toggleOverwrite(!1),S.setOption("keyMap","vim-insert"),o.signal(S,"vim-mode-change",{mode:"insert"})):(S.toggleOverwrite(!0),S.setOption("keyMap","vim-replace"),o.signal(S,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(S,E,F){if(!S.getOption("readOnly")){F.insertMode=!0,F.insertModeRepeat=E&&E.repeat||1;var $=E?E.insertAt:null,U=F.sel,j=E.head||S.getCursor("head"),te=S.listSelections().length;if($=="eol")j=new e(j.line,Dt(S,j.line));else if($=="bol")j=new e(j.line,0);else if($=="charAfter"){var ee=l(S,j,Ct(j,0,1));j=ee.end}else if($=="firstNonBlank"){var ee=l(S,j,Nt.moveToFirstNonWhiteSpaceCharacter(S,j));j=ee.end}else if($=="startOfSelectedArea"){if(!F.visualMode)return;F.visualBlock?(j=new e(Math.min(U.head.line,U.anchor.line),Math.min(U.head.ch,U.anchor.ch)),te=Math.abs(U.head.line-U.anchor.line)+1):U.head.line<U.anchor.line?j=U.head:j=new e(U.anchor.line,0)}else if($=="endOfSelectedArea"){if(!F.visualMode)return;F.visualBlock?(j=new e(Math.min(U.head.line,U.anchor.line),Math.max(U.head.ch,U.anchor.ch)+1),te=Math.abs(U.head.line-U.anchor.line)+1):U.head.line>=U.anchor.line?j=Ct(U.head,0,1):j=new e(U.anchor.line,0)}else if($=="inplace"){if(F.visualMode)return}else $=="lastEdit"&&(j=qn(S)||j);S.setOption("disableInput",!1),E&&E.replace?(S.toggleOverwrite(!0),S.setOption("keyMap","vim-replace"),o.signal(S,"vim-mode-change",{mode:"replace"})):(S.toggleOverwrite(!1),S.setOption("keyMap","vim-insert"),o.signal(S,"vim-mode-change",{mode:"insert"})),Le.macroModeState.isPlaying||(S.on("change",Jn),F.insertEnd&&F.insertEnd.clear(),F.insertEnd=S.setBookmark(j,{insertLeft:!0}),o.on(S.getInputField(),"keydown",_n)),F.visualMode&&mt(S),Z(S,j,te)}},toggleVisualMode:function(S,E,F){var $=E.repeat,U=S.getCursor(),j;if(F.visualMode)F.visualLine^E.linewise||F.visualBlock^E.blockwise?(F.visualLine=!!E.linewise,F.visualBlock=!!E.blockwise,o.signal(S,"vim-mode-change",{mode:"visual",subMode:F.visualLine?"linewise":F.visualBlock?"blockwise":""}),Te(S)):mt(S);else{F.visualMode=!0,F.visualLine=!!E.linewise,F.visualBlock=!!E.blockwise,j=tt(S,new e(U.line,U.ch+$-1));var te=l(S,U,j);F.sel={anchor:te.start,head:te.end},o.signal(S,"vim-mode-change",{mode:"visual",subMode:F.visualLine?"linewise":F.visualBlock?"blockwise":""}),Te(S),sn(S,F,"<",st(U,j)),sn(S,F,">",Bt(U,j))}},reselectLastSelection:function(S,E,F){var $=F.lastSelection;if(F.visualMode&&Ae(S,F),$){var U=$.anchorMark.find(),j=$.headMark.find();if(!U||!j)return;F.sel={anchor:U,head:j},F.visualMode=!0,F.visualLine=$.visualLine,F.visualBlock=$.visualBlock,Te(S),sn(S,F,"<",st(U,j)),sn(S,F,">",Bt(U,j)),o.signal(S,"vim-mode-change",{mode:"visual",subMode:F.visualLine?"linewise":F.visualBlock?"blockwise":""})}},joinLines:function(S,E,F){var $,U;if(F.visualMode){if($=S.getCursor("anchor"),U=S.getCursor("head"),Qe(U,$)){var j=U;U=$,$=j}U.ch=Dt(S,U.line)-1}else{var te=Math.max(E.repeat,2);$=S.getCursor(),U=tt(S,new e($.line+te-1,1/0))}for(var ee=0,le=$.line;le<U.line;le++){ee=Dt(S,$.line);var ge="",ye=0;if(!E.keepSpaces){var we=S.getLine($.line+1);ye=we.search(/\S/),ye==-1?ye=we.length:ge=" "}S.replaceRange(ge,new e($.line,ee),new e($.line+1,ye))}var Pe=tt(S,new e($.line,ee));F.visualMode&&mt(S,!1),S.setCursor(Pe)},newLineAndEnterInsertMode:function(S,E,F){F.insertMode=!0;var $=ct(S.getCursor());if($.line===S.firstLine()&&!E.after)S.replaceRange(`
`,new e(S.firstLine(),0)),S.setCursor(S.firstLine(),0);else{$.line=E.after?$.line:$.line-1,$.ch=Dt(S,$.line),S.setCursor($);var U=o.commands.newlineAndIndentContinueComment||o.commands.newlineAndIndent;U(S)}this.enterInsertMode(S,{repeat:E.repeat},F)},paste:function(S,E,F){var $=Le.registerController.getRegister(E.registerName);if(E.registerName==="+")navigator.clipboard.readText().then(j=>{this.continuePaste(S,E,F,j,$)});else{var U=$.toString();this.continuePaste(S,E,F,U,$)}},continuePaste:function(S,E,F,$,U){var j=ct(S.getCursor());if($){if(E.matchIndent){var te=S.getOption("tabSize"),ee=function(Ft){var Tt=Ft.split("	").length-1,hn=Ft.split(" ").length-1;return Tt*te+hn*1},le=S.getLine(S.getCursor().line),ge=ee(le.match(/^\s*/)[0]),ye=$.replace(/\n$/,""),we=$!==ye,Pe=ee($.match(/^\s*/)[0]),$=ye.replace(/^\s*/gm,function(Ft){var Tt=ge+(ee(Ft)-Pe);if(Tt<0)return"";if(S.getOption("indentWithTabs")){var hn=Math.floor(Tt/te);return Array(hn+1).join("	")}else return Array(Tt+1).join(" ")});$+=we?`
`:""}if(E.repeat>1)var $=Array(E.repeat+1).join($);var Se=U.linewise,ve=U.blockwise;if(ve){$=$.split(`
`),Se&&$.pop();for(var Re=0;Re<$.length;Re++)$[Re]=$[Re]==""?" ":$[Re];j.ch+=E.after?1:0,j.ch=Math.min(Dt(S,j.line),j.ch)}else Se?F.visualMode?$=F.visualLine?$.slice(0,-1):`
`+$.slice(0,$.length-1)+`
`:E.after?($=`
`+$.slice(0,$.length-1),j.ch=Dt(S,j.line)):j.ch=0:j.ch+=E.after?1:0;var Me;if(F.visualMode){F.lastPastedText=$;var He,Ye=he(S,F),qe=Ye[0],ft=Ye[1],We=S.getSelection(),_t=S.listSelections(),$t=new Array(_t.length).join("1").split("1");F.lastSelection&&(He=F.lastSelection.headMark.find()),Le.registerController.unnamedRegister.setText(We),ve?(S.replaceSelections($t),ft=new e(qe.line+$.length-1,qe.ch),S.setCursor(qe),q(S,ft),S.replaceSelections($),Me=qe):F.visualBlock?(S.replaceSelections($t),S.setCursor(qe),S.replaceRange($,qe,qe),Me=qe):(S.replaceRange($,qe,ft),Me=S.posFromIndex(S.indexFromPos(qe)+$.length-1)),He&&(F.lastSelection.headMark=S.setBookmark(He)),Se&&(Me.ch=0)}else if(ve){S.setCursor(j);for(var Re=0;Re<$.length;Re++){var at=j.line+Re;at>S.lastLine()&&S.replaceRange(`
`,new e(at,0));var rt=Dt(S,at);rt<j.ch&&R(S,at,j.ch)}S.setCursor(j),q(S,new e(j.line+$.length-1,j.ch)),S.replaceSelections($),Me=j}else if(S.replaceRange($,j),Se){var at=E.after?j.line+1:j.line;Me=new e(at,Vt(S.getLine(at)))}else Me=ct(j),/\n/.test($)||(Me.ch+=$.length-(E.after?1:0));F.visualMode&&mt(S,!1),S.setCursor(Me)}},undo:function(S,E){S.operation(function(){At(S,o.commands.undo,E.repeat)(),S.setCursor(tt(S,S.getCursor("start")))})},redo:function(S,E){At(S,o.commands.redo,E.repeat)()},setRegister:function(S,E,F){F.inputState.registerName=E.selectedCharacter},insertRegister:function(S,E,F){var $=E.selectedCharacter,U=Le.registerController.getRegister($),j=U&&U.toString();j&&S.replaceSelection(j)},oneNormalCommand:function(S,E,F){an(S,!0),F.insertModeReturn=!0,o.on(S,"vim-command-done",function $(){F.visualMode||(F.insertModeReturn&&(F.insertModeReturn=!1,F.insertMode||Xe.enterInsertMode(S,{},F)),o.off(S,"vim-command-done",$))})},setMark:function(S,E,F){var $=E.selectedCharacter;sn(S,F,$,S.getCursor())},replace:function(S,E,F){var $=E.selectedCharacter,U=S.getCursor(),j,te,ee=S.listSelections();if(F.visualMode)U=S.getCursor("start"),te=S.getCursor("end");else{var le=S.getLine(U.line);j=U.ch+E.repeat,j>le.length&&(j=le.length),te=new e(U.line,j)}var ge=l(S,U,te);if(U=ge.start,te=ge.end,$==`
`)F.visualMode||S.replaceRange("",U,te),(o.commands.newlineAndIndentContinueComment||o.commands.newlineAndIndent)(S);else{var ye=S.getRange(U,te);if(ye=ye.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$),ye=ye.replace(/[^\n]/g,$),F.visualBlock){var we=new Array(S.getOption("tabSize")+1).join(" ");ye=S.getSelection(),ye=ye.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$),ye=ye.replace(/\t/g,we).replace(/[^\n]/g,$).split(`
`),S.replaceSelections(ye)}else S.replaceRange(ye,U,te);F.visualMode?(U=Qe(ee[0].anchor,ee[0].head)?ee[0].anchor:ee[0].head,S.setCursor(U),mt(S,!1)):S.setCursor(Ct(te,0,-1))}},incrementNumberToken:function(S,E){for(var F=S.getCursor(),$=S.getLine(F.line),U=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,j,te,ee,le;(j=U.exec($))!==null&&(te=j.index,ee=te+j[0].length,!(F.ch<ee)););if(!(!E.backtrack&&ee<=F.ch)){if(j){var ge=j[2]||j[4],ye=j[3]||j[5],we=E.increase?1:-1,Pe={"0b":2,0:8,"":10,"0x":16}[ge.toLowerCase()],Se=parseInt(j[1]+ye,Pe)+we*E.repeat;le=Se.toString(Pe);var ve=ge?new Array(ye.length-le.length+1+j[1].length).join("0"):"";le.charAt(0)==="-"?le="-"+ge+ve+le.substr(1):le=ge+ve+le;var Re=new e(F.line,te),Me=new e(F.line,ee);S.replaceRange(le,Re,Me)}else return;S.setCursor(new e(F.line,te+le.length-1))}},repeatLastEdit:function(S,E,F){var $=F.lastEditInputState;if($){var U=E.repeat;U&&E.repeatIsExplicit?F.lastEditInputState.repeatOverride=U:U=F.lastEditInputState.repeatOverride||U,Jt(S,F,U,!1)}},indent:function(S,E){S.indentLine(S.getCursor().line,E.indentRight)},exitInsertMode:an};function Pt(S,E){Xe[S]=E}function tt(S,E,F){var $=S.state.vim,U=$.insertMode||$.visualMode,j=Math.min(Math.max(S.firstLine(),E.line),S.lastLine()),te=S.getLine(j),ee=te.length-1+ +!!U,le=Math.min(Math.max(0,E.ch),ee),ge=te.charCodeAt(le);if(56320<=ge&&ge<=57343){var ye=1;F&&F.line==j&&F.ch>le&&(ye=-1),le+=ye,le>ee&&(le-=2)}return new e(j,le)}function un(S){var E={};for(var F in S)S.hasOwnProperty(F)&&(E[F]=S[F]);return E}function Ct(S,E,F){return typeof E=="object"&&(F=E.ch,E=E.line),new e(S.line+E,S.ch+F)}function ut(S,E,F,$){$.operator&&(F="operatorPending");for(var U,j=[],te=[],ee=pt?E.length-f:0,le=ee;le<E.length;le++){var ge=E[le];F=="insert"&&ge.context!="insert"||ge.context&&ge.context!=F||$.operator&&ge.type=="action"||!(U=nn(S,ge.keys))||(U=="partial"&&j.push(ge),U=="full"&&te.push(ge))}return{partial:j.length&&j,full:te.length&&te}}function nn(S,E){if(E.slice(-11)=="<character>"){var F=E.length-11,$=S.slice(0,F),U=E.slice(0,F);return $==U&&S.length>F?"full":U.indexOf($)==0?"partial":!1}else return S==E?"full":E.indexOf(S)==0?"partial":!1}function jt(S){var E=/^.*(<[^>]+>)$/.exec(S),F=E?E[1]:S.slice(-1);if(F.length>1)switch(F){case"<CR>":F=`
`;break;case"<Space>":F=" ";break;default:F="";break}return F}function At(S,E,F){return function(){for(var $=0;$<F;$++)E(S)}}function ct(S){return new e(S.line,S.ch)}function Rt(S,E){return S.ch==E.ch&&S.line==E.line}function Qe(S,E){return S.line<E.line||S.line==E.line&&S.ch<E.ch}function st(S,E){return arguments.length>2&&(E=st.apply(void 0,Array.prototype.slice.call(arguments,1))),Qe(S,E)?S:E}function Bt(S,E){return arguments.length>2&&(E=Bt.apply(void 0,Array.prototype.slice.call(arguments,1))),Qe(S,E)?E:S}function Gt(S,E,F){var $=Qe(S,E),U=Qe(E,F);return $&&U}function Dt(S,E){return S.getLine(E).length}function pn(S){return S.trim?S.trim():S.replace(/^\s+|\s+$/g,"")}function xn(S){return S.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function R(S,E,F){var $=Dt(S,E),U=new Array(F-$+1).join(" ");S.setCursor(new e(E,$)),S.replaceRange(U,S.getCursor())}function q(S,E){var F=[],$=S.listSelections(),U=ct(S.clipPos(E)),j=!Rt(E,U),te=S.getCursor("head"),ee=K($,te),le=Rt($[ee].head,$[ee].anchor),ge=$.length-1,ye=ge-ee>ee?ge:0,we=$[ye].anchor,Pe=Math.min(we.line,U.line),Se=Math.max(we.line,U.line),ve=we.ch,Re=U.ch,Me=$[ye].head.ch-ve,He=Re-ve;Me>0&&He<=0?(ve++,j||Re--):Me<0&&He>=0?(ve--,le||Re++):Me<0&&He==-1&&(ve--,Re++);for(var Ye=Pe;Ye<=Se;Ye++){var qe={anchor:new e(Ye,ve),head:new e(Ye,Re)};F.push(qe)}return S.setSelections(F),E.ch=Re,we.ch=ve,we}function Z(S,E,F){for(var $=[],U=0;U<F;U++){var j=Ct(E,U,0);$.push({anchor:j,head:j})}S.setSelections($,0)}function K(S,E,F){for(var $=0;$<S.length;$++){var U=F!="head"&&Rt(S[$].anchor,E),j=F!="anchor"&&Rt(S[$].head,E);if(U||j)return $}return-1}function he(S,E){var F=E.lastSelection,$=function(){var j=S.listSelections(),te=j[0],ee=j[j.length-1],le=Qe(te.anchor,te.head)?te.anchor:te.head,ge=Qe(ee.anchor,ee.head)?ee.head:ee.anchor;return[le,ge]},U=function(){var j=S.getCursor(),te=S.getCursor(),ee=F.visualBlock;if(ee){var le=ee.width,ge=ee.height;te=new e(j.line+ge,j.ch+le);for(var ye=[],we=j.line;we<te.line;we++){var Pe=new e(we,j.ch),Se=new e(we,te.ch),ve={anchor:Pe,head:Se};ye.push(ve)}S.setSelections(ye)}else{var Re=F.anchorMark.find(),Me=F.headMark.find(),He=Me.line-Re.line,Ye=Me.ch-Re.ch;te={line:te.line+He,ch:He?te.ch:Ye+te.ch},F.visualLine&&(j=new e(j.line,0),te=new e(te.line,Dt(S,te.line))),S.setSelection(j,te)}return[j,te]};return E.visualMode?$():U()}function Ae(S,E){var F=E.sel.anchor,$=E.sel.head;E.lastPastedText&&($=S.posFromIndex(S.indexFromPos(F)+E.lastPastedText.length),E.lastPastedText=null),E.lastSelection={anchorMark:S.setBookmark(F),headMark:S.setBookmark($),anchor:ct(F),head:ct($),visualMode:E.visualMode,visualLine:E.visualLine,visualBlock:E.visualBlock}}function Ee(S,E,F,$){var U=S.state.vim.sel,j=$?E:U.head,te=$?E:U.anchor,ee;return Qe(F,E)&&(ee=F,F=E,E=ee),Qe(j,te)?(j=st(E,j),te=Bt(te,F)):(te=st(E,te),j=Bt(j,F),j=Ct(j,0,-1),j.ch==-1&&j.line!=S.firstLine()&&(j=new e(j.line-1,Dt(S,j.line-1)))),[te,j]}function Te(S,E,U){var $=S.state.vim;E=E||$.sel;var U=U||$.visualLine?"line":$.visualBlock?"block":"char",j=je(S,E,U);S.setSelections(j.ranges,j.primary)}function je(S,E,F,$){var U=ct(E.head),j=ct(E.anchor);if(F=="char"){var te=!$&&!Qe(E.head,E.anchor)?1:0,ee=Qe(E.head,E.anchor)?1:0;return U=Ct(E.head,0,te),j=Ct(E.anchor,0,ee),{ranges:[{anchor:j,head:U}],primary:0}}else if(F=="line"){if(Qe(E.head,E.anchor))U.ch=0,j.ch=Dt(S,j.line);else{j.ch=0;var le=S.lastLine();U.line>le&&(U.line=le),U.ch=Dt(S,U.line)}return{ranges:[{anchor:j,head:U}],primary:0}}else if(F=="block"){var ge=Math.min(j.line,U.line),ye=j.ch,we=Math.max(j.line,U.line),Pe=U.ch;ye<Pe?Pe+=1:ye+=1;for(var Se=we-ge+1,ve=U.line==ge?0:Se-1,Re=[],Me=0;Me<Se;Me++)Re.push({anchor:new e(ge+Me,ye),head:new e(ge+Me,Pe)});return{ranges:Re,primary:ve}}}function it(S){var E=S.getCursor("head");return S.getSelection().length==1&&(E=st(E,S.getCursor("anchor"))),E}function mt(S,E){var F=S.state.vim;E!==!1&&S.setCursor(tt(S,F.sel.head)),Ae(S,F),F.visualMode=!1,F.visualLine=!1,F.visualBlock=!1,F.insertMode||o.signal(S,"vim-mode-change",{mode:"normal"})}function rn(S,E,F){var $=S.getRange(E,F);if(/\n\s*$/.test($)){var U=$.split(`
`);U.pop();for(var j,j=U.pop();U.length>0&&j&&Be(j);j=U.pop())F.line--,F.ch=0;j?(F.line--,F.ch=Dt(S,F.line)):F.ch=0}}function cn(S,E,F){E.ch=0,F.ch=0,F.line++}function Vt(S){if(!S)return 0;var E=S.search(/\S/);return E==-1?S.length:E}function mn(S,{inclusive:E,innerWord:F,bigWord:$,noSymbol:U,multiline:j},te){var ee=te||it(S),le=S.getLine(ee.line),ge=le,ye=ee.line,we=ye,Pe=ee.ch,Se,ve=U?se[0]:pe[0];if(F&&/\s/.test(le.charAt(Pe)))ve=function(ft){return/\s/.test(ft)};else{for(;!ve(le.charAt(Pe));)if(Pe++,Pe>=le.length){if(!j)return null;Pe--,Se=Tn(S,ee,!0,$,!0);break}$?ve=pe[0]:(ve=se[0],ve(le.charAt(Pe))||(ve=se[1]))}for(var Re=Pe,Me=Pe;ve(le.charAt(Me))&&Me>=0;)Me--;if(Me++,Se)Re=Se.to,we=Se.line,ge=S.getLine(we),!ge&&Re==0&&Re++;else for(;ve(le.charAt(Re))&&Re<le.length;)Re++;if(E){var He=Re,Ye=ee.ch<=Me&&/\s/.test(le.charAt(ee.ch));if(!Ye)for(;/\s/.test(ge.charAt(Re))&&Re<ge.length;)Re++;if(He==Re||Ye){for(var qe=Me;/\s/.test(le.charAt(Me-1))&&Me>0;)Me--;!Me&&!Ye&&(Me=qe)}}return{start:new e(ye,Me),end:new e(we,Re)}}function Xt(S,E,F){var $=E;if(!o.findMatchingTag||!o.findEnclosingTag)return{start:$,end:$};var U=o.findMatchingTag(S,E)||o.findEnclosingTag(S,E);return!U||!U.open||!U.close?{start:$,end:$}:F?{start:U.open.from,end:U.close.to}:{start:U.open.to,end:U.close.from}}function Fn(S,E,F){Rt(E,F)||Le.jumpList.add(S,E,F)}function Bn(S,E){Le.lastCharacterSearch.increment=S,Le.lastCharacterSearch.forward=E.forward,Le.lastCharacterSearch.selectedCharacter=E.selectedCharacter}var rr={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},$n={bracket:{isComplete:function(S){if(S.nextCh===S.symb){if(S.depth++,S.depth>=1)return!0}else S.nextCh===S.reverseSymb&&S.depth--;return!1}},section:{init:function(S){S.curMoveThrough=!0,S.symb=(S.forward?"]":"[")===S.symb?"{":"}"},isComplete:function(S){return S.index===0&&S.nextCh===S.symb}},comment:{isComplete:function(S){var E=S.lastCh==="*"&&S.nextCh==="/";return S.lastCh=S.nextCh,E}},method:{init:function(S){S.symb=S.symb==="m"?"{":"}",S.reverseSymb=S.symb==="{"?"}":"{"},isComplete:function(S){return S.nextCh===S.symb}},preprocess:{init:function(S){S.index=0},isComplete:function(S){if(S.nextCh==="#"){var E=S.lineText.match(/^#(\w+)/)[1];if(E==="endif"){if(S.forward&&S.depth===0)return!0;S.depth++}else if(E==="if"){if(!S.forward&&S.depth===0)return!0;S.depth--}if(E==="else"&&S.depth===0)return!0}return!1}}};function sr(S,E,F,$){var U=ct(S.getCursor()),j=F?1:-1,te=F?S.lineCount():-1,ee=U.ch,le=U.line,ge=S.getLine(le),ye={lineText:ge,nextCh:ge.charAt(ee),lastCh:null,index:ee,symb:$,reverseSymb:(F?{")":"(","}":"{"}:{"(":")","{":"}"})[$],forward:F,depth:0,curMoveThrough:!1},we=rr[$];if(!we)return U;var Pe=$n[we].init,Se=$n[we].isComplete;for(Pe&&Pe(ye);le!==te&&E;){if(ye.index+=j,ye.nextCh=ye.lineText.charAt(ye.index),!ye.nextCh){if(le+=j,ye.lineText=S.getLine(le)||"",j>0)ye.index=0;else{var ve=ye.lineText.length;ye.index=ve>0?ve-1:0}ye.nextCh=ye.lineText.charAt(ye.index)}Se(ye)&&(U.line=le,U.ch=ye.index,E--)}return ye.nextCh||ye.curMoveThrough?new e(le,ye.index):U}function Tn(S,E,F,$,U){var j=E.line,te=E.ch,ee=S.getLine(j),le=F?1:-1,ge=$?pe:se;if(U&&ee==""){if(j+=le,ee=S.getLine(j),!xe(S,j))return null;te=F?0:ee.length}for(;;){if(U&&ee=="")return{from:0,to:0,line:j};for(var ye=le>0?ee.length:-1,we=ye,Pe=ye;te!=ye;){for(var Se=!1,ve=0;ve<ge.length&&!Se;++ve)if(ge[ve](ee.charAt(te))){for(we=te;te!=ye&&ge[ve](ee.charAt(te));)te+=le;if(Pe=te,Se=we!=Pe,we==E.ch&&j==E.line&&Pe==we+le)continue;return{from:Math.min(we,Pe+1),to:Math.max(we,Pe),line:j}}Se||(te+=le)}if(j+=le,!xe(S,j))return null;ee=S.getLine(j),te=le>0?0:ee.length}}function In(S,E,F,$,U,j){var te=ct(E),ee=[];($&&!U||!$&&U)&&F++;for(var le=!($&&U),ge=0;ge<F;ge++){var ye=Tn(S,E,$,j,le);if(!ye){var we=Dt(S,S.lastLine());ee.push($?{line:S.lastLine(),from:we,to:we}:{line:0,from:0,to:0});break}ee.push(ye),E=new e(ye.line,$?ye.to-1:ye.from)}var Pe=ee.length!=F,Se=ee[0],ve=ee.pop();return $&&!U?(!Pe&&(Se.from!=te.ch||Se.line!=te.line)&&(ve=ee.pop()),new e(ve.line,ve.from)):$&&U?new e(ve.line,ve.to-1):!$&&U?(!Pe&&(Se.to!=te.ch||Se.line!=te.line)&&(ve=ee.pop()),new e(ve.line,ve.to)):new e(ve.line,ve.from)}function Nn(S,E,F,$,U){var j=E,te=new e(j.line+F.repeat-1,1/0),ee=S.clipPos(te);return ee.ch--,U||($.lastHPos=1/0,$.lastHSPos=S.charCoords(ee,"div").left),te}function kn(S,E,F,$,U){for(var j=U||S.getCursor(),te=j.ch,ee,le=0;le<E;le++){var ge=S.getLine(j.line);if(ee=ur(te,ge,$,F,!0),ee==-1)return null;te=ee}return new e(S.getCursor().line,ee)}function lr(S,E){var F=S.getCursor().line;return tt(S,new e(F,E-1))}function sn(S,E,F,$){Ne(F,_e)&&(E.marks[F]&&E.marks[F].clear(),E.marks[F]=S.setBookmark($))}function ur(S,E,F,$,U){var j;return $?(j=E.indexOf(F,S+1),j!=-1&&!U&&(j-=1)):(j=E.lastIndexOf(F,S-1),j!=-1&&!U&&(j+=1)),j}function Rn(S,E,F,$,U){var j=E.line,te=S.firstLine(),ee=S.lastLine(),le,ge,ye=j;function we(Me){return!S.getLine(Me)}function Pe(Me,He,Ye){return Ye?we(Me)!=we(Me+He):!we(Me)&&we(Me+He)}if($){for(;te<=ye&&ye<=ee&&F>0;)Pe(ye,$)&&F--,ye+=$;return new e(ye,0)}var Se=S.state.vim;if(Se.visualLine&&Pe(j,1,!0)){var ve=Se.sel.anchor;Pe(ve.line,-1,!0)&&(!U||ve.line!=j)&&(j+=1)}var Re=we(j);for(ye=j;ye<=ee&&F;ye++)Pe(ye,1,!0)&&(!U||we(ye)!=Re)&&F--;for(ge=new e(ye,0),ye>ee&&!Re?Re=!0:U=!1,ye=j;ye>te&&!((!U||we(ye)==Re||ye==j)&&Pe(ye,-1,!0));ye--);return le=new e(ye,0),{start:le,end:ge}}function Ln(S,E,F,$,U){function j(ge){ge.pos+ge.dir<0||ge.pos+ge.dir>=ge.line.length?ge.line=null:ge.pos+=ge.dir}function te(ge,ye,we,Pe){var Se=ge.getLine(ye),ve={line:Se,ln:ye,pos:we,dir:Pe};if(ve.line==="")return{ln:ve.ln,pos:ve.pos};var Re=ve.pos;for(j(ve);ve.line!==null;){if(Re=ve.pos,Ge(ve.line[ve.pos]))if(U){for(j(ve);ve.line!==null&&Be(ve.line[ve.pos]);)Re=ve.pos,j(ve);return{ln:ve.ln,pos:Re+1}}else return{ln:ve.ln,pos:ve.pos+1};j(ve)}return{ln:ve.ln,pos:Re+1}}function ee(ge,ye,we,Pe){var Se=ge.getLine(ye),ve={line:Se,ln:ye,pos:we,dir:Pe};if(ve.line==="")return{ln:ve.ln,pos:ve.pos};var Re=ve.pos;for(j(ve);ve.line!==null;){if(!Be(ve.line[ve.pos])&&!Ge(ve.line[ve.pos]))Re=ve.pos;else if(Ge(ve.line[ve.pos]))return U?Be(ve.line[ve.pos+1])?{ln:ve.ln,pos:ve.pos+1}:{ln:ve.ln,pos:Re}:{ln:ve.ln,pos:Re};j(ve)}return ve.line=Se,U&&Be(ve.line[ve.pos])?{ln:ve.ln,pos:ve.pos}:{ln:ve.ln,pos:Re}}for(var le={ln:E.line,pos:E.ch};F>0;)$<0?le=ee(S,le.ln,le.pos,$):le=te(S,le.ln,le.pos,$),F--;return new e(le.ln,le.pos)}function cr(S,E,F,$){function U(le,ge){if(ge.pos+ge.dir<0||ge.pos+ge.dir>=ge.line.length){if(ge.ln+=ge.dir,!xe(le,ge.ln)){ge.line=null,ge.ln=null,ge.pos=null;return}ge.line=le.getLine(ge.ln),ge.pos=ge.dir>0?0:ge.line.length-1}else ge.pos+=ge.dir}function j(le,ge,ye,we){var Me=le.getLine(ge),Pe=Me==="",Se={line:Me,ln:ge,pos:ye,dir:we},ve={ln:Se.ln,pos:Se.pos},Re=Se.line==="";for(U(le,Se);Se.line!==null;){if(ve.ln=Se.ln,ve.pos=Se.pos,Se.line===""&&!Re)return{ln:Se.ln,pos:Se.pos};if(Pe&&Se.line!==""&&!Be(Se.line[Se.pos]))return{ln:Se.ln,pos:Se.pos};Ge(Se.line[Se.pos])&&!Pe&&(Se.pos===Se.line.length-1||Be(Se.line[Se.pos+1]))&&(Pe=!0),U(le,Se)}var Me=le.getLine(ve.ln);ve.pos=0;for(var He=Me.length-1;He>=0;--He)if(!Be(Me[He])){ve.pos=He;break}return ve}function te(le,ge,ye,we){var Re=le.getLine(ge),Pe={line:Re,ln:ge,pos:ye,dir:we},Se={ln:Pe.ln,pos:null},ve=Pe.line==="";for(U(le,Pe);Pe.line!==null;){if(Pe.line===""&&!ve)return Se.pos!==null?Se:{ln:Pe.ln,pos:Pe.pos};if(Ge(Pe.line[Pe.pos])&&Se.pos!==null&&!(Pe.ln===Se.ln&&Pe.pos+1===Se.pos))return Se;Pe.line!==""&&!Be(Pe.line[Pe.pos])&&(ve=!1,Se={ln:Pe.ln,pos:Pe.pos}),U(le,Pe)}var Re=le.getLine(Se.ln);Se.pos=0;for(var Me=0;Me<Re.length;++Me)if(!Be(Re[Me])){Se.pos=Me;break}return Se}for(var ee={ln:E.line,pos:E.ch};F>0;)$<0?ee=te(S,ee.ln,ee.pos,$):ee=j(S,ee.ln,ee.pos,$),F--;return new e(ee.ln,ee.pos)}function Gn(S,E,F,$){var U=E,j,te,ee={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[F],le={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[F],ge=S.getLine(U.line).charAt(U.ch),ye=ge===le?1:0;if(j=S.scanForBracket(new e(U.line,U.ch+ye),-1,void 0,{bracketRegex:ee}),te=S.scanForBracket(new e(U.line,U.ch+ye),1,void 0,{bracketRegex:ee}),!j||!te)return null;if(j=j.pos,te=te.pos,j.line==te.line&&j.ch>te.ch||j.line>te.line){var we=j;j=te,te=we}return $?te.ch+=1:j.ch+=1,{start:j,end:te}}function fr(S,E,F,$){var U=ct(E),j=S.getLine(U.line),te=j.split(""),ee,le,ge,ye,we=te.indexOf(F);if(U.ch<we)U.ch=we;else if(we<U.ch&&te[U.ch]==F){var Pe=/string/.test(S.getTokenTypeAt(Ct(E,0,1))),Se=/string/.test(S.getTokenTypeAt(E)),ve=Pe&&!Se;ve||(le=U.ch,--U.ch)}if(te[U.ch]==F&&!le)ee=U.ch+1;else for(ge=U.ch;ge>-1&&!ee;ge--)te[ge]==F&&(ee=ge+1);if(ee&&!le)for(ge=ee,ye=te.length;ge<ye&&!le;ge++)te[ge]==F&&(le=ge);return!ee||!le?{start:U,end:U}:($&&(--ee,++le),{start:new e(U.line,ee),end:new e(U.line,le)})}Ze("pcre",!0,"boolean");function Qn(){}Qn.prototype={getQuery:function(){return Le.query},setQuery:function(S){Le.query=S},getOverlay:function(){return this.searchOverlay},setOverlay:function(S){this.searchOverlay=S},isReversed:function(){return Le.isReversed},setReversed:function(S){Le.isReversed=S},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(S){this.annotate=S}};function en(S){var E=S.state.vim;return E.searchState_||(E.searchState_=new Qn)}function hr(S){return Un(S,"/")}function dr(S){return jn(S,"/")}function Un(S,E){var F=jn(S,E)||[];if(!F.length)return[];var $=[];if(F[0]===0){for(var U=0;U<F.length;U++)typeof F[U]=="number"&&$.push(S.substring(F[U]+1,F[U+1]));return $}}function jn(S,E){E||(E="/");for(var F=!1,$=[],U=0;U<S.length;U++){var j=S.charAt(U);!F&&j==E&&$.push(U),F=!F&&j=="\\"}return $}function mr(S){for(var E="|(){",F="}",$=!1,U=[],j=-1;j<S.length;j++){var te=S.charAt(j)||"",ee=S.charAt(j+1)||"",le=ee&&E.indexOf(ee)!=-1;$?((te!=="\\"||!le)&&U.push(te),$=!1):te==="\\"?($=!0,ee&&F.indexOf(ee)!=-1&&(le=!0),(!le||ee==="\\")&&U.push(te)):(U.push(te),le&&ee!=="\\"&&U.push("\\"))}return U.join("")}var Vn={"\\n":`
`,"\\r":"\r","\\t":"	"};function gr(S){for(var E=!1,F=[],$=-1;$<S.length;$++){var U=S.charAt($)||"",j=S.charAt($+1)||"";Vn[U+j]?(F.push(Vn[U+j]),$++):E?(F.push(U),E=!1):U==="\\"?(E=!0,Ie(j)||j==="$"?F.push("$"):j!=="/"&&j!=="\\"&&F.push("\\")):(U==="$"&&F.push("$"),F.push(U),j==="/"&&F.push("\\"))}return F.join("")}var Wn={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function yr(S){for(var E=new o.StringStream(S),F=[];!E.eol();){for(;E.peek()&&E.peek()!="\\";)F.push(E.next());var $=!1;for(var U in Wn)if(E.match(U,!0)){$=!0,F.push(Wn[U]);break}$||F.push(E.next())}return F.join("")}function br(S,E,F){var $=Le.registerController.getRegister("/");if($.setText(S),S instanceof RegExp)return S;var U=dr(S),j,te;if(!U.length)j=S;else{j=S.substring(0,U[0]);var ee=S.substring(U[0]);te=ee.indexOf("i")!=-1}if(!j)return null;$e("pcre")||(j=mr(j)),F&&(E=/^[^A-Z]*$/.test(j));var le=new RegExp(j,E||te?"im":"m");return le}function fn(S){typeof S=="string"&&(S=document.createElement(S));for(var E,F=1;F<arguments.length;F++)if(E=arguments[F])if(typeof E!="object"&&(E=document.createTextNode(E)),E.nodeType)S.appendChild(E);else for(var $ in E)Object.prototype.hasOwnProperty.call(E,$)&&($[0]==="$"?S.style[$.slice(1)]=E[$]:S.setAttribute($,E[$]));return S}function bt(S,E){var F=fn("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},E);S.openNotification?S.openNotification(F,{bottom:!0,duration:5e3}):alert(F.innerText)}function _r(S,E){return fn("div",{$display:"flex"},fn("span",{$fontFamily:"monospace",$whiteSpace:"pre",$flex:1},S,fn("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false",$width:"100%"})),E&&fn("span",{$color:"#888"},E))}function vn(S,E){var F=_r(E.prefix,E.desc);if(S.openDialog)S.openDialog(F,E.onClose,{onKeyDown:E.onKeyDown,onKeyUp:E.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:E.value});else{var $="";typeof E.prefix!="string"&&E.prefix&&($+=E.prefix.textContent),E.desc&&($+=" "+E.desc),E.onClose(prompt($,""))}}function vr(S,E){if(S instanceof RegExp&&E instanceof RegExp){for(var F=["global","multiline","ignoreCase","source"],$=0;$<F.length;$++){var U=F[$];if(S[U]!==E[U])return!1}return!0}return!1}function bn(S,E,F,$){if(E){var U=en(S),j=br(E,!!F,!!$);if(j)return Zn(S,j),vr(j,U.getQuery())||U.setQuery(j),j}}function Cr(S){if(S.source.charAt(0)=="^")var E=!0;return{token:function(F){if(E&&!F.sol()){F.skipToEnd();return}var $=F.match(S,!1);if($)return $[0].length==0?(F.next(),"searching"):!F.sol()&&(F.backUp(1),!S.exec(F.next()+$[0]))?(F.next(),null):(F.match(S),"searching");for(;!F.eol()&&(F.next(),!F.match(S,!1)););},query:S}}var Cn=0;function Zn(S,E){clearTimeout(Cn),Cn=setTimeout(function(){if(S.state.vim){var F=en(S),$=F.getOverlay();(!$||E!=$.query)&&($&&S.removeOverlay($),$=Cr(E),S.addOverlay($),S.showMatchesOnScrollbar&&(F.getScrollbarAnnotate()&&F.getScrollbarAnnotate().clear(),F.setScrollbarAnnotate(S.showMatchesOnScrollbar(E))),F.setOverlay($))}},50)}function Xn(S,E,F,$){return $===void 0&&($=1),S.operation(function(){for(var U=S.getCursor(),j=S.getSearchCursor(F,U),te=0;te<$;te++){var ee=j.find(E);if(te==0&&ee&&Rt(j.from(),U)){var le=E?j.from():j.to();ee=j.find(E),ee&&!ee[0]&&Rt(j.from(),le)&&S.getLine(le.line).length==le.ch&&(ee=j.find(E))}if(!ee&&(j=S.getSearchCursor(F,E?new e(S.lastLine()):new e(S.firstLine(),0)),!j.find(E)))return}return j.from()})}function Or(S,E,F,$,U){return $===void 0&&($=1),S.operation(function(){var j=S.getCursor(),te=S.getSearchCursor(F,j),ee=te.find(!E);!U.visualMode&&ee&&Rt(te.from(),j)&&te.find(!E);for(var le=0;le<$;le++)if(ee=te.find(E),!ee&&(te=S.getSearchCursor(F,E?new e(S.lastLine()):new e(S.firstLine(),0)),!te.find(E)))return;return[te.from(),te.to()]})}function Pn(S){var E=en(S);S.removeOverlay(en(S).getOverlay()),E.setOverlay(null),E.getScrollbarAnnotate()&&(E.getScrollbarAnnotate().clear(),E.setScrollbarAnnotate(null))}function Sr(S,E,F){return typeof S!="number"&&(S=S.line),E instanceof Array?Ne(S,E):typeof F=="number"?S>=E&&S<=F:S==E}function En(S){var E=S.getScrollInfo(),F=6,$=10,U=S.coordsChar({left:0,top:F+E.top},"local"),j=E.clientHeight-$+E.top,te=S.coordsChar({left:0,top:j},"local");return{top:U.line,bottom:te.line}}function On(S,E,F){if(F=="'"||F=="`")return Le.jumpList.find(S,-1)||new e(0,0);if(F==".")return qn(S);var $=E.marks[F];return $&&$.find()}function qn(S){if(S.getLastEditEnd)return S.getLastEditEnd();for(var E=S.doc.history.done,F=E.length;F--;)if(E[F].changes)return ct(E[F].changes[0].to)}var Hn=function(){this.buildCommandMap_()};Hn.prototype={processCommand:function(S,E,F){var $=this;S.operation(function(){S.curOp.isVimOp=!0,$._processCommand(S,E,F)})},_processCommand:function(S,E,F){var $=S.state.vim,U=Le.registerController.getRegister(":"),j=U.toString(),te=new o.StringStream(E);U.setText(E);var ee=F||{};ee.input=E;try{this.parseInput_(S,te,ee)}catch(we){throw bt(S,we.toString()),we}$.visualMode&&mt(S);var le,ge;if(!ee.commandName)ee.line!==void 0&&(ge="move");else if(le=this.matchCommand_(ee.commandName),le){if(ge=le.name,le.excludeFromCommandHistory&&U.setText(j),this.parseCommandArgs_(te,ee,le),le.type=="exToKey"){for(var ye=0;ye<le.toKeys.length;ye++)vt.handleKey(S,le.toKeys[ye],"mapping");return}else if(le.type=="exToEx"){this.processCommand(S,le.toInput);return}}if(!ge){bt(S,'Not an editor command ":'+E+'"');return}try{zn[ge](S,ee),(!le||!le.possiblyAsync)&&ee.callback&&ee.callback()}catch(we){throw bt(S,we.toString()),we}},parseInput_:function(S,E,F){E.eatWhile(":"),E.eat("%")?(F.line=S.firstLine(),F.lineEnd=S.lastLine()):(F.line=this.parseLineSpec_(S,E),F.line!==void 0&&E.eat(",")&&(F.lineEnd=this.parseLineSpec_(S,E))),F.line==null?S.state.vim.visualMode?(F.selectionLine=On(S,S.state.vim,"<")?.line,F.selectionLineEnd=On(S,S.state.vim,">")?.line):F.selectionLine=S.getCursor().line:(F.selectionLine=F.line,F.selectionLineEnd=F.lineEnd);var $=E.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return $?F.commandName=$[1]:F.commandName=E.match(/.*/)[0],F},parseLineSpec_:function(S,E){var F=E.match(/^(\d+)/);if(F)return parseInt(F[1],10)-1;switch(E.next()){case".":return this.parseLineSpecOffset_(E,S.getCursor().line);case"$":return this.parseLineSpecOffset_(E,S.lastLine());case"'":var $=E.next(),U=On(S,S.state.vim,$);if(!U)throw new Error("Mark not set");return this.parseLineSpecOffset_(E,U.line);case"-":case"+":return E.backUp(1),this.parseLineSpecOffset_(E,S.getCursor().line);default:E.backUp(1);return}},parseLineSpecOffset_:function(S,E){var F=S.match(/^([+-])?(\d+)/);if(F){var $=parseInt(F[2],10);F[1]=="-"?E-=$:E+=$}return E},parseCommandArgs_:function(S,E,F){if(!S.eol()){E.argString=S.match(/.*/)[0];var $=F.argDelimiter||/\s+/,U=pn(E.argString).split($);U.length&&U[0]&&(E.args=U)}},matchCommand_:function(S){for(var E=S.length;E>0;E--){var F=S.substring(0,E);if(this.commandMap_[F]){var $=this.commandMap_[F];if($.name.indexOf(S)===0)return $}}return null},buildCommandMap_:function(){this.commandMap_={};for(var S=0;S<d.length;S++){var E=d[S],F=E.shortName||E.name;this.commandMap_[F]=E}},map:function(S,E,F,$){if(S!=":"&&S.charAt(0)==":"){if(F)throw Error("Mode not supported for ex mappings");var U=S.substring(1);E!=":"&&E.charAt(0)==":"?this.commandMap_[U]={name:U,type:"exToEx",toInput:E.substring(1),user:!0}:this.commandMap_[U]={name:U,type:"exToKey",toKeys:E,user:!0}}else if(E!=":"&&E.charAt(0)==":"){var j={keys:S,type:"keyToEx",exArgs:{input:E.substring(1)}};F&&(j.context=F),u.unshift(j)}else{var j={keys:S,type:"keyToKey",toKeys:E,noremap:!!$};F&&(j.context=F),u.unshift(j)}},unmap:function(S,E){if(S!=":"&&S.charAt(0)==":"){if(E)throw Error("Mode not supported for ex mappings");var F=S.substring(1);if(this.commandMap_[F]&&this.commandMap_[F].user)return delete this.commandMap_[F],!0}else for(var $=S,U=0;U<u.length;U++)if($==u[U].keys&&u[U].context===E)return u.splice(U,1),!0}};var zn={colorscheme:function(S,E){if(!E.args||E.args.length<1){bt(S,S.getOption("theme"));return}S.setOption("theme",E.args[0])},map:function(S,E,F,$){var U=E.args;if(!U||U.length<2){S&&bt(S,"Invalid mapping: "+E.input);return}Yt.map(U[0],U[1],F,$)},imap:function(S,E){this.map(S,E,"insert")},nmap:function(S,E){this.map(S,E,"normal")},vmap:function(S,E){this.map(S,E,"visual")},omap:function(S,E){this.map(S,E,"operatorPending")},noremap:function(S,E){this.map(S,E,void 0,!0)},inoremap:function(S,E){this.map(S,E,"insert",!0)},nnoremap:function(S,E){this.map(S,E,"normal",!0)},vnoremap:function(S,E){this.map(S,E,"visual",!0)},onoremap:function(S,E){this.map(S,E,"operatorPending",!0)},unmap:function(S,E,F){var $=E.args;(!$||$.length<1||!Yt.unmap($[0],F))&&S&&bt(S,"No such mapping: "+E.input)},mapclear:function(S,E){vt.mapclear()},imapclear:function(S,E){vt.mapclear("insert")},nmapclear:function(S,E){vt.mapclear("normal")},vmapclear:function(S,E){vt.mapclear("visual")},omapclear:function(S,E){vt.mapclear("operatorPending")},move:function(S,E){Ut.processCommand(S,S.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:E.line+1})},set:function(S,E){var F=E.args,$=E.setCfg||{};if(!F||F.length<1){S&&bt(S,"Invalid mapping: "+E.input);return}var U=F[0].split("="),j=U[0],te=U[1],ee=!1,le=!1;if(j.charAt(j.length-1)=="?"){if(te)throw Error("Trailing characters: "+E.argString);j=j.substring(0,j.length-1),ee=!0}else j.charAt(j.length-1)=="!"&&(j=j.substring(0,j.length-1),le=!0);te===void 0&&j.substring(0,2)=="no"&&(j=j.substring(2),te=!1);var ge=Ve[j]&&Ve[j].type=="boolean";if(ge&&(le?te=!$e(j,S,$):te==null&&(te=!0)),!ge&&te===void 0||ee){var ye=$e(j,S,$);ye instanceof Error?bt(S,ye.message):ye===!0||ye===!1?bt(S," "+(ye?"":"no")+j):bt(S,"  "+j+"="+ye)}else{var we=Je(j,te,S,$);we instanceof Error&&bt(S,we.message)}},setlocal:function(S,E){E.setCfg={scope:"local"},this.set(S,E)},setglobal:function(S,E){E.setCfg={scope:"global"},this.set(S,E)},registers:function(S,E){var F=E.args,$=Le.registerController.registers,U=`----------Registers----------

`;if(F){var j;F=F.join("");for(var ee=0;ee<F.length;ee++)if(j=F.charAt(ee),!!Le.registerController.isValidRegister(j)){var le=$[j]||new Mt;U+='"'+j+"    "+le.toString()+`
`}}else for(var j in $){var te=$[j].toString();te.length&&(U+='"'+j+"    "+te+`
`)}bt(S,U)},sort:function(S,E){var F,$,U,j,te;function ee(){if(E.argString){var at=new o.StringStream(E.argString);if(at.eat("!")&&(F=!0),at.eol())return;if(!at.eatSpace())return"Invalid arguments";var rt=at.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!rt&&!at.eol())return"Invalid arguments";if(rt[1]){$=rt[1].indexOf("i")!=-1,U=rt[1].indexOf("u")!=-1;var It=rt[1].indexOf("d")!=-1||rt[1].indexOf("n")!=-1&&1,Ft=rt[1].indexOf("x")!=-1&&1,Tt=rt[1].indexOf("o")!=-1&&1;if(It+Ft+Tt>1)return"Invalid arguments";j=It&&"decimal"||Ft&&"hex"||Tt&&"octal"}rt[2]&&(te=new RegExp(rt[2].substr(1,rt[2].length-2),$?"i":""))}}var le=ee();if(le){bt(S,le+": "+E.argString);return}var ge=E.line||S.firstLine(),ye=E.lineEnd||E.line||S.lastLine();if(ge==ye)return;var we=new e(ge,0),Pe=new e(ye,Dt(S,ye)),Se=S.getRange(we,Pe).split(`
`),ve=te||(j=="decimal"?/(-?)([\d]+)/:j=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:j=="octal"?/([0-7]+)/:null),Re=j=="decimal"?10:j=="hex"?16:j=="octal"?8:null,Me=[],He=[];if(j||te)for(var Ye=0;Ye<Se.length;Ye++){var qe=te?Se[Ye].match(te):null;qe&&qe[0]!=""?Me.push(qe):!te&&ve.exec(Se[Ye])?Me.push(Se[Ye]):He.push(Se[Ye])}else He=Se;function ft(at,rt){if(F){var It;It=at,at=rt,rt=It}$&&(at=at.toLowerCase(),rt=rt.toLowerCase());var Ft=j&&ve.exec(at),Tt=j&&ve.exec(rt);return Ft?(Ft=parseInt((Ft[1]+Ft[2]).toLowerCase(),Re),Tt=parseInt((Tt[1]+Tt[2]).toLowerCase(),Re),Ft-Tt):at<rt?-1:1}function We(at,rt){if(F){var It;It=at,at=rt,rt=It}return $&&(at[0]=at[0].toLowerCase(),rt[0]=rt[0].toLowerCase()),at[0]<rt[0]?-1:1}if(Me.sort(te?We:ft),te)for(var Ye=0;Ye<Me.length;Ye++)Me[Ye]=Me[Ye].input;else j||He.sort(ft);if(Se=F?Me.concat(He):He.concat(Me),U){var _t=Se,$t;Se=[];for(var Ye=0;Ye<_t.length;Ye++)_t[Ye]!=$t&&Se.push(_t[Ye]),$t=_t[Ye]}S.replaceRange(Se.join(`
`),we,Pe)},vglobal:function(S,E){this.global(S,E)},normal:function(S,E){var F=E.argString;if(F&&F[0]=="!"&&(F=F.slice(1),pt=!0),F=F.trimStart(),!F){bt(S,"Argument is required.");return}var $=E.line;if(typeof $=="number")for(var U=isNaN(E.lineEnd)?$:E.lineEnd,j=$;j<=U;j++)S.setCursor(j,0),qt(S,E.argString.trimStart()),S.state.vim.insertMode&&an(S,!0);else qt(S,E.argString.trimStart()),S.state.vim.insertMode&&an(S,!0)},global:function(S,E){var F=E.argString;if(!F){bt(S,"Regular Expression missing from global");return}var $=E.commandName[0]==="v";F[0]==="!"&&E.commandName[0]==="g"&&($=!0,F=F.slice(1));var U=E.line!==void 0?E.line:S.firstLine(),j=E.lineEnd||E.line||S.lastLine(),te=hr(F),ee=F,le;if(te.length&&(ee=te[0],le=te.slice(1,te.length).join("/")),ee)try{bn(S,ee,!0,!0)}catch{bt(S,"Invalid regex: "+ee);return}for(var ge=en(S).getQuery(),ye=[],we=U;we<=j;we++){var Pe=S.getLine(we),Se=ge.test(Pe);Se!==$&&ye.push(le?S.getLineHandle(we):Pe)}if(!le){bt(S,ye.join(`
`));return}var ve=0,Re=function(){if(ve<ye.length){var Me=ye[ve++],He=S.getLineNumber(Me);if(He==null){Re();return}var Ye=He+1+le;Yt.processCommand(S,Ye,{callback:Re})}else S.releaseLineHandles&&S.releaseLineHandles()};Re()},substitute:function(S,E){if(!S.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var F=E.argString,$=F?Un(F,F[0]):[],U,j="",te,ee,le,ge=!1,ye=!1;if($.length)U=$[0],$e("pcre")&&U!==""&&(U=new RegExp(U).source),j=$[1],j!==void 0&&($e("pcre")?j=yr(j.replace(/([^\\])&/g,"$1$$&")):j=gr(j),Le.lastSubstituteReplacePart=j),te=$[2]?$[2].split(" "):[];else if(F&&F.length){bt(S,"Substitutions should be of the form :s/pattern/replace/");return}if(te&&(ee=te[0],le=parseInt(te[1]),ee&&(ee.indexOf("c")!=-1&&(ge=!0),ee.indexOf("g")!=-1&&(ye=!0),$e("pcre")?U=U+"/"+ee:U=U.replace(/\//g,"\\/")+"/"+ee)),U)try{bn(S,U,!0,!0)}catch{bt(S,"Invalid regex: "+U);return}if(j=j||Le.lastSubstituteReplacePart,j===void 0){bt(S,"No previous substitute regular expression");return}var we=en(S),Pe=we.getQuery(),Se=E.line!==void 0?E.line:S.getCursor().line,ve=E.lineEnd||Se;Se==S.firstLine()&&ve==S.lastLine()&&(ve=1/0),le&&(Se=ve,ve=Se+le-1);var Re=tt(S,new e(Se,0)),Me=S.getSearchCursor(Pe,Re);Ar(S,ge,ye,Se,ve,Me,Pe,j,E.callback)},startinsert:function(S,E){qt(S,E.argString=="!"?"A":"i",{})},redo:o.commands.redo,undo:o.commands.undo,write:function(S){o.commands.save?o.commands.save(S):S.save&&S.save()},nohlsearch:function(S){Pn(S)},yank:function(S){var E=ct(S.getCursor()),F=E.line,$=S.getLine(F);Le.registerController.pushText("0","yank",$,!0,!0)},delete:function(S,E){var F=E.selectionLine,$=isNaN(E.selectionLineEnd)?F:E.selectionLineEnd;nt.delete(S,{linewise:!0},[{anchor:new e(F,0),head:new e($+1,0)}])},join:function(S,E){var F=E.selectionLine,$=isNaN(E.selectionLineEnd)?F:E.selectionLineEnd;S.setCursor(new e(F,0)),Xe.joinLines(S,{repeat:$-F},S.state.vim)},delmarks:function(S,E){if(!E.argString||!pn(E.argString)){bt(S,"Argument required");return}for(var F=S.state.vim,$=new o.StringStream(pn(E.argString));!$.eol();){$.eatSpace();var U=$.pos;if(!$.match(/[a-zA-Z]/,!1)){bt(S,"Invalid argument: "+E.argString.substring(U));return}var j=$.next();if($.match("-",!0)){if(!$.match(/[a-zA-Z]/,!1)){bt(S,"Invalid argument: "+E.argString.substring(U));return}var te=j,ee=$.next();if(Oe(te)&&Oe(ee)||Fe(te)&&Fe(ee)){var le=te.charCodeAt(0),ge=ee.charCodeAt(0);if(le>=ge){bt(S,"Invalid argument: "+E.argString.substring(U));return}for(var ye=0;ye<=ge-le;ye++){var we=String.fromCharCode(le+ye);delete F.marks[we]}}else{bt(S,"Invalid argument: "+te+"-");return}}else delete F.marks[j]}}},Yt=new Hn;function Ar(S,E,F,$,U,j,te,ee,le){S.state.vim.exMode=!0;var ge=!1,ye,we,Pe;function Se(){S.operation(function(){for(;!ge;)ve(),Me();He()})}function ve(){var qe=S.getRange(j.from(),j.to()),ft=qe.replace(te,ee),We=j.to().line;j.replace(ft),we=j.to().line,U+=we-We,Pe=we<We}function Re(){var qe=ye&&ct(j.to()),ft=j.findNext();return ft&&!ft[0]&&qe&&Rt(j.from(),qe)&&(ft=j.findNext()),ft}function Me(){for(;Re()&&Sr(j.from(),$,U);)if(!(!F&&j.from().line==we&&!Pe)){S.scrollIntoView(j.from(),30),S.setSelection(j.from(),j.to()),ye=j.from(),ge=!1;return}ge=!0}function He(qe){if(qe&&qe(),S.focus(),ye){S.setCursor(ye);var ft=S.state.vim;ft.exMode=!1,ft.lastHPos=ft.lastHSPos=ye.ch}le&&le()}function Ye(qe,ft,We){o.e_stop(qe);var _t=o.keyName(qe);switch(_t){case"Y":ve(),Me();break;case"N":Me();break;case"A":var $t=le;le=void 0,S.operation(Se),le=$t;break;case"L":ve();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":He(We);break}return ge&&He(We),!0}if(Me(),ge){bt(S,"No matches for "+te.source);return}if(!E){Se(),le&&le();return}vn(S,{prefix:fn("span","replace with ",fn("strong",ee)," (y/n/a/q/l)"),onKeyDown:Ye})}o.keyMap.vim={attach:O,detach:b,call:A};function an(S,E){var F=S.state.vim,$=Le.macroModeState,U=Le.registerController.getRegister("."),j=$.isPlaying,te=$.lastInsertModeChanges;j||(S.off("change",Jn),F.insertEnd&&F.insertEnd.clear(),F.insertEnd=null,o.off(S.getInputField(),"keydown",_n)),!j&&F.insertModeRepeat>1&&(Jt(S,F,F.insertModeRepeat-1,!0),F.lastEditInputState.repeatOverride=F.insertModeRepeat),delete F.insertModeRepeat,F.insertMode=!1,E||S.setCursor(S.getCursor().line,S.getCursor().ch-1),S.setOption("keyMap","vim"),S.setOption("disableInput",!0),S.toggleOverwrite(!1),U.setText(te.changes.join("")),o.signal(S,"vim-mode-change",{mode:"normal"}),$.isRecording&&Pr($)}function Yn(S){u.unshift(S)}function wr(S,E,F,$,U){var j={keys:S,type:E};j[E]=F,j[E+"Args"]=$;for(var te in U)j[te]=U[te];Yn(j)}Ze("insertModeEscKeysTimeout",200,"number"),o.keyMap["vim-insert"]={fallthrough:["default"],attach:O,detach:b,call:A},o.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:O,detach:b};function xr(S,E,F,$){var U=Le.registerController.getRegister($);if($==":"){U.keyBuffer[0]&&Yt.processCommand(S,U.keyBuffer[0]),F.isPlaying=!1;return}var j=U.keyBuffer,te=0;F.isPlaying=!0,F.replaySearchQueries=U.searchQueries.slice(0);for(var ee=0;ee<j.length;ee++)for(var le=j[ee],ge,ye;le;)if(ge=/<\w+-.+?>|<\w+>|./.exec(le),ye=ge[0],le=le.substring(ge.index+ye.length),vt.handleKey(S,ye,"macro"),E.insertMode){var we=U.insertModeChanges[te++].changes;Le.macroModeState.lastInsertModeChanges.changes=we,Ue(S,we,1),an(S)}F.isPlaying=!1}function kr(S,E){if(!S.isPlaying){var F=S.latestRegister,$=Le.registerController.getRegister(F);$&&$.pushText(E)}}function Pr(S){if(!S.isPlaying){var E=S.latestRegister,F=Le.registerController.getRegister(E);F&&F.pushInsertModeChanges&&F.pushInsertModeChanges(S.lastInsertModeChanges)}}function Er(S,E){if(!S.isPlaying){var F=S.latestRegister,$=Le.registerController.getRegister(F);$&&$.pushSearchQuery&&$.pushSearchQuery(E)}}function Jn(S,E){var F=Le.macroModeState,$=F.lastInsertModeChanges;if(!F.isPlaying)for(var U=S.state.vim;E;){if($.expectCursorActivityForChange=!0,$.ignoreCount>1)$.ignoreCount--;else if(E.origin=="+input"||E.origin=="paste"||E.origin===void 0){var j=S.listSelections().length;j>1&&($.ignoreCount=j);var te=E.text.join(`
`);if($.maybeReset&&($.changes=[],$.maybeReset=!1),te)if(S.state.overwrite&&!/\n/.test(te))$.changes.push([te]);else{if(te.length>1){var ee=U&&U.insertEnd&&U.insertEnd.find(),le=S.getCursor();if(ee&&ee.line==le.line){var ge=ee.ch-le.ch;ge>0&&ge<te.length&&($.changes.push([te,ge]),te="")}}te&&$.changes.push(te)}}E=E.next}}function Kn(S){var E=S.state.vim;if(E.insertMode){var F=Le.macroModeState;if(F.isPlaying)return;var $=F.lastInsertModeChanges;$.expectCursorActivityForChange?$.expectCursorActivityForChange=!1:($.maybeReset=!0,E.insertEnd&&E.insertEnd.clear(),E.insertEnd=S.setBookmark(S.getCursor(),{insertLeft:!0}))}else S.curOp.isVimOp||fe(S,E)}function fe(S,E){var F=S.getCursor("anchor"),$=S.getCursor("head");if(E.visualMode&&!S.somethingSelected()?mt(S,!1):!E.visualMode&&!E.insertMode&&S.somethingSelected()&&(E.visualMode=!0,E.visualLine=!1,o.signal(S,"vim-mode-change",{mode:"visual"})),E.visualMode){var U=Qe($,F)?0:-1,j=Qe($,F)?-1:0;$=Ct($,0,U),F=Ct(F,0,j),E.sel={anchor:F,head:$},sn(S,E,"<",st($,F)),sn(S,E,">",Bt($,F))}else E.insertMode||(E.lastHPos=S.getCursor().ch)}function Ke(S){this.keyName=S}function _n(S){var E=Le.macroModeState,F=E.lastInsertModeChanges,$=o.keyName(S);if(!$)return;function U(){return F.maybeReset&&(F.changes=[],F.maybeReset=!1),F.changes.push(new Ke($)),!0}($.indexOf("Delete")!=-1||$.indexOf("Backspace")!=-1)&&o.lookupKey($,"vim-insert",U)}function Jt(S,E,F,$){var U=Le.macroModeState;U.isPlaying=!0;var j=!!E.lastEditActionCommand,te=E.inputState;function ee(){j?Ut.processAction(S,E,E.lastEditActionCommand):Ut.evalInput(S,E)}function le(ye){if(U.lastInsertModeChanges.changes.length>0){ye=E.lastEditActionCommand?ye:1;var we=U.lastInsertModeChanges;Ue(S,we.changes,ye)}}if(E.inputState=E.lastEditInputState,j&&E.lastEditActionCommand.interlaceInsertRepeat)for(var ge=0;ge<F;ge++)ee(),le(1);else $||ee(),le(F);E.inputState=te,E.insertMode&&!$&&an(S),U.isPlaying=!1}function Sn(S,E){o.lookupKey(E,"vim-insert",function($){return typeof $=="string"?o.commands[$](S):$(S),!0})}function Ue(S,E,F){var $=S.getCursor("head"),U=Le.macroModeState.lastInsertModeChanges.visualBlock;U&&(Z(S,$,U+1),F=S.listSelections().length,S.setCursor($));for(var j=0;j<F;j++){U&&S.setCursor(Ct($,j,0));for(var te=0;te<E.length;te++){var ee=E[te];if(ee instanceof Ke)Sn(S,ee.keyName);else if(typeof ee=="string")S.replaceSelection(ee);else{var le=S.getCursor(),ge=Ct(le,0,ee[0].length-(ee[1]||0));S.replaceRange(ee[0],le,ee[1]?le:ge),S.setCursor(ge)}}}U&&S.setCursor(Ct($,0,1))}function gn(S){var E=new S.constructor;return Object.keys(S).forEach(function(F){if(F!="insertEnd"){var $=S[F];Array.isArray($)?$=$.slice():$&&typeof $=="object"&&$.constructor!=Object&&($=gn($)),E[F]=$}}),S.sel&&(E.sel={head:S.sel.head&&ct(S.sel.head),anchor:S.sel.anchor&&ct(S.sel.anchor)}),E}function Mr(S,E,F){var $=!1,U=vt.maybeInitVimState_(S),j=U.visualBlock||U.wasInVisualBlock,te=S.isInMultiSelectMode();if(U.wasInVisualBlock&&!te?U.wasInVisualBlock=!1:te&&U.visualBlock&&(U.wasInVisualBlock=!0),E=="<Esc>"&&!U.insertMode&&!U.visualMode&&te&&U.status=="<Esc>")wt(S);else if(j||!te||S.inVirtualSelectionMode)$=vt.handleKey(S,E,F);else{var ee=gn(U),le=U.inputState.changeQueueList||[];S.operation(function(){S.curOp.isVimOp=!0;var ge=0;S.forEachSelection(function(){S.state.vim.inputState.changeQueue=le[ge];var ye=S.getCursor("head"),we=S.getCursor("anchor"),Pe=Qe(ye,we)?0:-1,Se=Qe(ye,we)?-1:0;ye=Ct(ye,0,Pe),we=Ct(we,0,Se),S.state.vim.sel.head=ye,S.state.vim.sel.anchor=we,$=vt.handleKey(S,E,F),S.virtualSelection&&(le[ge]=S.state.vim.inputState.changeQueue,S.state.vim=gn(ee)),ge++}),S.curOp.cursorActivity&&!$&&(S.curOp.cursorActivity=!1),S.state.vim=U,U.inputState.changeQueueList=le,U.inputState.changeQueue=null},!0)}return $&&!U.visualMode&&!U.insert&&U.visualMode!=S.somethingSelected()&&fe(S,U),$}return ot(),vt}function indexFromPos(o,e){var a=e.ch,l=e.line+1;l<1&&(l=1,a=0),l>o.lines&&(l=o.lines,a=Number.MAX_VALUE);var u=o.line(l);return Math.min(u.from+Math.max(0,a),u.to)}function posFromIndex(o,e){let a=o.lineAt(e);return{line:a.number-1,ch:e-a.from}}class Pos{constructor(e,a){this.line=e,this.ch=a}}function on(o,e,a){if(o.addEventListener)o.addEventListener(e,a,!1);else{var l=o._handlers||(o._handlers={});l[e]=(l[e]||[]).concat(a)}}function off(o,e,a){if(o.removeEventListener)o.removeEventListener(e,a,!1);else{var l=o._handlers,u=l&&l[e];if(u){var f=u.indexOf(a);f>-1&&(l[e]=u.slice(0,f).concat(u.slice(f+1)))}}}function signal(o,e,...a){var l,u=(l=o._handlers)===null||l===void 0?void 0:l[e];if(u)for(var f=0;f<u.length;++f)u[f](...a)}function signalTo(o,...e){if(o)for(var a=0;a<o.length;++a)o[a](...e)}var specialKey={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},ignoredKeys={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1};let wordChar;try{wordChar=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(o){wordChar=/[\w]/}function dispatchChange(o,e){var a=o.cm6,l="input.type.compose";if(o.curOp&&(o.curOp.lastChange||(l="input.type.compose.start")),e.annotations)try{e.annotations.some(function(u){u.value=="input"&&(u.value=l)})}catch(u){console.error(u)}else e.userEvent=l;return a.dispatch(e)}function runHistoryCommand(o,e){var a;o.curOp&&(o.curOp.$changeStart=void 0),(e?undo:redo)(o.cm6);let l=(a=o.curOp)===null||a===void 0?void 0:a.$changeStart;l!=null&&o.cm6.dispatch({selection:{anchor:l}})}var keys$2={};class CodeMirror{constructor(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}openDialog(e,a,l){return openDialog(this,e,a,l)}openNotification(e,a){return openNotification(this,e,a)}on(e,a){on(this,e,a)}off(e,a){off(this,e,a)}signal(e,a,l){signal(this,e,a,l)}indexFromPos(e){return indexFromPos(this.cm6.state.doc,e)}posFromIndex(e){return posFromIndex(this.cm6.state.doc,e)}foldCode(e){let a=this.cm6,l=a.state.selection.ranges,u=this.cm6.state.doc,f=indexFromPos(u,e),d=EditorSelection.create([EditorSelection.range(f,f)],0).ranges;a.state.selection.ranges=d,foldCode(a),a.state.selection.ranges=l}firstLine(){return 0}lastLine(){return this.cm6.state.doc.lines-1}lineCount(){return this.cm6.state.doc.lines}setCursor(e,a){typeof e=="object"&&(a=e.ch,e=e.line);var l=indexFromPos(this.cm6.state.doc,{line:e,ch:a});this.cm6.dispatch({selection:{anchor:l}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()}getCursor(e){var a=this.cm6.state.selection.main,l=e=="head"||!e?a.head:e=="anchor"?a.anchor:e=="start"?a.from:e=="end"?a.to:null;if(l==null)throw new Error("Invalid cursor type");return this.posFromIndex(l)}listSelections(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map(a=>({anchor:posFromIndex(e,a.anchor),head:posFromIndex(e,a.head)}))}setSelections(e,a){var l=this.cm6.state.doc,u=e.map(f=>EditorSelection.range(indexFromPos(l,f.anchor),indexFromPos(l,f.head)));this.cm6.dispatch({selection:EditorSelection.create(u,a)})}setSelection(e,a,l){var u=this.cm6.state.doc,f=[EditorSelection.range(indexFromPos(u,e),indexFromPos(u,a))];this.cm6.dispatch({selection:EditorSelection.create(f,0)}),l&&l.origin=="*mouse"&&this.onBeforeEndOperation()}getLine(e){var a=this.cm6.state.doc;return e<0||e>=a.lines?"":this.cm6.state.doc.line(e+1).text}getLineHandle(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:e,index:this.indexFromPos(new Pos(e,0))}}getLineNumber(e){var a=this.$lineHandleChanges;if(!a)return null;for(var l=e.index,u=0;u<a.length;u++)if(l=a[u].changes.mapPos(l,1,MapMode.TrackAfter),l==null)return null;var f=this.posFromIndex(l);return f.ch==0?f.line:null}releaseLineHandles(){this.$lineHandleChanges=void 0}getRange(e,a){var l=this.cm6.state.doc;return this.cm6.state.sliceDoc(indexFromPos(l,e),indexFromPos(l,a))}replaceRange(e,a,l){l||(l=a);var u=this.cm6.state.doc,f=indexFromPos(u,a),d=indexFromPos(u,l);dispatchChange(this,{changes:{from:f,to:d,insert:e}})}replaceSelection(e){dispatchChange(this,this.cm6.state.replaceSelection(e))}replaceSelections(e){var a=this.cm6.state.selection.ranges,l=a.map((u,f)=>({from:u.from,to:u.to,insert:e[f]||""}));dispatchChange(this,{changes:l})}getSelection(){return this.getSelections().join(`
`)}getSelections(){var e=this.cm6;return e.state.selection.ranges.map(a=>e.state.sliceDoc(a.from,a.to))}somethingSelected(){return this.cm6.state.selection.ranges.some(e=>!e.empty)}getInputField(){return this.cm6.contentDOM}clipPos(e){var a=this.cm6.state.doc,l=e.ch,u=e.line+1;u<1&&(u=1,l=0),u>a.lines&&(u=a.lines,l=Number.MAX_VALUE);var f=a.line(u);return l=Math.min(Math.max(0,l),f.to-f.from),new Pos(u-1,l)}getValue(){return this.cm6.state.doc.toString()}setValue(e){var a=this.cm6;return a.dispatch({changes:{from:0,to:a.state.doc.length,insert:e},selection:EditorSelection.range(0,0)})}focus(){return this.cm6.focus()}blur(){return this.cm6.contentDOM.blur()}defaultTextHeight(){return this.cm6.defaultLineHeight}findMatchingBracket(e){var a=this.cm6.state,l=indexFromPos(a.doc,e),u=matchBrackets(a,l+1,-1);return u&&u.end?{to:posFromIndex(a.doc,u.end.from)}:(u=matchBrackets(a,l,1),u&&u.end?{to:posFromIndex(a.doc,u.end.from)}:{to:void 0})}scanForBracket(e,a,l,u){return scanForBracket(this,e,a,l,u)}indentLine(e,a){a?this.indentMore():this.indentLess()}indentMore(){indentMore(this.cm6)}indentLess(){indentLess(this.cm6)}execCommand(e){if(e=="indentAuto")CodeMirror.commands.indentAuto(this);else if(e=="goLineLeft")cursorLineBoundaryBackward(this.cm6);else if(e=="goLineRight"){cursorLineBoundaryForward(this.cm6);let a=this.cm6.state,l=a.selection.main.head;l<a.doc.length&&a.sliceDoc(l,l+1)!==`
`&&cursorCharBackward(this.cm6)}else console.log(e+" is not implemented")}setBookmark(e,a){var l=a?.insertLeft?1:-1,u=this.indexFromPos(e),f=new Marker(this,u,l);return f}addOverlay({query:e}){let a=new SearchQuery({regexp:!0,search:e.source,caseSensitive:!/i/.test(e.flags)});if(a.valid){a.forVim=!0,this.cm6Query=a;let l=setSearchQuery.of(a);return this.cm6.dispatch({effects:l}),a}}removeOverlay(e){if(!this.cm6Query)return;this.cm6Query.forVim=!1;let a=setSearchQuery.of(this.cm6Query);this.cm6.dispatch({effects:a})}getSearchCursor(e,a){var l=this,u=null,f=null;a.ch==null&&(a.ch=Number.MAX_VALUE);var d=indexFromPos(l.cm6.state.doc,a),p=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,function(k,M){return M||"\\"+k});function g(k,M=0,B=k.length){return new RegExpCursor(k,p,{ignoreCase:e.ignoreCase},M,B)}function b(k){var M=l.cm6.state.doc;if(k>M.length)return null;let B=g(M,k).next();return B.done?null:B.value}var O=1e4;function A(k,M){var B=l.cm6.state.doc;for(let N=1;;N++){let L=Math.max(k,M-N*O),V=g(B,L,M),se=null;for(;!V.next().done;)se=V.value;if(se&&(L==k||se.from>L+10))return se;if(L==k)return null}}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(k){var M=l.cm6.state.doc;if(k){let B=u?u.from==u.to?u.to-1:u.from:d;u=A(0,B)}else{let B=u?u.from==u.to?u.to+1:u.to:d;u=b(B)}return f=u&&{from:posFromIndex(M,u.from),to:posFromIndex(M,u.to),match:u.match},u&&u.match},from:function(){return f?.from},to:function(){return f?.to},replace:function(k){u&&(dispatchChange(l,{changes:{from:u.from,to:u.to,insert:k}}),u.to=u.from+k.length,f&&(f.to=posFromIndex(l.cm6.state.doc,u.to)))}}}findPosV(e,a,l,u){let{cm6:f}=this;const d=f.state.doc;let p=l=="page"?f.dom.clientHeight:0;const g=indexFromPos(d,e);let b=EditorSelection.range(g,g,u),O=Math.round(Math.abs(a));for(let k=0;k<O;k++)l=="page"?b=f.moveVertically(b,a>0,p):l=="line"&&(b=f.moveVertically(b,a>0));let A=posFromIndex(d,b.head);return(a<0&&b.head==0&&u!=0&&e.line==0&&e.ch!=0||a>0&&b.head==d.length&&A.ch!=u&&e.line==A.line)&&(A.hitSide=!0),A}charCoords(e,a){var l=this.cm6.contentDOM.getBoundingClientRect(),u=indexFromPos(this.cm6.state.doc,e),f=this.cm6.coordsAtPos(u),d=-l.top;return{left:(f?.left||0)-l.left,top:(f?.top||0)+d,bottom:(f?.bottom||0)+d}}coordsChar(e,a){var l=this.cm6.contentDOM.getBoundingClientRect(),u=this.cm6.posAtCoords({x:e.left+l.left,y:e.top+l.top})||0;return posFromIndex(this.cm6.state.doc,u)}getScrollInfo(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}}scrollTo(e,a){e!=null&&(this.cm6.scrollDOM.scrollLeft=e),a!=null&&(this.cm6.scrollDOM.scrollTop=a)}scrollIntoView(e,a){if(e){var l=this.indexFromPos(e);this.cm6.dispatch({effects:EditorView.scrollIntoView(l)})}else this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})}getWrapperElement(){return this.cm6.dom}getMode(){return{name:this.getOption("mode")}}setSize(e,a){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=a+"px",this.refresh()}refresh(){this.cm6.measure()}destroy(){this.removeOverlay()}getLastEditEnd(){return this.posFromIndex(this.$lastChangeEndOffset)}onChange(e){this.$lineHandleChanges&&this.$lineHandleChanges.push(e);for(let l in this.marks)this.marks[l].update(e.changes);this.virtualSelection&&(this.virtualSelection.ranges=this.virtualSelection.ranges.map(l=>l.map(e.changes)));var a=this.curOp=this.curOp||{};e.changes.iterChanges((l,u,f,d,p)=>{(a.$changeStart==null||a.$changeStart>f)&&(a.$changeStart=f),this.$lastChangeEndOffset=d;var g={text:p.toJSON()};a.lastChange?a.lastChange.next=a.lastChange=g:a.lastChange=a.change=g},!0),a.changeHandlers||(a.changeHandlers=this._handlers.change&&this._handlers.change.slice())}onSelectionChange(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0}operation(e){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var a=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return a}onBeforeEndOperation(){var e=this.curOp,a=!1;e&&(e.change&&signalTo(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(signalTo(e.cursorActivityHandlers,this,null),e.isVimOp&&(a=!0)),this.curOp=null),a&&this.scrollIntoView()}moveH(e,a){if(a=="char"){var l=this.getCursor();this.setCursor(l.line,l.ch+e)}}setOption(e,a){switch(e){case"keyMap":this.state.keyMap=a;break;case"textwidth":this.state.textwidth=a;break}}getOption(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readonly":return this.cm6.state.readOnly;case"indentWithTabs":return this.cm6.state.facet(indentUnit)=="	";case"indentUnit":return this.cm6.state.facet(indentUnit).length||2;case"textwidth":return this.state.textwidth;case"keyMap":return this.state.keyMap||"vim"}}toggleOverwrite(e){this.state.overwrite=e}getTokenTypeAt(e){var a,l=this.indexFromPos(e),u=ensureSyntaxTree(this.cm6.state,l),f=u?.resolve(l),d=((a=f?.type)===null||a===void 0?void 0:a.name)||"";return/comment/i.test(d)?"comment":/string/i.test(d)?"string":""}overWriteSelection(e){var a=this.cm6.state.doc,l=this.cm6.state.selection,u=l.ranges.map(f=>{if(f.empty){var d=f.to<a.length?a.sliceString(f.from,f.to+1):"";if(d&&!/\n/.test(d))return EditorSelection.range(f.from,f.to+1)}return f});this.cm6.dispatch({selection:EditorSelection.create(u,l.mainIndex)}),this.replaceSelection(e)}isInMultiSelectMode(){return this.cm6.state.selection.ranges.length>1}virtualSelectionMode(){return!!this.virtualSelection}forEachSelection(e){var a=this.cm6.state.selection;this.virtualSelection=EditorSelection.create(a.ranges,a.mainIndex);for(var l=0;l<this.virtualSelection.ranges.length;l++){var u=this.virtualSelection.ranges[l];u&&(this.cm6.dispatch({selection:EditorSelection.create([u])}),e(),this.virtualSelection.ranges[l]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null}hardWrap(e){return hardWrap(this,e)}}CodeMirror.isMac=typeof navigator<"u"&&/Mac/.test(navigator.platform),CodeMirror.Pos=Pos,CodeMirror.StringStream=StringStream,CodeMirror.commands={cursorCharLeft:function(o){cursorCharLeft(o.cm6)},redo:function(o){runHistoryCommand(o,!1)},undo:function(o){runHistoryCommand(o,!0)},newlineAndIndent:function(o){insertNewlineAndIndent({state:o.cm6.state,dispatch:e=>dispatchChange(o,e)})},indentAuto:function(o){indentSelection(o.cm6)}},CodeMirror.defineOption=function(o,e,a){},CodeMirror.isWordChar=function(o){return wordChar.test(o)},CodeMirror.keys=keys$2,CodeMirror.keyMap={},CodeMirror.addClass=function(){},CodeMirror.rmClass=function(){},CodeMirror.e_preventDefault=function(o){o.preventDefault()},CodeMirror.e_stop=function(o){var e,a;(e=o?.stopPropagation)===null||e===void 0||e.call(o),(a=o?.preventDefault)===null||a===void 0||a.call(o)},CodeMirror.keyName=function(o){var e=o.key;if(!ignoredKeys[e]){e=="Escape"&&(e="Esc"),e==" "&&(e="Space"),e.length>1&&(e=e.replace(/Numpad|Arrow/,"")),e.length==1&&(e=e.toUpperCase());var a="";return o.ctrlKey&&(a+="Ctrl-"),o.altKey&&(a+="Alt-"),(a||e.length>1)&&o.shiftKey&&(a+="Shift-"),a+=e,a}},CodeMirror.vimKey=function(e){var a=e.key;if(!ignoredKeys[a]){a.length>1&&a[0]=="n"&&(a=a.replace("Numpad","")),a=specialKey[a]||a;var l="";return e.ctrlKey&&(l+="C-"),e.altKey&&(l+="A-"),e.metaKey&&(l+="M-"),CodeMirror.isMac&&e.altKey&&!e.metaKey&&!e.ctrlKey&&(l=l.slice(2)),(l||a.length>1)&&e.shiftKey&&(l+="S-"),l+=a,l.length>1&&(l="<"+l+">"),l}},CodeMirror.lookupKey=function(e,a,l){var u=CodeMirror.keys[e];u&&l(u)},CodeMirror.on=on,CodeMirror.off=off,CodeMirror.signal=signal,CodeMirror.findMatchingTag=findMatchingTag,CodeMirror.findEnclosingTag=findEnclosingTag;function dialogDiv(o,e,a){var l=document.createElement("div");return l.appendChild(e),l}function closeNotification(o,e){o.state.currentNotificationClose&&o.state.currentNotificationClose(),o.state.currentNotificationClose=e}function openNotification(o,e,a){closeNotification(o,p);var l=dialogDiv(o,e,a&&a.bottom),u=!1,f,d=a&&typeof a.duration<"u"?a.duration:5e3;function p(){u||(u=!0,clearTimeout(f),l.remove(),hideDialog(o,l))}return l.onclick=function(g){g.preventDefault(),p()},showDialog(o,l),d&&(f=setTimeout(p,d)),p}function showDialog(o,e){var a=o.state.dialog;o.state.dialog=e,e&&a!==e&&(a&&a.contains(document.activeElement)&&o.focus(),a&&a.parentElement?a.parentElement.replaceChild(e,a):a&&a.remove(),CodeMirror.signal(o,"dialog"))}function hideDialog(o,e){o.state.dialog==e&&(o.state.dialog=null,CodeMirror.signal(o,"dialog"))}function openDialog(o,e,a,l){l||(l={}),closeNotification(o,void 0);var u=dialogDiv(o,e,l.bottom),f=!1;showDialog(o,u);function d(g){if(typeof g=="string")p.value=g;else{if(f)return;f=!0,hideDialog(o,u),o.state.dialog||o.focus(),l.onClose&&l.onClose(u)}}var p=u.getElementsByTagName("input")[0];return p&&(l.value&&(p.value=l.value,l.selectValueOnOpen!==!1&&p.select()),l.onInput&&CodeMirror.on(p,"input",function(g){l.onInput(g,p.value,d)}),l.onKeyUp&&CodeMirror.on(p,"keyup",function(g){l.onKeyUp(g,p.value,d)}),CodeMirror.on(p,"keydown",function(g){l&&l.onKeyDown&&l.onKeyDown(g,p.value,d)||(g.keyCode==13&&a(p.value),(g.keyCode==27||l.closeOnEnter!==!1&&g.keyCode==13)&&(p.blur(),CodeMirror.e_stop(g),d()))}),l.closeOnBlur!==!1&&CodeMirror.on(p,"blur",function(){setTimeout(function(){document.activeElement!==p&&d()})}),p.focus()),d}var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function bracketRegex(o){return o&&o.bracketRegex||/[(){}[\]]/}function scanForBracket(o,e,a,l,u){for(var f=u&&u.maxScanLineLength||1e4,d=u&&u.maxScanLines||1e3,p=[],g=bracketRegex(u),b=a>0?Math.min(e.line+d,o.lastLine()+1):Math.max(o.firstLine()-1,e.line-d),O=e.line;O!=b;O+=a){var A=o.getLine(O);if(A){var k=a>0?0:A.length-1,M=a>0?A.length:-1;if(!(A.length>f))for(O==e.line&&(k=e.ch-(a<0?1:0));k!=M;k+=a){var B=A.charAt(k);if(g.test(B)){var N=matching[B];if(N&&N.charAt(1)==">"==a>0)p.push(B);else if(p.length)p.pop();else return{pos:new Pos(O,k),ch:B}}}}}return O-a==(a>0?o.lastLine():o.firstLine())?!1:null}function findMatchingTag(o,e){}function findEnclosingTag(o,e){var a,l,u=o.cm6.state,f=o.indexFromPos(e);if(f<u.doc.length){var d=u.sliceDoc(f,f+1);d=="<"&&f++}for(var p=ensureSyntaxTree(u,f),g=p?.resolve(f)||null;g;){if(((a=g.firstChild)===null||a===void 0?void 0:a.type.name)=="OpenTag"&&((l=g.lastChild)===null||l===void 0?void 0:l.type.name)=="CloseTag")return{open:convertRange(u.doc,g.firstChild),close:convertRange(u.doc,g.lastChild)};g=g.parent}}function convertRange(o,e){return{from:posFromIndex(o,e.from),to:posFromIndex(o,e.to)}}class Marker{constructor(e,a,l){this.cm=e,this.id=e.$mid++,this.offset=a,this.assoc=l,e.marks[this.id]=this}clear(){delete this.cm.marks[this.id]}find(){return this.offset==null?null:this.cm.posFromIndex(this.offset)}update(e){this.offset!=null&&(this.offset=e.mapPos(this.offset,this.assoc,MapMode.TrackDel))}}function hardWrap(o,e){for(var a=e.column||o.getOption("textwidth")||80,l=e.allowMerge!=!1,u=Math.min(e.from,e.to),f=Math.max(e.from,e.to);u<=f;){var d=o.getLine(u);if(d.length>a){var p=M(d,a,5);if(p){var g=/^\s*/.exec(d)[0];o.replaceRange(`
`+g,new Pos(u,p.start),new Pos(u,p.end))}f++}else if(l&&/\S/.test(d)&&u!=f){var b=o.getLine(u+1);if(b&&/\S/.test(b)){var O=d.replace(/\s+$/,""),A=b.replace(/^\s+/,""),k=O+" "+A,p=M(k,a,5);p&&p.start>O.length||k.length<a?(o.replaceRange(" ",new Pos(u,O.length),new Pos(u+1,b.length-A.length)),u--,f--):O.length<d.length&&o.replaceRange("",new Pos(u,O.length),new Pos(u,d.length))}}u++}return u;function M(B,N,L){if(!(B.length<N)){var V=B.slice(0,N),se=B.slice(N),pe=/^(?:(\s+)|(\S+)(\s+))/.exec(se),re=/(?:(\s+)|(\s+)(\S+))$/.exec(V),z=0,oe=0;if(re&&!re[2]&&(z=N-re[1].length,oe=N),pe&&!pe[2]&&(z||(z=N),oe=N+pe[1].length),z)return{start:z,end:oe};if(re&&re[2]&&re.index>L)return{start:re.index,end:re.index+re[2].length};if(pe&&pe[2])return z=N+pe[2].length,{start:z,end:z+pe[3].length}}}}let getDrawSelectionConfig=getDrawSelectionConfig$1||function(){let o={cursorBlinkRate:1200};return function(){return o}}();class Piece{constructor(e,a,l,u,f,d,p,g,b,O){this.left=e,this.top=a,this.height=l,this.fontFamily=u,this.fontSize=f,this.fontWeight=d,this.color=p,this.className=g,this.letter=b,this.partial=O}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.style.color=this.partial?"transparent":this.color,e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.fontFamily==e.fontFamily&&this.fontSize==e.fontSize&&this.fontWeight==e.fontWeight&&this.color==e.color&&this.className==e.className&&this.letter==e.letter}}class BlockCursorPlugin{constructor(e,a){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=a,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){let a=getDrawSelectionConfig(this.cm.cm6.state).cursorBlinkRate;this.cursorLayer.style.animationDuration=a+"ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),configChanged(e)&&this.setBlinkRate()}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,a=[];for(let l of e.selection.ranges){let u=l==e.selection.main,f=measureCursor(this.cm,this.view,l,u);f&&a.push(f)}return{cursors:a}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((a,l)=>!a.eq(this.cursors[l]))){let a=this.cursorLayer.children;if(a.length!==e.length){this.cursorLayer.textContent="";for(const l of e)this.cursorLayer.appendChild(l.draw())}else e.forEach((l,u)=>l.adjust(a[u]));this.cursors=e}}destroy(){this.cursorLayer.remove()}}function configChanged(o){return getDrawSelectionConfig(o.startState)!=getDrawSelectionConfig(o.state)}const themeSpec={".cm-vimMode .cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696",color:"transparent !important"}},hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function getBase(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==Direction.LTR?e.left:e.right-o.scrollDOM.clientWidth)-o.scrollDOM.scrollLeft,top:e.top-o.scrollDOM.scrollTop}}function measureCursor(o,e,a,l){var u,f;let d=a.head,p=!1,g=1,b=o.state.vim;if(b&&(!b.insertMode||o.state.overwrite)){if(p=!0,b.visualBlock&&!l)return null;a.anchor<a.head&&d--,o.state.overwrite?g=.2:b.status&&(g=.5)}if(p){let A=d<e.state.doc.length&&e.state.sliceDoc(d,d+1);A&&/[\uDC00-\uDFFF]/.test(A)&&d>1&&(d--,A=e.state.sliceDoc(d,d+1));let k=e.coordsAtPos(d,1);if(!k)return null;let M=getBase(e),B=e.domAtPos(d),N=B?B.node:e.contentDOM;for(;B&&B.node instanceof HTMLElement;)N=B.node,B={node:B.node.childNodes[B.offset],offset:0};if(!(N instanceof HTMLElement)){if(!N.parentNode)return null;N=N.parentNode}let L=getComputedStyle(N),V=k.left,se=(f=(u=e).coordsForChar)===null||f===void 0?void 0:f.call(u,d);if(se&&(V=se.left),!A||A==`
`||A=="\r")A=" ";else if(A=="	"){A=" ";var O=e.coordsAtPos(d+1,-1);O&&(V=O.left-(O.left-k.left)/parseInt(L.tabSize))}else/[\uD800-\uDBFF]/.test(A)&&d<e.state.doc.length-1&&(A+=e.state.sliceDoc(d+1,d+2));let pe=k.bottom-k.top;return new Piece(V-M.left,k.top-M.top+pe*(1-g),pe*g,L.fontFamily,L.fontSize,L.fontWeight,L.color,l?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",A,g!=1)}else return null}var FIREFOX_LINUX=typeof navigator<"u"&&/linux/i.test(navigator.platform)&&/ Gecko\/\d+/.exec(navigator.userAgent);const Vim=initVim(CodeMirror),HighlightMargin=250,vimStyle=EditorView.baseTheme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"inherit"},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"}}),vimPlugin=ViewPlugin.fromClass(class{constructor(o){this.status="",this.query=null,this.decorations=Decoration.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.view=o;const e=this.cm=new CodeMirror(o);Vim.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new BlockCursorPlugin(o,e),this.updateClass(),this.cm.on("vim-command-done",()=>{e.state.vim&&(e.state.vim.status=""),this.blockCursor.scheduleRedraw(),this.updateStatus()}),this.cm.on("vim-mode-change",a=>{e.state.vim.mode=a.mode,a.subMode&&(e.state.vim.mode+=" block"),e.state.vim.status="",this.blockCursor.scheduleRedraw(),this.updateClass(),this.updateStatus()}),this.cm.on("dialog",()=>{this.cm.state.statusbar?this.updateStatus():o.dispatch({effects:showVimPanel.of(!!this.cm.state.dialog)})}),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px",this.statusButton=document.createElement("span"),this.statusButton.onclick=a=>{Vim.handleKey(this.cm,"<Esc>","user"),this.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}update(o){var e;if((o.viewportChanged||o.docChanged)&&this.query&&this.highlight(this.query),o.docChanged&&this.cm.onChange(o),o.selectionSet&&this.cm.onSelectionChange(),o.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),o.transactions){for(let a of o.transactions)for(let l of a.effects)if(l.is(setSearchQuery))if(!((e=l.value)===null||e===void 0?void 0:e.forVim))this.highlight(null);else{let f=l.value.create();this.highlight(f)}}this.blockCursor.update(o)}updateClass(){const o=this.cm.state;!o.vim||o.vim.insertMode&&!o.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")}updateStatus(){let o=this.cm.state.statusbar,e=this.cm.state.vim;if(!o||!e)return;let a=this.cm.state.dialog;if(a)a.parentElement!=o&&(o.textContent="",o.appendChild(a));else{o.textContent="";var l=(e.mode||"normal").toUpperCase();e.insertModeReturn&&(l+="(C-O)"),this.statusButton.textContent=`--${l}--`,o.appendChild(this.statusButton)}this.dom.textContent=e.status,o.appendChild(this.dom)}destroy(){Vim.leaveVimMode(this.cm),this.updateClass(),this.blockCursor.destroy(),delete this.view.cm}highlight(o){if(this.query=o,!o)return this.decorations=Decoration.none;let{view:e}=this,a=new RangeSetBuilder;for(let l=0,u=e.visibleRanges,f=u.length;l<f;l++){let{from:d,to:p}=u[l];for(;l<f-1&&p>u[l+1].from-2*HighlightMargin;)p=u[++l].to;o.highlight(e.state,d,p,(g,b)=>{a.add(g,b,matchMark)})}return this.decorations=a.finish()}handleKey(o,e){const a=CodeMirror.vimKey(o),l=this.cm;if(!a)return;let u=l.state.vim;if(!u)return;if(a=="<Esc>"&&!u.insertMode&&!u.visualMode&&this.query){const p=u.searchState_;p&&(l.removeOverlay(p.getOverlay()),p.setOverlay(null))}if(a==="<C-c>"&&!CodeMirror.isMac&&l.somethingSelected())return this.waitForCopy=!0,!0;u.status=(u.status||"")+a;let d=Vim.multiSelectHandleKey(l,a,"user");return u=l.state.vim,!d&&u.insertMode&&l.state.overwrite&&(o.key&&o.key.length==1&&!/\n/.test(o.key)?(d=!0,l.overWriteSelection(o.key)):o.key=="Backspace"&&(d=!0,CodeMirror.commands.cursorCharLeft(l))),d&&(CodeMirror.signal(this.cm,"vim-keypress",a),o.preventDefault(),o.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!d}},{eventHandlers:{copy:function(o,e){this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then(()=>{var a=this.cm,l=a.state.vim;l&&(l.insertMode?a.setSelection(a.getCursor(),a.getCursor()):a.operation(()=>{a.curOp&&(a.curOp.isVimOp=!0),Vim.handleKey(a,"<Esc>","user")}))}))},compositionstart:function(o,e){this.useNextTextInput=!0},keypress:function(o,e){this.lastKeydown=="Dead"&&this.handleKey(o,e)},keydown:function(o,e){this.lastKeydown=o.key,this.lastKeydown=="Unidentified"||this.lastKeydown=="Process"||this.lastKeydown=="Dead"?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(o,e))}},provide:()=>[EditorView.inputHandler.of((o,e,a,l)=>{var u,f,d=getCM(o);if(!d)return!1;var p=(u=d.state)===null||u===void 0?void 0:u.vim,g=d.state.vimPlugin;if(p&&!p.insertMode&&!(!((f=d.curOp)===null||f===void 0)&&f.isVimOp)){if(l==="\0\0")return!0;if(l.length==1&&g.useNextTextInput)return g.handleKey({key:l,preventDefault:()=>{},stopPropagation:()=>{}}),forceEndComposition(o),!0}return!1})],decorations:o=>o.decorations});function forceEndComposition(o){var e=o.scrollDOM.parentElement;if(e){if(FIREFOX_LINUX){o.contentDOM.textContent="\0\0",o.contentDOM.dispatchEvent(new CustomEvent("compositionend"));return}var a=o.scrollDOM.nextSibling,l=window.getSelection(),u=l&&{anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset};o.scrollDOM.remove(),e.insertBefore(o.scrollDOM,a);try{u&&l&&(l.setPosition(u.anchorNode,u.anchorOffset),u.focusNode&&l.extend(u.focusNode,u.focusOffset))}catch(f){console.error(f)}o.focus(),o.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),showVimPanel=StateEffect.define(),vimPanelState=StateField.define({create:()=>!1,update(o,e){for(let a of e.effects)a.is(showVimPanel)&&(o=a.value);return o},provide:o=>showPanel.from(o,e=>e?createVimPanel:null)});function createVimPanel(o){let e=document.createElement("div");e.className="cm-vim-panel";let a=o.cm;return a.state.dialog&&e.appendChild(a.state.dialog),{top:!1,dom:e}}function statusPanel(o){let e=document.createElement("div");e.className="cm-vim-panel";let a=o.cm;return a.state.statusbar=e,a.state.vimPlugin.updateStatus(),{dom:e}}function vim(o={}){return[vimStyle,vimPlugin,hideNativeSelection,o.status?showPanel.of(statusPanel):vimPanelState]}function getCM(o){return o.cm||null}function crelt(){var o=arguments[0];typeof o=="string"&&(o=document.createElement(o));var e=1,a=arguments[1];if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){var u=a[l];typeof u=="string"?o.setAttribute(l,u):u!=null&&(o[l]=u)}e++}for(;e<arguments.length;e++)add$4(o,arguments[e]);return o}function add$4(o,e){if(typeof e=="string")o.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)o.appendChild(e);else if(Array.isArray(e))for(var a=0;a<e.length;a++)add$4(o,e[a]);else throw new RangeError("Unsupported child node: "+e)}class SelectedDiagnostic{constructor(e,a,l){this.from=e,this.to=a,this.diagnostic=l}}class LintState{constructor(e,a,l){this.diagnostics=e,this.panel=a,this.selected=l}static init(e,a,l){let u=e,f=l.facet(lintConfig).markerFilter;f&&(u=f(u));let d=Decoration.set(u.map(p=>p.from==p.to||p.from==p.to-1&&l.doc.lineAt(p.from).to==p.from?Decoration.widget({widget:new DiagnosticWidget(p),diagnostic:p}).range(p.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+p.severity+(p.markClass?" "+p.markClass:"")},diagnostic:p}).range(p.from,p.to)),!0);return new LintState(d,a,findDiagnostic(d))}}function findDiagnostic(o,e=null,a=0){let l=null;return o.between(a,1e9,(u,f,{spec:d})=>{if(!(e&&d.diagnostic!=e))return l=new SelectedDiagnostic(u,f,d.diagnostic),!1}),l}function hideTooltip(o,e){let a=o.startState.doc.lineAt(e.pos);return!!(o.effects.some(l=>l.is(setDiagnosticsEffect))||o.changes.touchesRange(a.from,a.to))}function maybeEnableLint(o,e){return o.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(o,e){if(e.docChanged){let a=o.diagnostics.map(e.changes),l=null;if(o.selected){let u=e.changes.mapPos(o.selected.from,1);l=findDiagnostic(a,o.selected.diagnostic,u)||findDiagnostic(a,null,u)}o=new LintState(a,o.panel,l)}for(let a of e.effects)a.is(setDiagnosticsEffect)?o=LintState.init(a.value,o.panel,e.state):a.is(togglePanel)?o=new LintState(o.diagnostics,a.value?LintPanel.open:null,o.selected):a.is(movePanelSelection)&&(o=new LintState(o.diagnostics,o.panel,a.value));return o},provide:o=>[showPanel.from(o,e=>e.panel),EditorView.decorations.from(o,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(o,e,a){let{diagnostics:l}=o.state.field(lintState),u=[],f=2e8,d=0;l.between(e-(a<0?1:0),e+(a>0?1:0),(g,b,{spec:O})=>{e>=g&&e<=b&&(g==b||(e>g||a>0)&&(e<b||a<0))&&(u.push(O.diagnostic),f=Math.min(g,f),d=Math.max(b,d))});let p=o.state.facet(lintConfig).tooltipFilter;return p&&(u=p(u)),u.length?{pos:f,end:d,above:o.state.doc.lineAt(f).to<d,create(){return{dom:diagnosticsTooltip(o,u)}}}:null}function diagnosticsTooltip(o,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(a=>renderDiagnostic(o,a,!1)))}const openLintPanel=o=>{let e=o.state.field(lintState,!1);(!e||!e.panel)&&o.dispatch({effects:maybeEnableLint(o.state,[togglePanel.of(!0)])});let a=getPanel(o,LintPanel.open);return a&&a.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=o=>{let e=o.state.field(lintState,!1);return!e||!e.panel?!1:(o.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=o=>{let e=o.state.field(lintState,!1);if(!e)return!1;let a=o.state.selection.main,l=e.diagnostics.iter(a.to+1);return!l.value&&(l=e.diagnostics.iter(0),!l.value||l.from==a.from&&l.to==a.to)?!1:(o.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0}),!0)},lintConfig=Facet.define({combine(o){return Object.assign({sources:o.map(e=>e.source)},combineConfig(o.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,a)=>e?a?l=>e(l)||a(l):e:a}))}});function assignKeys(o){let e=[];if(o)e:for(let{name:a}of o){for(let l=0;l<a.length;l++){let u=a[l];if(/[a-zA-Z]/.test(u)&&!e.some(f=>f.toLowerCase()==u.toLowerCase())){e.push(u);continue e}}e.push("")}return e}function renderDiagnostic(o,e,a){var l;let u=a?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(l=e.actions)===null||l===void 0?void 0:l.map((f,d)=>{let p=!1,g=k=>{if(k.preventDefault(),p)return;p=!0;let M=findDiagnostic(o.state.field(lintState).diagnostics,e);M&&f.apply(o,M.from,M.to)},{name:b}=f,O=u[d]?b.indexOf(u[d]):-1,A=O<0?b:[b.slice(0,O),crelt("u",b.slice(O,O+1)),b.slice(O+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:g,onmousedown:g,"aria-label":` Action: ${b}${O<0?"":` (access key "${u[d]})"`}.`},A)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,a){this.diagnostic=a,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,a,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let a=u=>{if(u.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(u.keyCode==38||u.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(u.keyCode==40||u.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(u.keyCode==36)this.moveSelection(0);else if(u.keyCode==35)this.moveSelection(this.items.length-1);else if(u.keyCode==13)this.view.focus();else if(u.keyCode>=65&&u.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:f}=this.items[this.selectedIndex],d=assignKeys(f.actions);for(let p=0;p<d.length;p++)if(d[p].toUpperCase().charCodeAt(0)==u.keyCode){let g=findDiagnostic(this.view.state.field(lintState).diagnostics,f);g&&f.actions[p].apply(e,g.from,g.to)}}else return;u.preventDefault()},l=u=>{for(let f=0;f<this.items.length;f++)this.items[f].dom.contains(u.target)&&this.moveSelection(f)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:a,onclick:l}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let a=0;a<this.items.length;a++)if(this.items[a].diagnostic==e.diagnostic)return a;return-1}update(){let{diagnostics:e,selected:a}=this.view.state.field(lintState),l=0,u=!1,f=null;for(e.between(0,this.view.state.doc.length,(d,p,{spec:g})=>{let b=-1,O;for(let A=l;A<this.items.length;A++)if(this.items[A].diagnostic==g.diagnostic){b=A;break}b<0?(O=new PanelItem(this.view,g.diagnostic),this.items.splice(l,0,O),u=!0):(O=this.items[b],b>l&&(this.items.splice(l,b-l),u=!0)),a&&O.diagnostic==a.diagnostic?O.dom.hasAttribute("aria-selected")||(O.dom.setAttribute("aria-selected","true"),f=O):O.dom.hasAttribute("aria-selected")&&O.dom.removeAttribute("aria-selected"),l++});l<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)u=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),u=!0),f?(this.list.setAttribute("aria-activedescendant",f.id),this.view.requestMeasure({key:this,read:()=>({sel:f.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:d,panel:p})=>{let g=p.height/this.list.offsetHeight;d.top<p.top?this.list.scrollTop-=(p.top-d.top)/g:d.bottom>p.bottom&&(this.list.scrollTop+=(d.bottom-p.bottom)/g)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),u&&this.sync()}sync(){let e=this.list.firstChild;function a(){let l=e;e=l.nextSibling,l.remove()}for(let l of this.items)if(l.dom.parentNode==this.list){for(;e!=l.dom;)a();e=l.dom.nextSibling}else this.list.insertBefore(l.dom,e);for(;e;)a()}moveSelection(e){if(this.selectedIndex<0)return;let a=this.view.state.field(lintState),l=findDiagnostic(a.diagnostics,this.items[e].diagnostic);l&&this.view.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0,effects:movePanelSelection.of(l)})}static open(e){return new LintPanel(e)}}function svg(o,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(o)}</svg>')`}function underline(o){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${o}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),lintExtensions=[lintState,EditorView.decorations.compute([lintState],o=>{let{selected:e,panel:a}=o.field(lintState);return!e||!a||e.from==e.to?Decoration.none:Decoration.set([activeMark.range(e.from,e.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],createAddCursor=o=>e=>{const a=o==="down";let l=e.state.selection;for(const u of l.ranges)l=l.addRange(e.moveVertically(u,a));return e.dispatch({selection:l}),!0},addCursorUp=createAddCursor("up"),addCursorDown=createAddCursor("down"),addCursorAtEachSelectionLine=o=>{let e=null;for(const a of o.state.selection.ranges)if(!a.empty)for(let l=a.from;l<=a.to;){const u=o.state.doc.lineAt(l),f=Math.min(u.to,a.to);e?e=e.addRange(EditorSelection.range(f,f)):e=EditorSelection.single(f),l=u.to+1}return e?(o.dispatch({selection:e}),!0):!1},vscodeKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion},{key:"Tab",run:acceptCompletion},{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Alt-Enter",run:selectMatches,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:replaceAll,scope:"editor search-panel"},{key:"Ctrl-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0},{key:"Shift-Mod-l",run:selectSelectionMatches},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:addCursorUp,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:addCursorDown,preventDefault:!0},{key:"Shift-Alt-i",run:addCursorAtEachSelectionLine},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteBracketPair},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd},{mac:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{mac:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{mac:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{mac:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{mac:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{mac:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{mac:"Ctrl-d",run:deleteCharForward},{mac:"Ctrl-h",run:deleteCharBackward},{mac:"Ctrl-k",run:deleteToLineEnd},{mac:"Ctrl-Alt-h",run:deleteGroupBackward},{mac:"Ctrl-o",run:splitLine},{mac:"Ctrl-t",run:transposeChars},{mac:"Ctrl-v",run:cursorPageDown},{mac:"Alt-v",run:cursorPageUp},{key:"Shift-Mod-k",run:deleteLine},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Alt-ArrowUp",run:moveLineUp},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:copyLineDown},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Mod-l",run:selectLine,preventDefault:!0},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Tab",run:indentMore,shift:indentLess,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Mod-k Mod-0",run:foldAll},{key:"Mod-k Mod-j",run:unfoldAll},{key:"Mod-k Mod-c",run:lineComment},{key:"Mod-k Mod-u",run:lineUncomment},{key:"Mod-/",run:toggleComment},{key:"Shift-Alt-a",run:toggleBlockComment},{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",run:redo,preventDefault:!0},{key:"Mod-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Mod-Shift-m",run:openLintPanel},{key:"F8",run:nextDiagnostic}],vscodePlugin=ViewPlugin.fromClass(class{constructor(){}},{provide:()=>Prec.highest(keymap.of([...vscodeKeymap]))}),vscodeExtension=o=>[vscodePlugin].concat(o??[]),keymaps={vim,emacs,vscode:vscodeExtension};function keybindings(o){const e=keymaps[o];return[keymap.of(defaultKeymap),keymap.of(historyKeymap),e?e():[]]}function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o},_extends.apply(this,arguments)}var createTheme=o=>{var{theme:e,settings:a={},styles:l=[]}=o,u={".cm-gutters":{}},f={};a.background&&(f.backgroundColor=a.background),a.backgroundImage&&(f.backgroundImage=a.backgroundImage),a.foreground&&(f.color=a.foreground),(a.background||a.foreground)&&(u["&"]=f),a.fontFamily&&(u["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(u[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(u[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(u[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(u[".cm-content"]={caretColor:a.caret},u[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var d={};a.gutterActiveForeground&&(d.color=a.gutterActiveForeground),a.lineHighlight&&(u[".cm-activeLine"]={backgroundColor:a.lineHighlight},d.backgroundColor=a.lineHighlight),u[".cm-activeLineGutter"]=d,a.selection&&(u["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(u["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var p=EditorView.theme(u,{dark:e==="dark"}),g=HighlightStyle.define(l),b=[p,syntaxHighlighting(g)];return b},defaultSettingsAbcdef={background:"#0f0f0f",foreground:"#defdef",caret:"#00FF00",selection:"#515151",selectionMatch:"#515151",gutterBackground:"#555",gutterForeground:"#FFFFFF",lineHighlight:"#0a6bcb3d"},abcdefInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAbcdef,a),styles:[{tag:tags.keyword,color:"darkgoldenrod",fontWeight:"bold"},{tag:tags.atom,color:"#77F"},{tag:tags.comment,color:"#7a7b7c",fontStyle:"italic"},{tag:tags.number,color:"violet"},{tag:tags.definition(tags.variableName),color:"#fffabc"},{tag:tags.variableName,color:"#abcdef"},{tag:tags.function(tags.variableName),color:"#fffabc"},{tag:tags.typeName,color:"#FFDD44"},{tag:tags.tagName,color:"#def"},{tag:tags.string,color:"#2b4"},{tag:tags.meta,color:"#C9F"},{tag:tags.bracket,color:"#8a8a8a"},{tag:tags.attributeName,color:"#DDFF00"},{tag:tags.heading,color:"aquamarine",fontWeight:"bold"},{tag:tags.link,color:"blueviolet",fontWeight:"bold"},...l]})},abcdef=abcdefInit(),config$c={background:"#000c18",foreground:"#6688cc",selection:"#770811",selectionMatch:"#770811",cursor:"#ddbb88",dropdownBackground:"#181f2f",activeLine:"#0055ff30",matchingBracket:"#082050",keyword:"#225588",storage:"#225588",variable:"#2277ff",parameter:"#2277ff",function:"#9966b8",string:"#22aa44",constant:"#f280d0",type:"#9966b8",class:"#ddbb88",number:"#f280d0",comment:"#384887",heading:"#6688cc",invalid:"#A22D44",regexp:"#22aa44",tag:"#225588"},defaultSettingsAbyss={background:config$c.background,foreground:config$c.foreground,caret:config$c.cursor,selection:config$c.selection,selectionMatch:config$c.selectionMatch,gutterBackground:config$c.background,gutterForeground:config$c.foreground,lineHighlight:config$c.activeLine},abyssInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAbyss,a),styles:[{tag:tags.keyword,color:config$c.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$c.variable},{tag:[tags.propertyName],color:config$c.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$c.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$c.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$c.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$c.variable},{tag:[tags.className],color:config$c.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$c.number},{tag:[tags.typeName],color:config$c.type,fontStyle:config$c.type},{tag:[tags.operator,tags.operatorKeyword],color:config$c.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$c.regexp},{tag:[tags.meta,tags.comment],color:config$c.comment},{tag:tags.tagName,color:config$c.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$c.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$c.variable},{tag:tags.invalid,color:config$c.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};abyssInit();var defaultSettingsAndroidstudio={background:"#282b2e",foreground:"#a9b7c6",caret:"#00FF00",selection:"#4e5254",selectionMatch:"#4e5254",lineHighlight:"#7f85891f"},androidstudioInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAndroidstudio,a),styles:[{tag:[tags.keyword,tags.deleted,tags.className],color:"#cc7832"},{tag:[tags.number,tags.literal,tags.derefOperator],color:"#6897bb"},{tag:[tags.link,tags.variableName],color:"#629755"},{tag:[tags.comment,tags.quote],color:"grey"},{tag:[tags.meta,tags.documentMeta],color:"#bbb529"},{tag:[tags.string,tags.propertyName,tags.attributeValue],color:"#6a8759"},{tag:[tags.heading,tags.typeName],color:"#ffc66d"},{tag:[tags.attributeName],color:"#a9b7c6"},{tag:[tags.emphasis],fontStyle:"italic"},...l]})},androidstudio=androidstudioInit(),config$b={background:"#23262E",foreground:"#D5CED9",selection:"#db45a280",selectionMatch:"#db45a280",cursor:"#FFF",dropdownBackground:"#2b303b",dropdownBorder:"#363c49",activeLine:"#596a992e",matchingBracket:"#746f77",keyword:"#c74ded",storage:"#c74ded",variable:"#00e8c6",parameter:"#00e8c6",function:"#FFE66D",string:"#96E072",constant:"#ee5d43",type:"#FFE66D",class:"#FFE66D",number:"#ee5d43",comment:"#A0A1A7cc",heading:"#ff00aa",invalid:null,regexp:"#96E072",tag:"#f92672"},defaultSettingsAndromeda={background:config$b.background,foreground:config$b.foreground,caret:config$b.cursor,selection:config$b.selection,selectionMatch:config$b.selectionMatch,gutterBackground:config$b.background,gutterForeground:config$b.foreground,lineHighlight:config$b.activeLine},andromedaInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAndromeda,a),styles:[{tag:tags.keyword,color:config$b.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$b.variable},{tag:[tags.propertyName],color:config$b.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$b.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$b.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$b.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$b.variable},{tag:[tags.className],color:config$b.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$b.number},{tag:[tags.typeName],color:config$b.type,fontStyle:config$b.type},{tag:[tags.operator],color:config$b.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$b.regexp},{tag:[tags.meta,tags.comment],color:config$b.comment},{tag:tags.tagName,color:config$b.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$b.heading},{tag:[tags.atom,tags.special(tags.variableName)],color:config$b.variable},{tag:tags.invalid,color:config$b.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.operatorKeyword,tags.bool,tags.null,tags.variableName],color:config$b.constant},...l]})};andromedaInit();var defaultSettingsAtomone={background:"#272C35",foreground:"#9d9b97",caret:"#797977",selection:"#3d4c64",selectionMatch:"#3d4c64",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2e3f5940"},atomoneInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAtomone,a),styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:"hsl(207, 82%, 66%)"},{tag:[tags.tagName,tags.heading],color:"#e06c75"},{tag:tags.comment,color:"#54636D"},{tag:[tags.propertyName],color:"hsl(220, 14%, 71%)"},{tag:[tags.attributeName,tags.number],color:"hsl( 29, 54%, 61%)"},{tag:tags.className,color:"hsl( 39, 67%, 69%)"},{tag:tags.keyword,color:"hsl(286, 60%, 67%)"},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:"#98c379"},...l]})},atomone=atomoneInit(),defaultSettingsAura={background:"#21202e",foreground:"#edecee",caret:"#a277ff",selection:"#5a51898f",selectionMatch:"#5a51898f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"},auraInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAura,a),styles:[{tag:tags.keyword,color:"#a277ff"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#edecee"},{tag:[tags.propertyName],color:"#ffca85"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#61ffca"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#ffca85"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#61ffca"},{tag:[tags.definition(tags.name),tags.separator],color:"#edecee"},{tag:[tags.className],color:"#82e2ff"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#61ffca"},{tag:[tags.typeName],color:"#82e2ff"},{tag:[tags.operator,tags.operatorKeyword],color:"#a277ff"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#61ffca"},{tag:[tags.meta,tags.comment],color:"#6d6d6d"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#a277ff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#edecee"},{tag:tags.invalid,color:"#ff6767"},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},aura=auraInit(),defaultSettingsBasicDark={background:"#2E3235",foreground:"#DDDDDD",caret:"#DDDDDD",selection:"#202325",selectionMatch:"#202325",gutterBackground:"#292d30",gutterForeground:"#808080",gutterBorder:"1px solid #ffffff10",lineHighlight:"#B9D2FF30"},basicDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsBasicDark,a),styles:[{tag:tags.keyword,color:"#fda331"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#b5bd68"},{tag:[tags.variableName],color:"#6fb3d2"},{tag:[tags.function(tags.variableName)],color:"#fda331"},{tag:[tags.labelName],color:"#fc6d24"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#fda331"},{tag:[tags.definition(tags.name),tags.separator],color:"#cc99cc"},{tag:[tags.brace],color:"#cc99cc"},{tag:[tags.annotation],color:"#fc6d24"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#fda331"},{tag:[tags.typeName,tags.className],color:"#6fb3d2"},{tag:[tags.operator,tags.operatorKeyword],color:"#cc99cc"},{tag:[tags.tagName],color:"#fda331"},{tag:[tags.squareBracket],color:"#cc99cc"},{tag:[tags.angleBracket],color:"#cc99cc"},{tag:[tags.attributeName],color:"#6fb3d2"},{tag:[tags.regexp],color:"#fda331"},{tag:[tags.quote],color:"#DDDDDD"},{tag:[tags.string],color:"#b5bd68"},{tag:tags.link,color:"#6987AF",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8abeb7"},{tag:[tags.meta],color:"#A54543"},{tag:[tags.comment],color:"#808080",fontStyle:"italic"},{tag:tags.monospace,color:"#DDDDDD"},{tag:tags.strong,fontWeight:"bold",color:"#fda331"},{tag:tags.emphasis,fontStyle:"italic",color:"#6fb3d2"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#DDDDDD"},{tag:tags.special(tags.heading1),fontWeight:"bold",color:"#DDDDDD"},{tag:tags.heading1,fontWeight:"bold",color:"#DDDDDD"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#DDDDDD"},{tag:[tags.heading5,tags.heading6],color:"#DDDDDD"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#8abeb7"},{tag:[tags.processingInstruction,tags.inserted],color:"#8abeb7"},{tag:[tags.contentSeparator],color:"#6fb3d2"},{tag:tags.invalid,color:"#B9D2FF",borderBottom:"1px dotted #fc6d24"},...l]})};basicDarkInit();var defaultSettingsBasicLight={background:"#ffffff",foreground:"#2e3440",caret:"#3b4252",selection:"#eceff4",selectionMatch:"#e5e9f0",gutterBackground:"#eceff4",gutterForeground:"#2e3440",gutterBorder:"none",lineHighlight:"#02255f11"},basicLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsBasicLight,a),styles:[{tag:tags.keyword,color:"#5e81ac"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#d08770"},{tag:[tags.variableName],color:"#d08770"},{tag:[tags.function(tags.variableName)],color:"#5e81ac"},{tag:[tags.labelName],color:"#81a1c1"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#5e81ac"},{tag:[tags.definition(tags.name),tags.separator],color:"#a3be8c"},{tag:[tags.brace],color:"#8fbcbb"},{tag:[tags.annotation],color:"#d30102"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#88c0d0"},{tag:[tags.typeName,tags.className],color:"#ebcb8b"},{tag:[tags.operator,tags.operatorKeyword],color:"#a3be8c"},{tag:[tags.tagName],color:"#b48ead"},{tag:[tags.squareBracket],color:"#bf616a"},{tag:[tags.angleBracket],color:"#d08770"},{tag:[tags.attributeName],color:"#ebcb8b"},{tag:[tags.regexp],color:"#5e81ac"},{tag:[tags.quote],color:"#3b4252"},{tag:[tags.string],color:"#d08770"},{tag:tags.link,color:"#8fbcbb",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#d08770"},{tag:[tags.meta],color:"#88c0d0"},{tag:[tags.comment],color:"#434c5e",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#5e81ac"},{tag:tags.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#5e81ac"},{tag:tags.special(tags.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:tags.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading5,tags.heading6],color:"#5e81ac"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d08770"},{tag:[tags.processingInstruction,tags.inserted],color:"#8fbcbb"},{tag:[tags.contentSeparator],color:"#ebcb8b"},{tag:tags.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"},...l]})};basicLightInit();var defaultSettingsBbedit={background:"#FFFFFF",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"},bbeditInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsBbedit,a),styles:[{tag:[tags.meta,tags.comment],color:"#804000"},{tag:[tags.keyword,tags.strong],color:"#0000FF"},{tag:[tags.number],color:"#FF0080"},{tag:[tags.string],color:"#FF0080"},{tag:[tags.variableName],color:"#006600"},{tag:[tags.escape],color:"#33CC33"},{tag:[tags.tagName],color:"#1C02FF"},{tag:[tags.heading],color:"#0C07FF"},{tag:[tags.quote],color:"#000000"},{tag:[tags.list],color:"#B90690"},{tag:[tags.documentMeta],color:"#888888"},{tag:[tags.function(tags.variableName)],color:"#0000A2"},{tag:[tags.definition(tags.typeName),tags.typeName],color:"#6D79DE"},...l]})},bbedit=bbeditInit(),defaultSettingsBespin={background:"#28211c",foreground:"#9d9b97",caret:"#797977",selection:"#4f382b",selectionMatch:"#4f382b",gutterBackground:"#28211c",gutterForeground:"#666666",lineHighlight:"#ffffff1a"},bespinInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsBespin,a),styles:[{tag:[tags.atom,tags.number,tags.link,tags.bool],color:"#9b859d"},{tag:tags.comment,color:"#937121"},{tag:[tags.keyword,tags.tagName],color:"#cf6a4c"},{tag:tags.string,color:"#f9ee98"},{tag:tags.bracket,color:"#9d9b97"},{tag:[tags.variableName],color:"#5ea6ea"},{tag:tags.definition(tags.variableName),color:"#cf7d34"},{tag:[tags.function(tags.variableName),tags.className],color:"#cf7d34"},{tag:[tags.propertyName,tags.attributeName],color:"#54be0d"},...l]})},bespin=bespinInit(),config$a={background:"#232a2f",foreground:"#939da5",selection:"#204062",selectionMatch:"#204062",cursor:"#939da5",dropdownBackground:"#1a2023",activeLine:"#4469832b",matchingBracket:"#204062",keyword:"#ba8ef7",storage:"#ba8ef7",variable:"#939da5",parameter:"#939da5",function:"#ffea6b",string:"#5bec95",constant:"#939da5",type:"#89ddff",class:"#ffea6b",number:"#89ddff",comment:"#707a84",heading:"#5bec95",invalid:"#ff6a80",regexp:"#56adb7",tag:"#ff6a80"},defaultSettingsCopilot={background:config$a.background,foreground:config$a.foreground,caret:config$a.cursor,selection:config$a.selection,selectionMatch:config$a.selectionMatch,gutterBackground:config$a.background,gutterForeground:config$a.foreground,lineHighlight:config$a.activeLine},copilotInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsCopilot,a),styles:[{tag:tags.keyword,color:config$a.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$a.variable},{tag:[tags.propertyName],color:config$a.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$a.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$a.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$a.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$a.variable},{tag:[tags.className],color:config$a.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$a.number},{tag:[tags.typeName],color:config$a.type,fontStyle:config$a.type},{tag:[tags.operator],color:config$a.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$a.regexp},{tag:[tags.meta,tags.comment],color:config$a.comment},{tag:tags.tagName,color:config$a.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$a.heading},{tag:[tags.atom,tags.special(tags.variableName)],color:config$a.variable},{tag:tags.invalid,color:config$a.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.operatorKeyword,tags.bool,tags.null,tags.variableName],color:config$a.constant},...l]})};copilotInit();var defaultSettingsDarcula={background:"#2B2B2B",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},darculaInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDarcula,a),styles:[{tag:[tags.atom,tags.number],color:"#bd93f9"},{tag:[tags.comment],color:"#61A151"},{tag:[tags.string],color:"#6A8759"},{tag:[tags.variableName,tags.operator],color:"#A9B7C6"},{tag:[tags.meta,tags.className],color:"#A9B7C6"},{tag:[tags.propertyName],color:"#FFC66D"},{tag:[tags.keyword],color:"#CC7832"},{tag:[tags.tagName],color:"#ff79c6"},{tag:[tags.typeName],color:"#ffb86c"},...l]})},darcula=darculaInit(),defaultSettingsDracula={background:"#282a36",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6D8A88",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},draculaInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDracula,a),styles:[{tag:tags.comment,color:"#6272a4"},{tag:tags.string,color:"#f1fa8c"},{tag:tags.atom,color:"#bd93f9"},{tag:tags.meta,color:"#f8f8f2"},{tag:[tags.keyword,tags.operator,tags.tagName],color:"#ff79c6"},{tag:[tags.function(tags.propertyName),tags.propertyName],color:"#66d9ef"},{tag:[tags.definition(tags.variableName),tags.function(tags.variableName),tags.className,tags.attributeName],color:"#50fa7b"},{tag:tags.atom,color:"#bd93f9"},...l]})},dracula=draculaInit(),defaultSettingsDuotoneLight={background:"#faf8f5",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#ddceb154"},duotoneLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDuotoneLight,a),styles:[{tag:[tags.comment,tags.bracket],color:"#b6ad9a"},{tag:[tags.atom,tags.number,tags.keyword,tags.link,tags.attributeName,tags.quote],color:"#063289"},{tag:[tags.emphasis,tags.heading,tags.tagName,tags.propertyName,tags.variableName],color:"#2d2006"},{tag:[tags.typeName,tags.url,tags.string],color:"#896724"},{tag:[tags.operator,tags.string],color:"#1659df"},{tag:[tags.propertyName],color:"#b29762"},{tag:[tags.unit,tags.punctuation],color:"#063289"},...l]})},duotoneLight=duotoneLightInit(),defaultSettingsDuotoneDark={background:"#2a2734",foreground:"#6c6783",caret:"#ffad5c",selection:"#91ff6c26",selectionMatch:"#91ff6c26",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},duotoneDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDuotoneDark,a),styles:[{tag:[tags.comment,tags.bracket],color:"#6c6783"},{tag:[tags.atom,tags.number,tags.keyword,tags.link,tags.attributeName,tags.quote],color:"#ffcc99"},{tag:[tags.emphasis,tags.heading,tags.tagName,tags.propertyName,tags.className,tags.variableName],color:"#eeebff"},{tag:[tags.typeName,tags.url],color:"#7a63ee"},{tag:tags.operator,color:"#ffad5c"},{tag:tags.string,color:"#ffb870"},{tag:[tags.propertyName],color:"#9a86fd"},{tag:[tags.unit,tags.punctuation],color:"#e09142"},...l]})},duotoneDark=duotoneDarkInit(),defaultSettingsEclipse={background:"#fff",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#006fff1c",gutterBorder:"transparent"},eclipseInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsEclipse,a),styles:[{tag:[tags.comment],color:"#3F7F5F"},{tag:[tags.documentMeta],color:"#FF1717"},{tag:tags.keyword,color:"#7F0055",fontWeight:"bold"},{tag:tags.atom,color:"#00f"},{tag:tags.number,color:"#164"},{tag:tags.propertyName,color:"#164"},{tag:[tags.variableName,tags.definition(tags.variableName)],color:"#0000C0"},{tag:tags.function(tags.variableName),color:"#0000C0"},{tag:tags.string,color:"#2A00FF"},{tag:tags.operator,color:"black"},{tag:tags.tagName,color:"#170"},{tag:tags.attributeName,color:"#00c"},{tag:tags.link,color:"#219"},...l]})},eclipse=eclipseInit(),defaultSettingsGithubLight={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},githubLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGithubLight,a),styles:[{tag:[tags.standard(tags.tagName),tags.tagName],color:"#116329"},{tag:[tags.comment,tags.bracket],color:"#6a737d"},{tag:[tags.className,tags.propertyName],color:"#6f42c1"},{tag:[tags.variableName,tags.attributeName,tags.number,tags.operator],color:"#005cc5"},{tag:[tags.keyword,tags.typeName,tags.typeOperator,tags.typeName],color:"#d73a49"},{tag:[tags.string,tags.meta,tags.regexp],color:"#032f62"},{tag:[tags.name,tags.quote],color:"#22863a"},{tag:[tags.heading,tags.strong],color:"#24292e",fontWeight:"bold"},{tag:[tags.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[tags.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#e36209"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#032f62"},{tag:tags.link,textDecoration:"underline"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.invalid,color:"#cb2431"},...l]})},githubLight=githubLightInit(),defaultSettingsGithubDark={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},githubDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGithubDark,a),styles:[{tag:[tags.standard(tags.tagName),tags.tagName],color:"#7ee787"},{tag:[tags.comment,tags.bracket],color:"#8b949e"},{tag:[tags.className,tags.propertyName],color:"#d2a8ff"},{tag:[tags.variableName,tags.attributeName,tags.number,tags.operator],color:"#79c0ff"},{tag:[tags.keyword,tags.typeName,tags.typeOperator,tags.typeName],color:"#ff7b72"},{tag:[tags.string,tags.meta,tags.regexp],color:"#a5d6ff"},{tag:[tags.name,tags.quote],color:"#7ee787"},{tag:[tags.heading,tags.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[tags.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[tags.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#ffab70"},{tag:tags.link,textDecoration:"underline"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.invalid,color:"#f97583"},...l]})},githubDark=githubDarkInit(),defaultSettingsGruvboxDark={background:"#282828",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#b99d555c",selectionMatch:"#b99d555c",lineHighlight:"#baa1602b",gutterBackground:"#282828",gutterForeground:"#7c6f64"},gruvboxDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGruvboxDark,a),styles:[{tag:tags.keyword,color:"#fb4934"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#8ec07c"},{tag:[tags.variableName],color:"#83a598"},{tag:[tags.function(tags.variableName)],color:"#b8bb26",fontStyle:"bold"},{tag:[tags.labelName],color:"#ebdbb2"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#d3869b"},{tag:[tags.definition(tags.name),tags.separator],color:"#ebdbb2"},{tag:[tags.brace],color:"#ebdbb2"},{tag:[tags.annotation],color:"#fb4934d"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#d3869b"},{tag:[tags.typeName,tags.className],color:"#fabd2f"},{tag:[tags.operator,tags.operatorKeyword],color:"#fb4934"},{tag:[tags.tagName],color:"#8ec07c",fontStyle:"bold"},{tag:[tags.squareBracket],color:"#fe8019"},{tag:[tags.angleBracket],color:"#83a598"},{tag:[tags.attributeName],color:"#8ec07c"},{tag:[tags.regexp],color:"#8ec07c"},{tag:[tags.quote],color:"#928374"},{tag:[tags.string],color:"#ebdbb2"},{tag:tags.link,color:"#a89984",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#d3869b"},{tag:[tags.meta],color:"#fabd2f"},{tag:[tags.comment],color:"#928374",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#fe8019"},{tag:tags.emphasis,fontStyle:"italic",color:"#b8bb26"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#b8bb26"},{tag:[tags.heading1,tags.heading2],fontWeight:"bold",color:"#b8bb26"},{tag:[tags.heading3,tags.heading4],fontWeight:"bold",color:"#fabd2f"},{tag:[tags.heading5,tags.heading6],color:"#fabd2f"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d3869b"},{tag:[tags.processingInstruction,tags.inserted],color:"#83a598"},{tag:[tags.contentSeparator],color:"#fb4934"},{tag:tags.invalid,color:"#fe8019",borderBottom:"1px dotted #fb4934d"},...l]})},gruvboxDark=gruvboxDarkInit(),defaultSettingsGruvboxLight={background:"#fbf1c7",foreground:"#3c3836",caret:"#af3a03",selection:"#bdae9391",selectionMatch:"#bdae9391",lineHighlight:"#a37f2238",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"},gruvboxLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGruvboxLight,a),styles:[{tag:tags.keyword,color:"#9d0006"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#427b58"},{tag:[tags.variableName],color:"#076678"},{tag:[tags.function(tags.variableName)],color:"#79740e",fontStyle:"bold"},{tag:[tags.labelName],color:"#3c3836"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#8f3f71"},{tag:[tags.definition(tags.name),tags.separator],color:"#3c3836"},{tag:[tags.brace],color:"#3c3836"},{tag:[tags.annotation],color:"#9d0006"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#8f3f71"},{tag:[tags.typeName,tags.className],color:"#b57614"},{tag:[tags.operator,tags.operatorKeyword],color:"#9d0006"},{tag:[tags.tagName],color:"#427b58",fontStyle:"bold"},{tag:[tags.squareBracket],color:"#af3a03"},{tag:[tags.angleBracket],color:"#076678"},{tag:[tags.attributeName],color:"#427b58"},{tag:[tags.regexp],color:"#427b58"},{tag:[tags.quote],color:"#928374"},{tag:[tags.string],color:"#3c3836"},{tag:tags.link,color:"#7c6f64",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8f3f71"},{tag:[tags.meta],color:"#b57614"},{tag:[tags.comment],color:"#928374",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#af3a03"},{tag:tags.emphasis,fontStyle:"italic",color:"#79740e"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#79740e"},{tag:[tags.heading1,tags.heading2],fontWeight:"bold",color:"#79740e"},{tag:[tags.heading3,tags.heading4],fontWeight:"bold",color:"#b57614"},{tag:[tags.heading5,tags.heading6],color:"#b57614"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#8f3f71"},{tag:[tags.processingInstruction,tags.inserted],color:"#076678"},{tag:[tags.contentSeparator],color:"#9d0006"},{tag:tags.invalid,color:"#af3a03",borderBottom:"1px dotted #9d0006"},...l]})},gruvboxLight=gruvboxLightInit(),config$9={background:"#221a0f",foreground:"#d3af86",selection:"#84613daa",selectionMatch:"#84613daa",cursor:"#d3af86",dropdownBackground:"#51412c",activeLine:"#5e452b52",matchingBracket:"#5e452b",keyword:"#98676a",storage:"#98676a",variable:"#dc3958",parameter:"#dc3958",function:"#7e602c",string:"#889b4a",constant:"#f79a32",type:"#f06431",class:"#f06431",number:"#f79a32",comment:"#a57a4c",heading:"#8ab1b0",invalid:"#dc3958",regexp:"#7e602c",tag:"#dc3958"},defaultSettingsKimbie={background:config$9.background,foreground:config$9.foreground,caret:config$9.cursor,selection:config$9.selection,selectionMatch:config$9.selection,gutterBackground:config$9.background,gutterForeground:config$9.foreground,lineHighlight:config$9.activeLine},kimbieInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsKimbie,a),styles:[{tag:tags.keyword,color:config$9.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$9.variable},{tag:[tags.propertyName],color:config$9.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$9.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$9.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$9.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$9.variable},{tag:[tags.className],color:config$9.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$9.number},{tag:[tags.typeName],color:config$9.type,fontStyle:config$9.type},{tag:[tags.operator,tags.operatorKeyword],color:config$9.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$9.regexp},{tag:[tags.meta,tags.comment],color:config$9.comment},{tag:tags.tagName,color:config$9.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$9.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$9.variable},{tag:tags.invalid,color:config$9.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};kimbieInit();var defaultSettingsMaterial={background:"#2e3235",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f063",selectionMatch:"#d7d4f063",gutterBackground:"#2e3235",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#545b6130"},materialInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsMaterial,a),styles:[{tag:tags.keyword,color:"#cf6edf"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#56c8d8"},{tag:[tags.propertyName],color:"#facf4e"},{tag:[tags.variableName],color:"#bdbdbd"},{tag:[tags.function(tags.variableName)],color:"#56c8d8"},{tag:[tags.labelName],color:"#cf6edf"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#facf4e"},{tag:[tags.definition(tags.name),tags.separator],color:"#fa5788"},{tag:[tags.brace],color:"#cf6edf"},{tag:[tags.annotation],color:"#ff5f52"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ffad42"},{tag:[tags.typeName,tags.className],color:"#ffad42"},{tag:[tags.operator,tags.operatorKeyword],color:"#7186f0"},{tag:[tags.tagName],color:"#99d066"},{tag:[tags.squareBracket],color:"#ff5f52"},{tag:[tags.angleBracket],color:"#606f7a"},{tag:[tags.attributeName],color:"#bdbdbd"},{tag:[tags.regexp],color:"#ff5f52"},{tag:[tags.quote],color:"#6abf69"},{tag:[tags.string],color:"#99d066"},{tag:tags.link,color:"#56c8d8",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#facf4e"},{tag:[tags.meta],color:"#707d8b"},{tag:[tags.comment],color:"#707d8b",fontStyle:"italic"},{tag:tags.monospace,color:"#bdbdbd"},{tag:tags.strong,fontWeight:"bold",color:"#ff5f52"},{tag:tags.emphasis,fontStyle:"italic",color:"#99d066"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#facf4e"},{tag:tags.heading1,fontWeight:"bold",color:"#facf4e"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#facf4e"},{tag:[tags.heading5,tags.heading6],color:"#facf4e"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#56c8d8"},{tag:[tags.processingInstruction,tags.inserted],color:"#ff5f52"},{tag:[tags.contentSeparator],color:"#56c8d8"},{tag:tags.invalid,color:"#606f7a",borderBottom:"1px dotted #ff5f52"},...l]})},materialDark=materialInit();materialInit();var defaultSettingsMaterialLight={background:"#FAFAFA",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#80CBC440",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"},materialLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsMaterialLight,a),styles:[{tag:tags.keyword,color:"#39ADB5"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#90A4AE"},{tag:[tags.propertyName],color:"#6182B8"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#91B859"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#6182B8"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#39ADB5"},{tag:[tags.definition(tags.name),tags.separator],color:"#90A4AE"},{tag:[tags.className],color:"#E2931D"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#F76D47"},{tag:[tags.typeName],color:"#E2931D",fontStyle:"#E2931D"},{tag:[tags.operator,tags.operatorKeyword],color:"#39ADB5"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#91B859"},{tag:[tags.meta,tags.comment],color:"#90A4AE"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#39ADB5"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#90A4AE"},{tag:tags.invalid,color:"#E5393570"},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},materialLight=materialLightInit(),config$8={background:"#272822",foreground:"#f8f8f2",selection:"#4a4a76",selectionMatch:"#4a4a76",cursor:"#f8f8f0",dropdownBackground:"#414339",activeLine:"#3e3d3257",matchingBracket:"#3e3d32",keyword:"#F92672",storage:"#F92672",variable:"#FD971F",parameter:"#FD971F",function:"#66D9EF",string:"#E6DB74",constant:"#AE81FF",type:"#66D9EF",class:"#A6E22E",number:"#AE81FF",comment:"#88846f",heading:"#A6E22E",invalid:"#F44747",regexp:"#E6DB74",tag:"#F92672"},defaultSettingsMonokai={background:config$8.background,foreground:config$8.foreground,caret:config$8.cursor,selection:config$8.selection,selectionMatch:config$8.selection,gutterBackground:config$8.background,gutterForeground:config$8.foreground,lineHighlight:config$8.activeLine},monokaiInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsMonokai,a),styles:[{tag:tags.keyword,color:config$8.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$8.variable},{tag:[tags.propertyName],color:config$8.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$8.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$8.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$8.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$8.variable},{tag:[tags.className],color:config$8.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$8.number},{tag:[tags.typeName],color:config$8.type,fontStyle:config$8.type},{tag:[tags.operator,tags.operatorKeyword],color:config$8.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$8.regexp},{tag:[tags.meta,tags.comment],color:config$8.comment},{tag:tags.tagName,color:config$8.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$8.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$8.variable},{tag:tags.invalid,color:config$8.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};monokaiInit();var config$7={background:"#1e1e1e",foreground:"#c5c8c6",selection:"#4747a1",selectionMatch:"#4747a1",cursor:"#c07020",dropdownBackground:"#525252",activeLine:"#30303078",matchingBracket:"#303030",keyword:"#676867",storage:"#676867",variable:"#c7444a",parameter:"#6089B4",function:"#9872A2",string:"#D08442",constant:"#8080FF",type:"#9B0000",class:"#CE6700",number:"#6089B4",comment:"#9A9B99",heading:"#D0B344",invalid:"#FF0B00",regexp:"#D08442",tag:"#6089B4"},defaultSettingsMonokaiDimmed={background:config$7.background,foreground:config$7.foreground,caret:config$7.cursor,selection:config$7.selection,selectionMatch:config$7.selection,gutterBackground:config$7.background,gutterForeground:config$7.foreground,lineHighlight:config$7.activeLine},monokaiDimmedInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsMonokaiDimmed,a),styles:[{tag:tags.keyword,color:config$7.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$7.variable},{tag:[tags.propertyName],color:config$7.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$7.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$7.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$7.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$7.variable},{tag:[tags.className],color:config$7.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$7.number},{tag:[tags.typeName],color:config$7.type,fontStyle:config$7.type},{tag:[tags.operator,tags.operatorKeyword],color:config$7.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$7.regexp},{tag:[tags.meta,tags.comment],color:config$7.comment},{tag:tags.tagName,color:config$7.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$7.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$7.variable},{tag:tags.invalid,color:config$7.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};monokaiDimmedInit();var defaultSettingsNoctisLilac={background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#16067911"},noctisLilacInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsNoctisLilac,a),styles:[{tag:tags.comment,color:"#9995b7"},{tag:tags.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#ff5792"},{tag:[tags.className,tags.tagName,tags.definition(tags.typeName)],color:"#0094f0"},{tag:[tags.number,tags.bool,tags.null,tags.special(tags.brace)],color:"#5842ff"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#0095a8"},{tag:tags.typeName,color:"#b3694d"},{tag:[tags.propertyName,tags.variableName],color:"#fa8900"},{tag:tags.operator,color:"#ff5792"},{tag:tags.self,color:"#e64100"},{tag:[tags.string,tags.regexp],color:"#00b368"},{tag:[tags.paren,tags.bracket],color:"#0431fa"},{tag:tags.labelName,color:"#00bdd6"},{tag:tags.attributeName,color:"#e64100"},{tag:tags.angleBracket,color:"#9995b7"},...l]})},noctisLilac=noctisLilacInit(),defaultSettingsNord={background:"#2e3440",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#4b556a",selectionMatch:"#4b556a",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a29"},nordInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsNord,a),styles:[{tag:tags.keyword,color:"#5e81ac"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#88c0d0"},{tag:[tags.variableName],color:"#8fbcbb"},{tag:[tags.function(tags.variableName)],color:"#8fbcbb"},{tag:[tags.labelName],color:"#81a1c1"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#5e81ac"},{tag:[tags.definition(tags.name),tags.separator],color:"#a3be8c"},{tag:[tags.brace],color:"#8fbcbb"},{tag:[tags.annotation],color:"#d30102"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#b48ead"},{tag:[tags.typeName,tags.className],color:"#ebcb8b"},{tag:[tags.operator,tags.operatorKeyword],color:"#a3be8c"},{tag:[tags.tagName],color:"#b48ead"},{tag:[tags.squareBracket],color:"#bf616a"},{tag:[tags.angleBracket],color:"#d08770"},{tag:[tags.attributeName],color:"#ebcb8b"},{tag:[tags.regexp],color:"#5e81ac"},{tag:[tags.quote],color:"#b48ead"},{tag:[tags.string],color:"#a3be8c"},{tag:tags.link,color:"#a3be8c",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8fbcbb"},{tag:[tags.meta],color:"#88c0d0"},{tag:[tags.monospace],color:"#d8dee9",fontStyle:"italic"},{tag:[tags.comment],color:"#4c566a",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#5e81ac"},{tag:tags.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#5e81ac"},{tag:tags.special(tags.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:tags.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading5,tags.heading6],color:"#5e81ac"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d08770"},{tag:[tags.processingInstruction,tags.inserted],color:"#8fbcbb"},{tag:[tags.contentSeparator],color:"#ebcb8b"},{tag:tags.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"},...l]})},nord=nordInit(),defaultSettingsOkaidia={background:"#272822",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#0000003b"},okaidiaInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsOkaidia,a),styles:[{tag:[tags.comment,tags.documentMeta],color:"#8292a2"},{tag:[tags.number,tags.bool,tags.null,tags.atom],color:"#ae81ff"},{tag:[tags.attributeValue,tags.className,tags.name],color:"#e6db74"},{tag:[tags.propertyName,tags.attributeName],color:"#a6e22e"},{tag:[tags.variableName],color:"#9effff"},{tag:[tags.squareBracket],color:"#bababa"},{tag:[tags.string,tags.special(tags.brace)],color:"#e6db74"},{tag:[tags.regexp,tags.className,tags.typeName,tags.definition(tags.typeName)],color:"#66d9ef"},{tag:[tags.definition(tags.variableName),tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#fd971f"},{tag:[tags.keyword,tags.definitionKeyword,tags.modifier,tags.tagName,tags.angleBracket],color:"#f92672"},...l]})},okaidia=okaidiaInit(),config$6={background:"#F5F5F5",foreground:"#333333",selection:"#C9D0D9",selectionMatch:"#C9D0D9",cursor:"#54494B",dropdownBackground:"#F5F5F5",activeLine:"#79ff002b",matchingBracket:"#E4F6D4",keyword:"#4B69C6",storage:"#4B69C6",variable:"#7A3E9D",parameter:"#7A3E9D",function:"#AA3731",string:"#448C27",constant:"#9C5D27",type:"#7A3E9D",class:"#AA3731",number:"#9C5D27",comment:"#AAAAAA",heading:"#AA3731",invalid:"#cd3131",regexp:"#4B69C6",tag:"#4B69C6"},defaultSettingsQuietlight={background:config$6.background,foreground:config$6.foreground,caret:config$6.cursor,selection:config$6.selection,selectionMatch:config$6.selection,gutterBackground:config$6.background,gutterForeground:config$6.foreground,gutterBorder:"transparent",lineHighlight:config$6.activeLine},quietlightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsQuietlight,a),styles:[{tag:tags.keyword,color:config$6.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$6.variable},{tag:[tags.propertyName],color:config$6.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$6.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$6.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$6.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$6.variable},{tag:[tags.className],color:config$6.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$6.number},{tag:[tags.typeName],color:config$6.type,fontStyle:config$6.type},{tag:[tags.operator,tags.operatorKeyword],color:config$6.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$6.regexp},{tag:[tags.meta,tags.comment],color:config$6.comment},{tag:tags.tagName,color:config$6.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$6.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$6.variable},{tag:tags.invalid,color:config$6.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};quietlightInit();var config$5={background:"#390000",foreground:"#F8F8F8",selection:"#750000",selectionMatch:"#750000",cursor:"#970000",dropdownBackground:"#580000",activeLine:"#ff000033",matchingBracket:"#ff000033",keyword:"#f12727ff",storage:"#ff6262ff",variable:"#edef7dff",parameter:"#edef7dff",function:"#ffb454ff",string:"#edef7dff",constant:"#ec0d1e",type:"#9df39fff",class:"#fec758ff",number:"#994646ff",comment:"#e7c0c0ff",heading:"#fec758ff",invalid:"#ffffffff",regexp:"#edef7dff",tag:"#aa5507ff"},defaultSettingsRed={background:config$5.background,foreground:config$5.foreground,caret:config$5.cursor,selection:config$5.selection,selectionMatch:config$5.selection,gutterBackground:config$5.background,gutterForeground:config$5.foreground,lineHighlight:config$5.activeLine},redInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsRed,a),styles:[{tag:tags.keyword,color:config$5.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$5.variable},{tag:[tags.propertyName],color:config$5.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$5.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$5.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$5.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$5.variable},{tag:[tags.className],color:config$5.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$5.number},{tag:[tags.typeName],color:config$5.type,fontStyle:config$5.type},{tag:[tags.operator,tags.operatorKeyword],color:config$5.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$5.regexp},{tag:[tags.meta,tags.comment],color:config$5.comment},{tag:tags.tagName,color:config$5.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$5.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$5.variable},{tag:tags.invalid,color:config$5.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};redInit();var config$4={background:"#002B36",foreground:"#839496",selection:"#004454AA",selectionMatch:"#005A6FAA",cursor:"#D30102",dropdownBackground:"#00212B",dropdownBorder:"#2AA19899",activeLine:"#00cafe11",matchingBracket:"#073642",keyword:"#859900",storage:"#93A1A1",variable:"#268BD2",parameter:"#268BD2",function:"#268BD2",string:"#2AA198",constant:"#CB4B16",type:"#859900",class:"#268BD2",number:"#D33682",comment:"#586E75",heading:"#268BD2",invalid:"#DC322F",regexp:"#DC322F",tag:"#268BD2"},defaultSettingsSolarizedDark={background:config$4.background,foreground:config$4.foreground,caret:config$4.cursor,selection:config$4.selection,selectionMatch:config$4.selection,gutterBackground:config$4.background,gutterForeground:config$4.foreground,gutterBorder:"transparent",lineHighlight:config$4.activeLine},solarizedDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsSolarizedDark,a),styles:[{tag:tags.keyword,color:config$4.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$4.variable},{tag:[tags.propertyName],color:config$4.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$4.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$4.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$4.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$4.variable},{tag:[tags.className],color:config$4.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$4.number},{tag:[tags.typeName],color:config$4.type,fontStyle:config$4.type},{tag:[tags.operator,tags.operatorKeyword],color:config$4.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$4.regexp},{tag:[tags.meta,tags.comment],color:config$4.comment},{tag:tags.tagName,color:config$4.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$4.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$4.variable},{tag:tags.invalid,color:config$4.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},solarizedDark=solarizedDarkInit(),config$3={background:"#FDF6E3",foreground:"#657B83",selection:"#EEE8D5",selectionMatch:"#EEE8D5",cursor:"#657B83",dropdownBackground:"#EEE8D5",dropdownBorder:"#D3AF86",activeLine:"#3d392d11",matchingBracket:"#EEE8D5",keyword:"#859900",storage:"#586E75",variable:"#268BD2",parameter:"#268BD2",function:"#268BD2",string:"#2AA198",constant:"#CB4B16",type:"#859900",class:"#268BD2",number:"#D33682",comment:"#93A1A1",heading:"#268BD2",invalid:"#DC322F",regexp:"#DC322F",tag:"#268BD2"},defaultSettingsSolarizedLight={background:config$3.background,foreground:config$3.foreground,caret:config$3.cursor,selection:config$3.selection,selectionMatch:config$3.selectionMatch,gutterBackground:config$3.background,gutterForeground:config$3.foreground,gutterBorder:"transparent",lineHighlight:config$3.activeLine},solarizedLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsSolarizedLight,a),styles:[{tag:tags.keyword,color:config$3.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$3.variable},{tag:[tags.propertyName],color:config$3.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$3.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$3.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$3.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$3.variable},{tag:[tags.className],color:config$3.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$3.number},{tag:[tags.typeName],color:config$3.type,fontStyle:config$3.type},{tag:[tags.operator,tags.operatorKeyword],color:config$3.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$3.regexp},{tag:[tags.meta,tags.comment],color:config$3.comment},{tag:tags.tagName,color:config$3.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$3.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$3.variable},{tag:tags.invalid,color:config$3.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},solarizedLight=solarizedLightInit(),defaultSettingsSublime={background:"#303841",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"};function sublimeInit(o){var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsSublime,a),styles:[{tag:[tags.meta,tags.comment],color:"#A2A9B5"},{tag:[tags.attributeName,tags.keyword],color:"#B78FBA"},{tag:tags.function(tags.variableName),color:"#5AB0B0"},{tag:[tags.string,tags.regexp,tags.attributeValue],color:"#99C592"},{tag:tags.operator,color:"#f47954"},{tag:[tags.tagName,tags.modifier],color:"#E35F63"},{tag:[tags.number,tags.definition(tags.tagName),tags.className,tags.definition(tags.variableName)],color:"#fbac52"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#E35F63"},{tag:tags.variableName,color:"#539ac4"},{tag:[tags.propertyName,tags.typeName],color:"#629ccd"},{tag:tags.propertyName,color:"#36b7b5"},...l]})}var sublime=sublimeInit(),defaultSettingsTokyoNight={background:"#1a1b26",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#474b6611"},tokyoNightInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTokyoNight,a),styles:[{tag:tags.keyword,color:"#bb9af7"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#c0caf5"},{tag:[tags.propertyName],color:"#7aa2f7"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#9ece6a"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#7aa2f7"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#bb9af7"},{tag:[tags.definition(tags.name),tags.separator],color:"#c0caf5"},{tag:[tags.className],color:"#c0caf5"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ff9e64"},{tag:[tags.typeName],color:"#0db9d7"},{tag:[tags.operator,tags.operatorKeyword],color:"#bb9af7"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#b4f9f8"},{tag:[tags.meta,tags.comment],color:"#444b6a"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#89ddff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#c0caf5"},{tag:tags.invalid,color:"#ff5370"},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},tokyoNight=tokyoNightInit(),defaultSettingsTokyoNightStorm={background:"#24283b",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#343b5f",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e427a"},tokyoNightStormInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTokyoNightStorm,a),styles:[{tag:tags.keyword,color:"#bb9af7"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#c0caf5"},{tag:[tags.propertyName],color:"#7aa2f7"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#9ece6a"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#7aa2f7"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#bb9af7"},{tag:[tags.definition(tags.name),tags.separator],color:"#c0caf5"},{tag:[tags.className],color:"#c0caf5"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ff9e64"},{tag:[tags.typeName],color:"#2ac3de",fontStyle:"#2ac3de"},{tag:[tags.operator,tags.operatorKeyword],color:"#bb9af7"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#b4f9f8"},{tag:[tags.meta,tags.comment],color:"#565f89"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#89ddff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#c0caf5"},{tag:tags.invalid,color:"#ff5370"},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},tokyoNightStorm=tokyoNightStormInit(),defaultSettingsTokyoNightDay={background:"#e1e2e7",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"},tokyoNightDayInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTokyoNightDay,a),styles:[{tag:tags.keyword,color:"#007197"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#3760bf"},{tag:[tags.propertyName],color:"#3760bf"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#587539"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#3760bf"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#3760bf"},{tag:[tags.definition(tags.name),tags.separator],color:"#3760bf"},{tag:[tags.className],color:"#3760bf"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#b15c00"},{tag:[tags.typeName],color:"#007197",fontStyle:"#007197"},{tag:[tags.operator,tags.operatorKeyword],color:"#007197"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#587539"},{tag:[tags.meta,tags.comment],color:"#848cb5"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#b15c00"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#3760bf"},{tag:tags.invalid,color:"#f52a65"},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})},tokyoNightDay=tokyoNightDayInit(),config$2={background:"#002451",foreground:"#ffffff",selection:"#003f8e",selectionMatch:"#003f8e",cursor:"#ffffff",dropdownBackground:"#001733",activeLine:"#00346e7a",matchingBracket:"#00346e",keyword:"#EBBBFF",storage:"#EBBBFF",variable:"#FFC58F",parameter:"#FFC58F",function:"#BBDAFF",string:"#D1F1A9",constant:"#FFC58F",type:"#FFEEAD",class:"#BBDAFF",number:"#FFC58F",comment:"#7285B7",heading:"#D1F1A9",invalid:"#a92049",regexp:"#D1F1A9",tag:"#FF9DA4"},defaultSettingsTomorrowNightBlue={background:config$2.background,foreground:config$2.foreground,caret:config$2.cursor,selection:config$2.selection,selectionMatch:config$2.selection,gutterBackground:config$2.background,gutterForeground:config$2.foreground,lineHighlight:config$2.activeLine},tomorrowNightBlueInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTomorrowNightBlue,a),styles:[{tag:tags.keyword,color:config$2.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$2.variable},{tag:[tags.propertyName],color:config$2.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$2.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$2.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$2.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$2.variable},{tag:[tags.className],color:config$2.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:config$2.number},{tag:[tags.typeName],color:config$2.type,fontStyle:config$2.type},{tag:[tags.operator,tags.operatorKeyword],color:config$2.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$2.regexp},{tag:[tags.meta,tags.comment],color:config$2.comment},{tag:tags.tagName,color:config$2.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$2.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:config$2.variable},{tag:tags.invalid,color:config$2.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},...l]})};tomorrowNightBlueInit();var defaultSettingsVscodeDark={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'};function vscodeDarkInit(o){var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsVscodeDark,a),styles:[{tag:[tags.keyword,tags.operatorKeyword,tags.modifier,tags.color,tags.constant(tags.name),tags.standard(tags.name),tags.standard(tags.tagName),tags.special(tags.brace),tags.atom,tags.bool,tags.special(tags.variableName)],color:"#569cd6"},{tag:[tags.controlKeyword,tags.moduleKeyword],color:"#c586c0"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName,tags.propertyName,tags.variableName,tags.labelName,tags.definition(tags.name)],color:"#9cdcfe"},{tag:tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[tags.typeName,tags.className,tags.tagName,tags.number,tags.changed,tags.annotation,tags.self,tags.namespace],color:"#4ec9b0"},{tag:[tags.function(tags.variableName),tags.function(tags.propertyName)],color:"#dcdcaa"},{tag:[tags.number],color:"#b5cea8"},{tag:[tags.operator,tags.punctuation,tags.separator,tags.url,tags.escape,tags.regexp],color:"#d4d4d4"},{tag:[tags.regexp],color:"#d16969"},{tag:[tags.special(tags.string),tags.processingInstruction,tags.string,tags.inserted],color:"#ce9178"},{tag:[tags.angleBracket],color:"#808080"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.meta,tags.comment],color:"#6a9955"},{tag:tags.link,color:"#6a9955",textDecoration:"underline"},{tag:tags.invalid,color:"#ff0000"},...l]})}var vscodeDark=vscodeDarkInit(),config$1={background:"#000",foreground:"#fff",selection:"#7d46fc3f",selectionMatch:"#7d46fc7f",cursor:"#7d46fc",dropdownBackground:"#0a0b0f",dropdownBorder:"#1e1d27",activeLine:"#00346eb0",matchingBracket:"#7d46fc7f",keyword:null,storage:null,variable:null,parameter:null,function:null,string:"#a8a8b1",constant:null,type:null,class:null,number:null,comment:"#2e2e37",heading:null,invalid:null,regexp:"#a8a8b1",tag:null},defaultSettingsWhiteDark={background:config$1.background,foreground:config$1.foreground,caret:config$1.cursor,selection:config$1.selection,selectionMatch:config$1.selectionMatch,gutterBackground:config$1.background,gutterForeground:config$1.foreground,lineHighlight:config$1.activeLine},whiteDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsWhiteDark,a),styles:[{tag:tags.keyword,color:config$1.keyword,fontWeight:"bold"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config$1.variable},{tag:[tags.propertyName],color:config$1.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config$1.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config$1.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config$1.constant},{tag:[tags.definition(tags.name),tags.separator],color:config$1.variable},{tag:[tags.className],color:config$1.class},{tag:[tags.typeName],color:config$1.type,fontStyle:config$1.type},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config$1.regexp},{tag:[tags.meta,tags.comment],color:config$1.comment},{tag:tags.tagName,color:config$1.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config$1.heading},{tag:[tags.atom,tags.special(tags.variableName)],color:config$1.variable},{tag:tags.invalid,color:config$1.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.operatorKeyword,tags.bool,tags.null,tags.variableName],color:config$1.constant},{tag:[tags.operator],color:"#bb9af7"},{tag:[tags.number],color:"#a8a8b1"},{tag:[tags.bracket],color:"#bb9af7"},...l]})};whiteDarkInit();var config={background:"#fff",foreground:"#000",selection:"#0064ff26",selectionMatch:"#0064ff4c",cursor:"#004bff",dropdownBackground:"#f4f6fc",dropdownBorder:"#e7ecf2",activeLine:"#0064ff0c",matchingBracket:"#0064ff4c",keyword:null,storage:null,variable:null,parameter:null,function:null,string:"#6b7a88",constant:null,type:null,class:null,number:null,comment:"#bec9d3",heading:null,invalid:null,regexp:"#6b7a88",tag:null},defaultSettingsWhiteLight={background:config.background,foreground:config.foreground,caret:config.cursor,selection:config.selection,selectionMatch:config.selectionMatch,gutterBackground:config.background,gutterForeground:config.foreground,lineHighlight:config.activeLine},whiteLightInit=o=>{var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsWhiteLight,a),styles:[{tag:tags.keyword,color:config.keyword,fontWeight:"bold"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:config.variable},{tag:[tags.propertyName],color:config.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:config.string},{tag:[tags.function(tags.variableName),tags.labelName],color:config.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:config.constant},{tag:[tags.definition(tags.name),tags.separator],color:config.variable},{tag:[tags.className],color:config.class},{tag:[tags.typeName],color:config.type,fontStyle:config.type},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:config.regexp},{tag:[tags.meta,tags.comment],color:config.comment},{tag:tags.tagName,color:config.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:config.heading},{tag:[tags.atom,tags.special(tags.variableName)],color:config.variable},{tag:tags.invalid,color:config.invalid},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.operatorKeyword,tags.bool,tags.null,tags.variableName],color:config.constant},{tag:[tags.operator],color:"#0431fa"},{tag:[tags.number],color:"#a8a8b1"},{tag:[tags.bracket],color:"#0431fa"},...l]})};whiteLightInit();var defaultSettingsXcodeLight={background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#d5e6ff69"};function xcodeLightInit(o){var{theme:e="light",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsXcodeLight,a),styles:[{tag:[tags.comment,tags.quote],color:"#707F8D"},{tag:[tags.typeName,tags.typeOperator],color:"#aa0d91"},{tag:[tags.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#D23423"},{tag:[tags.name],color:"#032f62"},{tag:[tags.typeName],color:"#522BB2"},{tag:[tags.variableName],color:"#23575C"},{tag:[tags.definition(tags.variableName)],color:"#327A9E"},{tag:[tags.regexp,tags.link],color:"#0e0eff"},...l]})}var xcodeLight=xcodeLightInit(),defaultSettingsXcodeDark={background:"#292A30",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#ffffff0f"},xcodeDarkInit=o=>{var{theme:e="dark",settings:a={},styles:l=[]}=o||{};return createTheme({theme:e,settings:_extends({},defaultSettingsXcodeDark,a),styles:[{tag:[tags.comment,tags.quote],color:"#7F8C98"},{tag:[tags.keyword],color:"#FF7AB2",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#FF8170"},{tag:[tags.typeName],color:"#DABAFF"},{tag:[tags.definition(tags.variableName)],color:"#6BDFFF"},{tag:[tags.name],color:"#6BAA9F"},{tag:[tags.variableName],color:"#ACF2E4"},{tag:[tags.regexp,tags.link],color:"#FF8170"},...l]})},xcodeDark=xcodeDarkInit();const strudelTheme=createTheme({theme:"dark",settings:{background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},styles:[{tag:tags.labelName,color:"#89ddff"},{tag:tags.keyword,color:"#c792ea"},{tag:tags.operator,color:"#89ddff"},{tag:tags.special(tags.variableName),color:"#eeffff"},{tag:tags.typeName,color:"#c3e88d"},{tag:tags.atom,color:"#f78c6c"},{tag:tags.number,color:"#c3e88d"},{tag:tags.definition(tags.variableName),color:"#82aaff"},{tag:tags.string,color:"#c3e88d"},{tag:tags.special(tags.string),color:"#c3e88d"},{tag:tags.comment,color:"#7d8799"},{tag:tags.variableName,color:"#c792ea"},{tag:tags.tagName,color:"#c3e88d"},{tag:tags.bracket,color:"#525154"},{tag:tags.meta,color:"#ffcb6b"},{tag:tags.attributeName,color:"#c792ea"},{tag:tags.propertyName,color:"#c792ea"},{tag:tags.className,color:"#decb6b"},{tag:tags.invalid,color:"#ffffff"},{tag:[tags.unit,tags.punctuation],color:"#82aaff"}]}),settings$6={background:"#051DB5",lineBackground:"#051DB550",foreground:"white",caret:"white",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},bluescreen=createTheme({theme:"dark",settings:settings$6,styles:[{tag:tags.labelName,color:"white"},{tag:tags.keyword,color:"white"},{tag:tags.operator,color:"white"},{tag:tags.special(tags.variableName),color:"white"},{tag:tags.typeName,color:"white"},{tag:tags.atom,color:"white"},{tag:tags.number,color:"white"},{tag:tags.definition(tags.variableName),color:"white"},{tag:tags.string,color:"white"},{tag:tags.special(tags.string),color:"white"},{tag:tags.comment,color:"white"},{tag:tags.variableName,color:"white"},{tag:tags.tagName,color:"white"},{tag:tags.bracket,color:"white"},{tag:tags.meta,color:"white"},{tag:tags.attributeName,color:"white"},{tag:tags.propertyName,color:"white"},{tag:tags.className,color:"white"},{tag:tags.invalid,color:"white"},{tag:[tags.unit,tags.punctuation],color:"white"}]}),settings$5={background:"black",foreground:"white",caret:"white",selection:"#ffffff20",selectionMatch:"#036dd626",lineHighlight:"#ffffff10",lineBackground:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},blackscreen=createTheme({theme:"dark",settings:settings$5,styles:[{tag:tags.labelName,color:"white"},{tag:tags.keyword,color:"white"},{tag:tags.operator,color:"white"},{tag:tags.special(tags.variableName),color:"white"},{tag:tags.typeName,color:"white"},{tag:tags.atom,color:"white"},{tag:tags.number,color:"white"},{tag:tags.definition(tags.variableName),color:"white"},{tag:tags.string,color:"white"},{tag:tags.special(tags.string),color:"white"},{tag:tags.comment,color:"white"},{tag:tags.variableName,color:"white"},{tag:tags.tagName,color:"white"},{tag:tags.bracket,color:"white"},{tag:tags.meta,color:"white"},{tag:tags.attributeName,color:"white"},{tag:tags.propertyName,color:"white"},{tag:tags.className,color:"white"},{tag:tags.invalid,color:"white"},{tag:[tags.unit,tags.punctuation],color:"white"}]}),settings$4={background:"white",foreground:"black",caret:"black",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#ffffff26",lineHighlight:"#cccccc50",lineBackground:"#ffffff50",gutterBackground:"transparent",gutterForeground:"black",light:!0},whitescreen=createTheme({theme:"light",settings:settings$4,styles:[{tag:tags.labelName,color:"black"},{tag:tags.keyword,color:"black"},{tag:tags.operator,color:"black"},{tag:tags.special(tags.variableName),color:"black"},{tag:tags.typeName,color:"black"},{tag:tags.atom,color:"black"},{tag:tags.number,color:"black"},{tag:tags.definition(tags.variableName),color:"black"},{tag:tags.string,color:"black"},{tag:tags.special(tags.string),color:"black"},{tag:tags.comment,color:"black"},{tag:tags.variableName,color:"black"},{tag:tags.tagName,color:"black"},{tag:tags.bracket,color:"black"},{tag:tags.meta,color:"black"},{tag:tags.attributeName,color:"black"},{tag:tags.propertyName,color:"black"},{tag:tags.className,color:"black"},{tag:tags.invalid,color:"black"}]});let colorA="#6edee4",colorB="white",colorC="red",colorD="#f8fc55";const settings$3={background:"#000000",foreground:colorA,caret:colorC,selection:colorD,selectionMatch:colorA,lineHighlight:"#6edee440",lineBackground:"#00000040",gutterBackground:"transparent",gutterForeground:"#8a919966",customStyle:".cm-line { line-height: 1 }"};let punctuation=colorD,mini=colorB;const teletext=createTheme({theme:"dark",settings:settings$3,styles:[{tag:tags.labelName,color:colorB},{tag:tags.keyword,color:colorA},{tag:tags.operator,color:mini},{tag:tags.special(tags.variableName),color:colorA},{tag:tags.typeName,color:colorA},{tag:tags.atom,color:colorA},{tag:tags.number,color:mini},{tag:tags.definition(tags.variableName),color:colorA},{tag:tags.string,color:mini},{tag:tags.special(tags.string),color:mini},{tag:tags.comment,color:punctuation},{tag:tags.variableName,color:colorA},{tag:tags.tagName,color:colorA},{tag:tags.bracket,color:punctuation},{tag:tags.meta,color:colorA},{tag:tags.attributeName,color:colorA},{tag:tags.propertyName,color:colorA},{tag:tags.className,color:colorA},{tag:tags.invalid,color:colorC},{tag:[tags.unit,tags.punctuation],color:punctuation}]}),settings$2={background:"#9bbc0f",foreground:"#0f380f",caret:"#0f380f",selection:"#306230",selectionMatch:"#ffffff26",lineHighlight:"#8bac0f",lineBackground:"#9bbc0f50",gutterBackground:"transparent",gutterForeground:"#0f380f",light:!0,customStyle:".cm-line { line-height: 1 }"},algoboy=createTheme({theme:"light",settings:settings$2,styles:[{tag:tags.labelName,color:"#0f380f"},{tag:tags.keyword,color:"#0f380f"},{tag:tags.operator,color:"#0f380f"},{tag:tags.special(tags.variableName),color:"#0f380f"},{tag:tags.typeName,color:"#0f380f"},{tag:tags.atom,color:"#0f380f"},{tag:tags.number,color:"#0f380f"},{tag:tags.definition(tags.variableName),color:"#0f380f"},{tag:tags.string,color:"#0f380f"},{tag:tags.special(tags.string),color:"#0f380f"},{tag:tags.comment,color:"#0f380f"},{tag:tags.variableName,color:"#0f380f"},{tag:tags.tagName,color:"#0f380f"},{tag:tags.bracket,color:"#0f380f"},{tag:tags.meta,color:"#0f380f"},{tag:tags.attributeName,color:"#0f380f"},{tag:tags.propertyName,color:"#0f380f"},{tag:tags.className,color:"#0f380f"},{tag:tags.invalid,color:"#0f380f"},{tag:[tags.unit,tags.punctuation],color:"#0f380f"}]}),settings$1={background:"black",foreground:"#41FF00",caret:"#41FF00",selection:"#ffffff20",selectionMatch:"#036dd626",lineHighlight:"#ffffff10",gutterBackground:"transparent",gutterForeground:"#8a919966"},terminal=createTheme({theme:"dark",settings:settings$1,styles:[{tag:tags.labelName,color:"#41FF00"},{tag:tags.keyword,color:"#41FF00"},{tag:tags.operator,color:"#41FF00"},{tag:tags.special(tags.variableName),color:"#41FF00"},{tag:tags.typeName,color:"#41FF00"},{tag:tags.atom,color:"#41FF00"},{tag:tags.number,color:"#41FF00"},{tag:tags.definition(tags.variableName),color:"#41FF00"},{tag:tags.string,color:"#41FF00"},{tag:tags.special(tags.string),color:"#41FF00"},{tag:tags.comment,color:"#41FF00"},{tag:tags.variableName,color:"#41FF00"},{tag:tags.tagName,color:"#41FF00"},{tag:tags.bracket,color:"#41FF00"},{tag:tags.meta,color:"#41FF00"},{tag:tags.attributeName,color:"#41FF00"},{tag:tags.propertyName,color:"#41FF00"},{tag:tags.className,color:"#41FF00"},{tag:tags.invalid,color:"#41FF00"}]}),themes={strudelTheme,bluescreen,blackscreen,whitescreen,teletext,algoboy,terminal,abcdef,androidstudio,atomone,aura,bespin,darcula,dracula,duotoneDark,eclipse,githubDark,gruvboxDark,materialDark,nord,okaidia,solarizedDark,sublime,tokyoNight,tokyoNightStorm,vscodeDark,xcodeDark,bbedit,duotoneLight,githubLight,gruvboxLight,materialLight,noctisLilac,solarizedLight,tokyoNightDay,xcodeLight},settings={strudelTheme:{background:"#222",lineBackground:"#22222299",foreground:"#fff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},bluescreen:settings$6,blackscreen:settings$5,whitescreen:settings$4,teletext:settings$3,algoboy:settings$2,terminal:settings$1,abcdef:{background:"#0f0f0f",lineBackground:"#0f0f0f99",foreground:"#defdef",caret:"#00FF00",selection:"#515151",selectionMatch:"#515151",gutterBackground:"#555",gutterForeground:"#FFFFFF",lineHighlight:"#314151"},androidstudio:{background:"#282b2e",lineBackground:"#282b2e99",foreground:"#a9b7c6",caret:"#00FF00",selection:"#343739",selectionMatch:"#343739",lineHighlight:"#343739"},atomone:{background:"#272C35",lineBackground:"#272C3599",foreground:"#9d9b97",caret:"#797977",selection:"#ffffff30",selectionMatch:"#2B323D",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2B323D"},aura:{background:"#21202e",lineBackground:"#21202e99",foreground:"#edecee",caret:"#a277ff",selection:"#3d375e7f",selectionMatch:"#3d375e7f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"},bbedit:{light:!0,background:"#FFFFFF",lineBackground:"#FFFFFF99",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"},bespin:{background:"#28211c",lineBackground:"#28211c99",foreground:"#9d9b97",caret:"#797977",selection:"#36312e",selectionMatch:"#4f382b",gutterBackground:"#28211c",gutterForeground:"#666666",lineHighlight:"rgba(255, 255, 255, 0.1)"},darcula:{background:"#2B2B2B",lineBackground:"#2B2B2B99",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},dracula:{background:"#282a36",lineBackground:"#282a3699",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6D8A88",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},duotoneLight:{light:!0,background:"#faf8f5",lineBackground:"#faf8f599",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#EFEFEF"},duotoneDark:{background:"#2a2734",lineBackground:"#2a273499",foreground:"#6c6783",caret:"#ffad5c",selection:"rgba(255, 255, 255, 0.1)",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},eclipse:{light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#e8f2ff",gutterBorder:"transparent"},githubLight:{light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},githubDark:{background:"#0d1117",lineBackground:"#0d111799",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},gruvboxDark:{background:"#282828",lineBackground:"#28282899",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#bdae93",selectionMatch:"#bdae93",lineHighlight:"#3c3836",gutterBackground:"#282828",gutterForeground:"#7c6f64"},gruvboxLight:{light:!0,background:"#fbf1c7",lineBackground:"#fbf1c799",foreground:"#3c3836",caret:"#af3a03",selection:"#ebdbb2",selectionMatch:"#bdae93",lineHighlight:"#ebdbb2",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"},materialDark:{background:"#2e3235",lineBackground:"#2e323599",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#2e3235",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#545b61"},materialLight:{light:!0,background:"#FAFAFA",lineBackground:"#FAFAFA99",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#FAFAFA",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"},noctisLilac:{light:!0,background:"#f2f1f8",lineBackground:"#f2f1f899",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},nord:{background:"#2e3440",lineBackground:"#2e344099",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#3b4252",selectionMatch:"#e5e9f0",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a"},okaidia:{background:"#272822",lineBackground:"#27282299",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},solarizedLight:{light:!0,background:"#fdf6e3",lineBackground:"#fdf6e399",foreground:"#657b83",caret:"#586e75",selection:"#dfd9c8",selectionMatch:"#dfd9c8",gutterBackground:"#00000010",gutterForeground:"#657b83",lineHighlight:"#dfd9c8"},solarizedDark:{background:"#002b36",lineBackground:"#002b3699",foreground:"#93a1a1",caret:"#839496",selection:"#173541",selectionMatch:"#aafe661a",gutterBackground:"#00252f",gutterForeground:"#839496",lineHighlight:"#173541"},sublime:{background:"#303841",lineBackground:"#30384199",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},tokyoNightDay:{light:!0,background:"#e1e2e7",lineBackground:"#e1e2e799",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"},tokyoNightStorm:{background:"#24283b",lineBackground:"#24283b99",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#1f2335",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e42"},tokyoNight:{background:"#1a1b26",lineBackground:"#1a1b2699",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#1e202e"},vscodeDark:{background:"#1e1e1e",lineBackground:"#1e1e1e99",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff"},xcodeLight:{light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"},xcodeDark:{background:"#292A30",lineBackground:"#292A3099",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#2F3239"}};function getColors(o){const e=/#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})/g,a=[];let l;for(;(l=e.exec(o))!==null;){const u=l[0];a.includes(u)||a.push(u)}return a}function themeColors(o){return getColors(stringifySafe(o))}function getCircularReplacer(){const o=new WeakSet;return(e,a)=>{if(typeof a=="object"&&a!==null){if(o.has(a))return;o.add(a)}return a}}function stringifySafe(o){return JSON.stringify(o,getCircularReplacer())}const theme=o=>themes[o]||themes.strudelTheme;function injectStyle(o){const e=document.createElement("style");document.head.appendChild(e);const a=e.sheet,l=a.insertRule(o,0);return()=>a.deleteRule(l)}let currentTheme,resetThemeStyle,themeStyle,styleID="strudel-theme-vars";function initTheme(o){document.getElementById(styleID)||(themeStyle=document.createElement("style"),themeStyle.id=styleID,document.head.append(themeStyle)),activateTheme(o)}function activateTheme(o){if(currentTheme===o)return;currentTheme=o,settings[o]||console.warn("theme",o,"has no settings.. defaulting to strudelTheme settings");const e=settings[o]||settings.strudelTheme;themeStyle.innerHTML=`:root {
      ${Object.entries(e).map(([a,l])=>`--${a}: ${l} !important;`).join(`
`)}
    }`,setTheme(e),e.light?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark"),resetThemeStyle?.(),resetThemeStyle=void 0,e.customStyle&&(resetThemeStyle=injectStyle(e.customStyle))}let sliderValues={};const getSliderID=o=>`slider_${o}`;class SliderWidget extends WidgetType{constructor(e,a,l,u,f,d,p){super(),this.value=e,this.min=a,this.max=l,this.from=u,this.originalFrom=u,this.to=f,this.step=d,this.view=p}eq(){return!1}toDOM(){let e=document.createElement("span");e.setAttribute("aria-hidden","true"),e.className="cm-slider";let a=e.appendChild(document.createElement("input"));return a.type="range",a.min=this.min,a.max=this.max,a.step=this.step??(this.max-this.min)/1e3,a.originalValue=this.value,a.value=a.originalValue,a.from=this.from,a.originalFrom=this.originalFrom,a.to=this.to,a.style="width:64px;margin-right:4px;transform:translateY(4px)",this.slider=a,a.addEventListener("input",l=>{const u=l.target.value;let f=u;const d=a.from+a.originalValue.length;let p={from:a.from,to:d,insert:f};a.originalValue=f,a.value=f,this.view.dispatch({changes:p});const g=getSliderID(a.originalFrom);window.postMessage({type:"cm-slider",value:Number(u),id:g})}),e}ignoreEvent(e){return!0}}const setSliderWidgets=StateEffect.define(),updateSliderWidgets=(o,e)=>{o.dispatch({effects:setSliderWidgets.of(e)})};function getSliders(o,e){return o.filter(a=>a.type==="slider").map(({from:a,to:l,value:u,min:f,max:d,step:p})=>Decoration.widget({widget:new SliderWidget(u,f,d,a,l,p,e),side:0}).range(a))}const sliderPlugin=ViewPlugin.fromClass(class{decorations;constructor(o){this.decorations=Decoration.set([])}update(o){o.transactions.forEach(e=>{if(e.docChanged){this.decorations=this.decorations.map(e.changes);const a=this.decorations.iter();for(;a.value;)a.value?.widget?.slider&&(a.value.widget.slider.from=a.from,a.value.widget.slider.to=a.to),a.next()}for(let a of e.effects)a.is(setSliderWidgets)&&(this.decorations=Decoration.set(getSliders(a.value,o.view)))})}},{decorations:o=>o.decorations});let slider=o=>(console.warn("slider will only work when the transpiler is used... passing value as is"),pure(o)),sliderWithID=(o,e,a,l)=>(sliderValues[o]=e,ref$1(()=>sliderValues[o]));typeof window<"u"&&window.addEventListener("message",o=>{o.data.type==="cm-slider"&&(sliderValues[o.data.id]!==void 0?sliderValues[o.data.id]=o.data.value:console.warn(`slider with id "${o.data.id}" is not registered. Only ${Object.keys(sliderValues)}`))});const addWidget=StateEffect.define({map:({from:o,to:e},a)=>({from:a.mapPos(o),to:a.mapPos(e)})}),updateWidgets=(o,e)=>{o.dispatch({effects:addWidget.of(e)})};function getWidgets(o){return o.sort((e,a)=>e.to-a.to).map(e=>Decoration.widget({widget:new BlockWidget(e),side:0,block:!0}).range(e.to))}const widgetField=StateField.define({create(){return Decoration.none},update(o,e){o=o.map(e.changes);for(let a of e.effects)if(a.is(addWidget))try{o=o.update({filter:()=>!1,add:getWidgets(a.value)})}catch(l){console.log("err",l)}return o},provide:o=>EditorView.decorations.from(o)}),widgetElements={};function setWidget(o,e){widgetElements[o]=e,e.id=o}class BlockWidget extends WidgetType{constructor(e){super(),this.widgetConfig=e}eq(){return!0}toDOM(){const e=getWidgetID(this.widgetConfig);return widgetElements[e]}ignoreEvent(e){return!0}}const widgetPlugin=[widgetField];function registerWidget(o,e){registerWidgetType(o),e&&(Pattern$1.prototype[o]=function(a,l={fold:1}){return e(a,l,this)})}function getCanvasWidget(o,e={}){const{width:a=500,height:l=60,pixelRatio:u=window.devicePixelRatio}=e;let f=document.getElementById(o)||document.createElement("canvas");return f.width=a*u,f.height=l*u,f.style.width=a+"px",f.style.height=l+"px",setWidget(o,f),f}registerWidget("_pianoroll",(o,e={},a)=>{const l=getCanvasWidget(o,e).getContext("2d");return a.tag(o).pianoroll({fold:1,...e,ctx:l,id:o})}),registerWidget("_punchcard",(o,e={},a)=>{const l=getCanvasWidget(o,e).getContext("2d");return a.tag(o).punchcard({fold:1,...e,ctx:l,id:o})}),registerWidget("_spiral",(o,e={},a)=>{let l=e.size||275;e={width:l,height:l,...e,size:l/5};const u=getCanvasWidget(o,e).getContext("2d");return a.tag(o).spiral({...e,ctx:u,id:o})}),registerWidget("_scope",(o,e={},a)=>{e={width:500,height:60,pos:.5,scale:1,...e};const l=getCanvasWidget(o,e).getContext("2d");return a.tag(o).scope({...e,ctx:l,id:o})}),registerWidget("_pitchwheel",(o,e={},a)=>{let l=e.size||200;e={width:l,height:l,...e,size:l/5};const u=getCanvasWidget(o,e).getContext("2d");return a.pitchwheel({...e,ctx:u,id:o})});let identity=o=>o,storageEngine={},eventsEngine={addEventListener(){},removeEventListener(){}};function testSupport(){try{return typeof localStorage<"u"}catch{return!1}}testSupport()&&(storageEngine=localStorage);let windowPersistentEvents={addEventListener(o,e,a){window.addEventListener("storage",e),window.addEventListener("pageshow",a)},removeEventListener(o,e,a){window.removeEventListener("storage",e),window.removeEventListener("pageshow",a)}};typeof window<"u"&&(eventsEngine=windowPersistentEvents);function persistentAtom(o,e=void 0,a={}){let l=a.encode||identity,u=a.decode||identity,f=atom(e),d=f.set;f.set=b=>{typeof b>"u"?delete storageEngine[o]:storageEngine[o]=l(b),d(b)};function p(b){b.key===o?b.newValue===null?d(void 0):d(u(b.newValue)):storageEngine[o]||d(void 0)}function g(){f.set(storageEngine[o]?u(storageEngine[o]):e)}return onMount(f,()=>{if(g(),a.listen!==!1)return eventsEngine.addEventListener(o,p,g),()=>{eventsEngine.removeEventListener(o,p,g)}}),f}const extensions={isLineWrappingEnabled:o=>o?EditorView.lineWrapping:[],isBracketMatchingEnabled:o=>o?bracketMatching({brackets:"()[]{}<>"}):[],isBracketClosingEnabled:o=>o?closeBrackets():[],isLineNumbersDisplayed:o=>o?lineNumbers():[],theme,isAutoCompletionEnabled,isTooltipEnabled,isPatternHighlightingEnabled,isActiveLineHighlighted:o=>o?[highlightActiveLine(),highlightActiveLineGutter()]:[],isFlashEnabled,keybindings},compartments=Object.fromEntries(Object.keys(extensions).map(o=>[o,new Compartment])),defaultSettings={keybindings:"codemirror",isBracketMatchingEnabled:!1,isBracketClosingEnabled:!0,isLineNumbersDisplayed:!0,isActiveLineHighlighted:!1,isAutoCompletionEnabled:!1,isPatternHighlightingEnabled:!0,isFlashEnabled:!0,isTooltipEnabled:!1,isLineWrappingEnabled:!1,theme:"strudelTheme",fontFamily:"monospace",fontSize:18},codemirrorSettings=persistentAtom("codemirror-settings",defaultSettings,{encode:JSON.stringify,decode:JSON.parse});function initEditor({initialCode:o="",onChange:e,onEvaluate:a,onStop:l,root:u}){const f=codemirrorSettings.get(),d=Object.keys(compartments).map(g=>compartments[g].of(extensions[g](parseBooleans(f[g]))));initTheme(f.theme);let p=EditorState.create({doc:o,extensions:[...d,javascript(),sliderPlugin,widgetPlugin,syntaxHighlighting(defaultHighlightStyle),history(),EditorView.updateListener.of(g=>e(g)),drawSelection({cursorBlinkRate:0}),Prec.highest(keymap.of([{key:"Ctrl-Enter",run:()=>a?.()},{key:"Alt-Enter",run:()=>a?.()},{key:"Ctrl-.",run:()=>l?.()},{key:"Alt-.",run:(g,b)=>{b.preventDefault(),l?.()}}]))]});return new EditorView({state:p,parent:u})}class StrudelMirror{constructor(e){const{root:a,id:l,initialCode:u="",onDraw:f,drawContext:d,drawTime:p=[0,0],autodraw:g,prebake:b,bgFill:O=!0,...A}=e;this.code=u,this.root=a,this.miniLocations=[],this.widgets=[],this.painters=[],this.drawTime=p,this.drawContext=d,this.onDraw=f||this.draw,this.id=l||s4(),this.drawer=new Drawer((B,N)=>{const L=B.filter(V=>V.isActive(N));this.highlight(L,N),this.onDraw(B,N,this.painters)},p),this.prebaked=b(),g&&this.drawFirstFrame(),this.repl=repl$1({...A,onToggle:B=>{A?.onToggle?.(B),B?(this.adjustDrawTime(),this.drawer.start(this.repl.scheduler),document.dispatchEvent(new CustomEvent("start-repl",{detail:this.id}))):(this.drawer.stop(),updateMiniLocations(this.editor,[]),cleanupDraw(!1))},beforeEval:async()=>{cleanupDraw(),this.painters=[];const B=this;Pattern$1.prototype.onPaint=function(N){return B.painters.push(N),this},await this.prebaked,await A?.beforeEval?.()},afterEval:B=>{this.miniLocations=B.meta?.miniLocations,this.widgets=B.meta?.widgets;const N=this.widgets.filter(V=>V.type==="slider");updateSliderWidgets(this.editor,N);const L=this.widgets.filter(V=>V.type!=="slider");updateWidgets(this.editor,L),updateMiniLocations(this.editor,this.miniLocations),A?.afterEval?.(B),this.adjustDrawTime(),this.drawer.invalidate()}}),this.editor=initEditor({root:a,initialCode:u,onChange:B=>{B.docChanged&&(this.code=B.state.doc.toString(),this.repl.setCode?.(this.code))},onEvaluate:()=>this.evaluate(),onStop:()=>this.stop()});const k=this.root.querySelector(".cm-editor");k&&(this.root.style.display="block",O&&(this.root.style.backgroundColor="var(--background)"),k.style.backgroundColor="transparent");const M=codemirrorSettings.get();this.setFontSize(M.fontSize),this.setFontFamily(M.fontFamily),this.onStartRepl=B=>{B.detail!==this.id&&this.stop()},document.addEventListener("start-repl",this.onStartRepl)}adjustDrawTime(){this.drawer.setDrawTime(this.painters.length?this.drawTime:[0,0])}draw(e,a){this.painters?.forEach(l=>l(this.drawContext,a,e,this.drawTime))}async drawFirstFrame(){if(this.onDraw){await this.prebaked;try{await this.repl.evaluate(this.code,!1),this.drawer.invalidate(this.repl.scheduler,-.001),this.onDraw?.(this.drawer.visibleHaps,-.001,this.painters)}catch{console.warn("first frame could not be painted")}}}async evaluate(){this.flash(),await this.repl.evaluate(this.code)}async stop(){this.repl.scheduler.stop()}async toggle(){this.repl.scheduler.started?this.repl.stop():this.evaluate()}flash(e){flash(this.editor,e)}highlight(e,a){highlightMiniLocations(this.editor,a,e)}setFontSize(e){this.root.style.fontSize=e+"px"}setFontFamily(e){this.root.style.fontFamily=e;const a=this.root.querySelector(".cm-scroller");a&&(a.style.fontFamily=e)}reconfigureExtension(e,a){if(!extensions[e]){console.warn(`extension ${e} is not known`);return}a=parseBooleans(a);const l=extensions[e](a,this);this.editor.dispatch({effects:compartments[e].reconfigure(l)}),e==="theme"&&activateTheme(a)}setLineWrappingEnabled(e){this.reconfigureExtension("isLineWrappingEnabled",e)}setBracketMatchingEnabled(e){this.reconfigureExtension("isBracketMatchingEnabled",e)}setLineNumbersDisplayed(e){this.reconfigureExtension("isLineNumbersDisplayed",e)}setBracketClosingEnabled(e){this.reconfigureExtension("isBracketClosingEnabled",e)}setTheme(e){this.reconfigureExtension("theme",e)}setAutocompletionEnabled(e){this.reconfigureExtension("isAutoCompletionEnabled",e)}updateSettings(e){this.setFontSize(e.fontSize),this.setFontFamily(e.fontFamily);for(let l in extensions)this.reconfigureExtension(l,e[l]);const a={...codemirrorSettings.get(),...e};codemirrorSettings.set(a)}changeSetting(e,a){if(extensions[e]){this.reconfigureExtension(e,a);return}else e==="fontFamily"?this.setFontFamily(a):e==="fontSize"&&this.setFontSize(a)}setCode(e){const a={from:0,to:this.editor.state.doc.length,insert:e};this.editor.dispatch({changes:a})}clear(){this.onStartRepl&&document.removeEventListener("start-repl",this.onStartRepl)}getCursorLocation(){return this.editor.state.selection.main.head}setCursorLocation(e){return this.editor.dispatch({selection:{anchor:e}})}appendCode(e){const a=this.getCursorLocation();this.setCode(this.code+e),this.setCursorLocation(a)}}function parseBooleans(o){return{true:!0,false:!1}[o]??o}function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}const index$7=Object.freeze(Object.defineProperty({__proto__:null,BlockWidget,SliderWidget,StrudelMirror,activateTheme,addWidget,codemirrorSettings,defaultSettings,flash,flashField,highlightExtension,highlightMiniLocations,initEditor,initTheme,injectStyle,isFlashEnabled,isPatternHighlightingEnabled,registerWidget,setFlash,setMiniLocations,setSliderWidgets,setWidget,settings,showMiniLocations,slider,sliderPlugin,sliderValues,sliderWithID,theme,themeColors,themes,updateMiniLocations,updateSliderWidgets,updateWidgets,widgetPlugin},Symbol.toStringTag,{value:"Module"}));async function prebake(){const o=evalScope(core,Promise.resolve().then(()=>index$a),Promise.resolve().then(()=>index$9),Promise.resolve().then(()=>index$2),Promise.resolve().then(()=>index$8),Promise.resolve().then(()=>index$7),Promise.resolve().then(()=>hydra$1),Promise.resolve().then(()=>index$1),Promise.resolve().then(()=>index)),e="https://raw.githubusercontent.com/felixroos/dough-samples/main/";await Promise.all([o,registerSynthSounds(),registerZZFXSounds(),Promise.resolve().then(()=>index$1).then(({registerSoundfonts:a})=>a()),samples(`${e}/tidal-drum-machines.json`),samples(`${e}/piano.json`),samples(`${e}/Dirt-Samples.json`),samples(`${e}/EmuSP12.json`),samples(`${e}/vcsl.json`)])}const maxPan=noteToMidi$1("C8"),panwidth=(o,e)=>o*e+(1-e)/2;if(Pattern$1.prototype.piano=function(){return this.fmap(o=>({...o,clip:o.clip??1})).s("piano").release(.1).fmap(o=>{const e=valueToMidi$1(o),a=panwidth(Math.min(Math.round(e)/maxPan,1),.5);return{...o,pan:(o.pan||1)*a}})},typeof HTMLElement<"u"){class o extends HTMLElement{static observedAttributes=["code"];settings=codemirrorSettings.get();editor=null;constructor(){super()}attributeChangedCallback(a,l,u){a==="code"&&(this.code=u,this.editor?.setCode(u))}connectedCallback(){setTimeout(()=>{const f=(this.innerHTML+"").replace("<!--","").replace("-->","").trim();f&&this.setAttribute("code",f)});const a=document.createElement("div");this.parentElement.insertBefore(a,this.nextSibling);const l=getDrawContext(),u=[-2,2];this.editor=new StrudelMirror({defaultOutput:webaudioOutput,getTime:()=>getAudioContext().currentTime,transpiler,root:a,initialCode:"// LOADING",pattern:silence,drawTime:u,drawContext:l,prebake,onUpdateState:f=>{const d=new CustomEvent("update",{detail:f});this.dispatchEvent(d)}}),this.editor.updateSettings(this.settings),this.editor.setCode(this.code)}}customElements.define("strudel-editor",o)}var fillStr$1=(o,e)=>Array(Math.abs(e)+1).join(o);function deprecate(o,e,a){return function(...l){return console.warn(`${o} is deprecated. Use ${e}.`),a.apply(this,l)}}function isNamed(o){return o!==null&&typeof o=="object"&&typeof o.name=="string"}function isPitch(o){return o!==null&&typeof o=="object"&&typeof o.step=="number"&&typeof o.alt=="number"}var FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(o=>Math.floor(o*7/12));function encode(o){const{step:e,alt:a,oct:l,dir:u=1}=o,f=FIFTHS[e]+7*a;if(l===void 0)return[u*f];const d=l-STEPS_TO_OCTS[e]-4*a;return[u*f,u*d]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function decode(o){const[e,a,l]=o,u=FIFTHS_TO_STEPS[unaltered(e)],f=Math.floor((e+1)/7);if(a===void 0)return{step:u,alt:f,dir:l};const d=a+4*f+STEPS_TO_OCTS[u];return{step:u,alt:f,oct:d,dir:l}}function unaltered(o){const e=(o+1)%7;return e<0?7+e:e}var NoNote={empty:!0,name:"",pc:"",acc:""},cache$2=new Map,stepToLetter=o=>"CDEFGAB".charAt(o),altToAcc=o=>o<0?fillStr$1("b",-o):fillStr$1("#",o),accToAlt=o=>o[0]==="b"?-o.length:o.length;function note(o){const e=JSON.stringify(o),a=cache$2.get(e);if(a)return a;const l=typeof o=="string"?parse$2(o):isPitch(o)?note(pitchName(o)):isNamed(o)?note(o.name):NoNote;return cache$2.set(e,l),l}var REGEX$5=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(o){const e=REGEX$5.exec(o);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function coordToNote(o){return note(decode(o))}var mod=(o,e)=>(o%e+e)%e,SEMI=[0,2,4,5,7,9,11];function parse$2(o){const e=tokenizeNote(o);if(e[0]===""||e[3]!=="")return NoNote;const a=e[0],l=e[1],u=e[2],f=(a.charCodeAt(0)+3)%7,d=accToAlt(l),p=u.length?+u:void 0,g=encode({step:f,alt:d,oct:p}),b=a+l+u,O=a+l,A=(SEMI[f]+d+120)%12,k=p===void 0?mod(SEMI[f]+d,12)-12*99:SEMI[f]+d+12*(p+1),M=k>=0&&k<=127?k:null,B=p===void 0?null:Math.pow(2,(k-69)/12)*440;return{empty:!1,acc:l,alt:d,chroma:A,coord:g,freq:B,height:k,letter:a,midi:M,name:b,oct:p,pc:O,step:f}}function pitchName(o){const{step:e,alt:a,oct:l}=o,u=stepToLetter(e);if(!u)return"";const f=u+altToAcc(a);return l||l===0?f+l:f}var NoInterval={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX2=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(o){const e=REGEX2.exec(`${o}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var cache2={};function interval(o){return typeof o=="string"?cache2[o]||(cache2[o]=parse2(o)):isPitch(o)?interval(pitchName2(o)):isNamed(o)?interval(o.name):NoInterval}var SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse2(o){const e=tokenizeInterval(o);if(e[0]==="")return NoInterval;const a=+e[0],l=e[1],u=(Math.abs(a)-1)%7,f=TYPES[u];if(f==="M"&&l==="P")return NoInterval;const d=f==="M"?"majorable":"perfectable",p=""+a+l,g=a<0?-1:1,b=a===8||a===-8?a:g*(u+1),O=qToAlt(d,l),A=Math.floor((Math.abs(a)-1)/7),k=g*(SIZES[u]+O+12*A),M=(g*(SIZES[u]+O)%12+12)%12,B=encode({step:u,alt:O,oct:A,dir:g});return{empty:!1,name:p,num:a,q:l,step:u,alt:O,dir:g,type:d,simple:b,semitones:k,chroma:M,coord:B,oct:A}}function coordToInterval(o,e){const[a,l=0]=o,u=a*7+l*12<0,f=e||u?[-a,-l,-1]:[a,l,1];return interval(decode(f))}function qToAlt(o,e){return e==="M"&&o==="majorable"||e==="P"&&o==="perfectable"?0:e==="m"&&o==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(o==="perfectable"?e.length:e.length+1):0}function pitchName2(o){const{step:e,alt:a,oct:l=0,dir:u}=o;if(!u)return"";const f=e+1+7*l,d=f===0?e+1:f,p=u<0?"-":"",g=TYPES[e]==="M"?"majorable":"perfectable";return p+d+altToQ(g,a)}function altToQ(o,e){return e===0?o==="majorable"?"M":"P":e===-1&&o==="majorable"?"m":e>0?fillStr$1("A",e):fillStr$1("d",o==="perfectable"?e:e+1)}function transpose$4(o,e){const a=note(o),l=Array.isArray(e)?e:interval(e).coord;if(a.empty||!l||l.length<2)return"";const u=a.coord,f=u.length===1?[u[0]+l[0]]:[u[0]+l[0],u[1]+l[1]];return coordToNote(f).name}function tonicIntervalsTransposer(o,e){const a=o.length;return l=>{if(!e)return"";const u=l<0?(a- -l%a)%a:l%a,f=Math.floor(l/a),d=transpose$4(e,[0,f]);return transpose$4(d,o[u])}}function distance$3(o,e){const a=note(o),l=note(e);if(a.empty||l.empty)return"";const u=a.coord,f=l.coord,d=f[0]-u[0],p=u.length===2&&f.length===2?f[1]-u[1]:-Math.floor(d*7/12),g=l.height===a.height&&l.midi!==null&&a.midi!==null&&a.step>l.step;return coordToInterval([d,p],g).name}const Core=Object.freeze(Object.defineProperty({__proto__:null,accToAlt,altToAcc,coordToInterval,coordToNote,decode,deprecate,distance:distance$3,encode,fillStr:fillStr$1,interval,isNamed,isPitch,note,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$4},Symbol.toStringTag,{value:"Module"}));var fillStr=(o,e)=>Array(e+1).join(o),REGEX$4=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize$3(o){const e=REGEX$4.exec(o);return e?[e[1],e[2],e[3]]:["","",""]}function abcToScientificNotation(o){const[e,a,l]=tokenize$3(o);if(a==="")return"";let u=4;for(let d=0;d<l.length;d++)u+=l.charAt(d)===","?-1:1;const f=e[0]==="_"?e.replace(/_/g,"b"):e[0]==="^"?e.replace(/\^/g,"#"):"";return a.charCodeAt(0)>96?a.toUpperCase()+f+(u+1):a+f+u}function scientificToAbcNotation(o){const e=note(o);if(e.empty||!e.oct&&e.oct!==0)return"";const{letter:a,acc:l,oct:u}=e,f=l[0]==="b"?l.replace(/b/g,"_"):l.replace(/#/g,"^"),d=u>4?a.toLowerCase():a,p=u===5?"":u>4?fillStr("'",u-5):fillStr(",",4-u);return f+d+p}function transpose$3(o,e){return scientificToAbcNotation(transpose$4(abcToScientificNotation(o),e))}function distance$2(o,e){return distance$3(abcToScientificNotation(o),abcToScientificNotation(e))}var abc_notation_default={abcToScientificNotation,scientificToAbcNotation,tokenize:tokenize$3,transpose:transpose$3,distance:distance$2};function ascR$1(o,e){const a=[];for(;e--;a[e]=e+o);return a}function descR$1(o,e){const a=[];for(;e--;a[e]=o-e);return a}function range$1(o,e){return o<e?ascR$1(o,e-o+1):descR$1(o,o-e+1)}function rotate$1(o,e){const a=e.length,l=(o%a+a)%a;return e.slice(l,a).concat(e.slice(0,l))}function compact$1(o){return o.filter(e=>e===0||e)}function sortedNoteNames(o){return o.map(a=>note(a)).filter(a=>!a.empty).sort((a,l)=>a.height-l.height).map(a=>a.name)}function sortedUniqNoteNames(o){return sortedNoteNames(o).filter((e,a,l)=>a===0||e!==l[a-1])}function shuffle$1(o,e=Math.random){let a,l,u=o.length;for(;u;)a=Math.floor(e()*u--),l=o[u],o[u]=o[a],o[a]=l;return o}function permutations$1(o){return o.length===0?[[]]:permutations$1(o.slice(1)).reduce((e,a)=>e.concat(o.map((l,u)=>{const f=a.slice();return f.splice(u,0,o[0]),f})),[])}const index$6=Object.freeze(Object.defineProperty({__proto__:null,compact:compact$1,permutations:permutations$1,range:range$1,rotate:rotate$1,shuffle:shuffle$1,sortedNoteNames,sortedUniqNoteNames},Symbol.toStringTag,{value:"Module"}));function ascR(o,e){const a=[];for(;e--;a[e]=e+o);return a}function descR(o,e){const a=[];for(;e--;a[e]=o-e);return a}function range(o,e){return o<e?ascR(o,e-o+1):descR(o,o-e+1)}function rotate(o,e){const a=e.length,l=(o%a+a)%a;return e.slice(l,a).concat(e.slice(0,l))}function compact(o){return o.filter(e=>e===0||e)}function shuffle(o,e=Math.random){let a,l,u=o.length;for(;u;)a=Math.floor(e()*u--),l=o[u],o[u]=o[a],o[a]=l;return o}function permutations(o){return o.length===0?[[]]:permutations(o.slice(1)).reduce((e,a)=>e.concat(o.map((l,u)=>{const f=a.slice();return f.splice(u,0,o[0]),f})),[])}var collection_default={compact,permutations,range,rotate,shuffle},EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=o=>Number(o).toString(2),chromaToNumber=o=>parseInt(o,2),REGEX$3=/^[01]{12}$/;function isChroma(o){return REGEX$3.test(o)}var isPcsetNum=o=>typeof o=="number"&&o>=0&&o<=4095,isPcset=o=>o&&isChroma(o.chroma),cache$1={[EmptyPcset.chroma]:EmptyPcset};function get$a(o){const e=isChroma(o)?o:isPcsetNum(o)?setNumToChroma(o):Array.isArray(o)?listToChroma(o):isPcset(o)?o.chroma:EmptyPcset.chroma;return cache$1[e]=cache$1[e]||chromaToPcset(e)}var pcset$1=deprecate("Pcset.pcset","Pcset.get",get$a),chroma$2=o=>get$a(o).chroma,intervals=o=>get$a(o).intervals,num$1=o=>get$a(o).setNum,IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(o){const e=[];for(let a=0;a<12;a++)o.charAt(a)==="1"&&e.push(IVLS[a]);return e}function chromas(){return range(2048,4095).map(setNumToChroma)}function modes$1(o,e=!0){const l=get$a(o).chroma.split("");return compact(l.map((u,f)=>{const d=rotate(f,l);return e&&d[0]==="0"?null:d.join("")}))}function isEqual(o,e){return get$a(o).setNum===get$a(e).setNum}function isSubsetOf(o){const e=get$a(o).setNum;return a=>{const l=get$a(a).setNum;return e&&e!==l&&(l&e)===l}}function isSupersetOf(o){const e=get$a(o).setNum;return a=>{const l=get$a(a).setNum;return e&&e!==l&&(l|e)===l}}function isNoteIncludedIn(o){const e=get$a(o);return a=>{const l=note(a);return e&&!l.empty&&e.chroma.charAt(l.chroma)==="1"}}function filter(o){const e=isNoteIncludedIn(o);return a=>a.filter(e)}var pcset_default={get:get$a,chroma:chroma$2,num:num$1,intervals,chromas,isSupersetOf,isSubsetOf,isNoteIncludedIn,isEqual,filter,modes:modes$1,pcset:pcset$1};function chromaRotations(o){const e=o.split("");return e.map((a,l)=>rotate(l,e).join(""))}function chromaToPcset(o){const e=chromaToNumber(o),a=chromaRotations(o).map(chromaToNumber).filter(f=>f>=2048).sort()[0],l=setNumToChroma(a),u=chromaToIntervals(o);return{empty:!1,name:"",setNum:e,chroma:o,normalized:l,intervals:u}}function listToChroma(o){if(o.length===0)return EmptyPcset.chroma;let e;const a=[0,0,0,0,0,0,0,0,0,0,0,0];for(let l=0;l<o.length;l++)e=note(o[l]),e.empty&&(e=interval(o[l])),e.empty||(a[e.chroma]=1);return a.join("")}var CHORDS=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$2=CHORDS,NoChordType={...EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},dictionary$1=[],index$5={};function get$9(o){return index$5[o]||NoChordType}var chordType=deprecate("ChordType.chordType","ChordType.get",get$9);function names$8(){return dictionary$1.map(o=>o.name).filter(o=>o)}function symbols(){return dictionary$1.map(o=>o.aliases[0]).filter(o=>o)}function keys$1(){return Object.keys(index$5)}function all$2(){return dictionary$1.slice()}var entries$2=deprecate("ChordType.entries","ChordType.all",all$2);function removeAll$1(){dictionary$1=[],index$5={}}function add$3(o,e,a){const l=getQuality(o),u={...get$a(o),name:a||"",quality:l,intervals:o,aliases:e};dictionary$1.push(u),u.name&&(index$5[u.name]=u),index$5[u.setNum]=u,index$5[u.chroma]=u,u.aliases.forEach(f=>addAlias$1(u,f))}function addAlias$1(o,e){index$5[e]=o}function getQuality(o){const e=a=>o.indexOf(a)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}data_default$2.forEach(([o,e,a])=>add$3(o.split(" "),a.split(" "),e)),dictionary$1.sort((o,e)=>o.setNum-e.setNum);var chord_type_default={names:names$8,symbols,get:get$9,all:all$2,add:add$3,removeAll:removeAll$1,keys:keys$1,entries:entries$2,chordType},namedSet=o=>{const e=o.reduce((a,l)=>{const u=note(l).chroma;return u!==void 0&&(a[u]=a[u]||note(l).name),a},{});return a=>e[a]};function detect$1(o,e={}){const a=o.map(u=>note(u).pc).filter(u=>u);return note.length===0?[]:findMatches(a,1,e).filter(u=>u.weight).sort((u,f)=>f.weight-u.weight).map(u=>u.name)}var BITMASK={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},testChromaNumber=o=>e=>!!(e&o),hasAnyThird=testChromaNumber(BITMASK.anyThirds),hasPerfectFifth=testChromaNumber(BITMASK.perfectFifth),hasAnySeventh=testChromaNumber(BITMASK.anySeventh),hasNonPerfectFifth=testChromaNumber(BITMASK.nonPerfectFifths);function hasAnyThirdAndPerfectFifthAndAnySeventh(o){const e=parseInt(o.chroma,2);return hasAnyThird(e)&&hasPerfectFifth(e)&&hasAnySeventh(e)}function withPerfectFifth(o){const e=parseInt(o,2);return hasNonPerfectFifth(e)?o:(e|16).toString(2)}function findMatches(o,e,a){const l=o[0],u=note(l).chroma,f=namedSet(o),d=modes$1(o,!1),p=[];return d.forEach((g,b)=>{const O=a.assumePerfectFifth&&withPerfectFifth(g);all$2().filter(k=>a.assumePerfectFifth&&hasAnyThirdAndPerfectFifthAndAnySeventh(k)?k.chroma===O:k.chroma===g).forEach(k=>{const M=k.aliases[0],B=f(b);b!==u?p.push({weight:.5*e,name:`${B}${M}/${l}`}):p.push({weight:1*e,name:`${B}${M}`})})}),p}var SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],data_default$1=SCALES,NoScaleType={...EmptyPcset,intervals:[],aliases:[]},dictionary=[],index$4={};function names$7(){return dictionary.map(o=>o.name)}function get$8(o){return index$4[o]||NoScaleType}var scaleType=deprecate("ScaleDictionary.scaleType","ScaleType.get",get$8);function all$1(){return dictionary.slice()}var entries$1=deprecate("ScaleDictionary.entries","ScaleType.all",all$1);function keys(){return Object.keys(index$4)}function removeAll(){dictionary=[],index$4={}}function add$2(o,e,a=[]){const l={...get$a(o),name:e,intervals:o,aliases:a};return dictionary.push(l),index$4[l.name]=l,index$4[l.setNum]=l,index$4[l.chroma]=l,l.aliases.forEach(u=>addAlias(l,u)),l}function addAlias(o,e){index$4[e]=o}data_default$1.forEach(([o,e,...a])=>add$2(o.split(" "),e,a));var scale_type_default={names:names$7,get:get$8,all:all$1,add:add$2,removeAll,keys,entries:entries$1,scaleType},NoChord={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]},NUM_TYPES=/^(6|64|7|9|11|13)$/;function tokenize$2(o){const[e,a,l,u]=tokenizeNote(o);return e===""?["",o]:e==="A"&&u==="ug"?["","aug"]:!u&&(l==="4"||l==="5")?[e+a,l]:NUM_TYPES.test(l)?[e+a,l+u]:[e+a+l,u]}function get$7(o){if(o==="")return NoChord;if(Array.isArray(o)&&o.length===2)return getChord(o[1],o[0]);{const[e,a]=tokenize$2(o),l=getChord(a,e);return l.empty?getChord(o):l}}function getChord(o,e,a){const l=get$9(o),u=note(e||""),f=note(a||"");if(l.empty||e&&u.empty||a&&f.empty)return NoChord;const d=distance$3(u.pc,f.pc),p=l.intervals.indexOf(d)+1;if(!f.empty&&!p)return NoChord;const g=Array.from(l.intervals);for(let k=1;k<p;k++){const M=g[0][0],B=g[0][1],N=parseInt(M,10)+7;g.push(`${N}${B}`),g.shift()}const b=u.empty?[]:g.map(k=>transpose$4(u,k));o=l.aliases.indexOf(o)!==-1?o:l.aliases[0];const O=`${u.empty?"":u.pc}${o}${f.empty||p<=1?"":"/"+f.pc}`,A=`${e?u.pc+" ":""}${l.name}${p>1&&a?" over "+f.pc:""}`;return{...l,name:A,symbol:O,type:l.name,root:f.name,intervals:g,rootDegree:p,tonic:u.name,notes:b}}var chord=deprecate("Chord.chord","Chord.get",get$7);function transpose$2(o,e){const[a,l]=tokenize$2(o);return a?transpose$4(a,e)+l:o}function chordScales(o){const e=get$7(o),a=isSupersetOf(e.chroma);return all$1().filter(l=>a(l.chroma)).map(l=>l.name)}function extended$1(o){const e=get$7(o),a=isSupersetOf(e.chroma);return all$2().filter(l=>a(l.chroma)).map(l=>e.tonic+l.aliases[0])}function reduced$1(o){const e=get$7(o),a=isSubsetOf(e.chroma);return all$2().filter(l=>a(l.chroma)).map(l=>e.tonic+l.aliases[0])}function degrees$1(o){const{intervals:e,tonic:a}=get$7(o),l=tonicIntervalsTransposer(e,a);return u=>u?l(u>0?u-1:u):""}function steps$1(o){const{intervals:e,tonic:a}=get$7(o);return tonicIntervalsTransposer(e,a)}var chord_default={getChord,get:get$7,detect:detect$1,chordScales,extended:extended$1,reduced:reduced$1,tokenize:tokenize$2,transpose:transpose$2,degrees:degrees$1,steps:steps$1,chord},DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],data_default=DATA,VALUES=[];data_default.forEach(([o,e,a])=>add$1(o,e,a));var NoDuration={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names$6(){return VALUES.reduce((o,e)=>(e.names.forEach(a=>o.push(a)),o),[])}function shorthands(){return VALUES.map(o=>o.shorthand)}var REGEX$2=/^([^.]+)(\.*)$/;function get$6(o){const[e,a,l]=REGEX$2.exec(o)||[],u=VALUES.find(p=>p.shorthand===a||p.names.includes(a));if(!u)return NoDuration;const f=calcDots(u.fraction,l.length),d=f[0]/f[1];return{...u,name:o,dots:l,value:d,fraction:f}}var value=o=>get$6(o).value,fraction=o=>get$6(o).fraction,duration_value_default={names:names$6,shorthands,get:get$6,value,fraction};function add$1(o,e,a){VALUES.push({empty:!1,dots:"",name:"",value:1/o,fraction:o<1?[1/o,1]:[1,o],shorthand:e,names:a})}function calcDots(o,e){const a=Math.pow(2,e);let l=o[0]*a,u=o[1]*a;const f=l;for(let d=0;d<e;d++)l+=f/Math.pow(2,d+1);for(;l%2===0&&u%2===0;)l/=2,u/=2;return[l,u]}function names$5(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get$5=interval,name$1=o=>interval(o).name,semitones=o=>interval(o).semitones,quality=o=>interval(o).q,num=o=>interval(o).num;function simplify$1(o){const e=interval(o);return e.empty?"":e.simple+e.q}function invert(o){const e=interval(o);if(e.empty)return"";const a=(7-e.step)%7,l=e.type==="perfectable"?-e.alt:-(e.alt+1);return interval({step:a,alt:l,oct:e.oct,dir:e.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(o){const e=o<0?-1:1,a=Math.abs(o),l=a%12,u=Math.floor(a/12);return e*(IN[l]+7*u)+IQ[l]}var distance$1=distance$3,add=combinator((o,e)=>[o[0]+e[0],o[1]+e[1]]),addTo=o=>e=>add(o,e),substract=combinator((o,e)=>[o[0]-e[0],o[1]-e[1]]);function transposeFifths$1(o,e){const a=get$5(o);if(a.empty)return"";const[l,u,f]=a.coord;return coordToInterval([l+e,u,f]).name}var interval_default={names:names$5,get:get$5,name:name$1,num,semitones,quality,fromSemitones,distance:distance$1,invert,simplify:simplify$1,add,addTo,substract,transposeFifths:transposeFifths$1};function combinator(o){return(e,a)=>{const l=interval(e).coord,u=interval(a).coord;if(l&&u){const f=o(l,u);return coordToInterval(f).name}}}function isMidi(o){return+o>=0&&+o<=127}function toMidi(o){if(isMidi(o))return+o;const e=note(o);return e.empty?null:e.midi}function midiToFreq(o,e=440){return Math.pow(2,(o-69)/12)*e}var L2=Math.log(2),L440=Math.log(440);function freqToMidi(o){const e=12*(Math.log(o)-L440)/L2+69;return Math.round(e*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(o,e={}){if(isNaN(o)||o===-1/0||o===1/0)return"";o=Math.round(o);const l=(e.sharps===!0?SHARPS:FLATS)[o%12];if(e.pitchClass)return l;const u=Math.floor(o/12)-1;return l+u}function chroma$1(o){return o%12}function pcsetFromChroma(o){return o.split("").reduce((e,a,l)=>(l<12&&a==="1"&&e.push(l),e),[])}function pcsetFromMidi(o){return o.map(chroma$1).sort((e,a)=>e-a).filter((e,a,l)=>a===0||e!==l[a-1])}function pcset(o){return Array.isArray(o)?pcsetFromMidi(o):pcsetFromChroma(o)}function pcsetNearest(o){const e=pcset(o);return a=>{const l=chroma$1(a);for(let u=0;u<12;u++){if(e.includes(l+u))return a+u;if(e.includes(l-u))return a-u}}}function pcsetSteps(o,e){const a=pcset(o),l=a.length;return u=>{const f=u<0?(l- -u%l)%l:u%l,d=Math.floor(u/l);return a[f]+d*12+e}}function pcsetDegrees(o,e){const a=pcsetSteps(o,e);return l=>{if(l!==0)return a(l>0?l-1:l)}}var midi_default={chroma:chroma$1,freqToMidi,isMidi,midiToFreq,midiToNoteName,pcsetNearest,pcset,pcsetDegrees,pcsetSteps,toMidi},NAMES$2=["C","D","E","F","G","A","B"],toName=o=>o.name,onlyNotes=o=>o.map(note).filter(e=>!e.empty);function names$4(o){return o===void 0?NAMES$2.slice():Array.isArray(o)?onlyNotes(o).map(toName):[]}var get$4=note,name=o=>get$4(o).name,pitchClass=o=>get$4(o).pc,accidentals=o=>get$4(o).acc,octave=o=>get$4(o).oct,midi=o=>get$4(o).midi,freq=o=>get$4(o).freq,chroma=o=>get$4(o).chroma;function fromMidi(o){return midiToNoteName(o)}function fromFreq(o){return midiToNoteName(freqToMidi(o))}function fromFreqSharps(o){return midiToNoteName(freqToMidi(o),{sharps:!0})}function fromMidiSharps(o){return midiToNoteName(o,{sharps:!0})}var transpose$1=transpose$4,tr=transpose$4,transposeBy=o=>e=>transpose$1(e,o),trBy=transposeBy,transposeFrom=o=>e=>transpose$1(o,e),trFrom=transposeFrom;function transposeFifths(o,e){return transpose$1(o,[e,0])}var trFifths=transposeFifths;function transposeOctaves(o,e){return transpose$1(o,[0,e])}var ascending=(o,e)=>o.height-e.height,descending=(o,e)=>e.height-o.height;function sortedNames(o,e){return e=e||ascending,onlyNotes(o).sort(e).map(toName)}function sortedUniqNames(o){return sortedNames(o,ascending).filter((e,a,l)=>a===0||e!==l[a-1])}var simplify=o=>{const e=get$4(o);return e.empty?"":midiToNoteName(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function enharmonic(o,e){const a=get$4(o);if(a.empty)return"";const l=get$4(e||midiToNoteName(a.midi||a.chroma,{sharps:a.alt<0,pitchClass:!0}));if(l.empty||l.chroma!==a.chroma)return"";if(a.oct===void 0)return l.pc;const u=a.chroma-a.alt,f=l.chroma-l.alt,d=u>11||f<0?-1:u<0||f>11?1:0,p=a.oct+d;return l.pc+p}var note_default={names:names$4,get:get$4,name,pitchClass,accidentals,octave,midi,ascending,descending,sortedNames,sortedUniqNames,fromMidi,fromMidiSharps,freq,fromFreq,fromFreqSharps,chroma,transpose:transpose$1,tr,transposeBy,trBy,transposeFrom,trFrom,transposeFifths,transposeOctaves,trFifths,simplify,enharmonic},NoRomanNumeral={empty:!0,name:"",chordType:""},cache={};function get$3(o){return typeof o=="string"?cache[o]||(cache[o]=parse$1(o)):typeof o=="number"?get$3(NAMES$1[o]||""):isPitch(o)?fromPitch(o):isNamed(o)?get$3(o.name):NoRomanNumeral}var romanNumeral=deprecate("RomanNumeral.romanNumeral","RomanNumeral.get",get$3);function names$3(o=!0){return(o?NAMES$1:NAMES_MINOR).slice()}function fromPitch(o){return get$3(altToAcc(o.alt)+NAMES$1[o.step])}var REGEX$1=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize$1(o){return REGEX$1.exec(o)||["","","",""]}var ROMANS="I II III IV V VI VII",NAMES$1=ROMANS.split(" "),NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse$1(o){const[e,a,l,u]=tokenize$1(o);if(!l)return NoRomanNumeral;const f=l.toUpperCase(),d=NAMES$1.indexOf(f),p=accToAlt(a),g=1;return{empty:!1,name:e,roman:l,interval:interval({step:d,alt:p,dir:g}).name,acc:a,chordType:u,alt:p,step:d,major:l===f,oct:0,dir:g}}var roman_numeral_default={names:names$3,get:get$3,romanNumeral},Empty=Object.freeze([]),NoKey={type:"major",tonic:"",alteration:0,keySignature:""},NoKeyScale={tonic:"",grades:Empty,intervals:Empty,scale:Empty,triads:Empty,chords:Empty,chordsHarmonicFunction:Empty,chordScales:Empty},NoMajorKey={...NoKey,...NoKeyScale,type:"major",minorRelative:"",scale:Empty,secondaryDominants:Empty,secondaryDominantsMinorRelative:Empty,substituteDominants:Empty,substituteDominantsMinorRelative:Empty},NoMinorKey={...NoKey,type:"minor",relativeMajor:"",natural:NoKeyScale,harmonic:NoKeyScale,melodic:NoKeyScale},mapScaleToType=(o,e,a="")=>e.map((l,u)=>`${o[u]}${a}${l}`);function keyScale(o,e,a,l,u){return f=>{const d=o.map(g=>get$3(g).interval||""),p=d.map(g=>transpose$4(f,g));return{tonic:f,grades:o,intervals:d,scale:p,triads:mapScaleToType(p,e),chords:mapScaleToType(p,a),chordsHarmonicFunction:l.slice(),chordScales:mapScaleToType(p,u," ")}}}var distInFifths=(o,e)=>{const a=note(o),l=note(e);return a.empty||l.empty?0:l.coord[0]-a.coord[0]},MajorScale=keyScale("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NaturalScale=keyScale("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),HarmonicScale=keyScale("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),MelodicScale=keyScale("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function majorKey(o){const e=note(o).pc;if(!e)return NoMajorKey;const a=MajorScale(e),l=distInFifths("C",e),u=f=>{const d=get$3(f);return d.empty?"":transpose$4(o,d.interval)+d.chordType};return{...a,type:"major",minorRelative:transpose$4(e,"-3m"),alteration:l,keySignature:altToAcc(l),secondaryDominants:"- VI7 VII7 I7 II7 III7 -".split(" ").map(u),secondaryDominantsMinorRelative:"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ").map(u),substituteDominants:"- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ").map(u),substituteDominantsMinorRelative:"- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" ").map(u)}}function minorKey(o){const e=note(o).pc;if(!e)return NoMinorKey;const a=distInFifths("C",e)-3;return{type:"minor",tonic:e,relativeMajor:transpose$4(e,"3m"),alteration:a,keySignature:altToAcc(a),natural:NaturalScale(e),harmonic:HarmonicScale(e),melodic:MelodicScale(e)}}function majorTonicFromKeySignature(o){return typeof o=="number"?transposeFifths("C",o):typeof o=="string"&&/^b+|#+$/.test(o)?transposeFifths("C",accToAlt(o)):null}var key_default={majorKey,majorTonicFromKeySignature,minorKey},MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index$3={};modes.forEach(o=>{index$3[o.name]=o,o.aliases.forEach(e=>{index$3[e]=o})});function get$2(o){return typeof o=="string"?index$3[o.toLowerCase()]||NoMode:o&&o.name?get$2(o.name):NoMode}var mode=deprecate("Mode.mode","Mode.get",get$2);function all(){return modes.slice()}var entries=deprecate("Mode.mode","Mode.all",all);function names$2(){return modes.map(o=>o.name)}function toMode(o){const[e,a,l,u,f,d,p]=o,g=p?[p]:[],b=Number(a).toString(2);return{empty:!1,intervals:get$8(u).intervals,modeNum:e,chroma:b,normalized:b,name:u,setNum:a,alt:l,triad:f,seventh:d,aliases:g}}function notes(o,e){return get$2(o).intervals.map(a=>transpose$4(e,a))}function chords(o){return(e,a)=>{const l=get$2(e);if(l.empty)return[];const u=rotate(l.modeNum,o),f=l.intervals.map(d=>transpose$4(a,d));return u.map((d,p)=>f[p]+d)}}var triads$1=chords(MODES.map(o=>o[4])),seventhChords=chords(MODES.map(o=>o[5]));function distance(o,e){const a=get$2(e),l=get$2(o);return a.empty||l.empty?"":simplify$1(transposeFifths$1("1P",l.alt-a.alt))}function relativeTonic(o,e,a){return transpose$4(a,distance(o,e))}var mode_default={get:get$2,names:names$2,all,distance,relativeTonic,notes,triads:triads$1,seventhChords,entries,mode};function fromRomanNumerals(o,e){return e.map(get$3).map(l=>transpose$4(o,interval(l))+l.chordType)}function toRomanNumerals(o,e){return e.map(a=>{const[l,u]=tokenize$2(a),f=distance$3(o,l);return get$3(interval(f)).name+u})}var progression_default={fromRomanNumerals,toRomanNumerals};function numeric(o){const e=compact(o.map(a=>typeof a=="number"?a:toMidi(a)));return!o.length||e.length!==o.length?[]:e.reduce((a,l)=>{const u=a[a.length-1];return a.concat(range(u,l).slice(1))},[e[0]])}function chromatic(o,e){return numeric(o).map(a=>midiToNoteName(a,e))}var range_default={numeric,chromatic},NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(o){if(typeof o!="string")return["",""];const e=o.indexOf(" "),a=note(o.substring(0,e));if(a.empty){const u=note(o);return u.empty?["",o]:[u.name,""]}const l=o.substring(a.name.length+1);return[a.name,l.length?l:""]}var names$1=names$7;function get$1(o){const e=Array.isArray(o)?o:tokenize(o),a=note(e[0]).name,l=get$8(e[1]);if(l.empty)return NoScale;const u=l.name,f=a?l.intervals.map(p=>transpose$4(a,p)):[],d=a?a+" "+u:u;return{...l,name:d,type:u,tonic:a,notes:f}}var scale$1=deprecate("Scale.scale","Scale.get",get$1);function detect(o,e={}){const a=chroma$2(o),l=note(e.tonic??o[0]??""),u=l.chroma;if(u===void 0)return[];const f=a.split("");f[u]="1";const d=rotate(u,f).join(""),p=all$1().find(b=>b.chroma===d),g=[];return p&&g.push(l.name+" "+p.name),e.match==="exact"||extended(d).forEach(b=>{g.push(l.name+" "+b)}),g}function scaleChords(o){const e=get$1(o),a=isSubsetOf(e.chroma);return all$2().filter(l=>a(l.chroma)).map(l=>l.aliases[0])}function extended(o){const e=isChroma(o)?o:get$1(o).chroma,a=isSupersetOf(e);return all$1().filter(l=>a(l.chroma)).map(l=>l.name)}function reduced(o){const e=isSubsetOf(get$1(o).chroma);return all$1().filter(a=>e(a.chroma)).map(a=>a.name)}function scaleNotes(o){const e=o.map(u=>note(u).pc).filter(u=>u),a=e[0],l=sortedUniqNames(e);return rotate(l.indexOf(a),l)}function modeNames(o){const e=get$1(o);if(e.empty)return[];const a=e.tonic?e.notes:e.intervals;return modes$1(e.chroma).map((l,u)=>{const f=get$1(l).name;return f?[a[u],f]:["",""]}).filter(l=>l[0])}function getNoteNameOf(o){const e=Array.isArray(o)?scaleNotes(o):get$1(o).notes,a=e.map(l=>note(l).chroma);return l=>{const u=note(typeof l=="number"?fromMidi(l):l),f=u.height;if(f===void 0)return;const d=f%12,p=a.indexOf(d);if(p!==-1)return enharmonic(u.name,e[p])}}function rangeOf(o){const e=getNoteNameOf(o);return(a,l)=>{const u=note(a).height,f=note(l).height;return u===void 0||f===void 0?[]:range(u,f).map(e).filter(d=>d)}}function degrees(o){const{intervals:e,tonic:a}=get$1(o),l=tonicIntervalsTransposer(e,a);return u=>u?l(u>0?u-1:u):""}function steps(o){const{intervals:e,tonic:a}=get$1(o);return tonicIntervalsTransposer(e,a)}var scale_default={degrees,detect,extended,get:get$1,modeNames,names:names$1,rangeOf,reduced,scaleChords,scaleNotes,steps,tokenize,scale:scale$1},NONE={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},NAMES=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function names(){return NAMES.slice()}var REGEX=/^(\d*\d(?:\+\d)*)\/(\d+)$/,CACHE=new Map;function get(o){const e=JSON.stringify(o),a=CACHE.get(e);if(a)return a;const l=build(parse(o));return CACHE.set(e,l),l}function parse(o){if(typeof o=="string"){const[f,d,p]=REGEX.exec(o)||[];return parse([d,p])}const[e,a]=o,l=+a;if(typeof e=="number")return[e,l];const u=e.split("+").map(f=>+f);return u.length===1?[u[0],l]:[u,l]}var time_signature_default={names,parse,get},isPowerOfTwo=o=>Math.log(o)/Math.log(2)%1===0;function build([o,e]){const a=Array.isArray(o)?o.reduce((p,g)=>p+g,0):o,l=e;if(a===0||l===0)return NONE;const u=Array.isArray(o)?`${o.join("+")}/${e}`:`${o}/${e}`,f=Array.isArray(o)?o:[],d=l===4||l===2?"simple":l===8&&a%3===0?"compound":isPowerOfTwo(l)?"irregular":"irrational";return{empty:!1,name:u,type:d,upper:a,lower:l,additive:f}}var Tonal=Core,PcSet=pcset_default,ChordDictionary=chord_type_default,ScaleDictionary=scale_type_default;const dist$1=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:abc_notation_default,Array:index$6,Chord:chord_default,ChordDictionary,ChordType:chord_type_default,Collection:collection_default,Core,DurationValue:duration_value_default,Interval:interval_default,Key:key_default,Midi:midi_default,Mode:mode_default,Note:note_default,PcSet,Pcset:pcset_default,Progression:progression_default,Range:range_default,RomanNumeral:roman_numeral_default,Scale:scale_default,ScaleDictionary,ScaleType:scale_type_default,TimeSignature:time_signature_default,Tonal,accToAlt,altToAcc,coordToInterval,coordToNote,decode,deprecate,distance:distance$3,encode,fillStr:fillStr$1,interval,isNamed,isPitch,note,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$4},Symbol.toStringTag,{value:"Module"})),flats=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],pcs=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],sharps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],accs={b:-1,"#":1},pc2chroma=o=>{const[e,...a]=o.split("");return pcs.indexOf(e.toLowerCase())+a.reduce((l,u)=>l+accs[u],0)};function tokenizeChord$2(o){const e=(o||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return e?e.slice(1):[]}const midi2chroma=o=>o%12,step2semitones=o=>{let e=Number(o);return isNaN(e)?interval_default.semitones(o):e},x2midi=(o,e)=>{if(typeof o=="number")return o;if(typeof o=="string")return noteToMidi$1(o,e)},midi2note=(o,e=!1)=>{const a=Math.floor(o/12)-1;return(e?sharps:flats)[o%12]+a};function scaleStep$1(o,e,a=1){o=o.map(u=>typeof u=="string"?noteToMidi$1(u):u);const l=Math.floor(e/o.length)*a*12;return e=_mod$1(e,o.length),o[e]+l}function nearestNumberIndex(o,e,a){let l=0,u=1/0;return e.forEach((f,d)=>{const p=Math.abs(f-o);(!a&&p<u||a&&p<=u)&&(l=d,u=p)}),l}let scaleSteps={};function stepInNamedScale(o,e,a,l){let[u,f]=scale_default.tokenize(e);const d=x2midi(u),p=midi2chroma(d);if(!scaleSteps[f]){let{intervals:k}=scale_default.get(`C ${f}`);scaleSteps[f]=k.map(step2semitones)}const g=scaleSteps[f];if(!g)return null;let b=d;if(a){a=x2midi(a,3);const k=midi2chroma(a),M=_mod$1(k-p,12),B=nearestNumberIndex(M,g,l);o=o+B,b=a-M}const O=Math.floor(o/g.length)*12;return o=_mod$1(o,g.length),g[o]+b+O}let modeTarget={below:o=>o.slice(-1)[0],duck:o=>o.slice(-1)[0],above:o=>o[0],root:o=>o[0]};function renderVoicing({chord:o,dictionary:e,offset:a=0,n:l,mode:u="below",anchor:f="c5",octaves:d=1}){const[p,g]=tokenizeChord$2(o),b=pc2chroma(p);f=x2midi(f?.note||f,4);const O=midi2chroma(f),A=e[g].map(oe=>(typeof oe=="string"?oe.split(" "):oe).map(step2semitones));let k,M,B=A.map((oe,de)=>{const _e=modeTarget[u](oe),Ce=_mod$1(O-_e-b,12);return(k===void 0||Ce<k)&&(k=Ce,M=de),Ce});u==="root"&&(M=0);const N=Math.ceil(a/A.length)*12,L=_mod$1(M+a,A.length),V=A[L],se=modeTarget[u](V),pe=f-B[L]+N,re=V.map(oe=>pe-se+oe);let z=re.map(oe=>midi2note(oe));return u==="duck"&&(z=z.filter((oe,de)=>re[de]!==f)),l!==void 0?[scaleStep$1(z,l,d)]:z}const octavesInterval=o=>(o<=0?-1:1)+o*7+"P";function scaleStep(o,e){e=e.replaceAll(":"," "),o=Math.ceil(o);let{intervals:a,tonic:l,empty:u}=scale_default.get(e);if(u&&isNote(e)||!u&&!l)throw new Error('incomplete scale. Make sure to use ":" instead of spaces, example: .scale("C:major")');if(u)throw new Error(`invalid scale "${e}"`);l=l||"C";const{pc:f,oct:d=3}=note_default.get(l),p=Math.floor(o/a.length),g=_mod$1(o,a.length),b=interval_default.add(a[g],octavesInterval(p));return note_default.transpose(f+d,b)}function scaleOffset(o,e,a){let[l,u]=scale_default.tokenize(o),{notes:f}=scale_default.get(`${l} ${u}`);if(f=f.map(M=>note_default.get(M).pc),e=Number(e),isNaN(e))throw new Error(`scale offset "${e}" not a number`);const{pc:d,oct:p=3}=note_default.get(a),g=f.indexOf(d);if(g===-1)throw new Error(`note "${a}" is not in scale "${o}"`);let b=g,O=p,A=d;const k=Math.sign(e);for(;Math.abs(b-g)<Math.abs(e);){b+=k;const M=_mod$1(b,f.length);k<0&&A[0]==="C"&&(O+=k),A=f[M],k>0&&A[0]==="C"&&(O+=k)}return A+O}const transpose=register("transpose",function(o,e){return e.withHap(a=>{const l=a.value.note??a.value;if(typeof l=="number"){let d;typeof o=="number"?d=o:typeof o=="string"&&(d=interval_default.semitones(o)||0);const p=l+d;return typeof a.value=="object"?a.withValue(()=>({...a.value,note:p})):a.withValue(()=>p)}if(typeof l!="string"||!isNote(l))return logger$2(`[tonal] transpose: not a note "${l}"`,"warning"),a;const u=isNaN(Number(o))?String(o):interval_default.fromSemitones(o),f=note_default.simplify(note_default.transpose(l,u));return typeof a.value=="object"?a.withValue(()=>({...a.value,note:f})):a.withValue(()=>f)})}),scaleTranspose=register("scaleTranspose",function(o,e){return e.withHap(a=>{if(!a.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof a.value=="object")return a.withValue(()=>({...a.value,note:scaleOffset(a.context.scale,Number(o),a.value.note)}));if(typeof a.value!="string")throw new Error("can only use scaleTranspose with notes");return a.withValue(()=>scaleOffset(a.context.scale,Number(o),a.value))})}),scale=register("scale",function(o,e){return Array.isArray(o)&&(o=o.flat().join(" ")),e.fmap(a=>{const l=typeof a=="object";let u=l?a.n:a;if(l&&delete a.n,isNote(u))return pure(u);let f=Number(u),d=0;if(isNaN(f)){if(u=String(u),!/^[-+]?\d+(#*|b*){1}$/.test(u))return logger$2(`[tonal] invalid scale step "${u}", expected number or integer with optional # b suffixes`,"error"),silence;const p=u.indexOf("#");if(p>=0)f=Number(u.substring(0,p)),d=u.length-p;else{const g=u.indexOf("b");f=Number(u.substring(0,g)),d=g-u.length}}try{let p;l&&a.anchor?p=stepInNamedScale(f,o,a.anchor):p=scaleStep(f,o),d!=0&&(p=note_default.transpose(p,interval_default.fromSemitones(d))),a=pure(l?{...a,note:p}:p)}catch(p){logger$2(`[tonal] ${p.message}`,"error"),a=silence}return a}).outerJoin().withHap(a=>a.setContext({...a.context,scale:o}))},!0,!0);var dist={},dictionaryVoicing$1={},getBestVoicing$1={};getBestVoicing$1.__esModule=!0,getBestVoicing$1.getBestVoicing=void 0;function getBestVoicing(o){var e=o.chord,a=o.range,l=o.finder,u=o.picker,f=o.lastVoicing,d=l(e,a);return d.length?u(d,f):[]}getBestVoicing$1.getBestVoicing=getBestVoicing;var voicingsInRange={};const require$$0=getAugmentedNamespace(dist$1);var tokenizeChord$1={};tokenizeChord$1.__esModule=!0,tokenizeChord$1.tokenizeChord=void 0;function tokenizeChord(o){var e=(o||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return e?e.slice(1):[]}tokenizeChord$1.tokenizeChord=tokenizeChord;var hasRequiredVoicingsInRange;function requireVoicingsInRange(){if(hasRequiredVoicingsInRange)return voicingsInRange;hasRequiredVoicingsInRange=1,voicingsInRange.__esModule=!0,voicingsInRange.voicingsInRange=void 0;var o=require$$0,e=requireDictionaryVoicing(),a=tokenizeChord$1;function l(u,f,d){f===void 0&&(f=e.lefthand),d===void 0&&(d=["D3","A4"]);var p=(0,a.tokenizeChord)(u),g=p[0],b=p[1];if(!f[b])return[];var O=f[b].map(function(k){return k.split(" ")}),A=o.Range.chromatic(d);return O.reduce(function(k,M){var B=M.map(function(se){return o.Interval.substract(se,M[0])}),N=o.Note.transpose(g,M[0]),L=A.filter(function(se){return o.Note.chroma(se)===o.Note.chroma(N)}).filter(function(se){return o.Note.midi(o.Note.transpose(se,B[B.length-1]))<=o.Note.midi(d[1])}).map(function(se){return o.Note.enharmonic(se,N)}),V=L.map(function(se){return B.map(function(pe){return o.Note.transpose(se,pe)})});return k.concat(V)},[])}return voicingsInRange.voicingsInRange=l,voicingsInRange}var hasRequiredDictionaryVoicing;function requireDictionaryVoicing(){return hasRequiredDictionaryVoicing||(hasRequiredDictionaryVoicing=1,function(o){var e=commonjsGlobal&&commonjsGlobal.__assign||function(){return e=Object.assign||function(p){for(var g,b=1,O=arguments.length;b<O;b++){g=arguments[b];for(var A in g)Object.prototype.hasOwnProperty.call(g,A)&&(p[A]=g[A])}return p},e.apply(this,arguments)},a=commonjsGlobal&&commonjsGlobal.__rest||function(p,g){var b={};for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&g.indexOf(O)<0&&(b[O]=p[O]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,O=Object.getOwnPropertySymbols(p);A<O.length;A++)g.indexOf(O[A])<0&&Object.prototype.propertyIsEnumerable.call(p,O[A])&&(b[O[A]]=p[O[A]]);return b};o.__esModule=!0,o.dictionaryVoicing=o.dictionaryVoicingFinder=o.triads=o.guidetones=o.lefthand=void 0;var l=getBestVoicing$1,u=requireVoicingsInRange();o.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},o.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},o.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var f=function(p){return function(g,b){return(0,u.voicingsInRange)(g,p,b)}};o.dictionaryVoicingFinder=f;var d=function(p){var g=p.dictionary,b=p.range,O=a(p,["dictionary","range"]);return(0,l.getBestVoicing)(e(e({},O),{range:b,finder:(0,o.dictionaryVoicingFinder)(g)}))};o.dictionaryVoicing=d}(dictionaryVoicing$1)),dictionaryVoicing$1}var minTopNoteDiff$2={};minTopNoteDiff$2.__esModule=!0,minTopNoteDiff$2.minTopNoteDiff=void 0;var tonal_1=require$$0;function minTopNoteDiff$1(o,e){if(!e)return o[0];var a=function(l){return Math.abs(tonal_1.Note.midi(e[e.length-1])-tonal_1.Note.midi(l[l.length-1]))};return o.reduce(function(l,u){return a(u)<a(l)?u:l},o[0])}minTopNoteDiff$2.minTopNoteDiff=minTopNoteDiff$1,function(o){o.__esModule=!0;var e=requireDictionaryVoicing(),a=minTopNoteDiff$2,l=getBestVoicing$1,u=tokenizeChord$1;o.default={tokenizeChord:u.tokenizeChord,getBestVoicing:l.getBestVoicing,dictionaryVoicing:e.dictionaryVoicing,dictionaryVoicingFinder:e.dictionaryVoicingFinder,lefthand:e.lefthand,guidetones:e.guidetones,triads:e.triads,minTopNoteDiff:a.minTopNoteDiff}}(dist);const _voicings=getDefaultExportFromCjs(dist),simple={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},complex={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing,minTopNoteDiff}=_voicings.default||_voicings,lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},triads={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},defaultDictionary={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},voicingRegistry={lefthand:{dictionary:lefthand,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:triads,mode:"below",anchor:"a4"},guidetones:{dictionary:guidetones,mode:"above",anchor:"a4"},legacy:{dictionary:defaultDictionary,mode:"below",anchor:"a4"}};let defaultDict="ireal";const setDefaultVoicings=o=>defaultDict=o,setVoicingRange=(o,e)=>addVoicings(o,voicingRegistry[o].dictionary,e),addVoicings=(o,e,a=["F3","A4"])=>{Object.assign(voicingRegistry,{[o]:{dictionary:e,range:a}})},registerVoicings=(o,e,a={})=>{Object.assign(voicingRegistry,{[o]:{dictionary:e,...a}})},getVoicing=(o,e,a)=>{const{dictionary:l,range:u}=voicingRegistry[e];return dictionaryVoicing({chord:o,dictionary:l,range:u,picker:minTopNoteDiff,lastVoicing:a})};let lastVoicing;const voicings=register("voicings",function(o,e){return e.fmap(a=>(lastVoicing=getVoicing(a,o,lastVoicing),stack(...lastVoicing))).outerJoin()}),rootNotes=register("rootNotes",function(o,e){return e.fmap(a=>{const f=(a.chord||a).match(/^([a-gA-G][b#]?).*$/)[1]+o;return a.chord?{note:f}:f})}),voicing=register("voicing",function(o){return o.fmap(e=>{e=typeof e=="string"?{chord:e}:e;let{dictionary:a=defaultDict,chord:l,anchor:u,offset:f,mode:d,n:p,octaves:g,...b}=e;a=typeof a=="string"?voicingRegistry[a]:{dictionary:a,mode:"below",anchor:"c5"};try{let O=renderVoicing({...a,chord:l,anchor:u,offset:f,mode:d,n:p,octaves:g});return stack(...O).note().set(b)}catch{return logger$2(`[voicing]: unknown chord "${l}"`),silence}}).outerJoin()});function voicingAlias(o,e,a){a=Array.isArray(a)?a:[a],a.forEach(l=>{l[e]=l[o]})}voicingAlias("^","",[simple,complex]),Object.keys(simple).forEach(o=>{if(o.includes("-")){let e=o.replace("-","m");voicingAlias(o,e,[complex,simple])}if(o.includes("^")){let e=o.replace("^","M");voicingAlias(o,e,[complex,simple])}if(o.includes("+")){let e=o.replace("+","aug");voicingAlias(o,e,[complex,simple])}}),registerVoicings("ireal",simple),registerVoicings("ireal-ext",complex);function resetVoicings(){lastVoicing=void 0,setDefaultVoicings("ireal")}const packageName="@strudel/tonal",index$2=Object.freeze(Object.defineProperty({__proto__:null,addVoicings,packageName,registerVoicings,resetVoicings,rootNotes,scale,scaleTranspose,setDefaultVoicings,setVoicingRange,transpose,voicing,voicingAlias,voicingRegistry,voicings},Symbol.toStringTag,{value:"Module"}));let latestOptions,hydra;async function initHydra(o={}){if(latestOptions&&JSON.stringify(latestOptions)!==JSON.stringify(o)&&document.getElementById("hydra-canvas")?.remove(),latestOptions=o,!document.getElementById("hydra-canvas")){const{src:e="https://unpkg.com/hydra-synth",feedStrudel:a=!1,contextType:l="webgl",pixelRatio:u=1,pixelated:f=!0,...d}={detectAudio:!1,...o},{canvas:p}=getDrawContext("hydra-canvas",{contextType:l,pixelRatio:u,pixelated:f});if(d.canvas=p,await import(e),hydra=new Hydra(d),a){const{canvas:g}=getDrawContext();g.style.display="none",hydra.synth.s0.init({src:g})}}}function clearHydra(){hydra&&hydra.hush(),globalThis.s0?.clear(),document.getElementById("hydra-canvas")?.remove(),globalThis.speed=speed,globalThis.shape=shape}const H=o=>()=>reify(o).queryArc(getTime(),getTime())[0].value,hydra$1=Object.freeze(Object.defineProperty({__proto__:null,H,clearHydra,initHydra},Symbol.toStringTag,{value:"Module"})),gm={gm_piano:["0000_JCLive_sf2_file","0000_FluidR3_GM_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file"],gm_epiano1:["0040_JCLive_sf2_file","0040_FluidR3_GM_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_GeneralUserGS_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file"],gm_epiano2:["0050_JCLive_sf2_file","0050_FluidR3_GM_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_GeneralUserGS_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file"],gm_harpsichord:["0060_JCLive_sf2_file","0060_FluidR3_GM_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_GeneralUserGS_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file"],gm_clavinet:["0070_JCLive_sf2_file","0070_FluidR3_GM_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file"],gm_celesta:["0080_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0081_FluidR3_GM_sf2_file"],gm_glockenspiel:["0090_JCLive_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file"],gm_music_box:["0100_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file"],gm_vibraphone:["0110_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0111_FluidR3_GM_sf2_file"],gm_marimba:["0120_JCLive_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file"],gm_xylophone:["0130_JCLive_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0131_FluidR3_GM_sf2_file"],gm_tubular_bells:["0140_JCLive_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file"],gm_dulcimer:["0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file"],gm_drawbar_organ:["0160_JCLive_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file"],gm_percussive_organ:["0170_JCLive_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file"],gm_rock_organ:["0180_JCLive_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file"],gm_church_organ:["0190_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file"],gm_reed_organ:["0200_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file"],gm_accordion:["0210_JCLive_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file"],gm_harmonica:["0220_FluidR3_GM_sf2_file","0220_JCLive_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_GeneralUserGS_sf2_file","0221_FluidR3_GM_sf2_file"],gm_bandoneon:["0230_Aspirin_sf2_file","0230_JCLive_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file"],gm_acoustic_guitar_nylon:["0240_JCLive_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file"],gm_acoustic_guitar_steel:["0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file"],gm_electric_guitar_jazz:["0260_JCLive_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file"],gm_electric_guitar_clean:["0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file"],gm_electric_guitar_muted:["0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file"],gm_overdriven_guitar:["0290_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file"],gm_distortion_guitar:["0300_FluidR3_GM_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file"],gm_guitar_harmonics:["0310_Aspirin_sf2_file","0310_FluidR3_GM_sf2_file","0310_Chaos_sf2_file"],gm_acoustic_bass:["0320_JCLive_sf2_file","0320_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file"],gm_electric_bass_finger:["0330_JCLive_sf2_file","0330_FluidR3_GM_sf2_fible","0330_Aspirin_sf2_file","0330_GeneralUserGS_sf2_file"],gm_electric_bass_pick:["0340_JCLive_sf2_file","0340_FluidR3_GM_sf2_file","0340_Aspirin_sf2_file","0340_GeneralUserGS_sf2_file","0341_Aspirin_sf2_file"],gm_fretless_bass:["0350_Aspirin_sf2_file","0350_JCLive_sf2_file"],gm_slap_bass_1:["0360_Aspirin_sf2_file","0360_JCLive_sf2_file","0360_FluidR3_GM_sf2_file","0360_Chaos_sf2_file"],gm_slap_bass_2:["0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_fil e","0370_JCLive_sf2_file"],gm_synth_bass_1:["0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file"],gm_synth_bass_2:["0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file"],gm_violin:["0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_JCLive_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file"],gm_viola:["0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file"],gm_cello:["0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file"],gm_contrabass:["0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file"],gm_tremolo_strings:["0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file"],gm_pizzicato_strings:["0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file"],gm_orchestral_harp:["0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file"],gm_timpani:["0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file"],gm_string_ensemble_1:["0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file"],gm_string_ensemble_2:["0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file"],gm_synth_strings_1:["0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file"],gm_synth_strings_2:["0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file"],gm_choir_aahs:["0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file"],gm_voice_oohs:["0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file"],gm_synth_choir:["0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file"],gm_orchestra_hit:["0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file"],gm_trumpet:["0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file"],gm_trombone:["0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file"],gm_tuba:["0580_FluidR3_GM_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_GeneralUserGS_sf2_file"],gm_muted_trumpet:["0590_JCLive_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file"],gm_french_horn:["0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file"],gm_brass_section:["0610_JCLive_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file"],gm_synth_brass_1:["0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file"],gm_synth_brass_2:["0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file"],gm_soprano_sax:["0640_JCLive_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0641_FluidR3_GM_sf2_file"],gm_alto_sax:["0650_JCLive_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file"],gm_tenor_sax:["0660_JCLive_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file"],gm_baritone_sax:["0670_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0671_FluidR3_GM_sf2_file"],gm_oboe:["0680_JCLive_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0681_FluidR3_GM_sf2_file"],gm_english_horn:["0690_JCLive_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0691_FluidR3_GM_sf2_file"],gm_bassoon:["0700_JCLive_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0701_FluidR3_GM_sf2_file"],gm_clarinet:["0710_JCLive_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0711_FluidR3_GM_sf2_file"],gm_piccolo:["0720_JCLive_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0721_FluidR3_GM_sf2_file"],gm_flute:["0730_JCLive_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0731_FluidR3_GM_sf2_file"],gm_recorder:["0740_JCLive_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file"],gm_pan_flute:["0750_JCLive_sf2_file","0750_FluidR3_GM_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_GeneralUserGS_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file"],gm_blown_bottle:["0760_FluidR3_GM_sf2_file","0760_JCLive_sf2_file","0760_Chaos_sf2_file","0760_GeneralUserGS_sf2_file","0761_FluidR3_GM_sf2_file"],gm_shakuhachi:["0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file"],gm_whistle:["0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file"],gm_ocarina:["0790_FluidR3_GM_sf2_file","0790_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_GeneralUserGS_sf2_file"],gm_lead_1_square:["0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file"],gm_lead_2_sawtooth:["0810_JCLive_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file"],gm_lead_3_calliope:["0820_JCLive_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file"],gm_lead_4_chiff:["0830_JCLive_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file"],gm_lead_5_charang:["0840_JCLive_sf2_file","0840_FluidR3_GM_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_GeneralUserGS_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file"],gm_lead_6_voice:["0850_JCLive_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file"],gm_lead_7_fifths:["0860_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0861_Aspirin_sf2_file"],gm_lead_8_bass_lead:["0870_JCLive_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file"],gm_pad_new_age:["0880_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file"],gm_pad_warm:["0890_JCLive_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file"],gm_pad_poly:["0900_JCLive_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file"],gm_pad_choir:["0910_FluidR3_GM_sf2_file","0910_JCLive_sf2_file","0910_Aspirin_sf2_file","0910_GeneralUserGS_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file"],gm_pad_bowed:["0920_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file"],gm_pad_metallic:["0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file"],gm_pad_halo:["0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file"],gm_pad_sweep:["0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file"],gm_fx_rain:["0960_FluidR3_GM_sf2_file","0960_Chaos_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file"],gm_fx_soundtrack:["0970_FluidR3_GM_sf2_file","0970_Aspirin_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file"],gm_fx_crystal:["0980_Aspirin_sf2_file","0980_JCLive_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0981_FluidR3_GM_sf2_file","0981_Aspirin_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file"],gm_fx_atmosphere:["0990_JCLive_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file"],gm_fx_brightness:["1000_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file"],gm_fx_goblins:["1010_FluidR3_GM_sf2_file","1010_JCLive_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_GeneralUserGS_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file"],gm_fx_echoes:["1020_FluidR3_GM_sf2_file","1020_JCLive_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_GeneralUserGS_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file"],gm_fx_sci_fi:["1030_FluidR3_GM_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file"],gm_sitar:["1040_Aspirin_sf2_file","1040_FluidR3_GM_sf2_file","1040_JCLive_sf2_file","1040_Chaos_sf2_file","1040_GeneralUserGS_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file"],gm_banjo:["1050_FluidR3_GM_sf2_file","1050_JCLive_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_GeneralUserGS_sf2_file","1051_GeneralUserGS_sf2_file"],gm_shamisen:["1060_JCLive_sf2_file","1060_FluidR3_GM_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_GeneralUserGS_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file"],gm_koto:["1070_FluidR3_GM_sf2_file","1070_JCLive_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_GeneralUserGS_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file"],gm_kalimba:["1080_JCLive_sf2_file","1080_FluidR3_GM_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_GeneralUserGS_sf2_file"],gm_bagpipe:["1090_Aspirin_sf2_file"],gm_fiddle:["1100_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file"],gm_shanai:["1110_Aspirin_sf2_file","1110_FluidR3_GM_sf2_file","1110_JCLive_sf2_file","1110_Chaos_sf2_file","1110_GeneralUserGS_sf2_file"],gm_tinkle_bell:["1120_Aspirin_sf2_file"],gm_agogo:["1130_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1131_FluidR3_GM_sf2_file"],gm_steel_drums:["1140_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_JCLive_sf2_file","1140_Chaos_sf2_file","1140_GeneralUserGS_sf2_file","1141_FluidR3_GM_sf2_file"],gm_woodblock:["1150_JCLive_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file"],gm_taiko_drum:["1160_JCLive_sf2_file","1160_FluidR3_GM_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_GeneralUserGS_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file"],gm_melodic_tom:["1170_JCLive_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file"],gm_synth_drum:["1180_JCLive_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file"],gm_reverse_cymbal:["1190_JCLive_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file"],gm_guitar_fret_noise:["1200_JCLive_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file"],gm_breath_noise:["1210_FluidR3_GM_sf2_file","1210_JCLive_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_GeneralUserGS_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file"],gm_seashore:["1220_JCLive_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file"],gm_bird_tweet:["1230_FluidR3_GM_sf2_file","1230_JCLive_sf2_file","1230_Aspirin_sf2_file","1230_GeneralUserGS_sf2_file","1231_GeneralUserGS_sf2_file","1232_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file"],gm_telephone:["1240_JCLive_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1241_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file"],gm_helicopter:["1250_JCLive_sf2_file","1250_Aspirin_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_GeneralUserGS_sf2_file","1254_GeneralUserGS_sf2_file","1255_GeneralUserGS_sf2_file","1256_GeneralUserGS_sf2_file","1257_GeneralUserGS_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file"],gm_applause:["1260_JCLive_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file"],gm_gunshot:["1270_JCLive_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file",""]};let loadCache={};async function loadFont(name){if(loadCache[name])return loadCache[name];const load=async()=>{const url=`https://felixroos.github.io/webaudiofontdata/sound/${name}.js`,preset=await fetch(url).then(o=>o.text());let[_,data]=preset.split("={");return eval("{"+data)};return loadCache[name]=load(),loadCache[name]}async function getFontBufferSource(o,e,a){let{note:l="c3",freq:u}=e,f;if(u)f=freqToMidi$2(u);else if(typeof l=="string")f=noteToMidi$1(l);else if(typeof l=="number")f=l;else throw new Error(`unexpected "note" type "${typeof l}"`);const{buffer:d,zone:p}=await getFontPitch(o,f,a),g=a.createBufferSource();g.buffer=d;const b=p.originalPitch-100*p.coarseTune-p.fineTune,O=1*Math.pow(2,(100*f-b)/1200);return g.playbackRate.value=O,p.loopStart>1&&p.loopStart<p.loopEnd&&(g.loop=!0,g.loopStart=p.loopStart/p.sampleRate,g.loopEnd=p.loopEnd/p.sampleRate),g}let bufferCache={};async function getFontPitch(o,e,a){const l=`${o}:::${e}`;if(bufferCache[l])return bufferCache[l];const u=async()=>{const f=await loadFont(o);if(!f)throw new Error(`Could not load soundfont ${o}`);const d=findZone(f,e);if(!d)throw new Error("no soundfont zone found for preset ",o,"pitch",e);const p=await getBuffer(d,a);if(!p)throw new Error(`no soundfont buffer found for preset ${o}, pitch: ${e}`);return{buffer:p,zone:d}};return bufferCache[l]=u(),bufferCache[l]}function findZone(o,e){return o.find(a=>a.keyRangeLow<=e&&a.keyRangeHigh+1>=e)}async function getBuffer(o,e){if(o.sample){console.warn("zone.sample untested!");const l=atob(o.sample);o.buffer=e.createBuffer(1,l.length/2,o.sampleRate);const u=o.buffer.getChannelData(0);let f,d,p;for(var a=0;a<l.length/2;a++)f=l.charCodeAt(a*2),d=l.charCodeAt(a*2+1),f<0&&(f=256+f),d<0&&(d=256+d),p=d*256+f,p>=32768&&(p=p-65536),u[a]=p/65536}else if(o.file){const l=o.file.length,u=new ArrayBuffer(l),f=new Uint8Array(u),d=atob(o.file);let p;for(let g=0;g<d.length;g++)p=d.charCodeAt(g),f[g]=p;return new Promise(g=>e.decodeAudioData(u,g))}}function registerSoundfonts(){Object.entries(gm).forEach(([o,e])=>{registerSound(o,async(a,l,u)=>{const[f,d,p,g]=getADSRValues([l.attack,l.decay,l.sustain,l.release]),{duration:b}=l,O=getSoundIndex$1(l.n,e.length),A=e[O],k=getAudioContext(),M=await getFontBufferSource(A,l,k);M.start(a);const B=k.createGain(),N=M.connect(B),L=a+b;getParamADSR(N.gain,f,d,p,g,0,.3,a,L,"linear");let V=L+g+.01,se=getVibratoOscillator(M.detune,l,a);getPitchEnvelope(M.detune,l,a,L),M.stop(V);const pe=re=>{};return M.onended=()=>{M.disconnect(),se?.stop(),N.disconnect(),u()},{node:N,stop:pe}},{type:"soundfont",prebake:!0,fonts:e})})}const instruments=["0000_JCLive_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_FluidR3_GM_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_FluidR3_GM_sf2_file","0040_GeneralUserGS_sf2_file","0040_JCLive_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_FluidR3_GM_sf2_file","0050_GeneralUserGS_sf2_file","0050_JCLive_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_FluidR3_GM_sf2_file","0060_GeneralUserGS_sf2_file","0060_JCLive_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file","0070_FluidR3_GM_sf2_file","0070_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0080_JCLive_sf2_file","0081_FluidR3_GM_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file","0090_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file","0100_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0110_JCLive_sf2_file","0111_FluidR3_GM_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0120_JCLive_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0130_JCLive_sf2_file","0131_FluidR3_GM_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0140_JCLive_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file","0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0160_JCLive_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0170_JCLive_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file","0180_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file","0190_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0200_JCLive_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0210_JCLive_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_FluidR3_GM_sf2_file","0220_GeneralUserGS_sf2_file","0220_JCLive_sf2_file","0221_FluidR3_GM_sf2_file","0230_Aspirin_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0230_JCLive_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_JCLive_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file","0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_JCLive_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file","0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file","0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_FluidR3_GM_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_FluidR3_GM_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file","0310_Aspirin_sf2_file","0310_Chaos_sf2_file","0310_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file","0320_FluidR3_GM_sf2_file","0320_JCLive_sf2_file","0330_Aspirin_sf2_file","0330_FluidR3_GM_sf2_file","0330_GeneralUserGS_sf2_file","0330_JCLive_sf2_file","0340_Aspirin_sf2_file","0340_FluidR3_GM_sf2_file","0340_GeneralUserGS_sf2_file","0340_JCLive_sf2_file","0341_Aspirin_sf2_file","0350_Aspirin_sf2_file","0350_JCLive_sf2_file","0360_Aspirin_sf2_file","0360_Chaos_sf2_file","0360_FluidR3_GM_sf2_file","0360_JCLive_sf2_file","0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_file","0370_JCLive_sf2_file","0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file","0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file","0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0400_JCLive_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file","0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file","0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file","0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file","0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file","0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file","0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file","0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file","0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file","0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file","0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file","0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file","0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file","0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file","0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file","0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file","0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_FluidR3_GM_sf2_file","0580_GeneralUserGS_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file","0590_JCLive_sf2_file","0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file","0610_JCLive_sf2_file","0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file","0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0640_JCLive_sf2_file","0641_FluidR3_GM_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0650_JCLive_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file","0660_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0670_JCLive_sf2_file","0671_FluidR3_GM_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0680_JCLive_sf2_file","0681_FluidR3_GM_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0690_JCLive_sf2_file","0691_FluidR3_GM_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0700_JCLive_sf2_file","0701_FluidR3_GM_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0710_JCLive_sf2_file","0711_FluidR3_GM_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0720_JCLive_sf2_file","0721_FluidR3_GM_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0730_JCLive_sf2_file","0731_FluidR3_GM_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file","0740_JCLive_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_FluidR3_GM_sf2_file","0750_GeneralUserGS_sf2_file","0750_JCLive_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file","0760_Chaos_sf2_file","0760_FluidR3_GM_sf2_file","0760_GeneralUserGS_sf2_file","0760_JCLive_sf2_file","0761_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file","0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file","0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_FluidR3_GM_sf2_file","0790_GeneralUserGS_sf2_file","0790_JCLive_sf2_file","0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0810_JCLive_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0820_JCLive_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0830_JCLive_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_FluidR3_GM_sf2_file","0840_GeneralUserGS_sf2_file","0840_JCLive_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0850_JCLive_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0860_JCLive_sf2_file","0861_Aspirin_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file","0870_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0880_JCLive_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0890_JCLive_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0900_JCLive_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file","0910_Aspirin_sf2_file","0910_FluidR3_GM_sf2_file","0910_GeneralUserGS_sf2_file","0910_JCLive_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0920_JCLive_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file","0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file","0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file","0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file","0960_Chaos_sf2_file","0960_FluidR3_GM_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file","0970_Aspirin_sf2_file","0970_FluidR3_GM_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file","0980_Aspirin_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0980_JCLive_sf2_file","0981_Aspirin_sf2_file","0981_FluidR3_GM_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0990_JCLive_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1000_JCLive_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_FluidR3_GM_sf2_file","1010_GeneralUserGS_sf2_file","1010_JCLive_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_FluidR3_GM_sf2_file","1020_GeneralUserGS_sf2_file","1020_JCLive_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_FluidR3_GM_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file","1040_Aspirin_sf2_file","1040_Chaos_sf2_file","1040_FluidR3_GM_sf2_file","1040_GeneralUserGS_sf2_file","1040_JCLive_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_FluidR3_GM_sf2_file","1050_GeneralUserGS_sf2_file","1050_JCLive_sf2_file","1051_GeneralUserGS_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_FluidR3_GM_sf2_file","1060_GeneralUserGS_sf2_file","1060_JCLive_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_FluidR3_GM_sf2_file","1070_GeneralUserGS_sf2_file","1070_JCLive_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_FluidR3_GM_sf2_file","1080_GeneralUserGS_sf2_file","1080_JCLive_sf2_file","1090_Aspirin_sf2_file","1090_Chaos_sf2_file","1090_FluidR3_GM_sf2_file","1090_GeneralUserGS_sf2_file","1090_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1100_JCLive_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file","1110_Aspirin_sf2_file","1110_Chaos_sf2_file","1110_FluidR3_GM_sf2_file","1110_GeneralUserGS_sf2_file","1110_JCLive_sf2_file","1120_Aspirin_sf2_file","1120_Chaos_sf2_file","1120_FluidR3_GM_sf2_file","1120_GeneralUserGS_sf2_file","1120_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1130_JCLive_sf2_file","1131_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_Chaos_sf2_file","1140_FluidR3_GM_sf2_file","1140_GeneralUserGS_sf2_file","1140_JCLive_sf2_file","1141_FluidR3_GM_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1150_JCLive_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_FluidR3_GM_sf2_file","1160_GeneralUserGS_sf2_file","1160_JCLive_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1170_JCLive_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1180_JCLive_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1190_JCLive_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1200_JCLive_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_FluidR3_GM_sf2_file","1210_GeneralUserGS_sf2_file","1210_JCLive_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1220_JCLive_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file","1230_Aspirin_sf2_file","1230_Chaos_sf2_file","1230_FluidR3_GM_sf2_file","1230_GeneralUserGS_sf2_file","1230_JCLive_sf2_file","1231_Aspirin_sf2_file","1231_GeneralUserGS_sf2_file","1232_Aspirin_sf2_file","1232_GeneralUserGS_sf2_file","1233_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1240_GeneralUserGS_sf2_file","1240_JCLive_sf2_file","1241_Aspirin_sf2_file","1241_GeneralUserGS_sf2_file","1242_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file","1250_Aspirin_sf2_file","1250_Chaos_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1250_JCLive_sf2_file","1251_Aspirin_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_Aspirin_sf2_file","1253_GeneralUserGS_sf2_file","1254_Aspirin_sf2_file","1254_GeneralUserGS_sf2_file","1255_Aspirin_sf2_file","1255_GeneralUserGS_sf2_file","1256_Aspirin_sf2_file","1256_GeneralUserGS_sf2_file","1257_Aspirin_sf2_file","1257_GeneralUserGS_sf2_file","1258_Aspirin_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1260_JCLive_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1270_JCLive_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file"],drums=["35_0_Chaos_sf2_file","35_12_JCLive_sf2_file","35_16_JCLive_sf2_file","35_18_JCLive_sf2_file","35_4_Chaos_sf2_file","36_12_JCLive_sf2_file","36_16_JCLive_sf2_file","36_18_JCLive_sf2_file","36_4_Chaos_sf2_file","37_12_JCLive_sf2_file","37_16_JCLive_sf2_file","37_18_JCLive_sf2_file","37_4_Chaos_sf2_file","38_12_JCLive_sf2_file","38_16_JCLive_sf2_file","38_18_JCLive_sf2_file","38_4_Chaos_sf2_file","39_12_JCLive_sf2_file","39_16_JCLive_sf2_file","39_18_JCLive_sf2_file","39_4_Chaos_sf2_file","40_12_JCLive_sf2_file","40_16_JCLive_sf2_file","40_18_JCLive_sf2_file","40_4_Chaos_sf2_file","41_12_JCLive_sf2_file","41_16_JCLive_sf2_file","41_18_JCLive_sf2_file","41_4_Chaos_sf2_file","42_12_JCLive_sf2_file","42_16_JCLive_sf2_file","42_18_JCLive_sf2_file","42_4_Chaos_sf2_file","43_12_JCLive_sf2_file","43_16_JCLive_sf2_file","43_18_JCLive_sf2_file","43_4_Chaos_sf2_file","44_12_JCLive_sf2_file","44_16_JCLive_sf2_file","44_18_JCLive_sf2_file","44_4_Chaos_sf2_file","45_12_JCLive_sf2_file","45_16_JCLive_sf2_file","45_18_JCLive_sf2_file","45_4_Chaos_sf2_file","46_12_JCLive_sf2_file","46_16_JCLive_sf2_file","46_18_JCLive_sf2_file","46_4_Chaos_sf2_file","47_12_JCLive_sf2_file","47_16_JCLive_sf2_file","47_18_JCLive_sf2_file","47_4_Chaos_sf2_file","48_12_JCLive_sf2_file","48_16_JCLive_sf2_file","48_18_JCLive_sf2_file","48_4_Chaos_sf2_file","49_12_JCLive_sf2_file","49_16_JCLive_sf2_file","49_18_JCLive_sf2_file","49_4_Chaos_sf2_file","50_12_JCLive_sf2_file","50_16_JCLive_sf2_file","50_18_JCLive_sf2_file","50_4_Chaos_sf2_file","51_12_JCLive_sf2_file","51_16_JCLive_sf2_file","51_18_JCLive_sf2_file","51_4_Chaos_sf2_file","52_12_JCLive_sf2_file","52_16_JCLive_sf2_file","52_18_JCLive_sf2_file","52_4_Chaos_sf2_file","53_12_JCLive_sf2_file","53_16_JCLive_sf2_file","53_18_JCLive_sf2_file","53_4_Chaos_sf2_file","54_12_JCLive_sf2_file","54_16_JCLive_sf2_file","54_18_JCLive_sf2_file","54_4_Chaos_sf2_file","55_12_JCLive_sf2_file","55_16_JCLive_sf2_file","55_18_JCLive_sf2_file","55_4_Chaos_sf2_file","56_12_JCLive_sf2_file","56_16_JCLive_sf2_file","56_18_JCLive_sf2_file","56_4_Chaos_sf2_file","57_12_JCLive_sf2_file","57_16_JCLive_sf2_file","57_18_JCLive_sf2_file","57_4_Chaos_sf2_file","58_12_JCLive_sf2_file","58_16_JCLive_sf2_file","58_18_JCLive_sf2_file","58_4_Chaos_sf2_file","59_12_JCLive_sf2_file","59_16_JCLive_sf2_file","59_18_JCLive_sf2_file","59_4_Chaos_sf2_file","60_12_JCLive_sf2_file","60_16_JCLive_sf2_file","60_18_JCLive_sf2_file","60_4_Chaos_sf2_file","61_12_JCLive_sf2_file","61_16_JCLive_sf2_file","61_18_JCLive_sf2_file","61_4_Chaos_sf2_file","62_12_JCLive_sf2_file","62_16_JCLive_sf2_file","62_18_JCLive_sf2_file","62_4_Chaos_sf2_file","63_12_JCLive_sf2_file","63_16_JCLive_sf2_file","63_18_JCLive_sf2_file","63_4_Chaos_sf2_file","64_12_JCLive_sf2_file","64_16_JCLive_sf2_file","64_18_JCLive_sf2_file","64_4_Chaos_sf2_file","65_12_JCLive_sf2_file","65_16_JCLive_sf2_file","65_18_JCLive_sf2_file","65_4_Chaos_sf2_file","66_12_JCLive_sf2_file","66_16_JCLive_sf2_file","66_18_JCLive_sf2_file","66_4_Chaos_sf2_file","67_12_JCLive_sf2_file","67_16_JCLive_sf2_file","67_18_JCLive_sf2_file","67_4_Chaos_sf2_file","68_12_JCLive_sf2_file","68_16_JCLive_sf2_file","68_18_JCLive_sf2_file","68_4_Chaos_sf2_file","69_12_JCLive_sf2_file","69_16_JCLive_sf2_file","69_18_JCLive_sf2_file","69_4_Chaos_sf2_file","70_12_JCLive_sf2_file","70_16_JCLive_sf2_file","70_18_JCLive_sf2_file","70_4_Chaos_sf2_file","71_12_JCLive_sf2_file","71_16_JCLive_sf2_file","71_18_JCLive_sf2_file","71_4_Chaos_sf2_file","72_12_JCLive_sf2_file","72_16_JCLive_sf2_file","72_18_JCLive_sf2_file","72_4_Chaos_sf2_file","73_12_JCLive_sf2_file","73_16_JCLive_sf2_file","73_18_JCLive_sf2_file","73_4_Chaos_sf2_file","74_12_JCLive_sf2_file","74_16_JCLive_sf2_file","74_18_JCLive_sf2_file","74_4_Chaos_sf2_file","75_12_JCLive_sf2_file","75_16_JCLive_sf2_file","75_18_JCLive_sf2_file","75_4_Chaos_sf2_file","76_12_JCLive_sf2_file","76_16_JCLive_sf2_file","76_18_JCLive_sf2_file","76_4_Chaos_sf2_file","77_12_JCLive_sf2_file","77_16_JCLive_sf2_file","77_18_JCLive_sf2_file","77_4_Chaos_sf2_file","78_12_JCLive_sf2_file","78_16_JCLive_sf2_file","78_18_JCLive_sf2_file","78_4_Chaos_sf2_file","79_12_JCLive_sf2_file","79_16_JCLive_sf2_file","79_18_JCLive_sf2_file","79_4_Chaos_sf2_file","80_12_JCLive_sf2_file","80_16_JCLive_sf2_file","80_18_JCLive_sf2_file","80_4_Chaos_sf2_file","81_12_JCLive_sf2_file","81_16_JCLive_sf2_file","81_18_JCLive_sf2_file","81_4_Chaos_sf2_file"],instrumentNames=[];instrumentNames[0]="Acoustic Grand Piano: Piano",instrumentNames[1]="Bright Acoustic Piano: Piano",instrumentNames[2]="Electric Grand Piano: Piano",instrumentNames[3]="Honky-tonk Piano: Piano",instrumentNames[4]="Electric Piano 1: Piano",instrumentNames[5]="Electric Piano 2: Piano",instrumentNames[6]="Harpsichord: Piano",instrumentNames[7]="Clavinet: Piano",instrumentNames[8]="Celesta: Chromatic Percussion",instrumentNames[9]="Glockenspiel: Chromatic Percussion",instrumentNames[10]="Music Box: Chromatic Percussion",instrumentNames[11]="Vibraphone: Chromatic Percussion",instrumentNames[12]="Marimba: Chromatic Percussion",instrumentNames[13]="Xylophone: Chromatic Percussion",instrumentNames[14]="Tubular Bells: Chromatic Percussion",instrumentNames[15]="Dulcimer: Chromatic Percussion",instrumentNames[16]="Drawbar Organ: Organ",instrumentNames[17]="Percussive Organ: Organ",instrumentNames[18]="Rock Organ: Organ",instrumentNames[19]="Church Organ: Organ",instrumentNames[20]="Reed Organ: Organ",instrumentNames[21]="Accordion: Organ",instrumentNames[22]="Harmonica: Organ",instrumentNames[23]="Tango Accordion: Organ",instrumentNames[24]="Acoustic Guitar (nylon): Guitar",instrumentNames[25]="Acoustic Guitar (steel): Guitar",instrumentNames[26]="Electric Guitar (jazz): Guitar",instrumentNames[27]="Electric Guitar (clean): Guitar",instrumentNames[28]="Electric Guitar (muted): Guitar",instrumentNames[29]="Overdriven Guitar: Guitar",instrumentNames[30]="Distortion Guitar: Guitar",instrumentNames[31]="Guitar Harmonics: Guitar",instrumentNames[32]="Acoustic Bass: Bass",instrumentNames[33]="Electric Bass (finger): Bass",instrumentNames[34]="Electric Bass (pick): Bass",instrumentNames[35]="Fretless Bass: Bass",instrumentNames[36]="Slap Bass 1: Bass",instrumentNames[37]="Slap Bass 2: Bass",instrumentNames[38]="Synth Bass 1: Bass",instrumentNames[39]="Synth Bass 2: Bass",instrumentNames[40]="Violin: Strings",instrumentNames[41]="Viola: Strings",instrumentNames[42]="Cello: Strings",instrumentNames[43]="Contrabass: Strings",instrumentNames[44]="Tremolo Strings: Strings",instrumentNames[45]="Pizzicato Strings: Strings",instrumentNames[46]="Orchestral Harp: Strings",instrumentNames[47]="Timpani: Strings",instrumentNames[48]="String Ensemble 1: Ensemble",instrumentNames[49]="String Ensemble 2: Ensemble",instrumentNames[50]="Synth Strings 1: Ensemble",instrumentNames[51]="Synth Strings 2: Ensemble",instrumentNames[52]="Choir Aahs: Ensemble",instrumentNames[53]="Voice Oohs: Ensemble",instrumentNames[54]="Synth Choir: Ensemble",instrumentNames[55]="Orchestra Hit: Ensemble",instrumentNames[56]="Trumpet: Brass",instrumentNames[57]="Trombone: Brass",instrumentNames[58]="Tuba: Brass",instrumentNames[59]="Muted Trumpet: Brass",instrumentNames[60]="French Horn: Brass",instrumentNames[61]="Brass Section: Brass",instrumentNames[62]="Synth Brass 1: Brass",instrumentNames[63]="Synth Brass 2: Brass",instrumentNames[64]="Soprano Sax: Reed",instrumentNames[65]="Alto Sax: Reed",instrumentNames[66]="Tenor Sax: Reed",instrumentNames[67]="Baritone Sax: Reed",instrumentNames[68]="Oboe: Reed",instrumentNames[69]="English Horn: Reed",instrumentNames[70]="Bassoon: Reed",instrumentNames[71]="Clarinet: Reed",instrumentNames[72]="Piccolo: Pipe",instrumentNames[73]="Flute: Pipe",instrumentNames[74]="Recorder: Pipe",instrumentNames[75]="Pan Flute: Pipe",instrumentNames[76]="Blown bottle: Pipe",instrumentNames[77]="Shakuhachi: Pipe",instrumentNames[78]="Whistle: Pipe",instrumentNames[79]="Ocarina: Pipe",instrumentNames[80]="Lead 1 (square): Synth Lead",instrumentNames[81]="Lead 2 (sawtooth): Synth Lead",instrumentNames[82]="Lead 3 (calliope): Synth Lead",instrumentNames[83]="Lead 4 (chiff): Synth Lead",instrumentNames[84]="Lead 5 (charang): Synth Lead",instrumentNames[85]="Lead 6 (voice): Synth Lead",instrumentNames[86]="Lead 7 (fifths): Synth Lead",instrumentNames[87]="Lead 8 (bass + lead): Synth Lead",instrumentNames[88]="Pad 1 (new age): Synth Pad",instrumentNames[89]="Pad 2 (warm): Synth Pad",instrumentNames[90]="Pad 3 (polysynth): Synth Pad",instrumentNames[91]="Pad 4 (choir): Synth Pad",instrumentNames[92]="Pad 5 (bowed): Synth Pad",instrumentNames[93]="Pad 6 (metallic): Synth Pad",instrumentNames[94]="Pad 7 (halo): Synth Pad",instrumentNames[95]="Pad 8 (sweep): Synth Pad",instrumentNames[96]="FX 1 (rain): Synth Effects",instrumentNames[97]="FX 2 (soundtrack): Synth Effects",instrumentNames[98]="FX 3 (crystal): Synth Effects",instrumentNames[99]="FX 4 (atmosphere): Synth Effects",instrumentNames[100]="FX 5 (brightness): Synth Effects",instrumentNames[101]="FX 6 (goblins): Synth Effects",instrumentNames[102]="FX 7 (echoes): Synth Effects",instrumentNames[103]="FX 8 (sci-fi): Synth Effects",instrumentNames[104]="Sitar: Ethnic",instrumentNames[105]="Banjo: Ethnic",instrumentNames[106]="Shamisen: Ethnic",instrumentNames[107]="Koto: Ethnic",instrumentNames[108]="Kalimba: Ethnic",instrumentNames[109]="Bagpipe: Ethnic",instrumentNames[110]="Fiddle: Ethnic",instrumentNames[111]="Shanai: Ethnic",instrumentNames[112]="Tinkle Bell: Percussive",instrumentNames[113]="Agogo: Percussive",instrumentNames[114]="Steel Drums: Percussive",instrumentNames[115]="Woodblock: Percussive",instrumentNames[116]="Taiko Drum: Percussive",instrumentNames[117]="Melodic Tom: Percussive",instrumentNames[118]="Synth Drum: Percussive",instrumentNames[119]="Reverse Cymbal: Percussive",instrumentNames[120]="Guitar Fret Noise: Sound effects",instrumentNames[121]="Breath Noise: Sound effects",instrumentNames[122]="Seashore: Sound effects",instrumentNames[123]="Bird Tweet: Sound effects",instrumentNames[124]="Telephone Ring: Sound effects",instrumentNames[125]="Helicopter: Sound effects",instrumentNames[126]="Applause: Sound effects",instrumentNames[127]="Gunshot: Sound effects";const list=Object.freeze(Object.defineProperty({__proto__:null,drums,instrumentNames,instruments},Symbol.toStringTag,{value:"Module"}));var SoundFont2={exports:{}};(function(o,e){(function(a,l){o.exports=l()})(window,function(){return function(a){var l={};function u(f){if(l[f])return l[f].exports;var d=l[f]={i:f,l:!1,exports:{}};return a[f].call(d.exports,d,d.exports,u),d.l=!0,d.exports}return u.m=a,u.c=l,u.d=function(f,d,p){u.o(f,d)||Object.defineProperty(f,d,{enumerable:!0,get:p})},u.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},u.t=function(f,d){if(1&d&&(f=u(f)),8&d||4&d&&typeof f=="object"&&f&&f.__esModule)return f;var p=Object.create(null);if(u.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:f}),2&d&&typeof f!="string")for(var g in f)u.d(p,g,function(b){return f[b]}.bind(null,g));return p},u.n=function(f){var d=f&&f.__esModule?function(){return f.default}:function(){return f};return u.d(d,"a",d),d},u.o=function(f,d){return Object.prototype.hasOwnProperty.call(f,d)},u.p="",u(u.s="./src/index.ts")}({"./src/chunk.ts":function(a,l,u){u.r(l),u.d(l,"SF2Chunk",function(){return M});var f=u("./src/riff/index.ts"),d=u("./src/constants.ts"),p=u("./src/chunks/index.ts");function g(B){return(g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(B)}function b(B,N){for(var L=0;L<N.length;L++){var V=N[L];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(B,V.key,V)}}function O(B){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)})(B)}function A(B,N){return(A=Object.setPrototypeOf||function(L,V){return L.__proto__=V,L})(B,N)}function k(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}var M=function(B){function N(se){var pe,re,z,oe,de,_e;return function(Ce,be){if(!(Ce instanceof be))throw new TypeError("Cannot call a class as a function")}(this,N),re=this,pe=!(z=O(N).call(this,se.id,se.length,se.buffer,se.subChunks))||g(z)!=="object"&&typeof z!="function"?k(re):z,oe=k(k(pe)),_e=void 0,(de="subChunks")in oe?Object.defineProperty(oe,de,{value:_e,enumerable:!0,configurable:!0,writable:!0}):oe[de]=_e,pe.subChunks=se.subChunks.map(function(Ce){return new N(Ce)}),pe}var L,V;return function(se,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(pe&&pe.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),pe&&A(se,pe)}(N,f.RIFFChunk),L=N,(V=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new f.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var se=this.subChunks.reduce(function(pe,re){if(re.id==="ifil"||re.id==="iver"){if(re.length!==d.SF_VERSION_LENGTH)throw new f.ParseError("Invalid size for the '".concat(re.id,"' sub-chunk"));pe[re.id]="".concat(re.getInt16(),".").concat(re.getInt16(2))}else pe[re.id]=re.getString();return pe},{});if(!se.ifil)throw new f.ParseError("Missing required 'ifil' sub-chunk");if(!se.INAM)throw new f.ParseError("Missing required 'INAM' sub-chunk");return{version:se.ifil,soundEngine:se.isng||"EMU8000",name:se.INAM,rom:se.irom,romVersion:se.iver,creationDate:se.ICRD,author:se.IENG,product:se.IPRD,copyright:se.ICOP,comments:se.ICMT,createdBy:se.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new f.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var se=this.subChunks[0];if(se.id!=="smpl")throw new f.ParseError("Invalid chunk signature","'smpl'","'".concat(se.id,"'"));return se.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new f.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(p.getPresetHeaders)(this.subChunks[0]),presetZones:Object(p.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(p.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(p.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(p.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(p.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(p.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(p.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(p.getSampleHeaders)(this.subChunks[8])}}}])&&b(L.prototype,V),N}()},"./src/chunks/generators.ts":function(a,l,u){u.r(l),u.d(l,"getGenerators",function(){return A});var f=u("./src/riff/index.ts"),d=u("./src/types/index.ts"),p=u("./src/constants.ts"),g=[d.GeneratorType.StartAddrsOffset,d.GeneratorType.EndAddrsOffset,d.GeneratorType.StartLoopAddrsOffset,d.GeneratorType.EndLoopAddrsOffset,d.GeneratorType.StartAddrsCoarseOffset,d.GeneratorType.EndAddrsCoarseOffset,d.GeneratorType.StartLoopAddrsCoarseOffset,d.GeneratorType.KeyNum,d.GeneratorType.Velocity,d.GeneratorType.EndLoopAddrsCoarseOffset,d.GeneratorType.SampleModes,d.GeneratorType.ExclusiveClass,d.GeneratorType.OverridingRootKey],b=[d.GeneratorType.Unused1,d.GeneratorType.Unused2,d.GeneratorType.Unused3,d.GeneratorType.Unused4,d.GeneratorType.Reserved1,d.GeneratorType.Reserved2,d.GeneratorType.Reserved3],O=[d.GeneratorType.KeyRange,d.GeneratorType.VelRange],A=function(k,M){if(k.id!==M)throw new f.ParseError("Unexpected chunk ID","'".concat(M,"'"),"'".concat(k.id,"'"));if(k.length%p.SF_GENERATOR_SIZE)throw new f.ParseError("Invalid size for the '".concat(M,"' sub-chunk"));return k.iterate(function(B){var N=B.getInt16();return d.GeneratorType[N]?M==="pgen"&&g.includes(N)||M==="igen"&&b.includes(N)?null:O.includes(N)?{id:N,range:{lo:B.getByte(),hi:B.getByte()}}:{id:N,value:B.getInt16BE()}:null})}},"./src/chunks/index.ts":function(a,l,u){u.r(l);var f=u("./src/chunks/instruments/index.ts");u.d(l,"getInstrumentHeaders",function(){return f.getInstrumentHeaders});var d=u("./src/chunks/presets/index.ts");u.d(l,"getPresetHeaders",function(){return d.getPresetHeaders});var p=u("./src/chunks/samples/index.ts");u.d(l,"getSampleHeaders",function(){return p.getSampleHeaders});var g=u("./src/chunks/generators.ts");u.d(l,"getGenerators",function(){return g.getGenerators});var b=u("./src/chunks/modulators.ts");u.d(l,"getModulators",function(){return b.getModulators});var O=u("./src/chunks/zones.ts");u.d(l,"getZones",function(){return O.getZones}),u.d(l,"getItemsInZone",function(){return O.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(a,l,u){u.r(l),u.d(l,"getInstrumentHeaders",function(){return p});var f=u("./src/riff/index.ts"),d=u("./src/constants.ts"),p=function(g){if(g.id!=="inst")throw new f.ParseError("Unexpected chunk ID","'inst'","'".concat(g.id,"'"));if(g.length%d.SF_INSTRUMENT_HEADER_SIZE)throw new f.ParseError("Invalid size for the 'inst' sub-chunk");return g.iterate(function(b){return{name:b.getString(),bagIndex:b.getInt16()}})}},"./src/chunks/instruments/index.ts":function(a,l,u){u.r(l);var f=u("./src/chunks/instruments/headers.ts");u.d(l,"getInstrumentHeaders",function(){return f.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(a,l,u){u.r(l),u.d(l,"getModulators",function(){return g});var f=u("./src/riff/index.ts"),d=u("./src/constants.ts"),p=function(b){return{type:b>>10&63,polarity:b>>9&1,direction:b>>8&1,palette:b>>7&1,index:127&b}},g=function(b,O){if(b.id!==O)throw new f.ParseError("Unexpected chunk ID","'".concat(O,"'"),"'".concat(b.id,"'"));if(b.length%d.SF_MODULATOR_SIZE)throw new f.ParseError("Invalid size for the '".concat(O,"' sub-chunk"));return b.iterate(function(A){return{source:p(A.getInt16BE()),id:A.getInt16BE(),value:A.getInt16BE(),valueSource:p(A.getInt16BE()),transform:A.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(a,l,u){u.r(l),u.d(l,"getPresetHeaders",function(){return p});var f=u("./src/riff/index.ts"),d=u("./src/constants.ts"),p=function(g){if(g.id!=="phdr")throw new f.ParseError("Invalid chunk ID","'phdr'","'".concat(g.id,"'"));if(g.length%d.SF_PRESET_HEADER_SIZE)throw new f.ParseError("Invalid size for the 'phdr' sub-chunk");return g.iterate(function(b){return{name:b.getString(),preset:b.getInt16(),bank:b.getInt16(),bagIndex:b.getInt16(),library:b.getUInt32(),genre:b.getUInt32(),morphology:b.getUInt32()}})}},"./src/chunks/presets/index.ts":function(a,l,u){u.r(l);var f=u("./src/chunks/presets/headers.ts");u.d(l,"getPresetHeaders",function(){return f.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(a,l,u){u.r(l),u.d(l,"getSampleHeaders",function(){return p});var f=u("./src/riff/index.ts"),d=u("./src/constants.ts"),p=function(g){if(g.id!=="shdr")throw new f.ParseError("Unexpected chunk ID","'shdr'","'".concat(g.id,"'"));if(g.length%d.SF_SAMPLE_HEADER_SIZE)throw new f.ParseError("Invalid size for the 'shdr' sub-chunk");return g.iterate(function(b){return{name:b.getString(),start:b.getUInt32(),end:b.getUInt32(),startLoop:b.getUInt32(),endLoop:b.getUInt32(),sampleRate:b.getUInt32(),originalPitch:b.getByte(),pitchCorrection:b.getChar(),link:b.getInt16(),type:b.getInt16()}})}},"./src/chunks/samples/index.ts":function(a,l,u){u.r(l);var f=u("./src/chunks/samples/headers.ts");u.d(l,"getSampleHeaders",function(){return f.getSampleHeaders})},"./src/chunks/zones.ts":function(a,l,u){u.r(l),u.d(l,"getZones",function(){return g}),u.d(l,"getItemsInZone",function(){return b});var f=u("./src/riff/index.ts"),d=u("./src/constants.ts"),p=u("./src/types/index.ts"),g=function(M,B){if(M.id!==B)throw new f.ParseError("Unexpected chunk ID","'".concat(B,"'"),"'".concat(M.id,"'"));if(M.length%d.SF_BAG_SIZE)throw new f.ParseError("Invalid size for the '".concat(B,"' sub-chunk"));return M.iterate(function(N){return{generatorIndex:N.getInt16(),modulatorIndex:N.getInt16()}})},b=function(M,B,N,L,V,se){for(var pe=[],re=0;re<M.length;re++){for(var z=M[re],oe=M[re+1],de=z.bagIndex,_e=oe?oe.bagIndex:B.length,Ce=[],be=void 0,xe=de;xe<_e;xe++){var Oe=O(xe,B,N),ke=A(xe,B,L),Ie=ke[p.GeneratorType.KeyRange]&&ke[p.GeneratorType.KeyRange].range,Fe=ke[se];if(Fe){var Be=V[Fe.value];Be&&Ce.push({keyRange:Ie,modulators:Oe,generators:ke,reference:Be})}else xe-de==0&&(be={keyRange:Ie,modulators:Oe,generators:ke})}pe.push({header:z,globalZone:be,zones:Ce})}return pe},O=function(M,B,N){var L=B[M],V=B[M+1],se=L.modulatorIndex,pe=V?V.modulatorIndex:B.length;return k(se,pe,N)},A=function(M,B,N){var L=B[M],V=B[M+1],se=L.generatorIndex,pe=V?V.generatorIndex:B.length;return k(se,pe,N)},k=function(M,B,N){for(var L={},V=M;V<B;V++){var se=N[V];se&&(L[se.id]=se)}return L}},"./src/constants.ts":function(a,l,u){u.r(l),u.d(l,"SF_VERSION_LENGTH",function(){return f}),u.d(l,"SF_PRESET_HEADER_SIZE",function(){return d}),u.d(l,"SF_BAG_SIZE",function(){return p}),u.d(l,"SF_MODULATOR_SIZE",function(){return g}),u.d(l,"SF_GENERATOR_SIZE",function(){return b}),u.d(l,"SF_INSTRUMENT_HEADER_SIZE",function(){return O}),u.d(l,"SF_SAMPLE_HEADER_SIZE",function(){return A}),u.d(l,"DEFAULT_SAMPLE_RATE",function(){return k});var f=4,d=38,p=4,g=10,b=4,O=22,A=46,k=22050},"./src/index.ts":function(a,l,u){u.r(l);var f=u("./src/types/index.ts");for(var d in f)d!=="default"&&function(O){u.d(l,O,function(){return f[O]})}(d);var p=u("./src/chunk.ts");u.d(l,"SF2Chunk",function(){return p.SF2Chunk});var g=u("./src/constants.ts");u.d(l,"SF_VERSION_LENGTH",function(){return g.SF_VERSION_LENGTH}),u.d(l,"SF_PRESET_HEADER_SIZE",function(){return g.SF_PRESET_HEADER_SIZE}),u.d(l,"SF_BAG_SIZE",function(){return g.SF_BAG_SIZE}),u.d(l,"SF_MODULATOR_SIZE",function(){return g.SF_MODULATOR_SIZE}),u.d(l,"SF_GENERATOR_SIZE",function(){return g.SF_GENERATOR_SIZE}),u.d(l,"SF_INSTRUMENT_HEADER_SIZE",function(){return g.SF_INSTRUMENT_HEADER_SIZE}),u.d(l,"SF_SAMPLE_HEADER_SIZE",function(){return g.SF_SAMPLE_HEADER_SIZE}),u.d(l,"DEFAULT_SAMPLE_RATE",function(){return g.DEFAULT_SAMPLE_RATE});var b=u("./src/soundFont2.ts");u.d(l,"SoundFont2",function(){return b.SoundFont2})},"./src/riff/chunkIterator.ts":function(a,l,u){u.r(l),u.d(l,"ChunkIterator",function(){return g});var f=u("./src/utils/index.ts");function d(b,O){for(var A=0;A<O.length;A++){var k=O[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}function p(b,O,A){return O in b?Object.defineProperty(b,O,{value:A,enumerable:!0,configurable:!0,writable:!0}):b[O]=A,b}var g=function(){function b(k){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(function(B,N){if(!(B instanceof N))throw new TypeError("Cannot call a class as a function")})(this,b),p(this,"target",[]),p(this,"chunk",void 0),p(this,"position",0),this.chunk=k,this.position=M}var O,A;return O=b,(A=[{key:"iterate",value:function(k){for(;this.position<this.chunk.length;){var M=k(this);M&&this.target.push(M)}}},{key:"getString",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,M=Object(f.getStringFromBuffer)(this.getBuffer(this.position,k));return this.position+=k,M}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(k){this.position+=k}},{key:"getBuffer",value:function(k,M){return this.chunk.buffer.subarray(k,k+M)}},{key:"currentPosition",get:function(){return this.position}}])&&d(O.prototype,A),b}()},"./src/riff/index.ts":function(a,l,u){u.r(l);var f=u("./src/riff/chunkIterator.ts");u.d(l,"ChunkIterator",function(){return f.ChunkIterator});var d=u("./src/riff/parseError.ts");u.d(l,"ParseError",function(){return d.ParseError});var p=u("./src/riff/parser.ts");u.d(l,"parseBuffer",function(){return p.parseBuffer}),u.d(l,"getChunk",function(){return p.getChunk}),u.d(l,"getChunkLength",function(){return p.getChunkLength}),u.d(l,"getSubChunks",function(){return p.getSubChunks}),u.d(l,"getChunkId",function(){return p.getChunkId});var g=u("./src/riff/riffChunk.ts");u.d(l,"RIFFChunk",function(){return g.RIFFChunk})},"./src/riff/parseError.ts":function(a,l,u){function f(k){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(k)}function d(k,M){return!M||f(M)!=="object"&&typeof M!="function"?function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(k):M}function p(k){var M=typeof Map=="function"?new Map:void 0;return(p=function(B){if(B===null||(N=B,Function.toString.call(N).indexOf("[native code]")===-1))return B;var N;if(typeof B!="function")throw new TypeError("Super expression must either be null or a function");if(M!==void 0){if(M.has(B))return M.get(B);M.set(B,L)}function L(){return g(B,arguments,O(this).constructor)}return L.prototype=Object.create(B.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),b(L,B)})(k)}function g(k,M,B){return(g=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(N,L,V){var se=[null];se.push.apply(se,L);var pe=new(Function.bind.apply(N,se));return V&&b(pe,V.prototype),pe}).apply(null,arguments)}function b(k,M){return(b=Object.setPrototypeOf||function(B,N){return B.__proto__=N,B})(k,M)}function O(k){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(k)}u.r(l),u.d(l,"ParseError",function(){return A});var A=function(k){function M(B,N,L){return function(V,se){if(!(V instanceof se))throw new TypeError("Cannot call a class as a function")}(this,M),d(this,O(M).call(this,"".concat(B).concat(N&&L?", expected ".concat(N,", received ").concat(L):"")))}return function(B,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(N&&N.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),N&&b(B,N)}(M,p(Error)),M}()},"./src/riff/parser.ts":function(a,l,u){u.r(l),u.d(l,"parseBuffer",function(){return g}),u.d(l,"getChunk",function(){return b}),u.d(l,"getChunkLength",function(){return O}),u.d(l,"getSubChunks",function(){return A}),u.d(l,"getChunkId",function(){return k});var f=u("./src/riff/parseError.ts"),d=u("./src/utils/buffer.ts"),p=u("./src/riff/riffChunk.ts"),g=function(M){var B=k(M);if(B!=="RIFF")throw new f.ParseError("Invalid file format","RIFF",B);var N=k(M,8);if(N!=="sfbk")throw new f.ParseError("Invalid signature","sfbk",N);var L=M.subarray(8),V=A(L.subarray(4));return new p.RIFFChunk(B,L.length,L,V)},b=function(M,B){var N=k(M,B),L=O(M,B+4),V=[];return N!=="RIFF"&&N!=="LIST"||(V=A(M.subarray(B+12))),new p.RIFFChunk(N,L,M.subarray(B+8),V)},O=function(M,B){return((M=M.subarray(B,B+4))[0]|M[1]<<8|M[2]<<16|M[3]<<24)>>>0},A=function(M){for(var B=[],N=0;N<=M.length-8;){var L=b(M,N);B.push(L),N=(N+=8+L.length)%2?N+1:N}return B},k=function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(d.getStringFromBuffer)(M.subarray(B,B+4))}},"./src/riff/riffChunk.ts":function(a,l,u){u.r(l),u.d(l,"RIFFChunk",function(){return b});var f=u("./src/riff/chunkIterator.ts"),d=u("./src/utils/index.ts");function p(O,A){for(var k=0;k<A.length;k++){var M=A[k];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}function g(O,A,k){return A in O?Object.defineProperty(O,A,{value:k,enumerable:!0,configurable:!0,writable:!0}):O[A]=k,O}var b=function(){function O(M,B,N,L){(function(V,se){if(!(V instanceof se))throw new TypeError("Cannot call a class as a function")})(this,O),g(this,"id",void 0),g(this,"length",void 0),g(this,"buffer",void 0),g(this,"subChunks",void 0),this.id=M,this.length=B,this.buffer=N,this.subChunks=L}var A,k;return A=O,(k=[{key:"getString",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1?arguments[1]:void 0;return Object(d.getStringFromBuffer)(this.getBuffer(M,B||this.length-M))}},{key:"getInt16",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[M++]|this.buffer[M]<<8}},{key:"getUInt32",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[M++]|this.buffer[M++]<<8|this.buffer[M++]<<16|this.buffer[M]<<24)>>>0}},{key:"getByte",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[M]}},{key:"getChar",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[M]<<24>>24}},{key:"iterator",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new f.ChunkIterator(this,M)}},{key:"iterate",value:function(M){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=new f.ChunkIterator(this,B);return N.iterate(M),N.target}},{key:"getBuffer",value:function(M,B){return this.buffer.subarray(M,M+B)}}])&&p(A.prototype,k),O}()},"./src/soundFont2.ts":function(a,l,u){u.r(l),u.d(l,"SoundFont2",function(){return B});var f=u("./src/types/index.ts"),d=u("./src/chunk.ts"),p=u("./src/riff/index.ts"),g=u("./src/chunks/index.ts"),b=u("./src/utils/index.ts");function O(N){for(var L=1;L<arguments.length;L++){var V=arguments[L]!=null?arguments[L]:{},se=Object.keys(V);typeof Object.getOwnPropertySymbols=="function"&&(se=se.concat(Object.getOwnPropertySymbols(V).filter(function(pe){return Object.getOwnPropertyDescriptor(V,pe).enumerable}))),se.forEach(function(pe){M(N,pe,V[pe])})}return N}function A(N,L){for(var V=0;V<L.length;V++){var se=L[V];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(N,se.key,se)}}function k(N,L,V){return L&&A(N.prototype,L),V&&A(N,V),N}function M(N,L,V){return L in N?Object.defineProperty(N,L,{value:V,enumerable:!0,configurable:!0,writable:!0}):N[L]=V,N}var B=function(){function N(L){if(function(se,pe){if(!(se instanceof pe))throw new TypeError("Cannot call a class as a function")}(this,N),M(this,"chunk",void 0),M(this,"metaData",void 0),M(this,"sampleData",void 0),M(this,"samples",void 0),M(this,"presetData",void 0),M(this,"instruments",void 0),M(this,"presets",void 0),M(this,"banks",void 0),!(L instanceof d.SF2Chunk)){var V=Object(p.parseBuffer)(L);L=new d.SF2Chunk(V)}if(L.subChunks.length!==3)throw new p.ParseError("Invalid sfbk structure","3 chunks","".concat(L.subChunks.length," chunks"));this.chunk=L,this.metaData=L.subChunks[0].getMetaData(),this.sampleData=L.subChunks[1].getSampleData(),this.presetData=L.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return k(N,null,[{key:"from",value:function(L){return new N(L)}}]),k(N,[{key:"getKeyData",value:function(L){var V=this,se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(b.memoize)(function(re,z,oe){var de=V.banks[z];if(de){var _e=de.presets[oe];if(_e){var Ce=_e.zones.find(function(Fe){return V.isKeyInRange(Fe,re)});if(Ce){var be=Ce.instrument,xe=be.zones.find(function(Fe){return V.isKeyInRange(Fe,re)});if(xe){var Oe=xe.sample,ke=O({},Ce.generators,xe.generators),Ie=O({},Ce.modulators,xe.modulators);return{keyNumber:re,preset:_e,instrument:be,sample:Oe,generators:ke,modulators:Ie}}}}}return null})(L,se,pe)}},{key:"isKeyInRange",value:function(L,V){return L.keyRange===void 0||L.keyRange.lo<=V&&L.keyRange.hi>=V}},{key:"getBanks",value:function(){return this.presets.reduce(function(L,V){var se=V.header.bank;return L[se]||(L[se]={presets:[]}),L[se].presets[V.header.preset]=V,L},[])}},{key:"getPresets",value:function(){var L=this.presetData,V=L.presetHeaders,se=L.presetZones,pe=L.presetGenerators,re=L.presetModulators;return Object(g.getItemsInZone)(V,se,re,pe,this.instruments,f.GeneratorType.Instrument).filter(function(z){return z.header.name!=="EOP"}).map(function(z){return{header:z.header,globalZone:z.globalZone,zones:z.zones.map(function(oe){return{keyRange:oe.keyRange,generators:oe.generators,modulators:oe.modulators,instrument:oe.reference}})}})}},{key:"getInstruments",value:function(){var L=this.presetData,V=L.instrumentHeaders,se=L.instrumentZones,pe=L.instrumentModulators,re=L.instrumentGenerators;return Object(g.getItemsInZone)(V,se,pe,re,this.samples,f.GeneratorType.SampleId).filter(function(z){return z.header.name!=="EOI"}).map(function(z){return{header:z.header,globalZone:z.globalZone,zones:z.zones.map(function(oe){return{keyRange:oe.keyRange,generators:oe.generators,modulators:oe.modulators,sample:oe.reference}})}})}},{key:"getSamples",value:function(){var L=this;return this.presetData.sampleHeaders.filter(function(V){return V.name!=="EOS"}).map(function(V){if(V.name!=="EOS"&&V.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(V.sampleRate," hz in sample '").concat(V.name,"'"));return V.originalPitch>=128&&V.originalPitch<=254&&(V.originalPitch=60),V.startLoop-=V.start,V.endLoop-=V.start,{header:V,data:new Int16Array(new Uint8Array(L.sampleData.subarray(2*V.start,2*V.end)).buffer)}})}}]),N}()},"./src/types/bank.ts":function(a,l){},"./src/types/generator.ts":function(a,l,u){var f,d;function p(b,O,A){return O in b?Object.defineProperty(b,O,{value:A,enumerable:!0,configurable:!0,writable:!0}):b[O]=A,b}u.r(l),u.d(l,"GeneratorType",function(){return d}),u.d(l,"DEFAULT_GENERATOR_VALUES",function(){return g}),function(b){b[b.StartAddrsOffset=0]="StartAddrsOffset",b[b.EndAddrsOffset=1]="EndAddrsOffset",b[b.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",b[b.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",b[b.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",b[b.ModLFOToPitch=5]="ModLFOToPitch",b[b.VibLFOToPitch=6]="VibLFOToPitch",b[b.ModEnvToPitch=7]="ModEnvToPitch",b[b.InitialFilterFc=8]="InitialFilterFc",b[b.InitialFilterQ=9]="InitialFilterQ",b[b.ModLFOToFilterFc=10]="ModLFOToFilterFc",b[b.ModEnvToFilterFc=11]="ModEnvToFilterFc",b[b.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",b[b.ModLFOToVolume=13]="ModLFOToVolume",b[b.Unused1=14]="Unused1",b[b.ChorusEffectsSend=15]="ChorusEffectsSend",b[b.ReverbEffectsSend=16]="ReverbEffectsSend",b[b.Pan=17]="Pan",b[b.Unused2=18]="Unused2",b[b.Unused3=19]="Unused3",b[b.Unused4=20]="Unused4",b[b.DelayModLFO=21]="DelayModLFO",b[b.FreqModLFO=22]="FreqModLFO",b[b.DelayVibLFO=23]="DelayVibLFO",b[b.FreqVibLFO=24]="FreqVibLFO",b[b.DelayModEnv=25]="DelayModEnv",b[b.AttackModEnv=26]="AttackModEnv",b[b.HoldModEnv=27]="HoldModEnv",b[b.DecayModEnv=28]="DecayModEnv",b[b.SustainModEnv=29]="SustainModEnv",b[b.ReleaseModEnv=30]="ReleaseModEnv",b[b.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",b[b.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",b[b.DelayVolEnv=33]="DelayVolEnv",b[b.AttackVolEnv=34]="AttackVolEnv",b[b.HoldVolEnv=35]="HoldVolEnv",b[b.DecayVolEnv=36]="DecayVolEnv",b[b.SustainVolEnv=37]="SustainVolEnv",b[b.ReleaseVolEnv=38]="ReleaseVolEnv",b[b.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",b[b.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",b[b.Instrument=41]="Instrument",b[b.Reserved1=42]="Reserved1",b[b.KeyRange=43]="KeyRange",b[b.VelRange=44]="VelRange",b[b.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",b[b.KeyNum=46]="KeyNum",b[b.Velocity=47]="Velocity",b[b.InitialAttenuation=48]="InitialAttenuation",b[b.Reserved2=49]="Reserved2",b[b.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",b[b.CoarseTune=51]="CoarseTune",b[b.FineTune=52]="FineTune",b[b.SampleId=53]="SampleId",b[b.SampleModes=54]="SampleModes",b[b.Reserved3=55]="Reserved3",b[b.ScaleTuning=56]="ScaleTuning",b[b.ExclusiveClass=57]="ExclusiveClass",b[b.OverridingRootKey=58]="OverridingRootKey",b[b.Unused5=59]="Unused5",b[b.EndOper=60]="EndOper"}(d||(d={}));var g=(p(f={},d.StartAddrsOffset,0),p(f,d.EndAddrsOffset,0),p(f,d.StartLoopAddrsOffset,0),p(f,d.EndLoopAddrsOffset,0),p(f,d.StartAddrsCoarseOffset,0),p(f,d.ModLFOToPitch,0),p(f,d.VibLFOToPitch,0),p(f,d.ModEnvToPitch,0),p(f,d.InitialFilterFc,13500),p(f,d.InitialFilterQ,0),p(f,d.ModLFOToFilterFc,0),p(f,d.ModEnvToFilterFc,0),p(f,d.EndAddrsCoarseOffset,0),p(f,d.ModLFOToVolume,0),p(f,d.ChorusEffectsSend,0),p(f,d.ReverbEffectsSend,0),p(f,d.Pan,0),p(f,d.DelayModLFO,-12e3),p(f,d.FreqModLFO,0),p(f,d.DelayVibLFO,-12e3),p(f,d.FreqVibLFO,0),p(f,d.DelayModEnv,-12e3),p(f,d.AttackModEnv,-12e3),p(f,d.HoldModEnv,-12e3),p(f,d.DecayModEnv,-12e3),p(f,d.SustainModEnv,0),p(f,d.ReleaseModEnv,-12e3),p(f,d.KeyNumToModEnvHold,0),p(f,d.KeyNumToModEnvDecay,0),p(f,d.DelayVolEnv,-12e3),p(f,d.AttackVolEnv,-12e3),p(f,d.HoldVolEnv,-12e3),p(f,d.DecayVolEnv,-12e3),p(f,d.SustainVolEnv,0),p(f,d.ReleaseVolEnv,-12e3),p(f,d.KeyNumToVolEnvHold,0),p(f,d.KeyNumToVolEnvDecay,0),p(f,d.StartLoopAddrsCoarseOffset,0),p(f,d.KeyNum,-1),p(f,d.Velocity,-1),p(f,d.InitialAttenuation,0),p(f,d.EndLoopAddrsCoarseOffset,0),p(f,d.CoarseTune,0),p(f,d.FineTune,0),p(f,d.SampleModes,0),p(f,d.ScaleTuning,100),p(f,d.ExclusiveClass,0),p(f,d.OverridingRootKey,-1),f)},"./src/types/index.ts":function(a,l,u){u.r(l);var f=u("./src/types/bank.ts");for(var d in f)d!=="default"&&function(L){u.d(l,L,function(){return f[L]})}(d);var p=u("./src/types/generator.ts");u.d(l,"GeneratorType",function(){return p.GeneratorType}),u.d(l,"DEFAULT_GENERATOR_VALUES",function(){return p.DEFAULT_GENERATOR_VALUES});var g=u("./src/types/instrument.ts");for(var d in g)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(d)<0&&function(V){u.d(l,V,function(){return g[V]})}(d);var b=u("./src/types/key.ts");for(var d in b)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(d)<0&&function(V){u.d(l,V,function(){return b[V]})}(d);var O=u("./src/types/metaData.ts");for(var d in O)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(d)<0&&function(V){u.d(l,V,function(){return O[V]})}(d);var A=u("./src/types/modulator.ts");u.d(l,"ControllerType",function(){return A.ControllerType}),u.d(l,"ControllerPolarity",function(){return A.ControllerPolarity}),u.d(l,"ControllerDirection",function(){return A.ControllerDirection}),u.d(l,"ControllerPalette",function(){return A.ControllerPalette}),u.d(l,"Controller",function(){return A.Controller}),u.d(l,"TransformType",function(){return A.TransformType}),u.d(l,"DEFAULT_INSTRUMENT_MODULATORS",function(){return A.DEFAULT_INSTRUMENT_MODULATORS});var k=u("./src/types/preset.ts");for(var d in k)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(d)<0&&function(V){u.d(l,V,function(){return k[V]})}(d);var M=u("./src/types/presetData.ts");for(var d in M)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(d)<0&&function(V){u.d(l,V,function(){return M[V]})}(d);var B=u("./src/types/sample.ts");u.d(l,"SampleType",function(){return B.SampleType});var N=u("./src/types/zone.ts");for(var d in N)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(d)<0&&function(V){u.d(l,V,function(){return N[V]})}(d)},"./src/types/instrument.ts":function(a,l){},"./src/types/key.ts":function(a,l){},"./src/types/metaData.ts":function(a,l){},"./src/types/modulator.ts":function(a,l,u){u.r(l),u.d(l,"ControllerType",function(){return f}),u.d(l,"ControllerPolarity",function(){return d}),u.d(l,"ControllerDirection",function(){return p}),u.d(l,"ControllerPalette",function(){return g}),u.d(l,"Controller",function(){return b}),u.d(l,"TransformType",function(){return O}),u.d(l,"DEFAULT_INSTRUMENT_MODULATORS",function(){return k});var f,d,p,g,b,O,A=u("./src/types/generator.ts");(function(M){M[M.Linear=0]="Linear",M[M.Concave=1]="Concave",M[M.Convex=2]="Convex",M[M.Switch=3]="Switch"})(f||(f={})),function(M){M[M.Unipolar=0]="Unipolar",M[M.Bipolar=1]="Bipolar"}(d||(d={})),function(M){M[M.Increasing=0]="Increasing",M[M.Decreasing=1]="Decreasing"}(p||(p={})),function(M){M[M.GeneralController=0]="GeneralController",M[M.MidiController=1]="MidiController"}(g||(g={})),function(M){M[M.NoController=0]="NoController",M[M.NoteOnVelocity=2]="NoteOnVelocity",M[M.NoteOnKeyNumber=3]="NoteOnKeyNumber",M[M.PolyPressure=10]="PolyPressure",M[M.ChannelPressure=13]="ChannelPressure",M[M.PitchWheel=14]="PitchWheel",M[M.PitchWheelSensitivity=16]="PitchWheelSensitivity",M[M.Link=127]="Link"}(b||(b={})),function(M){M[M.Linear=0]="Linear",M[M.Absolute=2]="Absolute"}(O||(O={}));var k=[{id:A.GeneratorType.InitialAttenuation,source:{type:f.Concave,polarity:d.Unipolar,direction:p.Decreasing,palette:g.GeneralController,index:b.NoteOnVelocity},value:960,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.InitialFilterFc,source:{type:f.Linear,polarity:d.Unipolar,direction:p.Decreasing,palette:g.GeneralController,index:b.NoteOnVelocity},value:-2400,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.VibLFOToPitch,source:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.ChannelPressure},value:50,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.VibLFOToPitch,source:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.MidiController,index:1},value:50,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.InitialAttenuation,source:{type:f.Concave,polarity:d.Unipolar,direction:p.Decreasing,palette:g.MidiController,index:7},value:960,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.InitialAttenuation,source:{type:f.Linear,polarity:d.Bipolar,direction:p.Increasing,palette:g.MidiController,index:10},value:1e3,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.InitialAttenuation,source:{type:f.Concave,polarity:d.Unipolar,direction:p.Decreasing,palette:g.MidiController,index:11},value:960,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.ReverbEffectsSend,source:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.MidiController,index:91},value:200,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.ChorusEffectsSend,source:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.MidiController,index:93},value:200,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.NoController},transform:O.Linear},{id:A.GeneratorType.CoarseTune,source:{type:f.Linear,polarity:d.Bipolar,direction:p.Increasing,palette:g.GeneralController,index:b.PitchWheel},value:12700,valueSource:{type:f.Linear,polarity:d.Unipolar,direction:p.Increasing,palette:g.GeneralController,index:b.PitchWheelSensitivity},transform:O.Linear}]},"./src/types/preset.ts":function(a,l){},"./src/types/presetData.ts":function(a,l){},"./src/types/sample.ts":function(a,l,u){var f;u.r(l),u.d(l,"SampleType",function(){return f}),function(d){d[d.EOS=0]="EOS",d[d.Mono=1]="Mono",d[d.Right=2]="Right",d[d.Left=4]="Left",d[d.Linked=8]="Linked",d[d.RomMono=32769]="RomMono",d[d.RomRight=32770]="RomRight",d[d.RomLeft=32772]="RomLeft",d[d.RomLinked=32776]="RomLinked"}(f||(f={}))},"./src/types/zone.ts":function(a,l){},"./src/utils/buffer.ts":function(a,l,u){u.r(l),u.d(l,"getStringFromBuffer",function(){return f});var f=function(d){return new TextDecoder("utf8").decode(d).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(a,l,u){u.r(l);var f=u("./src/utils/buffer.ts");u.d(l,"getStringFromBuffer",function(){return f.getStringFromBuffer});var d=u("./src/utils/memoize.ts");u.d(l,"memoize",function(){return d.memoize})},"./src/utils/memoize.ts":function(a,l,u){u.r(l),u.d(l,"memoize",function(){return f});var f=function(d){var p={};return function(){for(var g=arguments.length,b=new Array(g),O=0;O<g;O++)b[O]=arguments[O];var A=JSON.stringify(b);if(A in p)return p[A];var k=d.apply(void 0,b);return p[A]=k,k}}}})})})(SoundFont2);var SoundFont2Exports=SoundFont2.exports;const m=o=>Math.pow(2,o/1200),Q=o=>o/1e3,G=(o,e)=>{const a=Math.pow(10,e);return Math.round(o*a)/a};typeof AudioParam<"u"&&(AudioParam.prototype.dahdsr=function(o,e,a,l,u,f,d,p,g){u=Math.max(G(u,4),.001),d=Math.max(G(d,4),.001),g=G(g,4),e=Math.max(e,.001);let b=o;return this.setValueAtTime(e,b),this.setValueAtTime(e,b+=l),this.exponentialRampToValueAtTime(a,b+=u),this.setValueAtTime(a,b+=f),this.exponentialRampToValueAtTime(Math.max(p*a,.001),b+=d),(O,A)=>{this.cancelAndHoldAtTime(O);const k=Math.max(A??e,.001);this.exponentialRampToValueAtTime(k,O+g)}});const T={0:"startAddrOffset",1:"endAddrOffset",2:"startloopAddrsOffset",3:"endloopAddrsOffset",4:"startAddrsCoarseOffset",5:"modLfoToPitch",6:"vibLfoToPitch",7:"modEnvToPitch",8:"initialFilterFc",9:"initialFilterQ",10:"modLfoToFilterFc",11:"modEnvToFilterFc",12:"endAddrsCoarseOffset",13:"modLfoToVolume",14:"unused1",15:"chorusEffectsSend",16:"reverbEffectsSend",17:"pan",18:"unused2",19:"unused3",20:"unused4",21:"delayModLFO",22:"freqModLFO",23:"delayVibLFO",24:"freqVibLFO",25:"delayModEnv",26:"attackModEnv",27:"holdModEnv",28:"decayModEnv",29:"sustainModEnv",30:"releaseModEnv",31:"keyNumToModEnvHold",32:"keyNumToModEnvDecay",33:"delayVolEnv",34:"attackVolEnv",35:"holdVolEnv",36:"decayVolEnv",37:"sustainVolEnv",38:"releaseVolEnv",39:"keyNumToVolEnvHold",40:"keyNumToVolEnvDecay",41:"instrument",42:"reserved1",43:"keyRange",44:"velRange",45:"startloopAddrsCoarseOffset",46:"keyNum",47:"velocity",48:"initialAttenuation",49:"reserved2",50:"endloopAddrsCoarseOffset",51:"coarseTune",52:"fineTune",53:"sampleID",54:"sampleModes",55:"reserved3",56:"scaleTuning",57:"exclusiveClass",58:"overridingRootKey",59:"unused5",60:"endOper"};Object.fromEntries(Object.entries(SoundFont2Exports.DEFAULT_GENERATOR_VALUES).map(([o,e])=>[T[o],e]));const D=(o,e,a,l,u)=>{var f,d,p,g,b,O,A;const k=SoundFont2Exports.DEFAULT_GENERATOR_VALUES[o];if(typeof k!="number")throw new Error(`no default value found for generator with index ${o}`);const M=e.generators[o],B=(d=(f=a.globalZone)==null?void 0:f.generators)==null?void 0:d[o],N=(p=l?.generators)==null?void 0:p[o],L=(b=(g=u.globalZone)==null?void 0:g.generators)==null?void 0:b[o],V=M&&"value"in M?M.value:void 0,se=B&&"value"in B?B.value:void 0,pe=N&&"value"in N?N.value:void 0,re=L&&"value"in L?L.value:void 0,z=(O=V??se)!=null?O:k,oe=(A=pe??re)!=null?A:0;return z+oe},J=o=>SoundFont2Exports.DEFAULT_GENERATOR_VALUES[o]!==void 0,W=(o,e,a)=>{var l,u,f,d;return Object.fromEntries(Array.from(new Set([Object.keys((u=(l=a.globalZone)==null?void 0:l.generators)!=null?u:{}),Object.keys(e.generators),Object.keys((d=(f=e.instrument.globalZone)==null?void 0:f.generators)!=null?d:{}),Object.keys(o.generators)].flat())).filter(J).map(p=>[T[p],D(parseInt(p),o,e.instrument,e,a)]))};async function ae(o){const e=await fetch(o).then(l=>l.arrayBuffer()),a=new Uint8Array(e);return new SoundFont2Exports.SoundFont2(a)}function X(o,e,a){let{time:l=o.currentTime}=a;const{midi:u,start:f,velocity:d=.3,startLoop:p,endLoop:g,sampleRate:b,originalPitch:O,pitchCorrection:A,type:k,sampleModes:M=0,overridingRootKey:B,fineTune:N=0,startloopAddrsOffset:L=0,startloopAddrsCoarseOffset:V=0,endloopAddrsOffset:se=0,endloopAddrsCoarseOffset:pe=0,delayVolEnv:re=-12e3,attackVolEnv:z=-12e3,holdVolEnv:oe=-12e3,decayVolEnv:de=-12e3,sustainVolEnv:_e=0,releaseVolEnv:Ce=-12e3,pan:be=0,...xe}=a,Oe=100*(B!==void 0&&B!==-1?B:O)+A-N,ke=u*100-Oe,Ie=1*Math.pow(2,ke/1200);e.playbackRate.value=Ie;const Fe=p+L+V*32768,Be=g+se+pe*32768;Be>Fe&&M===1?(e.loopStart=Fe/b,e.loopEnd=Be/b,e.loop=!0):M===3&&console.warn("unimplemented sampleMode 3 (play till end on note off)"),Object.keys(xe).filter(Je=>!["name","instrument","keyRange","sampleID","end"].includes(Je)).length;const Ge=o.createGain(),Ne=[l,0,d,m(re),m(z),m(oe),m(de),_e>=960?0:1-Q(_e),m(Ce)],Ve=Ge.gain.dahdsr(...Ne),Ze=o.createStereoPanner();return Ze.pan.value=be/1e3,Ge.connect(Ze),e.connect(Ge),Ze.connect(o.destination),e.start(l),(Je=o.currentTime)=>{e.stop(Je+m(Ce)),Ve(Je)}}function Y(o,e,a={}){const{header:l,data:u}=e,f=new Float32Array(u.length);for(let g=0;g<u.length;g++)f[g]=u[g]/32768;const d=o.createBuffer(1,f.length,l.sampleRate);d.getChannelData(0).set(f);const p=o.createBufferSource();return p.buffer=d,a={...l,...a},X(o,p,a)}const C=(o,e)=>!o.keyRange||o.keyRange.lo<=e&&e<=o.keyRange.hi,x=(o,e)=>o.zones.filter(a=>C(a,e)&&a.instrument).map(a=>a.instrument.zones.filter(l=>C(l,e)).map(l=>{const u=W(l,a,o);return{...l,mergedGenerators:u}})).flat(),ce=(o,e,a,l=o.currentTime)=>{const u=x(e,a).map(f=>Y(o,f.sample,{...f.mergedGenerators,midi:a,time:l}));return(f=o.currentTime)=>{u.forEach(d=>d(f))}};Pattern$1.prototype.soundfont=function(o,e=0){return this.onTrigger((a,l,u)=>{const f=getAudioContext(),d=getPlayableNoteValue(l),p=o.presets[e%o.presets.length],g=f.currentTime+a-u,b=[f,p,noteToMidi$1(d),g];ce(...b)(g+l.duration)})};const soundfontCache=new Map;function loadSoundfont(o){if(soundfontCache.get(o))return soundfontCache.get(o);const e=ae(o);return soundfontCache.set(o,e),e}const index$1=Object.freeze(Object.defineProperty({__proto__:null,getFontBufferSource,loadSoundfont,registerSoundfonts,soundfontList:list,startPresetNote:ce},Symbol.toStringTag,{value:"Module"}));class EventEmitter{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,a,l={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof a!="function")throw new TypeError("The callback must be a function.");const u=new Listener(e,this,a,l);return this.eventMap[e]||(this.eventMap[e]=[]),l.prepend?this.eventMap[e].unshift(u):this.eventMap[e].push(u),u}addOneTimeListener(e,a,l={}){l.remaining=1,this.addListener(e,a,l)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,a){return e===void 0?this.eventMap[EventEmitter.ANY_EVENT]&&this.eventMap[EventEmitter.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,l])=>l.length>0):this.eventMap[e]&&this.eventMap[e].length>0?a instanceof Listener?this.eventMap[e].filter(u=>u===a).length>0:typeof a=="function"?this.eventMap[e].filter(u=>u.callback===a).length>0:a==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(a=>{a.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(a=>{a.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...a){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let l=[],u=this.eventMap[EventEmitter.ANY_EVENT]||[];return this.eventMap[e]&&(u=u.concat(this.eventMap[e])),u.forEach(f=>{if(f.suspended)return;let d=[...a];Array.isArray(f.arguments)&&(d=d.concat(f.arguments)),f.remaining>0&&(l.push(f.callback.apply(f.context,d)),f.count++),--f.remaining<1&&f.remove()}),l}removeListener(e,a,l={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let u=this.eventMap[e].filter(f=>a&&f.callback!==a||l.remaining&&l.remaining!==f.remaining||l.context&&l.context!==f.context);u.length?this.eventMap[e]=u:delete this.eventMap[e]}async waitFor(e,a={}){return a.duration=parseInt(a.duration),(isNaN(a.duration)||a.duration<=0)&&(a.duration=1/0),new Promise((l,u)=>{let f,d=this.addListener(e,()=>{clearTimeout(f),l()},{remaining:1});a.duration!==1/0&&(f=setTimeout(()=>{d.remove(),u("The duration expired before the event was emitted.")},a.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Listener{constructor(e,a,l,u={}){if(typeof e!="string"&&!(e instanceof String)&&e!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!a)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof l!="function")throw new TypeError("The 'callback' must be a function.");u.arguments!==void 0&&!Array.isArray(u.arguments)&&(u.arguments=[u.arguments]),u=Object.assign({context:a,remaining:1/0,arguments:void 0,duration:1/0},u),u.duration!==1/0&&setTimeout(()=>this.remove(),u.duration),this.arguments=u.arguments,this.callback=l,this.context=u.context,this.count=0,this.event=e,this.remaining=parseInt(u.remaining)>=1?parseInt(u.remaining):1/0,this.suspended=!1,this.target=a}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Enumerations{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),Enumerations.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),Enumerations.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),Enumerations.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),Enumerations.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Note{constructor(e,a={}){this.duration=wm.defaults.note.duration,this.attack=wm.defaults.note.attack,this.release=wm.defaults.note.release,a.duration!=null&&(this.duration=a.duration),a.attack!=null&&(this.attack=a.attack),a.rawAttack!=null&&(this.attack=Utilities.from7bitToFloat(a.rawAttack)),a.release!=null&&(this.release=a.release),a.rawRelease!=null&&(this.release=Utilities.from7bitToFloat(a.rawRelease)),Number.isInteger(e)?this.identifier=Utilities.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const a=Utilities.getNoteDetails(e);if(wm.validation&&!e)throw new Error("Invalid note identifier");this._name=a.name,this._accidental=a.accidental,this._octave=a.octave}get name(){return this._name}set name(e){if(wm.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(wm.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(wm.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(wm.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(wm.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(wm.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return Utilities.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=Utilities.from7bitToFloat(e)}get rawRelease(){return Utilities.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=Utilities.from7bitToFloat(e)}get number(){return Utilities.toNoteNumber(this.identifier)}getOffsetNumber(e=0,a=0){return wm.validation&&(e=parseInt(e)||0,a=parseInt(a)||0),Math.min(Math.max(this.number+e*12+a,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Utilities{static toNoteNumber(e,a=0){if(a=a==null?0:parseInt(a),isNaN(a))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const l=this.getNoteDetails(e);if(!l)throw new TypeError("Invalid note identifier");const u={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let f=(l.octave+1+a)*12;if(f+=u[l.name],l.accidental&&(l.accidental.startsWith("b")?f-=l.accidental.length:f+=l.accidental.length),f<0||f>127)throw new RangeError("Invalid octaveOffset value");return f}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const a=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!a)throw new TypeError("Invalid note identifier");const l=a[1].toUpperCase(),u=parseInt(a[3]);let f=a[2].toLowerCase();return f=f===""?void 0:f,{accidental:f,identifier:l+(f||"")+u,name:l,octave:u}}static sanitizeChannels(e){let a;if(wm.validation){if(e==="all")a=["all"];else if(e==="none")return[]}return Array.isArray(e)?a=e:a=[e],a.indexOf("all")>-1&&(a=Enumerations.MIDI_CHANNEL_NUMBERS),a.map(function(l){return parseInt(l)}).filter(function(l){return l>=1&&l<=16})}static toTimestamp(e){let a=!1;const l=parseFloat(e);return isNaN(l)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?l>=0&&(a=wm.time+l):l>=0&&(a=l),a)}static guessNoteNumber(e,a){a=parseInt(a)||0;let l=!1;if(Number.isInteger(e)&&e>=0&&e<=127)l=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)l=parseInt(e);else if(typeof e=="string"||e instanceof String)try{l=this.toNoteNumber(e.trim(),a)}catch{return!1}return l}static toNoteIdentifier(e,a){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(a=a==null?0:parseInt(a),isNaN(a))throw new RangeError("Invalid octaveOffset value");const l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],u=Math.floor(e/12-1)+a;return l[e%12]+u.toString()}static buildNote(e,a={}){if(a.octaveOffset=parseInt(a.octaveOffset)||0,e instanceof Note)return e;let l=this.guessNoteNumber(e,a.octaveOffset);if(l===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return a.octaveOffset=void 0,new Note(l,a)}static buildNoteArray(e,a={}){let l=[];return Array.isArray(e)||(e=[e]),e.forEach(u=>{l.push(this.buildNote(u,a))}),l}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,a=0){wm.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),a=Math.min(Math.max(parseInt(a)||0,0),127));const l=((e<<7)+a)/16383;return Math.min(Math.max(l,0),1)}static fromFloatToMsbLsb(e){wm.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const a=Math.round(e*16383);return{msb:a>>7,lsb:a&127}}static offsetNumber(e,a=0,l=0){if(wm.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");a=parseInt(a)||0,l=parseInt(l)||0}return Math.min(Math.max(e+a*12+l,0),127)}static getPropertyByValue(e,a){return Object.keys(e).find(l=>e[l]===a)}static getCcNameByNumber(e){if(!(wm.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return Enumerations.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let a=Enumerations.CONTROL_CHANGE_MESSAGES.find(l=>l.name===e);return a?a.number:Enumerations.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let a in Enumerations.CHANNEL_MODE_MESSAGES)if(Enumerations.CHANNEL_MODE_MESSAGES.hasOwnProperty(a)&&e===Enumerations.CHANNEL_MODE_MESSAGES[a])return a;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class OutputChannel extends EventEmitter{constructor(e,a){super(),this._output=e,this._number=a,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,a={time:0}){return this.output.send(e,a),this}sendKeyAftertouch(e,a,l={}){if(wm.validation){if(l.useRawValue&&(l.rawValue=l.useRawValue),isNaN(parseFloat(a)))throw new RangeError("Invalid key aftertouch value.");if(l.rawValue){if(!(a>=0&&a<=127&&Number.isInteger(a)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(a>=0&&a<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}l.rawValue||(a=Utilities.fromFloatTo7Bit(a));const u=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),Utilities.buildNoteArray(e).forEach(f=>{this.send([(Enumerations.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),f.getOffsetNumber(u),a],{time:Utilities.toTimestamp(l.time)})}),this}sendControlChange(e,a,l={}){if(typeof e=="string"&&(e=Utilities.getCcNumberByName(e)),Array.isArray(a)||(a=[a]),wm.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(a=a.map(u=>{const f=Math.min(Math.max(parseInt(u),0),127);if(isNaN(f))throw new TypeError("Values must be integers between 0 and 127");return f}),a.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return a.forEach((u,f)=>{this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+f*32,a[f]],{time:Utilities.toTimestamp(l.time)})}),this}_selectNonRegisteredParameter(e,a={}){return this.sendControlChange(99,e[0],a),this.sendControlChange(98,e[1],a),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,a={}){return this.sendControlChange(101,e[0],a),this.sendControlChange(100,e[1],a),this}_setCurrentParameter(e,a={}){return e=[].concat(e),this.sendControlChange(6,e[0],a),e.length<2?this:(this.sendControlChange(38,e[1],a),this)}sendRpnDecrement(e,a={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let l=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(u=>{Enumerations.REGISTERED_PARAMETERS[u][0]===e[0]&&Enumerations.REGISTERED_PARAMETERS[u][1]===e[1]&&(l=!0)}),!l)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,a),this.sendControlChange(97,0,a),this._deselectRegisteredParameter(a),this}sendRpnIncrement(e,a={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let l=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(u=>{Enumerations.REGISTERED_PARAMETERS[u][0]===e[0]&&Enumerations.REGISTERED_PARAMETERS[u][1]===e[1]&&(l=!0)}),!l)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,a),this.sendControlChange(96,0,a),this._deselectRegisteredParameter(a),this}playNote(e,a={}){this.sendNoteOn(e,a);const l=Array.isArray(e)?e:[e];for(let u of l)if(parseInt(u.duration)>0){const f={time:(Utilities.toTimestamp(a.time)||wm.time)+parseInt(u.duration),release:u.release,rawRelease:u.rawRelease};this.sendNoteOff(u,f)}else if(parseInt(a.duration)>0){const f={time:(Utilities.toTimestamp(a.time)||wm.time)+parseInt(a.duration),release:a.release,rawRelease:a.rawRelease};this.sendNoteOff(u,f)}return this}sendNoteOff(e,a={}){if(wm.validation){if(a.rawRelease!=null&&!(a.rawRelease>=0&&a.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(a.release!=null&&!(a.release>=0&&a.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");a.rawVelocity&&(a.rawRelease=a.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),a.velocity&&(a.release=a.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let l=64;a.rawRelease!=null?l=a.rawRelease:isNaN(a.release)||(l=Math.round(a.release*127));const u=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(e,{rawRelease:parseInt(l)}).forEach(f=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),f.getOffsetNumber(u),f.rawRelease],{time:Utilities.toTimestamp(a.time)})}),this}stopNote(e,a={}){return this.sendNoteOff(e,a)}sendNoteOn(e,a={}){if(wm.validation){if(a.rawAttack!=null&&!(a.rawAttack>=0&&a.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(a.attack!=null&&!(a.attack>=0&&a.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");a.rawVelocity&&(a.rawAttack=a.velocity,a.rawRelease=a.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),a.velocity&&(a.attack=a.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let l=64;a.rawAttack!=null?l=a.rawAttack:isNaN(a.attack)||(l=Math.round(a.attack*127));const u=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(e,{rawAttack:l}).forEach(f=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),f.getOffsetNumber(u),f.rawAttack],{time:Utilities.toTimestamp(a.time)})}),this}sendChannelMode(e,a=0,l={}){if(typeof e=="string"&&(e=Enumerations.CHANNEL_MODE_MESSAGES[e]),wm.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(a))||a<0||a>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,a],{time:Utilities.toTimestamp(l.time)}),this}sendOmniMode(e,a={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,a):this.sendChannelMode("omnimodeoff",0,a),this}sendChannelAftertouch(e,a={}){if(wm.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(a.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return a.rawValue||(e=Utilities.fromFloatTo7Bit(e)),this.send([(Enumerations.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:Utilities.toTimestamp(a.time)}),this}sendMasterTuning(e,a={}){if(e=parseFloat(e)||0,wm.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let l=Math.floor(e)+64,u=e-Math.floor(e);u=Math.round((u+1)/2*16383);let f=u>>7&127,d=u&127;return this.sendRpnValue("channelcoarsetuning",l,a),this.sendRpnValue("channelfinetuning",[f,d],a),this}sendModulationRange(e,a,l={}){if(wm.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(a!=null&&(!Number.isInteger(a)||!(a>=0&&a<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return a>=0&&a<=127||(a=0),this.sendRpnValue("modulationrange",[e,a],l),this}sendNrpnValue(e,a,l={}){if(a=[].concat(a),wm.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");a.forEach(u=>{if(!(u>=0&&u<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,l),this._setCurrentParameter(a,l),this._deselectNonRegisteredParameter(l),this}sendPitchBend(e,a={}){if(wm.validation)if(a.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(a.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let l=0,u=0;if(a.rawValue&&Array.isArray(e))l=e[0],u=e[1];else if(a.rawValue&&!Array.isArray(e))l=e;else{const f=Utilities.fromFloatToMsbLsb((e+1)/2);l=f.msb,u=f.lsb}return this.send([(Enumerations.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),u,l],{time:Utilities.toTimestamp(a.time)}),this}sendPitchBendRange(e,a,l={}){if(wm.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(a)||!(a>=0&&a<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,a],l),this}sendProgramChange(e,a={}){if(e=parseInt(e)||0,wm.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(Enumerations.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:Utilities.toTimestamp(a.time)}),this}sendRpnValue(e,a,l={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(a).forEach(u=>{if(!(u>=0&&u<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,l),this._setCurrentParameter(a,l),this._deselectRegisteredParameter(l),this}sendTuningBank(e,a={}){if(wm.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,a),this}sendTuningProgram(e,a={}){if(wm.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,a),this}sendLocalControl(e,a={}){return e?this.sendChannelMode("localcontrol",127,a):this.sendChannelMode("localcontrol",0,a)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,a={}){return e==="mono"?this.sendChannelMode("monomodeon",0,a):this.sendChannelMode("polymodeon",0,a)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Output extends EventEmitter{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let a=1;a<=16;a++)this.channels[a]=new OutputChannel(this,a);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let a={timestamp:wm.time};e.port.connection==="open"?(a.type="opened",a.target=this,a.port=a.target,this.emit("opened",a)):e.port.connection==="closed"&&e.port.state==="connected"?(a.type="closed",a.target=this,a.port=a.target,this.emit("closed",a)):e.port.connection==="closed"&&e.port.state==="disconnected"?(a.type="disconnected",a.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",a)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,a={time:0},l=0){if(e instanceof Message&&(e=Utilities.isNode?e.data:e.rawData),e instanceof Uint8Array&&Utilities.isNode&&(e=Array.from(e)),wm.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(a)&&(e=e.concat(a)),a=isNaN(l)?{time:0}:{time:l}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(u=>{if(u=parseInt(u),!(u>=0&&u<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),a||(a={time:0})}return this._midiOutput.send(e,Utilities.toTimestamp(a.time)),this}sendSysex(e,a=[],l={}){if(e=[].concat(e),a instanceof Uint8Array){const u=new Uint8Array(1+e.length+a.length+1);u[0]=Enumerations.SYSTEM_MESSAGES.sysex,u.set(Uint8Array.from(e),1),u.set(a,1+e.length),u[u.length-1]=Enumerations.SYSTEM_MESSAGES.sysexend,this.send(u,{time:l.time})}else{const u=e.concat(a,Enumerations.SYSTEM_MESSAGES.sysexend);this.send([Enumerations.SYSTEM_MESSAGES.sysex].concat(u),{time:l.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():wm.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,a={}){if(wm.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([Enumerations.SYSTEM_MESSAGES.timecode,e],{time:a.time}),this}sendSongPosition(e=0,a={}){e=Math.floor(e)||0;var l=e>>7&127,u=e&127;return this.send([Enumerations.SYSTEM_MESSAGES.songposition,l,u],{time:a.time}),this}sendSongSelect(e=0,a={}){if(wm.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([Enumerations.SYSTEM_MESSAGES.songselect,e],{time:a.time}),this}sendTuneRequest(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return wm.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,a,l={}){return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendKeyAftertouch(e,a,l)}),this}sendControlChange(e,a,l={},u={}){if(wm.validation&&(Array.isArray(l)||Number.isInteger(l)||l==="all")){const f=l;l=u,l.channels=f,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(f=>{this.channels[f].sendControlChange(e,a,l)}),this}sendPitchBendRange(e=0,a=0,l={}){return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendPitchBendRange(e,a,l)}),this}setPitchBendRange(e=0,a=0,l="all",u={}){return wm.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),u.channels=l,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,a,u)}sendRpnValue(e,a,l={}){return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendRpnValue(e,a,l)}),this}setRegisteredParameter(e,a=[],l="all",u={}){return wm.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),u.channels=l,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,a,u)}sendChannelAftertouch(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendChannelAftertouch(e,a)}),this}sendPitchBend(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendPitchBend(e,a)}),this}sendProgramChange(e=0,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendProgramChange(e,a)}),this}sendModulationRange(e,a,l={}){return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendModulationRange(e,a,l)}),this}setModulationRange(e=0,a=0,l="all",u={}){return wm.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),u.channels=l,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,a,u)}sendMasterTuning(e,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendMasterTuning(e,a)}),this}setMasterTuning(e,a={},l={}){return wm.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),l.channels=a,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,l)}sendTuningProgram(e,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendTuningProgram(e,a)}),this}setTuningProgram(e,a="all",l={}){return wm.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),l.channels=a,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,l)}sendTuningBank(e=0,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendTuningBank(e,a)}),this}setTuningBank(e,a="all",l={}){return wm.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),l.channels=a,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,l)}sendChannelMode(e,a=0,l={},u={}){if(wm.validation&&(Array.isArray(l)||Number.isInteger(l)||l==="all")){const f=l;l=u,l.channels=f,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(f=>{this.channels[f].sendChannelMode(e,a,l)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(a=>{this.channels[a].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(a=>{this.channels[a].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},a={}){if(wm.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const l=e;e=a,e.channels=l,e.channels==="all"&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(l=>{this.channels[l].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendPolyphonicMode(e,a)}),this}sendLocalControl(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendLocalControl(e,a)}),this}sendOmniMode(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendOmniMode(e,a)}),this}sendNrpnValue(e,a,l={}){return l.channels==null&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendNrpnValue(e,a,l)}),this}setNonRegisteredParameter(e,a=[],l="all",u={}){return wm.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),u.channels=l,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,a,u)}sendRpnIncrement(e,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendRpnIncrement(e,a)}),this}incrementRegisteredParameter(e,a="all",l={}){return wm.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),l.channels=a,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,l)}sendRpnDecrement(e,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendRpnDecrement(e,a)}),this}decrementRegisteredParameter(e,a="all",l={}){return wm.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),l.channels=a,l.channels==="all"&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,l)}sendNoteOff(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendNoteOff(e,a)}),this}stopNote(e,a){return this.sendNoteOff(e,a)}playNote(e,a={},l={}){if(wm.validation&&(a.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),a.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].playNote(e,a)}),this}sendNoteOn(e,a={},l={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=l,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendNoteOn(e,a)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Forwarder{constructor(e=[],a={}){this.destinations=[],this.types=[...Object.keys(Enumerations.SYSTEM_MESSAGES),...Object.keys(Enumerations.CHANNEL_MESSAGES)],this.channels=Enumerations.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),a.types&&!Array.isArray(a.types)&&(a.types=[a.types]),a.channels&&!Array.isArray(a.channels)&&(a.channels=[a.channels]),wm.validation&&(e.forEach(l=>{if(!(l instanceof Output))throw new TypeError("Destinations must be of type 'Output'.")}),a.types!==void 0&&a.types.forEach(l=>{if(!Enumerations.SYSTEM_MESSAGES.hasOwnProperty(l)&&!Enumerations.CHANNEL_MESSAGES.hasOwnProperty(l))throw new TypeError("Type must be a valid message type.")}),a.channels!==void 0&&a.channels.forEach(l=>{if(!Enumerations.MIDI_CHANNEL_NUMBERS.includes(l))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,a.types&&(this.types=a.types),a.channels&&(this.channels=a.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(a=>{wm.validation&&!(a instanceof Output)||a.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class InputChannel extends EventEmitter{constructor(e,a){super(),this._input=e,this._number=a,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const a=Object.assign({},e);a.port=this.input,a.target=this,a.type="midimessage",this.emit(a.type,a),this._parseEventForStandardMessages(a)}_parseEventForStandardMessages(e){const a=Object.assign({},e);a.type=a.message.type||"unknownmessage";const l=e.message.dataBytes[0],u=e.message.dataBytes[1];if(a.type==="noteoff"||a.type==="noteon"&&u===0)this.notesState[l]=!1,a.type="noteoff",a.note=new Note(Utilities.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:0,rawRelease:u}),a.value=Utilities.from7bitToFloat(u),a.rawValue=u,a.velocity=a.note.release,a.rawVelocity=a.note.rawRelease;else if(a.type==="noteon")this.notesState[l]=!0,a.note=new Note(Utilities.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:u}),a.value=Utilities.from7bitToFloat(u),a.rawValue=u,a.velocity=a.note.attack,a.rawVelocity=a.note.rawAttack;else if(a.type==="keyaftertouch")a.note=new Note(Utilities.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset)),a.value=Utilities.from7bitToFloat(u),a.rawValue=u,a.identifier=a.note.identifier,a.key=a.note.number,a.rawKey=l;else if(a.type==="controlchange"){a.controller={number:l,name:Enumerations.CONTROL_CHANGE_MESSAGES[l].name,description:Enumerations.CONTROL_CHANGE_MESSAGES[l].description,position:Enumerations.CONTROL_CHANGE_MESSAGES[l].position},a.subtype=a.controller.name||"controller"+l,a.value=Utilities.from7bitToFloat(u),a.rawValue=u;const f=Object.assign({},a);f.type=`${a.type}-controller${l}`,delete f.subtype,this.emit(f.type,f);const d=Object.assign({},a);d.type=`${a.type}-`+Enumerations.CONTROL_CHANGE_MESSAGES[l].name,delete d.subtype,d.type.indexOf("controller")!==0&&this.emit(d.type,d),a.message.dataBytes[0]>=120&&this._parseChannelModeMessage(a),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(a.message.dataBytes[0])&&this._parseEventForParameterNumber(a)}else a.type==="programchange"?(a.value=l,a.rawValue=a.value):a.type==="channelaftertouch"?(a.value=Utilities.from7bitToFloat(l),a.rawValue=l):a.type==="pitchbend"?(a.value=((u<<7)+l-8192)/8192,a.rawValue=(u<<7)+l):a.type="unknownmessage";this.emit(a.type,a)}_parseChannelModeMessage(e){const a=Object.assign({},e);a.type=a.controller.name,a.type==="localcontrol"&&(a.value=a.message.data[2]===127,a.rawValue=a.message.data[2]),a.type==="omnimodeon"?(a.type="omnimode",a.value=!0,a.rawValue=a.message.data[2]):a.type==="omnimodeoff"&&(a.type="omnimode",a.value=!1,a.rawValue=a.message.data[2]),a.type==="monomodeon"?(a.type="monomode",a.value=!0,a.rawValue=a.message.data[2]):a.type==="polymodeon"&&(a.type="monomode",a.value=!1,a.rawValue=a.message.data[2]),this.emit(a.type,a)}_parseEventForParameterNumber(e){const a=e.message.dataBytes[0],l=e.message.dataBytes[1];a===99||a===101?(this._nrpnBuffer=[],this._rpnBuffer=[],a===99?this._nrpnBuffer=[e.message]:l!==127&&(this._rpnBuffer=[e.message])):a===98||a===100?a===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&l!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(a===6||a===38||a===96||a===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,a,l,u){e=e==="nrpn"?"nrpn":"rpn";const f={target:u.target,timestamp:u.timestamp,message:u.message,parameterMsb:a,parameterLsb:l,value:Utilities.from7bitToFloat(u.message.dataBytes[1]),rawValue:u.message.dataBytes[1]};e==="rpn"?f.parameter=Object.keys(Enumerations.REGISTERED_PARAMETERS).find(g=>Enumerations.REGISTERED_PARAMETERS[g][0]===a&&Enumerations.REGISTERED_PARAMETERS[g][1]===l):f.parameter=(a<<7)+l;const d=Enumerations.CONTROL_CHANGE_MESSAGES[u.message.dataBytes[0]].name;f.type=`${e}-${d}`,this.emit(f.type,f);const p=Object.assign({},f);p.type==="nrpn-dataincrement"?p.type="nrpn-databuttonincrement":p.type==="nrpn-datadecrement"?p.type="nrpn-databuttondecrement":p.type==="rpn-dataincrement"?p.type="rpn-databuttonincrement":p.type==="rpn-datadecrement"&&(p.type="rpn-databuttondecrement"),this.emit(p.type,p),f.type=e,f.subtype=d,this.emit(f.type,f)}getChannelModeByNumber(e){return wm.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),Utilities.getChannelModeByNumber(e)}getCcNameByNumber(e){if(wm.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return Utilities.getCcNameByNumber(e)}getNoteState(e){e instanceof Note&&(e=e.identifier);const a=Utilities.guessNoteNumber(e,wm.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[a]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Message{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=Utilities.getPropertyByValue(Enumerations.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=Utilities.getPropertyByValue(Enumerations.SYSTEM_MESSAGES,this.command)),this.statusByte===Enumerations.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Input extends EventEmitter{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let a=1;a<=16;a++)this.channels[a]=new InputChannel(this,a);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let a={timestamp:wm.time,target:this,port:this};e.port.connection==="open"?(a.type="opened",this.emit("opened",a)):e.port.connection==="closed"&&e.port.state==="connected"?(a.type="closed",this.emit("closed",a)):e.port.connection==="closed"&&e.port.state==="disconnected"?(a.type="disconnected",a.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",a)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const a=new Message(e.data),l={port:this,target:this,message:a,timestamp:e.timeStamp,type:"midimessage",data:a.data,rawData:a.data,statusByte:a.data[0],dataBytes:a.dataBytes};this.emit("midimessage",l),a.isSystemMessage?this._parseEvent(l):a.isChannelMessage&&this.channels[a.channel]._processMidiMessageEvent(l),this._forwarders.forEach(u=>u.forward(a))}_parseEvent(e){const a=Object.assign({},e);a.type=a.message.type||"unknownmidimessage",a.type==="songselect"&&(a.song=e.data[1]+1,a.value=e.data[1],a.rawValue=a.value),this.emit(a.type,a)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){wm.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,a,l={}){if(wm.validation&&typeof l=="function"){let u=a!=null?[].concat(a):void 0;a=l,l={channels:u}}if(Enumerations.CHANNEL_EVENTS.includes(e)){l.channels===void 0&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS);let u=[];return Utilities.sanitizeChannels(l.channels).forEach(f=>{u.push(this.channels[f].addListener(e,a,l))}),u}else return super.addListener(e,a,l)}addOneTimeListener(e,a,l={}){return l.remaining=1,this.addListener(e,a,l)}on(e,a,l,u){return this.addListener(e,a,l,u)}hasListener(e,a,l={}){if(wm.validation&&typeof l=="function"){let u=[].concat(a);a=l,l={channels:u}}return Enumerations.CHANNEL_EVENTS.includes(e)?(l.channels===void 0&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(l.channels).every(u=>this.channels[u].hasListener(e,a))):super.hasListener(e,a)}removeListener(e,a,l={}){if(wm.validation&&typeof l=="function"){let u=[].concat(a);a=l,l={channels:u}}if(l.channels===void 0&&(l.channels=Enumerations.MIDI_CHANNEL_NUMBERS),e==null)return Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u]&&this.channels[u].removeListener()}),super.removeListener();Enumerations.CHANNEL_EVENTS.includes(e)?Utilities.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].removeListener(e,a,l)}):super.removeListener(e,a,l)}addForwarder(e,a={}){let l;return e instanceof Forwarder?l=e:l=new Forwarder(e,a),this._forwarders.push(l),l}removeForwarder(e){this._forwarders=this._forwarders.filter(a=>a!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return wm.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */let WebMidi$1=class extends EventEmitter{constructor(){super(),this.defaults={note:{attack:Utilities.from7bitToFloat(64),release:Utilities.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},a=!1){if(Utilities.isNode){try{window.navigator}catch{let p=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,p)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:a}),a&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const l={timestamp:this.time,target:this,type:"error",error:void 0},u={timestamp:this.time,target:this,type:"midiaccessgranted"},f={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(d){return l.error=d,this.emit("error",l),typeof e.callback=="function"&&e.callback(d),Promise.reject(d)}this.emit("midiaccessgranted",u),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(d){return l.error=d,this.emit("error",l),typeof e.callback=="function"&&e.callback(d),Promise.reject(d)}return this.emit("enabled",f),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,a={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(a.disconnected){for(let l=0;l<this._disconnectedInputs.length;l++)if(this._disconnectedInputs[l].id===e.toString())return this._disconnectedInputs[l]}else for(let l=0;l<this.inputs.length;l++)if(this.inputs[l].id===e.toString())return this.inputs[l]}getInputByName(e,a={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(a.disconnected){for(let l=0;l<this._disconnectedInputs.length;l++)if(~this._disconnectedInputs[l].name.indexOf(e))return this._disconnectedInputs[l]}else for(let l=0;l<this.inputs.length;l++)if(~this.inputs[l].name.indexOf(e))return this.inputs[l]}getOutputByName(e,a={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(a.disconnected){for(let l=0;l<this._disconnectedOutputs.length;l++)if(~this._disconnectedOutputs[l].name.indexOf(e))return this._disconnectedOutputs[l]}else for(let l=0;l<this.outputs.length;l++)if(~this.outputs[l].name.indexOf(e))return this.outputs[l]}getOutputById(e,a={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(a.disconnected){for(let l=0;l<this._disconnectedOutputs.length;l++)if(this._disconnectedOutputs[l].id===e.toString())return this._disconnectedOutputs[l]}else for(let l=0;l<this.outputs.length;l++)if(this.outputs[l].id===e.toString())return this.outputs[l]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),Utilities.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?Utilities.getNoteDetails(Utilities.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),Utilities.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),Utilities.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),Utilities.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,a={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),Utilities.buildNoteArray(e,a)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),Utilities.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(a=>e.push(a.destroy())),this.outputs.forEach(a=>e.push(a.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let a={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?a.port=this.getOutputById(e.port.id):e.port.type==="input"&&(a.port=this.getInputById(e.port.id)),this.emit(e.port.state,a);const l=Object.assign({},a);l.type="portschanged",this.emit(l.type,l)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?a.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(a.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,a);const l=Object.assign({},a);l.type="portschanged",this.emit(l.type,l)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let a=this._inputs.length-1;a>=0;a--){const l=this._inputs[a];Array.from(this.interface.inputs.values()).find(f=>f===l._midiInput)||(this._disconnectedInputs.push(l),this._inputs.splice(a,1))}let e=[];return this.interface.inputs.forEach(a=>{if(!this._inputs.find(l=>l._midiInput===a)){let l=this._disconnectedInputs.find(u=>u._midiInput===a);l||(l=new Input(a)),this._inputs.push(l),e.push(l.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let a=this._outputs.length-1;a>=0;a--){const l=this._outputs[a];Array.from(this.interface.outputs.values()).find(f=>f===l._midiOutput)||(this._disconnectedOutputs.push(l),this._outputs.splice(a,1))}let e=[];return this.interface.outputs.forEach(a=>{if(!this._outputs.find(l=>l._midiOutput===a)){let l=this._disconnectedOutputs.find(u=>u._midiOutput===a);l||(l=new Output(a)),this._outputs.push(l),e.push(l.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),Utilities.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),Utilities.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.8"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Enumerations.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),Enumerations.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),Enumerations.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),Enumerations.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),Enumerations.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};const wm=new WebMidi$1;wm.constructor=null;const _WebMidi=Object.freeze(Object.defineProperty({__proto__:null,Enumerations,Forwarder,Input,InputChannel,Message,Note,Output,OutputChannel,Utilities,WebMidi:wm},Symbol.toStringTag,{value:"Module"})),{WebMidi}=_WebMidi;function supportsMidi(){return typeof navigator.requestMIDIAccess=="function"}function getMidiDeviceNamesString(o){return o.map(e=>`'${e.name}'`).join(" | ")}function enableWebMidi(o={}){const{onReady:e,onConnected:a,onDisconnected:l,onEnabled:u}=o;if(!WebMidi.enabled){if(!supportsMidi())throw new Error("Your Browser does not support WebMIDI.");return WebMidi.addListener("connected",()=>{a?.(WebMidi)}),WebMidi.addListener("enabled",()=>{u?.(WebMidi)}),WebMidi.addListener("disconnected",f=>{l?.(WebMidi,f)}),new Promise((f,d)=>{if(WebMidi.enabled){f(WebMidi);return}WebMidi.enable(p=>{p&&d(p),e?.(WebMidi),f(WebMidi)})})}}function getDevice(o,e){if(!e.length)throw new Error("🔌 No MIDI devices found. Connect a device or enable IAC Driver.");if(typeof o=="number")return e[o];const a=f=>e.find(d=>d.name.includes(f));if(typeof o=="string")return a(o);const l=a("IAC"),u=l??e[0];if(!u)throw new Error(`🔌 MIDI device '${u||""}' not found. Use one of ${getMidiDeviceNamesString(e)}`);return l??e[0]}typeof window<"u"&&window.addEventListener("message",o=>{WebMidi?.enabled&&o.data==="strudel-stop"&&WebMidi.outputs.forEach(e=>e.sendStop())}),Pattern$1.prototype.midi=function(o){if(isPattern(o))throw new Error(`.midi does not accept Pattern input. Make sure to pass device name with single quotes. Example: .midi('${WebMidi.outputs?.[0]?.name||"IAC Driver Bus 1"}')`);return enableWebMidi({onEnabled:({outputs:e})=>{const a=getDevice(o,e),l=e.filter(u=>u.name!==a.name);logger$2(`Midi enabled! Using "${a.name}". ${l?.length?`Also available: ${getMidiDeviceNamesString(l)}`:""}`)},onDisconnected:({outputs:e})=>logger$2(`Midi device disconnected! Available: ${getMidiDeviceNamesString(e)}`)}),this.onTrigger((e,a,l,u,f)=>{if(!WebMidi.enabled){console.log("not enabled");return}const d=getDevice(o,WebMidi.outputs);a.ensureObjectValue();const p=34,g=`+${getEventOffsetMs(f,l)+p}`;let{note:b,nrpnn:O,nrpv:A,ccn:k,ccv:M,midichan:B=1,midicmd:N,gain:L=1,velocity:V=.9}=a.value;V=L*V;const se=a.duration.valueOf()/u*1e3-10;if(b!=null){const pe=typeof b=="number"?b:noteToMidi$1(b),re=new Note(pe,{attack:V,duration:se});d.playNote(re,B,{time:g})}if(M!==void 0&&k!==void 0){if(typeof M!="number"||M<0||M>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof k))throw new Error("expected ccn to be a number or a string");const pe=Math.round(M*127);d.sendControlChange(k,pe,B,{time:g})}a.whole.begin+0===0&&d.sendStart({time:g}),["clock","midiClock"].includes(N)?d.sendClock({time:g}):["start"].includes(N)?d.sendStart({time:g}):["stop"].includes(N)?d.sendStop({time:g}):["continue"].includes(N)&&d.sendContinue({time:g})})};let listeners={};const refs={};async function midin(o){if(isPattern(o))throw new Error(`.midi does not accept Pattern input. Make sure to pass device name with single quotes. Example: .midi('${WebMidi.outputs?.[0]?.name||"IAC Driver Bus 1"}')`);const e=await enableWebMidi(),a=getDevice(o,WebMidi.inputs);if(e){const u=WebMidi.inputs.filter(f=>f.name!==a.name);logger$2(`Midi enabled! Using "${a.name}". ${u?.length?`Also available: ${getMidiDeviceNamesString(u)}`:""}`),refs[o]={}}const l=u=>ref$1(()=>refs[o][u]||0);return listeners[o]&&a.removeListener("midimessage",listeners[o]),listeners[o]=u=>{const f=u.dataBytes[0],d=u.dataBytes[1];refs[o]&&(refs[o][f]=d/127)},a.addListener("midimessage",listeners[o]),l}const index=Object.freeze(Object.defineProperty({__proto__:null,WebMidi,enableWebMidi,midin},Symbol.toStringTag,{value:"Module"}));return exports.prebake=prebake,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),exports}({});
